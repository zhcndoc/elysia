import{C as e,D as t,O as n,T as r,_ as i,a,c as o,f as s,g as c,h as l,i as u,m as ee,n as d,o as f,p as te,r as p,s as m,t as h,v as g,w as _,x as v}from"./baseFor.HxEREnTh.js";import{g as y,h as b,p as ne}from"./src.C0f_AavH.js";import{F as re,f as ie,m as x,r as ae,s as S}from"./chunk-ABZYJK2D.CLCQEh99.js";import{o as oe}from"./math.BJMcaEHY.js";import{t as se}from"./dist.fUoWkJal.js";function ce(e){this._context=e}ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function le(e){return new ce(e)}var ue=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}this._x0=e,this._y0=t}};function de(e){return new ue(e,!0)}function fe(e){return new ue(e,!1)}function C(){}function w(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function T(e){this._context=e}T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:w(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:w(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pe(e){return new T(e)}function me(e){this._context=e}me.prototype={areaStart:C,areaEnd:C,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:w(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function he(e){return new me(e)}function ge(e){this._context=e}ge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:w(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _e(e){return new ge(e)}function ve(e,t){this._basis=new T(e),this._beta=t}ve.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*a),this._beta*t[s]+(1-this._beta)*(i+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var ye=(function e(t){function n(e){return t===1?new T(e):new ve(e,t)}return n.beta=function(t){return e(+t)},n})(.85);function E(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function D(e,t){this._context=e,this._k=(1-t)/6}D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:E(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:E(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var be=(function e(t){function n(e){return new D(e,t)}return n.tension=function(t){return e(+t)},n})(0);function O(e,t){this._context=e,this._k=(1-t)/6}O.prototype={areaStart:C,areaEnd:C,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:E(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var xe=(function e(t){function n(e){return new O(e,t)}return n.tension=function(t){return e(+t)},n})(0);function k(e,t){this._context=e,this._k=(1-t)/6}k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:E(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Se=(function e(t){function n(e){return new k(e,t)}return n.tension=function(t){return e(+t)},n})(0);function A(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>1e-12){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>1e-12){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function j(e,t){this._context=e,this._alpha=t}j.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:A(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var M=(function e(t){function n(e){return t?new j(e,t):new D(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function N(e,t){this._context=e,this._alpha=t}N.prototype={areaStart:C,areaEnd:C,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ce=(function e(t){function n(e){return t?new N(e,t):new O(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function we(e,t){this._context=e,this._alpha=t}we.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Te=(function e(t){function n(e){return t?new we(e,t):new k(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Ee(e){this._context=e}Ee.prototype={areaStart:C,areaEnd:C,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function De(e){return new Ee(e)}function Oe(e){return e<0?-1:1}function ke(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Oe(a)+Oe(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Ae(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function P(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function F(e){this._context=e}F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:P(this,this._t0,Ae(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,P(this,Ae(this,n=ke(this,e,t)),n);break;default:P(this,this._t0,n=ke(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function je(e){this._context=new Me(e)}(je.prototype=Object.create(F.prototype)).point=function(e,t){F.prototype.point.call(this,t,e)};function Me(e){this._context=e}Me.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function Ne(e){return new F(e)}function Pe(e){return new je(e)}function Fe(e){this._context=e}Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ie(e),i=Ie(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ie(e){var t,n=e.length-1,r,i=Array(n),a=Array(n),o=Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Le(e){return new Fe(e)}function I(e,t){this._context=e,this._t=t}I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}this._x=e,this._y=t}};function Re(e){return new I(e,.5)}function ze(e){return new I(e,0)}function Be(e){return new I(e,1)}var L=function(){try{var e=v(Object,`defineProperty`);return e({},``,{}),e}catch{}}();function Ve(e,t,n){t==`__proto__`&&L?L(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var R=Ve;function He(e,t,r){(r!==void 0&&!n(e[t],r)||r===void 0&&!(t in e))&&R(e,t,r)}var z=He,Ue=typeof exports==`object`&&exports&&!exports.nodeType&&exports,We=Ue&&typeof module==`object`&&module&&!module.nodeType&&module,Ge=We&&We.exports===Ue?t.Buffer:void 0,Ke=Ge?Ge.allocUnsafe:void 0;function qe(e,t){if(t)return e.slice();var n=e.length,r=Ke?Ke(n):new e.constructor(n);return e.copy(r),r}var Je=qe;function Ye(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var Xe=Ye;function Ze(e,t){var n=t?Xe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Qe=Ze;function $e(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}var et=$e,tt=Object.create,nt=function(){function e(){}return function(t){if(!_(t))return{};if(tt)return tt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),B=a(Object.getPrototypeOf,Object);function rt(e){return typeof e.constructor==`function`&&!f(e)?nt(B(e)):{}}var it=rt;function at(e){return l(e)&&u(e)}var ot=at,st=`[object Object]`,ct=Function.prototype,lt=Object.prototype,ut=ct.toString,dt=lt.hasOwnProperty,ft=ut.call(Object);function pt(e){if(!l(e)||r(e)!=st)return!1;var t=B(e);if(t===null)return!0;var n=dt.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&ut.call(n)==ft}var mt=pt;function ht(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}var V=ht,gt=Object.prototype.hasOwnProperty;function _t(e,t,r){var i=e[t];(!(gt.call(e,t)&&n(i,r))||r===void 0&&!(t in e))&&R(e,t,r)}var vt=_t;function yt(e,t,n,r){var i=!n;n||={};for(var a=-1,o=t.length;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;c===void 0&&(c=e[s]),i?R(n,s,c):vt(n,s,c)}return n}var bt=yt;function xt(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var St=xt,Ct=Object.prototype.hasOwnProperty;function wt(e){if(!_(e))return St(e);var t=f(e),n=[];for(var r in e)r==`constructor`&&(t||!Ct.call(e,r))||n.push(r);return n}var Tt=wt;function Et(e){return u(e)?m(e,!0):Tt(e)}var H=Et;function Dt(e){return bt(e,H(e))}var Ot=Dt;function kt(t,n,r,i,a,s,l){var u=V(t,r),d=V(n,r),f=l.get(d);if(f){z(t,r,f);return}var p=s?s(u,d,r+``,t,n,l):void 0,m=p===void 0;if(m){var h=c(d),g=!h&&te(d),v=!h&&!g&&o(d);p=d,h||g||v?c(u)?p=u:ot(u)?p=et(u):g?(m=!1,p=Je(d,!0)):v?(m=!1,p=Qe(d,!0)):p=[]:mt(d)||ee(d)?(p=u,ee(u)?p=Ot(u):(!_(u)||e(u))&&(p=it(d))):m=!1}m&&(l.set(d,p),a(p,d,i,s,l),l.delete(d)),z(t,r,p)}var At=kt;function jt(e,t,n,r,i){e!==t&&h(t,function(a,o){if(i||=new g,_(a))At(e,t,o,n,jt,r,i);else{var s=r?r(V(e,o),a,o+``,e,t,i):void 0;s===void 0&&(s=a),z(e,o,s)}},H)}var Mt=jt;function Nt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Pt=Nt,Ft=Math.max;function It(e,t,n){return t=Ft(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Ft(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Pt(e,this,s)}}var Lt=It;function Rt(e){return function(){return e}}var zt=Rt,Bt=L?function(e,t){return L(e,`toString`,{configurable:!0,enumerable:!1,value:zt(t),writable:!0})}:d,Vt=800,Ht=16,Ut=Date.now;function Wt(e){var t=0,n=0;return function(){var r=Ut(),i=Ht-(r-n);if(n=r,i>0){if(++t>=Vt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Gt=Wt(Bt);function Kt(e,t){return Gt(Lt(e,t,d),e+``)}var qt=Kt;function Jt(e,t,r){if(!_(r))return!1;var i=typeof t;return(i==`number`?u(r)&&s(t,r.length):i==`string`&&t in r)?n(r[t],e):!1}var Yt=Jt;function Xt(e){return qt(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&typeof a==`function`?(i--,a):void 0,o&&Yt(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}var Zt=Xt(function(e,t,n){Mt(e,t,n)}),Qt=se(),$t=`​`,en={curveBasis:pe,curveBasisClosed:he,curveBasisOpen:_e,curveBumpX:de,curveBumpY:fe,curveBundle:ye,curveCardinalClosed:xe,curveCardinalOpen:Se,curveCardinal:be,curveCatmullRomClosed:Ce,curveCatmullRomOpen:Te,curveCatmullRom:M,curveLinear:le,curveLinearClosed:De,curveMonotoneX:Ne,curveMonotoneY:Pe,curveNatural:Le,curveStep:Re,curveStepAfter:Be,curveStepBefore:ze},tn=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,nn=b(function(e,t){let n=rn(e,/(?:init\b)|(?:initialize\b)/),r={};if(Array.isArray(n)){let e=n.map(e=>e.args);re(e),r=ae(r,[...e])}else r=n.args;if(!r)return;let i=ie(e,t),a=`config`;return r[a]!==void 0&&(i===`flowchart-v2`&&(i=`flowchart`),r[i]=r[a],delete r[a]),r},`detectInit`),rn=b(function(e,t=null){try{let n=RegExp(`[%]{2}(?![{]${tn.source})(?=[}][%]{2}).*
`,`ig`);e=e.trim().replace(n,``).replace(/'/gm,`"`),y.debug(`Detecting diagram directive${t===null?``:` type:`+t} based on the text:${e}`);let r,i=[];for(;(r=x.exec(e))!==null;)if(r.index===x.lastIndex&&x.lastIndex++,r&&!t||t&&r[1]?.match(t)||t&&r[2]?.match(t)){let e=r[1]?r[1]:r[2],t=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:e,args:t})}return i.length===0?{type:e,args:null}:i.length===1?i[0]:i}catch(n){return y.error(`ERROR: ${n.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},`detectDirective`),an=b(function(e){return e.replace(x,``)},`removeDirectives`),on=b(function(e,t){for(let[n,r]of t.entries())if(r.match(e))return n;return-1},`isSubstringInArray`);function U(e,t){return e?en[`curve${e.charAt(0).toUpperCase()+e.slice(1)}`]??t:t}b(U,`interpolateToCurve`);function sn(e,t){let n=e.trim();if(n)return t.securityLevel===`loose`?n:(0,Qt.sanitizeUrl)(n)}b(sn,`formatUrl`);var cn=b((e,...t)=>{let n=e.split(`.`),r=n.length-1,i=n[r],a=window;for(let t=0;t<r;t++)if(a=a[n[t]],!a){y.error(`Function name: ${e} not found in window`);return}a[i](...t)},`runFunc`);function W(e,t){return!e||!t?0:Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}b(W,`distance`);function ln(e){let t,n=0;return e.forEach(e=>{n+=W(e,t),t=e}),G(e,n/2)}b(ln,`traverseEdge`);function un(e){return e.length===1?e[0]:ln(e)}b(un,`calcLabelPosition`);var dn=b((e,t=2)=>{let n=10**t;return Math.round(e*n)/n},`roundNumber`),G=b((e,t)=>{let n,r=t;for(let t of e){if(n){let e=W(t,n);if(e===0)return n;if(e<r)r-=e;else{let i=r/e;if(i<=0)return n;if(i>=1)return{x:t.x,y:t.y};if(i>0&&i<1)return{x:dn((1-i)*n.x+i*t.x,5),y:dn((1-i)*n.y+i*t.y,5)}}}n=t}throw Error(`Could not find a suitable point for the given distance`)},`calculatePoint`),fn=b((e,t,n)=>{y.info(`our points ${JSON.stringify(t)}`),t[0]!==n&&(t=t.reverse());let r=G(t,25),i=e?10:5,a=Math.atan2(t[0].y-r.y,t[0].x-r.x),o={x:0,y:0};return o.x=Math.sin(a)*i+(t[0].x+r.x)/2,o.y=-Math.cos(a)*i+(t[0].y+r.y)/2,o},`calcCardinalityPosition`);function pn(e,t,n){let r=structuredClone(n);y.info(`our points`,r),t!==`start_left`&&t!==`start_right`&&r.reverse();let i=G(r,25+e),a=10+e*.5,o=Math.atan2(r[0].y-i.y,r[0].x-i.x),s={x:0,y:0};return t===`start_left`?(s.x=Math.sin(o+Math.PI)*a+(r[0].x+i.x)/2,s.y=-Math.cos(o+Math.PI)*a+(r[0].y+i.y)/2):t===`end_right`?(s.x=Math.sin(o-Math.PI)*a+(r[0].x+i.x)/2-5,s.y=-Math.cos(o-Math.PI)*a+(r[0].y+i.y)/2-5):t===`end_left`?(s.x=Math.sin(o)*a+(r[0].x+i.x)/2-5,s.y=-Math.cos(o)*a+(r[0].y+i.y)/2-5):(s.x=Math.sin(o)*a+(r[0].x+i.x)/2,s.y=-Math.cos(o)*a+(r[0].y+i.y)/2),s}b(pn,`calcTerminalLabelPosition`);function K(e){let t=``,n=``;for(let r of e)r!==void 0&&(r.startsWith(`color:`)||r.startsWith(`text-align:`)?n=n+r+`;`:t=t+r+`;`);return{style:t,labelStyle:n}}b(K,`getStylesFromArray`);var q=0,mn=b(()=>(q++,`id-`+Math.random().toString(36).substr(2,12)+`-`+q),`generateId`);function hn(e){let t=``;for(let n=0;n<e;n++)t+=`0123456789abcdef`.charAt(Math.floor(Math.random()*16));return t}b(hn,`makeRandomHex`);var gn=b(e=>hn(e.length),`random`),_n=b(function(){return{x:0,y:0,fill:void 0,anchor:`start`,style:`#666`,width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:``}},`getTextObj`),vn=b(function(e,t){let n=t.text.replace(S.lineBreakRegex,` `),[,r]=Q(t.fontSize),i=e.append(`text`);i.attr(`x`,t.x),i.attr(`y`,t.y),i.style(`text-anchor`,t.anchor),i.style(`font-family`,t.fontFamily),i.style(`font-size`,r),i.style(`font-weight`,t.fontWeight),i.attr(`fill`,t.fill),t.class!==void 0&&i.attr(`class`,t.class);let a=i.append(`tspan`);return a.attr(`x`,t.x+t.textMargin*2),a.attr(`fill`,t.fill),a.text(n),i},`drawSimpleText`),yn=p((e,t,n)=>{if(!e||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:`Arial`,joinWith:`<br/>`},n),S.lineBreakRegex.test(e)))return e;let r=e.split(` `).filter(Boolean),i=[],a=``;return r.forEach((e,o)=>{let s=Y(`${e} `,n),c=Y(a,n);if(s>t){let{hyphenatedStrings:r,remainingWord:o}=bn(e,t,`-`,n);i.push(a,...r),a=o}else c+s>=t?(i.push(a),a=e):a=[a,e].filter(Boolean).join(` `);o+1===r.length&&i.push(a)}),i.filter(e=>e!==``).join(n.joinWith)},(e,t,n)=>`${e}${t}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),bn=p((e,t,n=`-`,r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:`Arial`,margin:0},r);let i=[...e],a=[],o=``;return i.forEach((e,s)=>{let c=`${o}${e}`;if(Y(c,r)>=t){let e=s+1,t=i.length===e,r=`${c}${n}`;a.push(t?c:r),o=``}else o=c}),{hyphenatedStrings:a,remainingWord:o}},(e,t,n=`-`,r)=>`${e}${t}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function J(e,t){return X(e,t).height}b(J,`calculateTextHeight`);function Y(e,t){return X(e,t).width}b(Y,`calculateTextWidth`);var X=p((e,t)=>{let{fontSize:n=12,fontFamily:r=`Arial`,fontWeight:i=400}=t;if(!e)return{width:0,height:0};let[,a]=Q(n),o=[`sans-serif`,r],s=e.split(S.lineBreakRegex),c=[],l=ne(`body`);if(!l.remove)return{width:0,height:0,lineHeight:0};let u=l.append(`svg`);for(let e of o){let t=0,n={width:0,height:0,lineHeight:0};for(let r of s){let o=_n();o.text=r||`​`;let s=vn(u,o).style(`font-size`,a).style(`font-weight`,i).style(`font-family`,e),c=(s._groups||s)[0][0].getBBox();if(c.width===0&&c.height===0)throw Error(`svg element not in render tree`);n.width=Math.round(Math.max(n.width,c.width)),t=Math.round(c.height),n.height+=t,n.lineHeight=Math.round(Math.max(n.lineHeight,t))}c.push(n)}return u.remove(),c[isNaN(c[1].height)||isNaN(c[1].width)||isNaN(c[1].lineHeight)||c[0].height>c[1].height&&c[0].width>c[1].width&&c[0].lineHeight>c[1].lineHeight?0:1]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),xn=class{constructor(e=!1,t){this.count=0,this.count=t?t.length:0,this.next=e?()=>this.count++:()=>Date.now()}static#e=b(this,`InitIDGenerator`)},Z,Sn=b(function(e){return Z||=document.createElement(`div`),e=escape(e).replace(/%26/g,`&`).replace(/%23/g,`#`).replace(/%3B/g,`;`),Z.innerHTML=e,unescape(Z.textContent)},`entityDecode`);function Cn(e){return`str`in e}b(Cn,`isDetailedError`);var wn=b((e,t,n,r)=>{if(!r)return;let i=e.node()?.getBBox();i&&e.append(`text`).text(r).attr(`text-anchor`,`middle`).attr(`x`,i.x+i.width/2).attr(`y`,-n).attr(`class`,t)},`insertTitle`),Q=b(e=>{if(typeof e==`number`)return[e,e+`px`];let t=parseInt(e??``,10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+`px`]:[t,e]},`parseFontSize`);function $(e,t){return Zt({},e,t)}b($,`cleanAndMerge`);var Tn={assignWithDepth:ae,wrapLabel:yn,calculateTextHeight:J,calculateTextWidth:Y,calculateTextDimensions:X,cleanAndMerge:$,detectInit:nn,detectDirective:rn,isSubstringInArray:on,interpolateToCurve:U,calcLabelPosition:un,calcCardinalityPosition:fn,calcTerminalLabelPosition:pn,formatUrl:sn,getStylesFromArray:K,generateId:mn,random:gn,runFunc:cn,entityDecode:Sn,insertTitle:wn,isLabelCoordinateInPath:An,parseFontSize:Q,InitIDGenerator:xn},En=b(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),t=t.replace(/#\w+;/g,function(e){let t=e.substring(1,e.length-1);return/^\+?\d+$/.test(t)?`ﬂ°°`+t+`¶ß`:`ﬂ°`+t+`¶ß`}),t},`encodeEntities`),Dn=b(function(e){return e.replace(/ﬂ°°/g,`&#`).replace(/ﬂ°/g,`&`).replace(/¶ß/g,`;`)},`decodeEntities`),On=b((e,t,{counter:n=0,prefix:r,suffix:i},a)=>a||`${r?`${r}_`:``}${e}_${t}_${n}${i?`_${i}`:``}`,`getEdgeId`);function kn(e){return e??null}b(kn,`handleUndefinedAttr`);function An(e,t){let n=Math.round(e.x),r=Math.round(e.y),i=t.replace(/(\d+\.\d+)/g,e=>Math.round(parseFloat(e)).toString());return i.includes(n.toString())||i.includes(r.toString())}b(An,`isLabelCoordinateInPath`);export{et as A,Pe as B,Lt as C,ot as D,vt as E,Be as F,fe as G,be as H,ze as I,le as K,Re as L,Xe as M,Je as N,it as O,R as P,Le as R,zt as S,bt as T,pe as U,M as V,de as W,yn as _,Dn as a,qt as b,On as c,U as d,Cn as f,Tn as g,an as h,$ as i,Qe as j,B as k,K as l,gn as m,J as n,En as o,Q as p,Y as r,mn as s,$t as t,kn as u,Zt as v,H as w,Gt as x,Yt as y,Ne as z};