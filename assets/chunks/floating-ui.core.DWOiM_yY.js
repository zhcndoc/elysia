var e=[`top`,`right`,`bottom`,`left`],t=[`start`,`end`],n=e.reduce((e,n)=>e.concat(n,n+`-`+t[0],n+`-`+t[1]),[]),r=Math.min,i=Math.max,a=Math.round,o=Math.floor,s=e=>({x:e,y:e}),c={left:`right`,right:`left`,bottom:`top`,top:`bottom`},l={start:`end`,end:`start`};function u(e,t,n){return i(e,r(t,n))}function d(e,t){return typeof e==`function`?e(t):e}function f(e){return e.split(`-`)[0]}function p(e){return e.split(`-`)[1]}function m(e){return e===`x`?`y`:`x`}function h(e){return e===`y`?`height`:`width`}var g=new Set([`top`,`bottom`]);function _(e){return g.has(f(e))?`y`:`x`}function v(e){return m(_(e))}function y(e,t,n){n===void 0&&(n=!1);let r=p(e),i=v(e),a=h(i),o=i===`x`?r===(n?`end`:`start`)?`right`:`left`:r===`start`?`bottom`:`top`;return t.reference[a]>t.floating[a]&&(o=O(o)),[o,O(o)]}function b(e){let t=O(e);return[x(e),t,x(t)]}function x(e){return e.replace(/start|end/g,e=>l[e])}var S=[`left`,`right`],C=[`right`,`left`],w=[`top`,`bottom`],T=[`bottom`,`top`];function E(e,t,n){switch(e){case`top`:case`bottom`:return n?t?C:S:t?S:C;case`left`:case`right`:return t?w:T;default:return[]}}function D(e,t,n,r){let i=p(e),a=E(f(e),n===`start`,r);return i&&(a=a.map(e=>e+`-`+i),t&&(a=a.concat(a.map(x)))),a}function O(e){return e.replace(/left|right|bottom|top/g,e=>c[e])}function k(e){return{top:0,right:0,bottom:0,left:0,...e}}function A(e){return typeof e==`number`?{top:e,right:e,bottom:e,left:e}:k(e)}function j(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function M(e,t,n){let{reference:r,floating:i}=e,a=_(t),o=v(t),s=h(o),c=f(t),l=a===`y`,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,m=r[s]/2-i[s]/2,g;switch(c){case`top`:g={x:u,y:r.y-i.height};break;case`bottom`:g={x:u,y:r.y+r.height};break;case`right`:g={x:r.x+r.width,y:d};break;case`left`:g={x:r.x-i.width,y:d};break;default:g={x:r.x,y:r.y}}switch(p(t)){case`start`:g[o]-=m*(n&&l?-1:1);break;case`end`:g[o]+=m*(n&&l?-1:1);break}return g}var N=async(e,t,n)=>{let{placement:r=`bottom`,strategy:i=`absolute`,middleware:a=[],platform:o}=n,s=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t)),l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=M(l,r,c),f=r,p={},m=0;for(let n=0;n<s.length;n++){let{name:a,fn:h}=s[n],{x:g,y:_,data:v,reset:y}=await h({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:e,floating:t}});u=g??u,d=_??d,p={...p,[a]:{...p[a],...v}},y&&m<=50&&(m++,typeof y==`object`&&(y.placement&&(f=y.placement),y.rects&&(l=y.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):y.rects),{x:u,y:d}=M(l,f,c)),n=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function P(e,t){t===void 0&&(t={});let{x:n,y:r,platform:i,rects:a,elements:o,strategy:s}=e,{boundary:c=`clippingAncestors`,rootBoundary:l=`viewport`,elementContext:u=`floating`,altBoundary:f=!1,padding:p=0}=d(t,e),m=A(p),h=o[f?u===`floating`?`reference`:`floating`:u],g=j(await i.getClippingRect({element:await(i.isElement==null?void 0:i.isElement(h))??!0?h:h.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:l,strategy:s})),_=u===`floating`?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),y=await(i.isElement==null?void 0:i.isElement(v))&&await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1},b=j(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:v,strategy:s}):_);return{top:(g.top-b.top+m.top)/y.y,bottom:(b.bottom-g.bottom+m.bottom)/y.y,left:(g.left-b.left+m.left)/y.x,right:(b.right-g.right+m.right)/y.x}}var F=e=>({name:`arrow`,options:e,async fn(t){let{x:n,y:i,placement:a,rects:o,platform:s,elements:c,middlewareData:l}=t,{element:f,padding:m=0}=d(e,t)||{};if(f==null)return{};let g=A(m),_={x:n,y:i},y=v(a),b=h(y),x=await s.getDimensions(f),S=y===`y`,C=S?`top`:`left`,w=S?`bottom`:`right`,T=S?`clientHeight`:`clientWidth`,E=o.reference[b]+o.reference[y]-_[y]-o.floating[b],D=_[y]-o.reference[y],O=await(s.getOffsetParent==null?void 0:s.getOffsetParent(f)),k=O?O[T]:0;(!k||!await(s.isElement==null?void 0:s.isElement(O)))&&(k=c.floating[T]||o.floating[b]);let j=E/2-D/2,M=k/2-x[b]/2-1,N=r(g[C],M),P=r(g[w],M),F=N,I=k-x[b]-P,L=k/2-x[b]/2+j,R=u(F,L,I),z=!l.arrow&&p(a)!=null&&L!==R&&o.reference[b]/2-(L<F?N:P)-x[b]/2<0,B=z?L<F?L-F:L-I:0;return{[y]:_[y]+B,data:{[y]:R,centerOffset:L-R-B,...z&&{alignmentOffset:B}},reset:z}}});function I(e,t,n){return(e?[...n.filter(t=>p(t)===e),...n.filter(t=>p(t)!==e)]:n.filter(e=>f(e)===e)).filter(n=>e?p(n)===e||(t?x(n)!==n:!1):!0)}var L=function(e){return e===void 0&&(e={}),{name:`autoPlacement`,options:e,async fn(t){let{rects:r,middlewareData:i,placement:a,platform:o,elements:s}=t,{crossAxis:c=!1,alignment:l,allowedPlacements:u=n,autoAlignment:m=!0,...h}=d(e,t),g=l!==void 0||u===n?I(l||null,m,u):u,_=await P(t,h),v=i.autoPlacement?.index||0,b=g[v];if(b==null)return{};let x=y(b,r,await(o.isRTL==null?void 0:o.isRTL(s.floating)));if(a!==b)return{reset:{placement:g[0]}};let S=[_[f(b)],_[x[0]],_[x[1]]],C=[...i.autoPlacement?.overflows||[],{placement:b,overflows:S}],w=g[v+1];if(w)return{data:{index:v+1,overflows:C},reset:{placement:w}};let T=C.map(e=>{let t=p(e.placement);return[e.placement,t&&c?e.overflows.slice(0,2).reduce((e,t)=>e+t,0):e.overflows[0],e.overflows]}).sort((e,t)=>e[1]-t[1]),E=T.filter(e=>e[2].slice(0,p(e[0])?2:3).every(e=>e<=0))[0]?.[0]||T[0][0];return E===a?{}:{data:{index:v+1,overflows:C},reset:{placement:E}}}}},R=function(e){return e===void 0&&(e={}),{name:`flip`,options:e,async fn(t){var n;let{placement:r,middlewareData:i,rects:a,initialPlacement:o,platform:s,elements:c}=t,{mainAxis:l=!0,crossAxis:u=!0,fallbackPlacements:p,fallbackStrategy:m=`bestFit`,fallbackAxisSideDirection:h=`none`,flipAlignment:g=!0,...v}=d(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};let x=f(r),S=_(o),C=f(o)===o,w=await(s.isRTL==null?void 0:s.isRTL(c.floating)),T=p||(C||!g?[O(o)]:b(o)),E=h!==`none`;!p&&E&&T.push(...D(o,g,h,w));let k=[o,...T],A=await P(t,v),j=[],M=i.flip?.overflows||[];if(l&&j.push(A[x]),u){let e=y(r,a,w);j.push(A[e[0]],A[e[1]])}if(M=[...M,{placement:r,overflows:j}],!j.every(e=>e<=0)){let e=(i.flip?.index||0)+1,t=k[e];if(t&&(!(u===`alignment`&&S!==_(t))||M.every(e=>_(e.placement)===S?e.overflows[0]>0:!0)))return{data:{index:e,overflows:M},reset:{placement:t}};let n=M.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0]?.placement;if(!n)switch(m){case`bestFit`:{let e=M.filter(e=>{if(E){let t=_(e.placement);return t===S||t===`y`}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0]?.[0];e&&(n=e);break}case`initialPlacement`:n=o;break}if(r!==n)return{reset:{placement:n}}}return{}}}};function z(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function B(t){return e.some(e=>t[e]>=0)}var V=function(e){return e===void 0&&(e={}),{name:`hide`,options:e,async fn(t){let{rects:n}=t,{strategy:r=`referenceHidden`,...i}=d(e,t);switch(r){case`referenceHidden`:{let e=z(await P(t,{...i,elementContext:`reference`}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:B(e)}}}case`escaped`:{let e=z(await P(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:B(e)}}}default:return{}}}}},H=new Set([`left`,`top`]);async function U(e,t){let{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=f(n),s=p(n),c=_(n)===`y`,l=H.has(o)?-1:1,u=a&&c?-1:1,m=d(t,e),{mainAxis:h,crossAxis:g,alignmentAxis:v}=typeof m==`number`?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return s&&typeof v==`number`&&(g=s===`end`?v*-1:v),c?{x:g*u,y:h*l}:{x:h*l,y:g*u}}var W=function(e){return e===void 0&&(e=0),{name:`offset`,options:e,async fn(t){var n;let{x:r,y:i,placement:a,middlewareData:o}=t,s=await U(t,e);return a===o.offset?.placement&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:r+s.x,y:i+s.y,data:{...s,placement:a}}}}},G=function(e){return e===void 0&&(e={}),{name:`shift`,options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=d(e,t),l={x:n,y:r},p=await P(t,c),h=_(f(i)),g=m(h),v=l[g],y=l[h];if(a){let e=g===`y`?`top`:`left`,t=g===`y`?`bottom`:`right`,n=v+p[e],r=v-p[t];v=u(n,v,r)}if(o){let e=h===`y`?`top`:`left`,t=h===`y`?`bottom`:`right`,n=y+p[e],r=y-p[t];y=u(n,y,r)}let b=s.fn({...t,[g]:v,[h]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:a,[h]:o}}}}}},K=function(e){return e===void 0&&(e={}),{options:e,fn(t){let{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=d(e,t),u={x:n,y:r},p=_(i),h=m(p),g=u[h],v=u[p],y=d(s,t),b=typeof y==`number`?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){let e=h===`y`?`height`:`width`,t=a.reference[h]-a.floating[e]+b.mainAxis,n=a.reference[h]+a.reference[e]-b.mainAxis;g<t?g=t:g>n&&(g=n)}if(l){let e=h===`y`?`width`:`height`,t=H.has(f(i)),n=a.reference[p]-a.floating[e]+(t&&o.offset?.[p]||0)+(t?0:b.crossAxis),r=a.reference[p]+a.reference[e]+(t?0:o.offset?.[p]||0)-(t?b.crossAxis:0);v<n?v=n:v>r&&(v=r)}return{[h]:g,[p]:v}}}},q=function(e){return e===void 0&&(e={}),{name:`size`,options:e,async fn(t){var n,a;let{placement:o,rects:s,platform:c,elements:l}=t,{apply:u=()=>{},...m}=d(e,t),h=await P(t,m),g=f(o),v=p(o),y=_(o)===`y`,{width:b,height:x}=s.floating,S,C;g===`top`||g===`bottom`?(S=g,C=v===(await(c.isRTL==null?void 0:c.isRTL(l.floating))?`start`:`end`)?`left`:`right`):(C=g,S=v===`end`?`top`:`bottom`);let w=x-h.top-h.bottom,T=b-h.left-h.right,E=r(x-h[S],w),D=r(b-h[C],T),O=!t.middlewareData.shift,k=E,A=D;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=T),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(k=w),O&&!v){let e=i(h.left,0),t=i(h.right,0),n=i(h.top,0),r=i(h.bottom,0);y?A=b-2*(e!==0||t!==0?e+t:i(h.left,h.right)):k=x-2*(n!==0||r!==0?n+r:i(h.top,h.bottom))}await u({...t,availableWidth:A,availableHeight:k});let j=await c.getDimensions(l.floating);return b!==j.width||x!==j.height?{reset:{rects:!0}}:{}}}};export{V as a,G as c,o as d,i as f,a as h,R as i,q as l,j as m,L as n,K as o,r as p,N as r,W as s,F as t,s as u};