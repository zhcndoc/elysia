import{n as e}from"./chunk.BqXodU4U.js";import{h as t,m as n}from"./editor.api.BnhLjnoq.js";import{n as r,t as i}from"./monaco.contribution.DnUq578-.js";function a(e,t){let n=globalThis.MonacoEnvironment;if(n?.createTrustedTypesPolicy)try{return n.createTrustedTypesPolicy(e,t)}catch(e){console.error(e);return}try{return globalThis.trustedTypes?.createPolicy(e,t)}catch(e){console.error(e);return}}function o(e){let t=e.label,n=globalThis.MonacoEnvironment;if(n){if(typeof n.getWorker==`function`)return n.getWorker(`workerMain.js`,t);if(typeof n.getWorkerUrl==`function`){let e=n.getWorkerUrl(`workerMain.js`,t);return new Worker(T?T.createScriptURL(e):e,{name:t,type:`module`})}}throw Error(`You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker`)}function s(e){let t=Promise.resolve(o({label:e.label??`monaco-editor-worker`,moduleId:e.moduleId})).then(t=>(t.postMessage(`ignore`),t.postMessage(e.createData),t));return w.editor.createWebWorker({worker:t,host:e.host,keepIdleModels:e.keepIdleModels})}function c(e,t,n=0){if(typeof e==`string`)return e;if(e===void 0)return``;let r=``;if(n){r+=t;for(let e=0;e<n;e++)r+=`  `}if(r+=e.messageText,n++,e.next)for(let i of e.next)r+=c(i,t,n);return r}function l(e){return e?e.map(e=>e.text).join(``):``}function u(e){let t=`*@${e.name}*`;if(e.name===`param`&&e.text){let[n,...r]=e.text;t+=`\`${n.text}\``,r.length>0&&(t+=` \u2014 ${r.map(e=>e.text).join(` `)}`)}else Array.isArray(e.text)?t+=` \u2014 ${e.text.map(e=>e.text).join(` `)}`:e.text&&(t+=` \u2014 ${e.text}`);return t}function d(e){q=h(e,`typescript`)}function f(e){K=h(e,`javascript`)}function p(){return new Promise((e,t)=>{if(!K)return t(`JavaScript not registered!`);e(K)})}function m(){return new Promise((e,t)=>{if(!q)return t(`TypeScript not registered!`);e(q)})}function h(e,t){let n=[],r=[],i=new E(t,e);n.push(i);let a=(...e)=>i.getLanguageServiceWorker(...e),o=new k(a);function s(){let{modeConfiguration:n}=e;_(r),n.completionItems&&r.push(w.languages.registerCompletionItemProvider(t,new j(a))),n.signatureHelp&&r.push(w.languages.registerSignatureHelpProvider(t,new M(a))),n.hovers&&r.push(w.languages.registerHoverProvider(t,new N(a))),n.documentHighlights&&r.push(w.languages.registerDocumentHighlightProvider(t,new P(a))),n.definitions&&r.push(w.languages.registerDefinitionProvider(t,new F(o,a))),n.references&&r.push(w.languages.registerReferenceProvider(t,new I(o,a))),n.documentSymbols&&r.push(w.languages.registerDocumentSymbolProvider(t,new L(a))),n.rename&&r.push(w.languages.registerRenameProvider(t,new W(o,a))),n.documentRangeFormattingEdits&&r.push(w.languages.registerDocumentRangeFormattingEditProvider(t,new V(a))),n.onTypeFormattingEdits&&r.push(w.languages.registerOnTypeFormattingEditProvider(t,new H(a))),n.codeActions&&r.push(w.languages.registerCodeActionProvider(t,new U(a))),n.inlayHints&&r.push(w.languages.registerInlayHintsProvider(t,new G(a))),n.diagnostics&&r.push(new A(o,e,t,a))}return s(),n.push(g(r)),a}function g(e){return{dispose:()=>_(e)}}function _(e){for(;e.length;)e.pop().dispose()}var v,y,b,x,S,C,w,T,E,D,O,k,A,j,M,N,P,F,I,L,R,z,B,V,H,U,W,G,K,q;e((()=>{t(),i(),v=Object.defineProperty,y=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,S=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let i of b(t))!x.call(e,i)&&i!==n&&v(e,i,{get:()=>t[i],enumerable:!(r=y(t,i))||r.enumerable});return e},C=(e,t,n)=>(S(e,t,`default`),n&&S(n,t,`default`)),w={},C(w,n),T=typeof self==`object`&&self.constructor&&self.constructor.name===`DedicatedWorkerGlobalScope`&&globalThis.workerttPolicy!==void 0?globalThis.workerttPolicy:a(`defaultWorkerFactory`,{createScriptURL:e=>e}),E=class{constructor(e,t){this._modeId=e,this._defaults=t,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker()),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(()=>this._updateExtraLibs())}dispose(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()}_stopWorker(){this._worker&&=(this._worker.dispose(),null),this._client=null}async _updateExtraLibs(){if(!this._worker)return;let e=++this._updateExtraLibsToken,t=await this._worker.getProxy();this._updateExtraLibsToken===e&&t.updateExtraLibs(this._defaults.getExtraLibs())}_getClient(){return this._client||=(async()=>(this._worker=s({moduleId:`vs/language/typescript/tsWorker`,label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}}),this._defaults.getEagerModelSync()?await this._worker.withSyncedResources(w.editor.getModels().filter(e=>e.getLanguageId()===this._modeId).map(e=>e.uri)):await this._worker.getProxy()))(),this._client}async getLanguageServiceWorker(...e){let t=await this._getClient();return this._worker&&await this._worker.withSyncedResources(e),t}},D={},D[`lib.d.ts`]=!0,D[`lib.decorators.d.ts`]=!0,D[`lib.decorators.legacy.d.ts`]=!0,D[`lib.dom.asynciterable.d.ts`]=!0,D[`lib.dom.d.ts`]=!0,D[`lib.dom.iterable.d.ts`]=!0,D[`lib.es2015.collection.d.ts`]=!0,D[`lib.es2015.core.d.ts`]=!0,D[`lib.es2015.d.ts`]=!0,D[`lib.es2015.generator.d.ts`]=!0,D[`lib.es2015.iterable.d.ts`]=!0,D[`lib.es2015.promise.d.ts`]=!0,D[`lib.es2015.proxy.d.ts`]=!0,D[`lib.es2015.reflect.d.ts`]=!0,D[`lib.es2015.symbol.d.ts`]=!0,D[`lib.es2015.symbol.wellknown.d.ts`]=!0,D[`lib.es2016.array.include.d.ts`]=!0,D[`lib.es2016.d.ts`]=!0,D[`lib.es2016.full.d.ts`]=!0,D[`lib.es2016.intl.d.ts`]=!0,D[`lib.es2017.d.ts`]=!0,D[`lib.es2017.date.d.ts`]=!0,D[`lib.es2017.full.d.ts`]=!0,D[`lib.es2017.intl.d.ts`]=!0,D[`lib.es2017.object.d.ts`]=!0,D[`lib.es2017.sharedmemory.d.ts`]=!0,D[`lib.es2017.string.d.ts`]=!0,D[`lib.es2017.typedarrays.d.ts`]=!0,D[`lib.es2018.asyncgenerator.d.ts`]=!0,D[`lib.es2018.asynciterable.d.ts`]=!0,D[`lib.es2018.d.ts`]=!0,D[`lib.es2018.full.d.ts`]=!0,D[`lib.es2018.intl.d.ts`]=!0,D[`lib.es2018.promise.d.ts`]=!0,D[`lib.es2018.regexp.d.ts`]=!0,D[`lib.es2019.array.d.ts`]=!0,D[`lib.es2019.d.ts`]=!0,D[`lib.es2019.full.d.ts`]=!0,D[`lib.es2019.intl.d.ts`]=!0,D[`lib.es2019.object.d.ts`]=!0,D[`lib.es2019.string.d.ts`]=!0,D[`lib.es2019.symbol.d.ts`]=!0,D[`lib.es2020.bigint.d.ts`]=!0,D[`lib.es2020.d.ts`]=!0,D[`lib.es2020.date.d.ts`]=!0,D[`lib.es2020.full.d.ts`]=!0,D[`lib.es2020.intl.d.ts`]=!0,D[`lib.es2020.number.d.ts`]=!0,D[`lib.es2020.promise.d.ts`]=!0,D[`lib.es2020.sharedmemory.d.ts`]=!0,D[`lib.es2020.string.d.ts`]=!0,D[`lib.es2020.symbol.wellknown.d.ts`]=!0,D[`lib.es2021.d.ts`]=!0,D[`lib.es2021.full.d.ts`]=!0,D[`lib.es2021.intl.d.ts`]=!0,D[`lib.es2021.promise.d.ts`]=!0,D[`lib.es2021.string.d.ts`]=!0,D[`lib.es2021.weakref.d.ts`]=!0,D[`lib.es2022.array.d.ts`]=!0,D[`lib.es2022.d.ts`]=!0,D[`lib.es2022.error.d.ts`]=!0,D[`lib.es2022.full.d.ts`]=!0,D[`lib.es2022.intl.d.ts`]=!0,D[`lib.es2022.object.d.ts`]=!0,D[`lib.es2022.regexp.d.ts`]=!0,D[`lib.es2022.sharedmemory.d.ts`]=!0,D[`lib.es2022.string.d.ts`]=!0,D[`lib.es2023.array.d.ts`]=!0,D[`lib.es2023.collection.d.ts`]=!0,D[`lib.es2023.d.ts`]=!0,D[`lib.es2023.full.d.ts`]=!0,D[`lib.es5.d.ts`]=!0,D[`lib.es6.d.ts`]=!0,D[`lib.esnext.collection.d.ts`]=!0,D[`lib.esnext.d.ts`]=!0,D[`lib.esnext.decorators.d.ts`]=!0,D[`lib.esnext.disposable.d.ts`]=!0,D[`lib.esnext.full.d.ts`]=!0,D[`lib.esnext.intl.d.ts`]=!0,D[`lib.esnext.object.d.ts`]=!0,D[`lib.esnext.promise.d.ts`]=!0,D[`lib.scripthost.d.ts`]=!0,D[`lib.webworker.asynciterable.d.ts`]=!0,D[`lib.webworker.d.ts`]=!0,D[`lib.webworker.importscripts.d.ts`]=!0,D[`lib.webworker.iterable.d.ts`]=!0,O=class{constructor(e){this._worker=e}_textSpanToRange(e,t){let n=e.getPositionAt(t.start),r=e.getPositionAt(t.start+t.length),{lineNumber:i,column:a}=n,{lineNumber:o,column:s}=r;return{startLineNumber:i,startColumn:a,endLineNumber:o,endColumn:s}}},k=class{constructor(e){this._worker=e,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}isLibFile(e){return e&&e.path.indexOf(`/lib.`)===0?!!D[e.path.slice(1)]:!1}getOrCreateModel(e){let t=w.Uri.parse(e),n=w.editor.getModel(t);if(n)return n;if(this.isLibFile(t)&&this._hasFetchedLibFiles)return w.editor.createModel(this._libFiles[t.path.slice(1)],`typescript`,t);let i=r.getExtraLibs()[e];return i?w.editor.createModel(i.content,`typescript`,t):null}_containsLibFile(e){for(let t of e)if(this.isLibFile(t))return!0;return!1}async fetchLibFilesIfNecessary(e){this._containsLibFile(e)&&await this._fetchLibFiles()}_fetchLibFiles(){return this._fetchLibFilesPromise||=this._worker().then(e=>e.getLibFiles()).then(e=>{this._hasFetchedLibFiles=!0,this._libFiles=e}),this._fetchLibFilesPromise}},A=class extends O{constructor(e,t,n,r){super(r),this._libFiles=e,this._defaults=t,this._selector=n,this._disposables=[],this._listener=Object.create(null);let i=e=>{if(e.getLanguageId()!==n)return;let t=()=>{let{onlyVisible:t}=this._defaults.getDiagnosticsOptions();t?e.isAttachedToEditor()&&this._doValidate(e):this._doValidate(e)},r,i=e.onDidChangeContent(()=>{clearTimeout(r),r=window.setTimeout(t,500)}),a=e.onDidChangeAttached(()=>{let{onlyVisible:n}=this._defaults.getDiagnosticsOptions();n&&(e.isAttachedToEditor()?t():w.editor.setModelMarkers(e,this._selector,[]))});this._listener[e.uri.toString()]={dispose(){i.dispose(),a.dispose(),clearTimeout(r)}},t()},a=e=>{w.editor.setModelMarkers(e,this._selector,[]);let t=e.uri.toString();this._listener[t]&&(this._listener[t].dispose(),delete this._listener[t])};this._disposables.push(w.editor.onDidCreateModel(e=>i(e))),this._disposables.push(w.editor.onWillDisposeModel(a)),this._disposables.push(w.editor.onDidChangeModelLanguage(e=>{a(e.model),i(e.model)})),this._disposables.push({dispose(){for(let e of w.editor.getModels())a(e)}});let o=()=>{for(let e of w.editor.getModels())a(e),i(e)};this._disposables.push(this._defaults.onDidChange(o)),this._disposables.push(this._defaults.onDidExtraLibsChange(o)),w.editor.getModels().forEach(e=>i(e))}dispose(){this._disposables.forEach(e=>e&&e.dispose()),this._disposables=[]}async _doValidate(e){let t=await this._worker(e.uri);if(e.isDisposed())return;let n=[],{noSyntaxValidation:r,noSemanticValidation:i,noSuggestionDiagnostics:a}=this._defaults.getDiagnosticsOptions();r||n.push(t.getSyntacticDiagnostics(e.uri.toString())),i||n.push(t.getSemanticDiagnostics(e.uri.toString())),a||n.push(t.getSuggestionDiagnostics(e.uri.toString()));let o=await Promise.all(n);if(!o||e.isDisposed())return;let s=o.reduce((e,t)=>t.concat(e),[]).filter(e=>(this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(e.code)===-1),c=s.map(e=>e.relatedInformation||[]).reduce((e,t)=>t.concat(e),[]).map(e=>e.file?w.Uri.parse(e.file.fileName):null);await this._libFiles.fetchLibFilesIfNecessary(c),!e.isDisposed()&&w.editor.setModelMarkers(e,this._selector,s.map(t=>this._convertDiagnostics(e,t)))}_convertDiagnostics(e,t){let n=t.start||0,r=t.length||1,{lineNumber:i,column:a}=e.getPositionAt(n),{lineNumber:o,column:s}=e.getPositionAt(n+r),l=[];return t.reportsUnnecessary&&l.push(w.MarkerTag.Unnecessary),t.reportsDeprecated&&l.push(w.MarkerTag.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(t.category),startLineNumber:i,startColumn:a,endLineNumber:o,endColumn:s,message:c(t.messageText,`
`),code:t.code.toString(),tags:l,relatedInformation:this._convertRelatedInformation(e,t.relatedInformation)}}_convertRelatedInformation(e,t){if(!t)return[];let n=[];return t.forEach(t=>{let r=e;if(t.file&&(r=this._libFiles.getOrCreateModel(t.file.fileName)),!r)return;let i=t.start||0,a=t.length||1,{lineNumber:o,column:s}=r.getPositionAt(i),{lineNumber:l,column:u}=r.getPositionAt(i+a);n.push({resource:r.uri,startLineNumber:o,startColumn:s,endLineNumber:l,endColumn:u,message:c(t.messageText,`
`)})}),n}_tsDiagnosticCategoryToMarkerSeverity(e){switch(e){case 1:return w.MarkerSeverity.Error;case 3:return w.MarkerSeverity.Info;case 0:return w.MarkerSeverity.Warning;case 2:return w.MarkerSeverity.Hint}return w.MarkerSeverity.Info}},j=class e extends O{get triggerCharacters(){return[`.`]}async provideCompletionItems(t,n,r,i){let a=t.getWordUntilPosition(n),o=new w.Range(n.lineNumber,a.startColumn,n.lineNumber,a.endColumn),s=t.uri,c=t.getOffsetAt(n),l=await this._worker(s);if(t.isDisposed())return;let u=await l.getCompletionsAtPosition(s.toString(),c);if(!(!u||t.isDisposed()))return{suggestions:u.entries.map(r=>{let i=o;if(r.replacementSpan){let e=t.getPositionAt(r.replacementSpan.start),n=t.getPositionAt(r.replacementSpan.start+r.replacementSpan.length);i=new w.Range(e.lineNumber,e.column,n.lineNumber,n.column)}let a=[];return r.kindModifiers!==void 0&&r.kindModifiers.indexOf(`deprecated`)!==-1&&a.push(w.languages.CompletionItemTag.Deprecated),{uri:s,position:n,offset:c,range:i,label:r.name,insertText:r.name,sortText:r.sortText,kind:e.convertKind(r.kind),tags:a}})}}async resolveCompletionItem(t,n){let r=t,i=r.uri,a=r.position,o=r.offset,s=await(await this._worker(i)).getCompletionEntryDetails(i.toString(),o,r.label);return s?{uri:i,position:a,label:s.name,kind:e.convertKind(s.kind),detail:l(s.displayParts),documentation:{value:e.createDocumentationString(s)}}:r}static convertKind(e){switch(e){case R.primitiveType:case R.keyword:return w.languages.CompletionItemKind.Keyword;case R.variable:case R.localVariable:return w.languages.CompletionItemKind.Variable;case R.memberVariable:case R.memberGetAccessor:case R.memberSetAccessor:return w.languages.CompletionItemKind.Field;case R.function:case R.memberFunction:case R.constructSignature:case R.callSignature:case R.indexSignature:return w.languages.CompletionItemKind.Function;case R.enum:return w.languages.CompletionItemKind.Enum;case R.module:return w.languages.CompletionItemKind.Module;case R.class:return w.languages.CompletionItemKind.Class;case R.interface:return w.languages.CompletionItemKind.Interface;case R.warning:return w.languages.CompletionItemKind.File}return w.languages.CompletionItemKind.Property}static createDocumentationString(e){let t=l(e.documentation);if(e.tags)for(let n of e.tags)t+=`

${u(n)}`;return t}},M=class e extends O{constructor(){super(...arguments),this.signatureHelpTriggerCharacters=[`(`,`,`]}static _toSignatureHelpTriggerReason(e){switch(e.triggerKind){case w.languages.SignatureHelpTriggerKind.TriggerCharacter:return e.triggerCharacter?e.isRetrigger?{kind:`retrigger`,triggerCharacter:e.triggerCharacter}:{kind:`characterTyped`,triggerCharacter:e.triggerCharacter}:{kind:`invoked`};case w.languages.SignatureHelpTriggerKind.ContentChange:return e.isRetrigger?{kind:`retrigger`}:{kind:`invoked`};case w.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:`invoked`}}}async provideSignatureHelp(t,n,r,i){let a=t.uri,o=t.getOffsetAt(n),s=await this._worker(a);if(t.isDisposed())return;let c=await s.getSignatureHelpItems(a.toString(),o,{triggerReason:e._toSignatureHelpTriggerReason(i)});if(!c||t.isDisposed())return;let u={activeSignature:c.selectedItemIndex,activeParameter:c.argumentIndex,signatures:[]};return c.items.forEach(e=>{let t={label:``,parameters:[]};t.documentation={value:l(e.documentation)},t.label+=l(e.prefixDisplayParts),e.parameters.forEach((n,r,i)=>{let a=l(n.displayParts),o={label:a,documentation:{value:l(n.documentation)}};t.label+=a,t.parameters.push(o),r<i.length-1&&(t.label+=l(e.separatorDisplayParts))}),t.label+=l(e.suffixDisplayParts),u.signatures.push(t)}),{value:u,dispose(){}}}},N=class extends O{async provideHover(e,t,n){let r=e.uri,i=e.getOffsetAt(t),a=await this._worker(r);if(e.isDisposed())return;let o=await a.getQuickInfoAtPosition(r.toString(),i);if(!o||e.isDisposed())return;let s=l(o.documentation),c=o.tags?o.tags.map(e=>u(e)).join(`  

`):``,d=l(o.displayParts);return{range:this._textSpanToRange(e,o.textSpan),contents:[{value:"```typescript\n"+d+"\n```\n"},{value:s+(c?`

`+c:``)}]}}},P=class extends O{async provideDocumentHighlights(e,t,n){let r=e.uri,i=e.getOffsetAt(t),a=await this._worker(r);if(e.isDisposed())return;let o=await a.getDocumentHighlights(r.toString(),i,[r.toString()]);if(!(!o||e.isDisposed()))return o.flatMap(t=>t.highlightSpans.map(t=>({range:this._textSpanToRange(e,t.textSpan),kind:t.kind===`writtenReference`?w.languages.DocumentHighlightKind.Write:w.languages.DocumentHighlightKind.Text})))}},F=class extends O{constructor(e,t){super(t),this._libFiles=e}async provideDefinition(e,t,n){let r=e.uri,i=e.getOffsetAt(t),a=await this._worker(r);if(e.isDisposed())return;let o=await a.getDefinitionAtPosition(r.toString(),i);if(!o||e.isDisposed()||(await this._libFiles.fetchLibFilesIfNecessary(o.map(e=>w.Uri.parse(e.fileName))),e.isDisposed()))return;let s=[];for(let e of o){let t=this._libFiles.getOrCreateModel(e.fileName);t&&s.push({uri:t.uri,range:this._textSpanToRange(t,e.textSpan)})}return s}},I=class extends O{constructor(e,t){super(t),this._libFiles=e}async provideReferences(e,t,n,r){let i=e.uri,a=e.getOffsetAt(t),o=await this._worker(i);if(e.isDisposed())return;let s=await o.getReferencesAtPosition(i.toString(),a);if(!s||e.isDisposed()||(await this._libFiles.fetchLibFilesIfNecessary(s.map(e=>w.Uri.parse(e.fileName))),e.isDisposed()))return;let c=[];for(let e of s){let t=this._libFiles.getOrCreateModel(e.fileName);t&&c.push({uri:t.uri,range:this._textSpanToRange(t,e.textSpan)})}return c}},L=class extends O{async provideDocumentSymbols(e,t){let n=e.uri,r=await this._worker(n);if(e.isDisposed())return;let i=await r.getNavigationTree(n.toString());if(!i||e.isDisposed())return;let a=(t,n)=>({name:t.text,detail:``,kind:z[t.kind]||w.languages.SymbolKind.Variable,range:this._textSpanToRange(e,t.spans[0]),selectionRange:this._textSpanToRange(e,t.spans[0]),tags:[],children:t.childItems?.map(e=>a(e,t.text)),containerName:n});return i.childItems?i.childItems.map(e=>a(e)):[]}},R=class{static#e=this.unknown=``;static#t=this.keyword=`keyword`;static#n=this.script=`script`;static#r=this.module=`module`;static#i=this.class=`class`;static#a=this.interface=`interface`;static#o=this.type=`type`;static#s=this.enum=`enum`;static#c=this.variable=`var`;static#l=this.localVariable=`local var`;static#u=this.function=`function`;static#d=this.localFunction=`local function`;static#f=this.memberFunction=`method`;static#p=this.memberGetAccessor=`getter`;static#m=this.memberSetAccessor=`setter`;static#h=this.memberVariable=`property`;static#g=this.constructorImplementation=`constructor`;static#_=this.callSignature=`call`;static#v=this.indexSignature=`index`;static#y=this.constructSignature=`construct`;static#b=this.parameter=`parameter`;static#x=this.typeParameter=`type parameter`;static#S=this.primitiveType=`primitive type`;static#C=this.label=`label`;static#w=this.alias=`alias`;static#T=this.const=`const`;static#E=this.let=`let`;static#D=this.warning=`warning`},z=Object.create(null),z[R.module]=w.languages.SymbolKind.Module,z[R.class]=w.languages.SymbolKind.Class,z[R.enum]=w.languages.SymbolKind.Enum,z[R.interface]=w.languages.SymbolKind.Interface,z[R.memberFunction]=w.languages.SymbolKind.Method,z[R.memberVariable]=w.languages.SymbolKind.Property,z[R.memberGetAccessor]=w.languages.SymbolKind.Property,z[R.memberSetAccessor]=w.languages.SymbolKind.Property,z[R.variable]=w.languages.SymbolKind.Variable,z[R.const]=w.languages.SymbolKind.Variable,z[R.localVariable]=w.languages.SymbolKind.Variable,z[R.variable]=w.languages.SymbolKind.Variable,z[R.function]=w.languages.SymbolKind.Function,z[R.localFunction]=w.languages.SymbolKind.Function,B=class extends O{static _convertOptions(e){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:2,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}}_convertTextChanges(e,t){return{text:t.newText,range:this._textSpanToRange(e,t.span)}}},V=class extends B{constructor(){super(...arguments),this.canFormatMultipleRanges=!1}async provideDocumentRangeFormattingEdits(e,t,n,r){let i=e.uri,a=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),o=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),s=await this._worker(i);if(e.isDisposed())return;let c=await s.getFormattingEditsForRange(i.toString(),a,o,B._convertOptions(n));if(!(!c||e.isDisposed()))return c.map(t=>this._convertTextChanges(e,t))}},H=class extends B{get autoFormatTriggerCharacters(){return[`;`,`}`,`
`]}async provideOnTypeFormattingEdits(e,t,n,r,i){let a=e.uri,o=e.getOffsetAt(t),s=await this._worker(a);if(e.isDisposed())return;let c=await s.getFormattingEditsAfterKeystroke(a.toString(),o,n,B._convertOptions(r));if(!(!c||e.isDisposed()))return c.map(t=>this._convertTextChanges(e,t))}},U=class extends B{async provideCodeActions(e,t,n,r){let i=e.uri,a=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),o=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),s=B._convertOptions(e.getOptions()),c=n.markers.filter(e=>e.code).map(e=>e.code).map(Number),l=await this._worker(i);if(e.isDisposed())return;let u=await l.getCodeFixesAtPosition(i.toString(),a,o,c,s);return!u||e.isDisposed()?{actions:[],dispose:()=>{}}:{actions:u.filter(e=>e.changes.filter(e=>e.isNewFile).length===0).map(t=>this._tsCodeFixActionToMonacoCodeAction(e,n,t)),dispose:()=>{}}}_tsCodeFixActionToMonacoCodeAction(e,t,n){let r=[];for(let t of n.changes)for(let n of t.textChanges)r.push({resource:e.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(e,n.span),text:n.newText}});return{title:n.description,edit:{edits:r},diagnostics:t.markers,kind:`quickfix`}}},W=class extends O{constructor(e,t){super(t),this._libFiles=e}async provideRenameEdits(e,t,n,r){let i=e.uri,a=i.toString(),o=e.getOffsetAt(t),s=await this._worker(i);if(e.isDisposed())return;let c=await s.getRenameInfo(a,o,{allowRenameOfImportPath:!1});if(c.canRename===!1)return{edits:[],rejectReason:c.localizedErrorMessage};if(c.fileToRename!==void 0)throw Error(`Renaming files is not supported.`);let l=await s.findRenameLocations(a,o,!1,!1,!1);if(!l||e.isDisposed())return;let u=[];for(let e of l){let t=this._libFiles.getOrCreateModel(e.fileName);if(t)u.push({resource:t.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(t,e.textSpan),text:n}});else throw Error(`Unknown file ${e.fileName}.`)}return{edits:u}}},G=class extends O{async provideInlayHints(e,t,n){let r=e.uri,i=r.toString(),a=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),o=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),s=await this._worker(r);return e.isDisposed()?null:{hints:(await s.provideInlayHints(i,a,o)).map(t=>({...t,label:t.text,position:e.getPositionAt(t.position),kind:this._convertHintKind(t.kind)})),dispose:()=>{}}}_convertHintKind(e){switch(e){case`Parameter`:return w.languages.InlayHintKind.Parameter;case`Type`:return w.languages.InlayHintKind.Type;default:return w.languages.InlayHintKind.Type}}}}))();export{O as Adapter,U as CodeActionAdaptor,F as DefinitionAdapter,A as DiagnosticsAdapter,P as DocumentHighlightAdapter,V as FormatAdapter,B as FormatHelper,H as FormatOnTypeAdapter,G as InlayHintsAdapter,R as Kind,k as LibFiles,L as OutlineAdapter,N as QuickInfoAdapter,I as ReferenceAdapter,W as RenameAdapter,M as SignatureHelpAdapter,j as SuggestAdapter,E as WorkerManager,c as flattenDiagnosticMessageText,p as getJavaScriptWorker,m as getTypeScriptWorker,f as setupJavaScript,d as setupTypeScript};