const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/abap.DpMh8n4d.js","assets/chunks/chunk.BqXodU4U.js","assets/chunks/apex.CBYuJaBq.js","assets/chunks/azcli.46mC3s0n.js","assets/chunks/bat.BiNRFAcx.js","assets/chunks/bicep.Bra81O6e.js","assets/chunks/cameligo.CIqHPksX.js","assets/chunks/clojure.CukCJSjs.js","assets/chunks/coffee.Dd9whuX1.js","assets/chunks/cpp.D7AEt7Is.js","assets/chunks/csharp.wkRTauaZ.js","assets/chunks/csp.MK6c4yj9.js","assets/chunks/css.BaxpdnoO.js","assets/chunks/cypher.DmPyMZRi.js","assets/chunks/dart.DS7Nhwue.js","assets/chunks/dockerfile.D2eJ7JVh.js","assets/chunks/ecl.CBegIcNT.js","assets/chunks/elixir.YIGhDf2i.js","assets/chunks/flow9.xCkpHvZG.js","assets/chunks/fsharp.B5e7ZSv7.js","assets/chunks/freemarker2.BjWRgxI8.js","assets/chunks/editor.api.BnhLjnoq.js","assets/chunks/go.B8Tc_MaV.js","assets/chunks/graphql.BKEYXTHn.js","assets/chunks/handlebars.YsjKMsPf.js","assets/chunks/hcl.B6AXL0RJ.js","assets/chunks/html.BkKasrsQ.js","assets/chunks/ini.B8K8sBl8.js","assets/chunks/java.9HAcJHpN.js","assets/chunks/javascript.BQ-2lCem.js","assets/chunks/typescript.BTVI5l0Q.js","assets/chunks/julia.B4sS0sHo.js","assets/chunks/kotlin.BCUUvfR0.js","assets/chunks/less.DmxdpMHQ.js","assets/chunks/lexon.-h5Zg8QK.js","assets/chunks/lua.Z-V7kP5m.js","assets/chunks/liquid.CUIdqTJ5.js","assets/chunks/m3.CMF59xcM.js","assets/chunks/markdown.DddhgNMc.js","assets/chunks/mdx.D1H1Fehf.js","assets/chunks/mips.DvStThKp.js","assets/chunks/msdax.C-eoqIWm.js","assets/chunks/mysql.biybBdig.js","assets/chunks/objective-c.C4p-I2A4.js","assets/chunks/pascal.jddvmI7n.js","assets/chunks/pascaligo.xJBT8_kr.js","assets/chunks/perl.DY9Y3dK7.js","assets/chunks/pgsql._CwCr0tv.js","assets/chunks/php.C7etKvNE.js","assets/chunks/pla.BB4B2U57.js","assets/chunks/postiats.C-YV7d8P.js","assets/chunks/powerquery.CgxQBw6m.js","assets/chunks/powershell.D6Cu_W6z.js","assets/chunks/protobuf.Dtf2N-v1.js","assets/chunks/pug.CRVguraw.js","assets/chunks/python.9AqzgffT.js","assets/chunks/qsharp.CqFdqwvZ.js","assets/chunks/r.C-RwHXs-.js","assets/chunks/razor.B1Ngcx8R.js","assets/chunks/redis.CMrzQvAS.js","assets/chunks/redshift.D9Cz8u23.js","assets/chunks/restructuredtext.ZMaDUIoz.js","assets/chunks/ruby.e_R4YBlz.js","assets/chunks/rust.D9NEpr-e.js","assets/chunks/sb.CKVfeAZ8.js","assets/chunks/scala.47DmFIfk.js","assets/chunks/scheme.BcvaavEB.js","assets/chunks/scss.B4-NpKXg.js","assets/chunks/shell.Ds0LdjlB.js","assets/chunks/solidity.DoTc4MZV.js","assets/chunks/sophia.YiD55tbI.js","assets/chunks/sparql.DndYCACx.js","assets/chunks/sql.BbAsHBz8.js","assets/chunks/st.BsJbrd1u.js","assets/chunks/swift.DkSm-Bnr.js","assets/chunks/systemverilog.MfGmu8Kl.js","assets/chunks/tcl.Wh-bCz-a.js","assets/chunks/twig.DNc-SFdQ.js","assets/chunks/typescript.C3H-qgi9.js","assets/chunks/typespec.fQAu4VDJ.js","assets/chunks/vb.Czsuhsfl.js","assets/chunks/wgsl.1mHWqPUd.js","assets/chunks/xml.DGRaUm2f.js","assets/chunks/yaml.BEXMb7Bi.js","assets/chunks/cssMode.CuhOimmP.js","assets/chunks/htmlMode.CWzJaWlY.js","assets/chunks/jsonMode.BvQZjsP4.js"])))=>i.map(i=>d[i]);
import{a as e,n as t,r as n,t as r}from"./chunk.BqXodU4U.js";import{n as i,t as a}from"./preload-helper.CPrT4D5T.js";import{r as o,t as s}from"./utils.Btv7ixBe.js";import{$ as c,$a as l,$c as u,$d as d,$f as f,$h as p,$i as m,$l as h,$m as ee,$n as te,$o as ne,$p as re,$r as ie,$s as ae,$t as oe,$u as se,A as ce,Aa as le,Ac as ue,Ad as de,Af as fe,Ah as pe,Ai as me,Al as he,Am as ge,An as _e,Ao as ve,Ap as ye,Ar as be,As as xe,At as Se,Au as Ce,B as we,Ba as Te,Bc as Ee,Bd as De,Bf as Oe,Bh as ke,Bi as Ae,Bl as je,Bm as Me,Bn as Ne,Bo as Pe,Bp as Fe,Br as Ie,Bs as Le,Bt as Re,Bu as ze,C as Be,Ca as Ve,Cc as He,Cd as Ue,Cf as We,Ch as Ge,Ci as Ke,Cl as qe,Cm as Je,Cn as Ye,Co as Xe,Cp as Ze,Cr as Qe,Cs as $e,Ct as et,Cu as tt,D as nt,Da as rt,Dc as it,Dd as at,Df as ot,Dh as st,Di as ct,Dl as lt,Dm as ut,Dn as dt,Do as ft,Dp as pt,Dr as mt,Ds as ht,Dt as gt,Du as _t,E as vt,Ea as yt,Ec as bt,Ed as g,Ef as xt,Eh as St,Ei as Ct,El as wt,Em as Tt,En as Et,Eo as Dt,Ep as Ot,Er as kt,Es as At,Et as jt,Eu as Mt,F as Nt,Fa as Pt,Fc as Ft,Fd as It,Ff as Lt,Fh as Rt,Fi as zt,Fl as Bt,Fm as Vt,Fn as Ht,Fo as Ut,Fp as Wt,Fr as Gt,Fs as Kt,Ft as qt,Fu as Jt,G as Yt,Ga as Xt,Gc as Zt,Gd as Qt,Gf as $t,Gh as en,Gi as tn,Gl as nn,Gm as rn,Gn as an,Go as on,Gp as sn,Gr as cn,Gs as ln,Gt as un,Gu as dn,H as fn,Ha as pn,Hc as mn,Hd as hn,Hf as gn,Hh as _n,Hi as vn,Hl as yn,Hm as bn,Hn as xn,Ho as Sn,Hp as Cn,Hr as wn,Hs as Tn,Ht as En,Hu as _,I as Dn,Ia as On,Ic as kn,Id as An,If as jn,Ih as Mn,Ii as Nn,Il as Pn,Im as Fn,In,Io as Ln,Ip as Rn,Ir as zn,Is as Bn,It as Vn,Iu as Hn,J as Un,Ja as Wn,Jc as Gn,Jd as Kn,Jf as qn,Jh as Jn,Ji as Yn,Jl as Xn,Jm as Zn,Jn as Qn,Jo as $n,Jp as er,Jr as tr,Js as nr,Jt as rr,Ju as v,K as ir,Ka as ar,Kc as or,Kd as sr,Kf as cr,Kh as lr,Ki as ur,Kl as dr,Km as fr,Kn as pr,Ko as mr,Kp as hr,Kr as gr,Ks as _r,Kt as vr,Ku as yr,L as br,La as xr,Lc as Sr,Ld as Cr,Lf as y,Lh as wr,Li as Tr,Ll as Er,Lm as Dr,Ln as Or,Lo as kr,Lp as Ar,Lr as jr,Ls as Mr,Lt as Nr,Lu as Pr,M as Fr,Ma as Ir,Mc as Lr,Md as Rr,Mf as zr,Mh as Br,Mi as Vr,Ml as Hr,Mm as Ur,Mn as Wr,Mo as Gr,Mp as Kr,Mr as qr,Ms as Jr,Mt as Yr,Mu as Xr,N as Zr,Na as Qr,Nc as $r,Nd as ei,Nf as ti,Nh as ni,Ni as ri,Nl as ii,Nm as ai,Nn as oi,No as si,Np as ci,Nr as li,Ns as ui,Nt as di,Nu as fi,O as pi,Oa as mi,Oc as hi,Od as gi,Of as _i,Oh as vi,Oi as yi,Ol as bi,Om as xi,On as Si,Oo as Ci,Op as wi,Or as Ti,Os as Ei,Ot as Di,Ou as Oi,P as ki,Pa as Ai,Pc as ji,Pd as Mi,Pf as Ni,Ph as Pi,Pi as Fi,Pl as Ii,Pm as Li,Pn as Ri,Po as zi,Pp as Bi,Pr as Vi,Ps as Hi,Pt as Ui,Pu as Wi,Q as Gi,Qa as Ki,Qc as qi,Qd as Ji,Qf as Yi,Qh as Xi,Qi as Zi,Ql as Qi,Qm as $i,Qn as ea,Qo as ta,Qp as na,Qr as ra,Qs as ia,Qt as aa,Qu as oa,R as sa,Ra as ca,Rc as la,Rd as b,Rf as ua,Rh as da,Ri as fa,Rl as pa,Rm as ma,Rn as ha,Ro as ga,Rp as _a,Rr as va,Rs as ya,Rt as ba,Ru as xa,S as Sa,Sa as Ca,Sc as wa,Sd as Ta,Sf as x,Sh as Ea,Si as Da,Sl as Oa,Sm as ka,Sn as Aa,So as ja,Sp as Ma,Sr as Na,Ss as Pa,St as Fa,Su as Ia,T as La,Ta as Ra,Tc as za,Td as Ba,Tf as Va,Th as Ha,Ti as Ua,Tl as Wa,Tm as Ga,Tn as Ka,To as qa,Tp as Ja,Tr as Ya,Ts as Xa,Tt as Za,Tu as Qa,U as $a,Ua as eo,Uc as to,Ud as no,Uf as ro,Uh as io,Ui as ao,Ul as oo,Um as so,Un as co,Uo as lo,Up as uo,Ur as fo,Us as po,Ut as mo,Uu as S,V as ho,Va as go,Vc as _o,Vd as C,Vf as w,Vh as vo,Vi as yo,Vl as bo,Vm as xo,Vn as So,Vo as Co,Vp as wo,Vr as To,Vs as Eo,Vt as Do,Vu as T,W as Oo,Wa as ko,Wc as Ao,Wd as jo,Wf as Mo,Wh as No,Wi as Po,Wl as Fo,Wm as Io,Wn as Lo,Wo as Ro,Wp as zo,Wr as Bo,Ws as Vo,Wt as Ho,Wu as Uo,X as Wo,Xa as Go,Xc as Ko,Xd as qo,Xf as Jo,Xh as Yo,Xi as Xo,Xl as Zo,Xm as Qo,Xn as $o,Xo as es,Xp as ts,Xr as ns,Xs as rs,Xt as is,Xu as E,Y as as,Ya as os,Yc as ss,Yd as cs,Yf as ls,Yh as us,Yi as ds,Yl as fs,Ym as ps,Yn as ms,Yo as hs,Yp as gs,Yr as _s,Ys as vs,Yt as ys,Yu as D,Z as bs,Za as xs,Zc as Ss,Zd as Cs,Zf as ws,Zh as Ts,Zi as Es,Zl as Ds,Zm as O,Zn as Os,Zo as ks,Zp as As,Zr as js,Zs as Ms,Zt as Ns,Zu as k,_ as Ps,_a as Fs,_c as Is,_d as Ls,_f as Rs,_g as A,_h as zs,_i as Bs,_l as Vs,_m as Hs,_n as Us,_o as Ws,_p as Gs,_r as Ks,_s as qs,_t as Js,_u as Ys,a as Xs,aa as Zs,ac as Qs,ad as $s,af as ec,ag as tc,ah as j,ai as nc,al as rc,am as ic,an as ac,ao as oc,ap as sc,ar as cc,as as lc,at as uc,au as dc,b as fc,ba as pc,bc as mc,bd as hc,bf as gc,bh as _c,bi as vc,bl as yc,bm as bc,bn as xc,bo as Sc,bp as Cc,br as wc,bs as Tc,bt as Ec,bu as Dc,c as Oc,ca as kc,cc as Ac,cd as jc,cf as Mc,cg as M,ch as N,ci as Nc,cl as Pc,cm as Fc,cn as Ic,co as Lc,cp as Rc,cr as zc,cs as Bc,ct as Vc,cu as Hc,d as Uc,da as Wc,dc as Gc,dd as Kc,df as qc,dg as Jc,dh as Yc,di as Xc,dl as Zc,dm as Qc,dn as $c,do as el,dp as tl,dr as nl,ds as rl,dt as il,du as al,ea as ol,ec as sl,ed as cl,ef as ll,eg as ul,eh as dl,ei as fl,el as pl,em as ml,en as hl,eo as gl,ep as _l,er as vl,es as yl,et as bl,eu as xl,f as Sl,fa as Cl,fc as wl,fd as Tl,ff as El,fg as Dl,fh as Ol,fi as kl,fl as Al,fm as jl,fn as Ml,fo as Nl,fp as Pl,fr as Fl,fs as Il,ft as Ll,fu as Rl,g as zl,ga as Bl,gc as Vl,gd as Hl,gf as Ul,gg as P,gh as Wl,gi as Gl,gl as Kl,gm as ql,gn as Jl,go as Yl,gp as Xl,gr as Zl,gs as Ql,gt as $l,gu as eu,h as tu,ha as nu,hc as ru,hd as iu,hf as au,hg as ou,hh as su,hi as cu,hl as lu,hm as uu,hn as du,ho as fu,hp as pu,hr as mu,hs as hu,ht as gu,hu as _u,i as vu,ia as yu,ic as bu,id as xu,if as Su,ig as Cu,ih as wu,ii as Tu,il as Eu,im as Du,in as Ou,io as ku,ip as Au,ir as ju,is as Mu,it as Nu,iu as Pu,j as Fu,ja as Iu,jc as Lu,jd as Ru,jf as zu,jh as Bu,ji as Vu,jl as Hu,jm as Uu,jn as Wu,jo as Gu,jp as Ku,jr as qu,js as Ju,jt as Yu,ju as Xu,k as Zu,ka as Qu,kc as $u,kd as ed,kf as td,kh as nd,ki as rd,kl as id,km as ad,kn as od,ko as sd,kp as cd,kr as ld,ks as ud,kt as dd,ku as fd,l as pd,la as md,lc as hd,ld as gd,lf as F,lg as _d,lh as vd,li as yd,ll as bd,lm as xd,ln as Sd,lo as Cd,lp as wd,lr as Td,ls as Ed,lt as Dd,lu as Od,m as kd,ma as Ad,mc as jd,md as Md,mf as Nd,mg as Pd,mh as I,mi as Fd,ml as Id,mm as Ld,mn as Rd,mo as zd,mp as Bd,mr as Vd,ms as Hd,mt as Ud,mu as Wd,n as Gd,na as Kd,nc as qd,nd as Jd,nf as Yd,ng as Xd,nh as Zd,ni as Qd,nl as $d,nm as ef,nn as tf,no as nf,np as rf,nr as af,ns as of,nt as sf,nu as cf,o as lf,oa as L,oc as uf,od as df,of as ff,og as pf,oh as mf,oi as hf,ol as gf,om as _f,on as vf,oo as yf,op as bf,or as xf,os as Sf,ot as Cf,ou as wf,p as Tf,pa as Ef,pc as Df,pd as Of,pf as R,pg as kf,ph as z,pi as Af,pl as jf,pm as Mf,pn as Nf,po as Pf,pp as Ff,pr as If,ps as Lf,pt as Rf,pu as zf,q as Bf,qa as Vf,qc as Hf,qd as B,qf as Uf,qh as Wf,qi as Gf,ql as Kf,qm as qf,qn as Jf,qo as Yf,qp as Xf,qr as Zf,qs as Qf,qt as $f,qu as ep,r as tp,ra as V,rc as np,rd as rp,rf as H,rg as ip,rh as ap,ri as op,rl as sp,rm as cp,rn as lp,ro as up,rp as dp,rr as fp,rs as pp,rt as mp,ru as hp,s as gp,sa as _p,sc as vp,sd as yp,sf as U,sg as bp,sh as xp,si as Sp,sl as Cp,sm as wp,sn as Tp,so as Ep,sp as Dp,sr as Op,ss as kp,st as Ap,su as jp,t as Mp,ta as Np,tc as Pp,td as Fp,tf as Ip,tg as Lp,th as W,ti as Rp,tl as zp,tm as Bp,tn as Vp,to as Hp,tp as Up,tr as Wp,ts as Gp,tt as Kp,tu as qp,u as Jp,ua as Yp,uc as Xp,ud as Zp,uf as Qp,ug as $p,uh as em,ui as tm,ul as nm,um as rm,un as im,uo as am,up as G,ur as om,us as sm,ut as cm,uu as lm,v as um,va as dm,vc as fm,vd as pm,vf as mm,vg as K,vh as hm,vi as gm,vl as _m,vm,vn as ym,vo as bm,vp as xm,vr as Sm,vs as Cm,vt as wm,vu as Tm,w as Em,wa as Dm,wc as Om,wd as km,wf as Am,wh as jm,wi as Mm,wl as Nm,wm as Pm,wn as Fm,wo as Im,wp as Lm,wr as Rm,ws as zm,wt as Bm,wu as Vm,x as Hm,xa as Um,xc as Wm,xd as Gm,xf as Km,xh as qm,xi as Jm,xl as Ym,xm as Xm,xn as Zm,xo as Qm,xp as $m,xr as eh,xs as th,xt as nh,xu as rh,y as ih,ya as ah,yc as oh,yd as sh,yf as ch,yh as q,yi as lh,yl as J,ym as uh,yn as dh,yo as fh,yp as ph,yr as mh,ys as hh,yt as gh,yu as _h,z as vh,za as yh,zc as Y,zd as bh,zf as xh,zh as Sh,zi as Ch,zl as wh,zm as Th,zn as Eh,zo as Dh,zp as Oh,zr as kh,zs as Ah,zt as jh,zu as X}from"./editor.api.BnhLjnoq.js";import{t as Mh}from"./monaco.contribution.DnUq578-.js";function Nh(e,t,n){return e.get(ec).listDiffEditors().find(e=>{let r=e.getModifiedEditor(),i=e.getOriginalEditor();return r&&r.getModel()?.uri.toString()===n.toString()&&i&&i.getModel()?.uri.toString()===t.toString()})||null}function Ph(e){let t=e.get(ec).listDiffEditors(),n=Va();if(n){for(let e of t)if(e.getContainerDomNode().contains(n))return e}return null}var Fh,Ih,Lh,Rh,zh,Bh,Vh,Hh,Uh,Wh,Gh,Kh,qh=t((()=>{y(),Kn(),v(),ff(),Lo(),yc(),P(),de(),qp(),C(),kh(),Fh=class extends km{constructor(){super({id:`diffEditor.toggleCollapseUnchangedRegions`,title:K(82,`Toggle Collapse Unchanged Regions`),icon:B.map,toggled:b.has(`config.diffEditor.hideUnchangedRegions.enabled`),precondition:b.has(`isInDiffEditor`),menu:{when:b.has(`isInDiffEditor`),id:g.EditorTitle,order:22,group:`navigation`}})}run(e,...t){let n=e.get(xl),r=!n.getValue(`diffEditor.hideUnchangedRegions.enabled`);n.updateValue(`diffEditor.hideUnchangedRegions.enabled`,r)}},Ih=class extends km{constructor(){super({id:`diffEditor.toggleShowMovedCodeBlocks`,title:K(83,`Toggle Show Moved Code Blocks`),precondition:b.has(`isInDiffEditor`)})}run(e,...t){let n=e.get(xl),r=!n.getValue(`diffEditor.experimental.showMoves`);n.updateValue(`diffEditor.experimental.showMoves`,r)}},Lh=class extends km{constructor(){super({id:`diffEditor.toggleUseInlineViewWhenSpaceIsLimited`,title:K(84,`Toggle Use Inline View When Space Is Limited`),precondition:b.has(`isInDiffEditor`)})}run(e,...t){let n=e.get(xl),r=!n.getValue(`diffEditor.useInlineViewWhenSpaceIsLimited`);n.updateValue(`diffEditor.useInlineViewWhenSpaceIsLimited`,r)}},Rh=K(85,`Diff Editor`),zh=class extends Uo{constructor(){super({id:`diffEditor.switchSide`,title:K(86,`Switch Side`),icon:B.arrowSwap,precondition:b.has(`isInDiffEditor`),f1:!0,category:Rh})}runEditorCommand(e,t,n){let r=Ph(e);if(r instanceof co){if(n&&n.dryRun)return{destinationSelection:r.mapToOtherSide().destinationSelection};r.switchSide()}}},Bh=class extends Uo{constructor(){super({id:`diffEditor.exitCompareMove`,title:K(87,`Exit Compare Move`),icon:B.close,precondition:J.comparingMovedCode,f1:!1,category:Rh,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...n){let r=Ph(e);r instanceof co&&r.exitCompareMove()}},Vh=class extends Uo{constructor(){super({id:`diffEditor.collapseAllUnchangedRegions`,title:K(88,`Collapse All Unchanged Regions`),icon:B.fold,precondition:b.has(`isInDiffEditor`),f1:!0,category:Rh})}runEditorCommand(e,t,...n){let r=Ph(e);r instanceof co&&r.collapseAllUnchangedRegions()}},Hh=class extends Uo{constructor(){super({id:`diffEditor.showAllUnchangedRegions`,title:K(89,`Show All Unchanged Regions`),icon:B.unfold,precondition:b.has(`isInDiffEditor`),f1:!0,category:Rh})}runEditorCommand(e,t,...n){let r=Ph(e);r instanceof co&&r.showAllUnchangedRegions()}},Uh=class extends km{constructor(){super({id:`diffEditor.revert`,title:K(90,`Revert`),f1:!1,category:Rh})}run(e,t){let n=Nh(e,t.originalUri,t.modifiedUri);n instanceof co&&n.revertRangeMappings(t.mapping.innerChanges??[])}},Wh=K(91,`Accessible Diff Viewer`),Gh=class e extends km{static#e=this.id=`editor.action.accessibleDiffViewer.next`;constructor(){super({id:e.id,title:K(92,`Go to Next Difference`),category:Wh,precondition:b.has(`isInDiffEditor`),keybinding:{primary:65,weight:100},f1:!0})}run(e){Ph(e)?.accessibleDiffViewerNext()}},Kh=class e extends km{static#e=this.id=`editor.action.accessibleDiffViewer.prev`;constructor(){super({id:e.id,title:K(93,`Go to Previous Difference`),category:Wh,precondition:b.has(`isInDiffEditor`),keybinding:{primary:1089,weight:100},f1:!0})}run(e){Ph(e)?.accessibleDiffViewerPrev()}}})),Jh=t((()=>{Kn(),qh(),yc(),P(),de(),jo(),C(),kh(),Rr(Fh),Rr(Ih),Rr(Lh),gi.appendMenuItem(g.EditorTitle,{command:{id:new Lh().desc.id,title:A(116,`Use Inline View When Space Is Limited`),toggled:b.has(`config.diffEditor.useInlineViewWhenSpaceIsLimited`),precondition:b.has(`isInDiffEditor`)},order:11,group:`1_diff`,when:b.and(J.diffEditorRenderSideBySideInlineBreakpointReached,b.has(`isInDiffEditor`))}),gi.appendMenuItem(g.EditorTitle,{command:{id:new Ih().desc.id,title:A(117,`Show Moved Code Blocks`),icon:B.move,toggled:Cr.create(`config.diffEditor.experimental.showMoves`,!0),precondition:b.has(`isInDiffEditor`)},order:10,group:`1_diff`,when:b.has(`isInDiffEditor`)}),Rr(Uh);for(let e of[{icon:B.arrowRight,key:J.diffEditorInlineMode.toNegated()},{icon:B.discard,key:J.diffEditorInlineMode}])gi.appendMenuItem(g.DiffEditorHunkToolbar,{command:{id:new Uh().desc.id,title:A(118,`Revert Block`),icon:e.icon},when:b.and(J.diffEditorModifiedWritable,e.key),order:5,group:`primary`}),gi.appendMenuItem(g.DiffEditorSelectionToolbar,{command:{id:new Uh().desc.id,title:A(119,`Revert Selection`),icon:e.icon},when:b.and(J.diffEditorModifiedWritable,e.key),order:5,group:`primary`});Rr(zh),Rr(Bh),Rr(Vh),Rr(Hh),gi.appendMenuItem(g.EditorTitle,{command:{id:Gh.id,title:A(120,`Open Accessible Diff Viewer`),precondition:b.has(`isInDiffEditor`)},order:10,group:`2_diff`,when:b.and(J.accessibleDiffViewerVisible.negate(),b.has(`isInDiffEditor`))}),hn.registerCommandAlias(`editor.action.diffReview.next`,Gh.id),Rr(Gh),hn.registerCommandAlias(`editor.action.diffReview.prev`,Kh.id),Rr(Kh)})),Yh=t((()=>{})),Xh,Zh,Qh,$h,eg,tg,ng,rg,ig,ag=t((()=>{qc(),Fd(),ni(),Yh(),v(),ze(),yc(),P(),C(),Xh=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Zh=function(e,t){return function(n,r){t(n,r,e)}},$h=new De(`selectionAnchorSet`,!1),eg=class{static#e=Qh=this;static#t=this.ID=`editor.contrib.selectionAnchorController`;static get(e){return e.getContribution(Qh.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=$h.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){let e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(X.fromPositions(e,e),{description:`selection-anchor`,stickiness:1,hoverMessage:new Af().appendText(A(791,`Selection Anchor`)),className:`selection-anchor`})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),Qp(A(792,`Anchor set at {0}:{1}`,e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){let t=this.editor.getPosition();this.editor.setSelection(X.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){let e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},eg=Qh=Xh([Zh(1,bh)],eg),tg=class extends S{constructor(){super({id:`editor.action.setSelectionAnchor`,label:K(793,`Set Selection Anchor`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2080),weight:100}})}async run(e,t){eg.get(t)?.setSelectionAnchor()}},ng=class extends S{constructor(){super({id:`editor.action.goToSelectionAnchor`,label:K(794,`Go to Selection Anchor`),precondition:$h})}async run(e,t){eg.get(t)?.goToSelectionAnchor()}},rg=class extends S{constructor(){super({id:`editor.action.selectFromAnchorToCursor`,label:K(795,`Select from Anchor to Cursor`),precondition:$h,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2089),weight:100}})}async run(e,t){eg.get(t)?.selectFromAnchorToCursor()}},ig=class extends S{constructor(){super({id:`editor.action.cancelSelectionAnchor`,label:K(796,`Cancel Selection Anchor`),precondition:$h,kbOpts:{kbExpr:J.editorTextFocus,primary:9,weight:100}})}async run(e,t){eg.get(t)?.cancelSelectionAnchor()}},k(eg.ID,eg,4),D(tg),D(ng),D(rg),D(ig)})),og=t((()=>{})),sg,cg,lg,ug,dg,fg,pg=t((()=>{O(),q(),og(),v(),Su(),_(),ze(),yc(),zf(),md(),P(),de(),Ei(),Yf(),sg=Y(`editorOverviewRuler.bracketMatchForeground`,`#A0A0A0`,A(797,`Overview ruler marker color for matching brackets.`)),cg=class extends S{constructor(){super({id:`editor.action.jumpToBracket`,label:K(799,`Go to Bracket`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:3165,weight:100}})}run(e,t){fg.get(t)?.jumpToBracket()}},lg=class extends S{constructor(){super({id:`editor.action.selectToBracket`,label:K(800,`Select to Bracket`),precondition:void 0,metadata:{description:K(801,`Select the text inside and including the brackets or curly braces`),args:[{name:`args`,schema:{type:`object`,properties:{selectBrackets:{type:`boolean`,default:!0}}}}]}})}run(e,t,n){let r=!0;n&&n.selectBrackets===!1&&(r=!1),fg.get(t)?.selectToBracket(r)}},ug=class extends S{constructor(){super({id:`editor.action.removeBrackets`,label:K(802,`Remove Brackets`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:2561,weight:100}})}run(e,t){fg.get(t)?.removeBrackets(this.id)}},dg=class{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}},fg=class e extends z{static#e=this.ID=`editor.contrib.bracketMatchingController`;static get(t){return t.getContribution(e.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new rn(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(80),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(e=>{this._matchBrackets!==`never`&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(e=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(e=>{e.hasChanged(80)&&(this._matchBrackets=this._editor.getOption(80),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getSelections().map(t=>{let n=t.getStartPosition(),r=e.bracketPairs.matchBracket(n),i=null;if(r)r[0].containsPosition(n)&&!r[1].containsPosition(n)?i=r[1].getStartPosition():r[1].containsPosition(n)&&(i=r[0].getStartPosition());else{let t=e.bracketPairs.findEnclosingBrackets(n);if(t)i=t[1].getStartPosition();else{let t=e.bracketPairs.findNextBracket(n);t&&t.range&&(i=t.range.getStartPosition())}}return i?new X(i.lineNumber,i.column,i.lineNumber,i.column):new X(n.lineNumber,n.column,n.lineNumber,n.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(r=>{let i=r.getStartPosition(),a=t.bracketPairs.matchBracket(i);if(!a&&(a=t.bracketPairs.findEnclosingBrackets(i),!a)){let e=t.bracketPairs.findNextBracket(i);e&&e.range&&(a=t.bracketPairs.matchBracket(e.range.getStartPosition()))}let o=null,s=null;if(a){a.sort(T.compareRangesUsingStarts);let[t,n]=a;if(o=e?t.getStartPosition():t.getEndPosition(),s=e?n.getEndPosition():n.getStartPosition(),n.containsPosition(i)){let e=o;o=s,s=e}}o&&s&&n.push(new X(o.lineNumber,o.column,s.lineNumber,s.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}removeBrackets(e){if(!this._editor.hasModel())return;let t=this._editor.getModel();this._editor.getSelections().forEach(n=>{let r=n.getPosition(),i=t.bracketPairs.matchBracket(r);i||=t.bracketPairs.findEnclosingBrackets(r),i&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:i[0],text:``},{range:i[1],text:``}]),this._editor.pushUndoStop())})}static#t=this._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=L.register({description:`bracket-match-overview`,stickiness:1,className:`bracket-match`,overviewRuler:{color:hs(sg),position:Rl.Center}});static#n=this._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=L.register({description:`bracket-match-no-overview`,stickiness:1,className:`bracket-match`});_updateBrackets(){if(this._matchBrackets===`never`)return;this._recomputeBrackets();let e=[],t=0;for(let n of this._lastBracketsData){let r=n.brackets;r&&(e[t++]={range:r[0],options:n.options},e[t++]={range:r[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}let t=this._editor.getSelections();if(t.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}let n=this._editor.getModel(),r=n.getVersionId(),i=[];this._lastVersionId===r&&(i=this._lastBracketsData);let a=[],o=0;for(let e=0,n=t.length;e<n;e++){let n=t[e];n.isEmpty()&&(a[o++]=n.getStartPosition())}a.length>1&&a.sort(H.compare);let s=[],c=0,l=0,u=i.length;for(let t=0,r=a.length;t<r;t++){let r=a[t];for(;l<u&&i[l].position.isBefore(r);)l++;if(l<u&&i[l].position.equals(r))s[c++]=i[l];else{let t=n.bracketPairs.matchBracket(r,20),i=e._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!t&&this._matchBrackets===`always`&&(t=n.bracketPairs.findEnclosingBrackets(r,20),i=e._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),s[c++]=new dg(r,t,i)}}this._lastBracketsData=s,this._lastVersionId=r}},k(fg.ID,fg,1),D(lg),D(cg),D(ug),gi.appendMenuItem(g.MenubarGoMenu,{group:`5_infile_nav`,command:{id:`editor.action.jumpToBracket`,title:A(798,`Go to &&Bracket`)},order:2})})),mg,hg=t((()=>{_(),ze(),mg=class{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;let n=this._selection.startLineNumber,r=this._selection.startColumn,i=this._selection.endColumn;if(!(this._isMovingLeft&&r===1)&&!(!this._isMovingLeft&&i===e.getLineMaxColumn(n)))if(this._isMovingLeft){let a=new T(n,r-1,n,r),o=e.getValueInRange(a);t.addEditOperation(a,null),t.addEditOperation(new T(n,i,n,i),o)}else{let a=new T(n,i,n,i+1),o=e.getValueInRange(a);t.addEditOperation(a,null),t.addEditOperation(new T(n,r,n,r),o)}}computeCursorState(e,t){return this._isMovingLeft?new X(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new X(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}})),gg,_g,vg,yg=t((()=>{v(),yc(),hg(),P(),gg=class extends S{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let n=[],r=t.getSelections();for(let e of r)n.push(new mg(e,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},_g=class extends gg{constructor(){super(!0,{id:`editor.action.moveCarretLeftAction`,label:K(803,`Move Selected Text Left`),precondition:J.writable})}},vg=class extends gg{constructor(){super(!1,{id:`editor.action.moveCarretRightAction`,label:K(804,`Move Selected Text Right`),precondition:J.writable})}},D(_g),D(vg)})),bg,xg=t((()=>{v(),Xr(),Oi(),_(),yc(),P(),bg=class extends S{constructor(){super({id:`editor.action.transposeLetters`,label:K(805,`Transpose Letters`),precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),r=[],i=t.getSelections();for(let e of i){if(!e.isEmpty())continue;let t=e.startLineNumber,i=e.startColumn,a=n.getLineMaxColumn(t);if(t===1&&(i===1||i===2&&a===2))continue;let o=i===a?e.getPosition():_t.rightPosition(n,e.getPosition().lineNumber,e.getPosition().column),s=_t.leftPosition(n,o),c=_t.leftPosition(n,s),l=n.getValueInRange(T.fromPositions(c,s)),u=n.getValueInRange(T.fromPositions(s,o)),d=T.fromPositions(c,o);r.push(new fd(d,u+l))}r.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop())}},D(bg)})),Sg,Cg=t((()=>{F(),Sg=Mc(`productService`)}));function wg(e,t){return{id:t,asString:async()=>e,asFile:()=>void 0,value:typeof e==`string`?e:void 0}}function Tg(e,t,n,r){let i={id:ta(),name:e,uri:t,data:n};return{id:r,asString:async()=>``,asFile:()=>i,value:void 0}}function Eg(e){return e.toLowerCase()}function Dg(e,t){return Og(Eg(e),t.map(Eg))}function Og(e,t){if(e===`*/*`)return t.length>0;if(t.includes(e))return!0;let n=e.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!n)return!1;let[r,i,a]=n;return a===`*`?t.some(e=>e.startsWith(i+`/`)):!1}var kg,Ag,jg=t((()=>{sn(),Ge(),ne(),kg=class{constructor(){this._entries=new Map}get size(){let e=0;for(let t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){let t=[...this._entries.keys()];return Ea.some(this,([e,t])=>t.asFile())&&t.push(`files`),Og(Eg(e),t)}get(e){return this._entries.get(this.toKey(e))?.[0]}append(e,t){let n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(let[e,t]of this._entries)for(let n of t)yield[e,n]}toKey(e){return Eg(e)}},Ag=Object.freeze({create:e=>Cn(e.map(e=>e.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>Ag.split(e).filter(e=>!e.startsWith(`#`))})})),Mg,Ng=t((()=>{Mg=class e{static#e=this.sep=`.`;static#t=this.None=new e(`@@none@@`);static#n=this.Empty=new e(``);constructor(e){this.value=e}equals(e){return this.value===e.value}contains(t){return this.equals(t)||this.value===``||t.value.startsWith(this.value+e.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...t){return new e((this.value?[this.value,...t]:t).join(e.sep))}}}));function Pg(e){if(ke&&typeof globalThis.vscode?.webUtils?.getPathForFile==`function`)return globalThis.vscode.webUtils.getPathForFile(e)}var Fg,Ig,Lg,Rg,zg=t((()=>{Rt(),An(),Fg={EDITORS:`CodeEditors`,FILES:`CodeFiles`,SYMBOLS:`application/vnd.code.symbols`,MARKERS:`application/vnd.code.diagnostics`,NOTEBOOK_CELL_OUTPUT:`notebook-cell-output`,SCM_HISTORY_ITEM:`scm-history-item`},Ig=class{},Lg={DragAndDropContribution:`workbench.contributions.dragAndDrop`},It.add(Lg.DragAndDropContribution,new Ig),Rg=class e{static#e=this.INSTANCE=new e;constructor(){}static getInstance(){return e.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}}}));function Bg(e){let t=new kg;for(let n of e.items){let e=n.type;if(n.kind===`string`){let r=new Promise(e=>n.getAsString(e));t.append(e,wg(r))}else if(n.kind===`file`){let r=n.getAsFile();r&&t.append(e,Vg(r))}}return t}function Vg(e){let t=Pg(e),n=t?Fc.parse(t):void 0;return Tg(e.name,n,async()=>new Uint8Array(await e.arrayBuffer()))}function Hg(e,t=!1){let n=Bg(e),r=n.get(Fi.INTERNAL_URI_LIST);if(r)n.replace(Xn.uriList,r);else if(t||!n.has(Xn.uriList)){let t=[];for(let n of e.items){let e=n.getAsFile();if(e){let n=Pg(e);try{n?t.push(Fc.file(n).toString()):t.push(Fc.parse(e.name,!0).toString())}catch{}}}t.length&&n.replace(Xn.uriList,wg(Ag.create(t)))}for(let e of Ug)n.delete(e);return n}var Ug,Wg=t((()=>{zt(),jg(),fs(),xd(),zg(),Ug=Object.freeze([Fg.EDITORS,Fg.FILES,Fi.RESOURCES,Fi.INTERNAL_URI_LIST])})),Gg=t((()=>{})),Kg,qg,Jg,Yg,Xg,Zg=t((()=>{y(),O(),Kn(),q(),Ga(),sr(),Gg(),_(),md(),F(),Kg=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},qg=function(e,t){return function(n,r){t(n,r,e)}},Jg=L.register({description:`inline-progress-widget`,stickiness:1,showIfCollapsed:!0,after:{content:`\xA0`,inlineClassName:`inline-editor-progress-decoration`,inlineClassNameAffectsLetterSpacing:!0}}),Yg=class e extends z{static#e=this.baseId=`editor.widget.inlineProgressWidget`;constructor(e,t,n,r,i){super(),this.typeId=e,this.editor=t,this.range=n,this.delegate=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(r),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=R(`.inline-progress-widget`),this.domNode.role=`button`,this.domNode.title=e;let t=R(`span.icon`);this.domNode.append(t),t.classList.add(...Qt.asClassNameArray(B.loading),`codicon-modifier-spin`);let n=()=>{let e=this.editor.getOption(75);this.domNode.style.height=`${e}px`,this.domNode.style.width=`${Math.ceil(.8*e)}px`};n(),this._register(this.editor.onDidChangeConfiguration(e=>{(e.hasChanged(61)||e.hasChanged(75))&&n()})),this._register(ch(this.domNode,Ul.CLICK,e=>{this.delegate.cancel()}))}getId(){return e.baseId+`.`+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}},Xg=class extends z{constructor(e,t,n){super(),this.id=e,this._editor=t,this._instantiationService=n,this._showDelay=500,this._showPromise=this._register(new su),this._currentWidget=this._register(new su),this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(e,t,n,r,i){let a=this._operationIdPool++;this._currentOperation=a,this.clear(),this._showPromise.value=ps(()=>{let n=T.fromPositions(e);this._currentDecorations.set([{range:n,options:Jg}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(Yg,this.id,this._editor,n,t,r))},i??this._showDelay);try{return await n}finally{this._currentOperation===a&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}},Xg=Kg([qg(2,U)],Xg)})),Qg=t((()=>{})),$g,e_,t_,n_,r_,i_=t((()=>{nc(),qc(),N(),Fd(),q(),Qg(),v(),_(),Si(),P(),C(),Wu(),y(),$g=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},e_=function(e,t){return function(n,r){t(n,r,e)}},n_=class{static#e=t_=this;static#t=this.ID=`editor.contrib.messageController`;static#n=this.MESSAGE_VISIBLE=new De(`messageVisible`,!1,A(1274,`Whether the editor is currently showing an inline message`));static get(e){return e.getContribution(t_.ID)}constructor(e,t,n){this._openerService=n,this._messageWidget=new su,this._messageListeners=new I,this._mouseOverMessage=!1,this._editor=e,this._visible=t_.MESSAGE_VISIBLE.bindTo(t)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){if(Qp(Gl(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),Gl(e)){let n=this._messageListeners.add(hf(e,{actionHandler:(e,t)=>{this.closeMessage(),od(this._openerService,e,t.isTrusted)}}));this._messageWidget.value=new r_(this._editor,t,n.element)}else this._messageWidget.value=new r_(this._editor,t,e);this._messageListeners.add(mf.debounce(this._editor.onDidBlurEditorText,(e,t)=>t,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&xh(Va(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(ch(this._messageWidget.value.getDomNode(),Ul.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(ch(this._messageWidget.value.getDomNode(),Ul.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let n;this._messageListeners.add(this._editor.onMouseMove(e=>{e.target.position&&(n?n.containsPosition(e.target.position)||this.closeMessage():n=new T(t.lineNumber-3,1,e.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(r_.fadeOut(this._messageWidget.value))}},n_=t_=$g([e_(1,bh),e_(2,_e)],n_),E(new(dn.bindToContribution(n_.get))({id:`leaveEditorMessage`,precondition:n_.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}})),r_=class{static fadeOut(e){let t=()=>{e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener(`animationend`,t)},n=setTimeout(t,110);return e.getDomNode().addEventListener(`animationend`,t),e.getDomNode().classList.add(`fadeOut`),{dispose:t}}constructor(e,{lineNumber:t,column:n},r){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n},this._domNode=document.createElement(`div`),this._domNode.classList.add(`monaco-editor-overlaymessage`),this._domNode.style.marginLeft=`-6px`;let i=document.createElement(`div`);i.classList.add(`anchor`,`top`),this._domNode.appendChild(i);let a=document.createElement(`div`);typeof r==`string`?(a.classList.add(`message`),a.textContent=r):(r.classList.add(`message`),a.appendChild(r)),this._domNode.appendChild(a);let o=document.createElement(`div`);o.classList.add(`anchor`,`below`),this._domNode.appendChild(o),this._editor.addContentWidget(this),this._domNode.classList.add(`fadeIn`)}dispose(){this._editor.removeContentWidget(this)}getId(){return`messageoverlay`}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle(`below`,e===2)}},k(n_.ID,n_,4)}));async function a_(e){let t=e.get(Xn.uriList);if(!t)return[];let n=await t.asString(),r=[];for(let e of Ag.parse(n))try{r.push({uri:Fc.parse(e),originalText:e})}catch{}return r}var o_,s_,c_,l_,u_,d_,f_,p_,m_,h_,g_=t((()=>{sn(),jg(),Ng(),q(),fs(),ic(),Tl(),xd(),P(),xc(),Gr(),yu(),o_=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},s_=function(e,t){return function(n,r){t(n,r,e)}},c_=class{constructor(e){this.copyMimeTypes=[],this.kind=e,this.providedDropEditKinds=[this.kind],this.providedPasteEditKinds=[this.kind]}async provideDocumentPasteEdits(e,t,n,r,i){let a=await this.getEdit(n,i);if(a)return{edits:[{insertText:a.insertText,title:a.title,kind:a.kind,handledMimeType:a.handledMimeType,yieldTo:a.yieldTo}],dispose(){}}}async provideDocumentDropEdits(e,t,n,r){let i=await this.getEdit(n,r);if(i)return{edits:[{insertText:i.insertText,title:i.title,kind:i.kind,handledMimeType:i.handledMimeType,yieldTo:i.yieldTo}],dispose(){}}}},l_=class e extends c_{static#e=this.id=`text`;constructor(){super(Mg.Empty.append(`text`,`plain`)),this.id=e.id,this.dropMimeTypes=[Xn.text],this.pasteMimeTypes=[Xn.text]}async getEdit(e,t){let n=e.get(Xn.text);if(!n||e.has(Xn.uriList))return;let r=await n.asString();return{handledMimeType:Xn.text,title:A(918,`Insert Plain Text`),insertText:r,kind:this.kind}}},u_=class extends c_{constructor(){super(Mg.Empty.append(`uri`,`path`,`absolute`)),this.dropMimeTypes=[Xn.uriList],this.pasteMimeTypes=[Xn.uriList]}async getEdit(e,t){let n=await a_(e);if(!n.length||t.isCancellationRequested)return;let r=0,i=n.map(({uri:e,originalText:t})=>e.scheme===Du.file?e.fsPath:(r++,t)).join(` `),a;return a=r>0?n.length>1?A(919,`Insert Uris`):A(920,`Insert Uri`):n.length>1?A(921,`Insert Paths`):A(922,`Insert Path`),{handledMimeType:Xn.uriList,insertText:i,title:a,kind:this.kind}}},d_=class extends c_{constructor(e){super(Mg.Empty.append(`uri`,`path`,`relative`)),this._workspaceContextService=e,this.dropMimeTypes=[Xn.uriList],this.pasteMimeTypes=[Xn.uriList]}async getEdit(e,t){let n=await a_(e);if(!n.length||t.isCancellationRequested)return;let r=Oh(n.map(({uri:e})=>{let t=this._workspaceContextService.getWorkspaceFolder(e);return t?Hl(t.uri,e):void 0}));if(r.length)return{handledMimeType:Xn.uriList,insertText:r.join(` `),title:n.length>1?A(923,`Insert Relative Paths`):A(924,`Insert Relative Path`),kind:this.kind}}},d_=o_([s_(0,ym)],d_),f_=class{constructor(){this.kind=new Mg(`html`),this.providedPasteEditKinds=[this.kind],this.copyMimeTypes=[],this.pasteMimeTypes=[`text/html`],this._yieldTo=[{mimeType:Xn.text}]}async provideDocumentPasteEdits(e,t,n,r,i){if(r.triggerKind!==Ws.PasteAs&&!r.only?.contains(this.kind))return;let a=await n.get(`text/html`)?.asString();if(!(!a||i.isCancellationRequested))return{dispose(){},edits:[{insertText:a,yieldTo:this._yieldTo,title:A(925,`Insert HTML`),kind:this.kind}]}}},p_={scheme:`*`,hasAccessToAllModels:!0},m_=class extends z{constructor(e,t){super(),this._register(e.documentDropEditProvider.register(p_,new l_)),this._register(e.documentDropEditProvider.register(p_,new u_)),this._register(e.documentDropEditProvider.register(p_,new d_(t)))}},m_=o_([s_(0,V),s_(1,ym)],m_),h_=class extends z{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register(p_,new l_)),this._register(e.documentPasteEditProvider.register(p_,new u_)),this._register(e.documentPasteEditProvider.register(p_,new d_(t))),this._register(e.documentPasteEditProvider.register(p_,new f_))}},h_=o_([s_(0,V),s_(1,ym)],h_)}));function __(e,t){let n=[...e];for(;n.length>0;){let e=n.shift();if(!t(e))break;n.unshift(...e.children)}}var v_,y_,b_,x_,S_,C_,w_,T_,E_,D_,O_,k_=t((()=>{v_=class e{constructor(){this.value=``,this.pos=0}static#e=this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let t=this.pos,n=0,r=this.value.charCodeAt(t),i;if(i=e._table[r],typeof i==`number`)return this.pos+=1,{type:i,pos:t,len:1};if(e.isDigitCharacter(r)){i=8;do n+=1,r=this.value.charCodeAt(t+n);while(e.isDigitCharacter(r));return this.pos+=n,{type:i,pos:t,len:n}}if(e.isVariableCharacter(r)){i=9;do r=this.value.charCodeAt(t+ ++n);while(e.isVariableCharacter(r)||e.isDigitCharacter(r));return this.pos+=n,{type:i,pos:t,len:n}}i=10;do n+=1,r=this.value.charCodeAt(t+n);while(!isNaN(r)&&e._table[r]===void 0&&!e.isDigitCharacter(r)&&!e.isVariableCharacter(r));return this.pos+=n,{type:i,pos:t,len:n}}},y_=class{constructor(){this._children=[]}appendChild(e){return e instanceof b_&&this._children[this._children.length-1]instanceof b_?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){let{parent:n}=e,r=n.children.indexOf(e),i=n.children.slice(0);i.splice(r,1,...t),n._children=i,(function e(t,n){for(let r of t)r.parent=n,e(r.children,r)})(t,n)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof D_)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),``)}len(){return 0}},b_=class e extends y_{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new e(this.value)}},x_=class extends y_{},S_=class e extends x_{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof C_?this._children[0]:void 0}clone(){let t=new e(this.index);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map(e=>e.clone()),t}},C_=class e extends y_{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof b_&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let t=new e;return this.options.forEach(t.appendChild,t),t}},w_=class e extends y_{constructor(){super(...arguments),this.regexp=RegExp(``)}resolve(e){let t=this,n=!1,r=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(e=>e instanceof T_&&!!e.elseValue)&&(r=this._replace([])),r}_replace(e){let t=``;for(let n of this._children)if(n instanceof T_){let r=e[n.index]||``;r=n.resolve(r),t+=r}else t+=n.toString();return t}toString(){return``}clone(){let t=new e;return t.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?`i`:``)+(this.regexp.global?`g`:``)),t._children=this.children.map(e=>e.clone()),t}},T_=class e extends y_{constructor(e,t,n,r){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=r}resolve(e){return this.shorthandName===`upcase`?e?e.toLocaleUpperCase():``:this.shorthandName===`downcase`?e?e.toLocaleLowerCase():``:this.shorthandName===`capitalize`?e?e[0].toLocaleUpperCase()+e.substr(1):``:this.shorthandName===`pascalcase`?e?this._toPascalCase(e):``:this.shorthandName===`camelcase`?e?this._toCamelCase(e):``:e&&typeof this.ifValue==`string`?this.ifValue:!e&&typeof this.elseValue==`string`?this.elseValue:e||``}_toPascalCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map(e=>e.charAt(0).toUpperCase()+e.substr(1)).join(``):e}_toCamelCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map((e,t)=>t===0?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)).join(``):e}clone(){return new e(this.index,this.shorthandName,this.ifValue,this.elseValue)}},E_=class e extends x_{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||``)),t===void 0?!1:(this._children=[new b_(t)],!0)}clone(){let t=new e(this.name);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map(e=>e.clone()),t}},D_=class e extends y_{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof S_&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(r=>r===e?(n=!0,!1):(t+=r.len(),!0)),n?t:-1}fullLen(e){let t=0;return __([e],e=>(t+=e.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof S_&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof E_&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let t=new e;return this._children=this.children.map(e=>e.clone()),t}walk(e){__(this.children,e)}},O_=class{constructor(){this._scanner=new v_,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,`\\$&`)}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){let r=new D_;return this.parseFragment(e,r),this.ensureFinalTabstop(r,n??!1,t??!1),r}parseFragment(e,t){let n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););let r=new Map,i=[];t.walk(e=>(e instanceof S_&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0));let a=(e,n)=>{let i=r.get(e.index);if(!i)return;let o=new S_(e.index);o.transform=e.transform;for(let e of i){let t=e.clone();o.appendChild(t),t instanceof S_&&r.has(t.index)&&!n.has(t.index)&&(n.add(t.index),a(t,n),n.delete(t.index))}t.replace(e,[o])},o=new Set;for(let e of i)a(e,o);return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(e=>e.index===0)||e.appendChild(new S_(0)))}_accept(e,t){if(e===void 0||this._token.type===e){let e=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),e}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let e=this._scanner.next();if(e.type!==0&&e.type!==4&&e.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,`$1`);return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new b_(t)),!0):!1}_parseTabstopOrVariableName(e){let t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new S_(Number(t)):new E_(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);let r=new S_(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new b_("${"+t+`:`)),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7)){let t=new C_;for(;;){if(this._parseChoiceElement(t)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(t),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)}_parseChoiceElement(e){let t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let e;if(e=(e=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||e:this._accept(void 0,!0),!e)return this._backTo(t),!1;n.push(e)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new b_(n.join(``))),!0)}_parseComplexVariable(e){let t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);let r=new E_(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new b_("${"+t+`:`)),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)}_parseTransform(e){let t=new w_,n=``,r=``;for(;!this._accept(6);){let e;if(e=this._accept(5,!0)){e=this._accept(6,!0)||e,n+=e;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let e;if(e=this._accept(5,!0)){e=this._accept(5,!0)||this._accept(6,!0)||e,t.appendChild(new b_(e));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){let t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let r=this._accept(8,!0);if(r)if(n){if(this._accept(4))return e.appendChild(new T_(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new T_(Number(r))),!0;else return this._backTo(t),!1;if(this._accept(6)){let n=this._accept(9,!0);return!n||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new T_(Number(r),n)),!0)}else if(this._accept(11)){let t=this._until(4);if(t)return e.appendChild(new T_(Number(r),void 0,t,void 0)),!0}else if(this._accept(12)){let t=this._until(4);if(t)return e.appendChild(new T_(Number(r),void 0,void 0,t)),!0}else if(this._accept(13)){let t=this._until(1);if(t){let n=this._until(4);if(n)return e.appendChild(new T_(Number(r),void 0,t,n)),!0}}else{let t=this._until(4);if(t)return e.appendChild(new T_(Number(r),void 0,void 0,t)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type===14?!1:(e.appendChild(new b_(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}}));function A_(e,t,n){return(typeof n.insertText==`string`?n.insertText===``:n.insertText.snippet===``)?{edits:n.additionalEdit?.edits??[]}:{edits:[...t.map(t=>new ha(e,{range:t,text:typeof n.insertText==`string`?O_.escape(n.insertText)+`$0`:n.insertText.snippet,insertAsSnippet:!0})),...n.additionalEdit?.edits??[]]}}function j_(e){function t(e,t){return`mimeType`in e?e.mimeType===t.handledMimeType:!!t.kind&&e.kind.contains(t.kind)}let n=new Map;for(let r of e)for(let i of r.yieldTo??[])for(let a of e)if(a!==r&&t(i,a)){let e=n.get(r);e||(e=[],n.set(r,e)),e.push(a)}if(!n.size)return Array.from(e);let r=new Set,i=[];function a(e){if(!e.length)return[];let t=e[0];if(i.includes(t))return console.warn(`Yield to cycle detected`,t),e;if(r.has(t))return a(e.slice(1));let o=[],s=n.get(t);return s&&(i.push(t),o=a(s),i.pop()),r.add(t),[...o,t,...a(e.slice(1))]}return a(Array.from(e))}var M_=t((()=>{Eh(),k_()}));function N_(e,t){return t&&(e.stack||e.stacktrace)?A(29,`{0}: {1}`,F_(e),P_(e.stack)||P_(e.stacktrace)):F_(e)}function P_(e){return Array.isArray(e)?e.join(`
`):e}function F_(e){return e.code===`ERR_UNC_HOST_NOT_ALLOWED`?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code==`string`&&typeof e.errno==`number`&&typeof e.syscall==`string`?A(30,`A system error occurred ({0})`,e.message):e.message||A(31,`An unknown error occurred. Please consult the log for more details.`)}function I_(e=null,t=!1){if(!e)return A(32,`An unknown error occurred. Please consult the log for more details.`);if(Array.isArray(e)){let n=Oh(e),r=I_(n[0],t);return n.length>1?A(33,`{0} ({1} errors in total)`,r,n.length):r}if(Ts(e))return e;if(e.detail){let n=e.detail;if(n.error)return N_(n.error,t);if(n.exception)return N_(n.exception,t)}return e.stack?N_(e,t):e.message?e.message:A(34,`An unknown error occurred. Please consult the log for more details.`)}var L_=t((()=>{sn(),lr(),P()})),R_=t((()=>{}));function z_(e){if(e.kind===`action`)return e.label}function B_(e){return e.replace(/\r\n|\r|\n/g,` `)}var V_,H_,U_,W_,G_,K_,q_,J_,Y_,X_,Z_=t((()=>{y(),Rd(),fl(),wu(),Kn(),q(),Rt(),sr(),R_(),P(),be(),Ki(),If(),Ei(),Ml(),V_=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},H_=function(e,t){return function(n,r){t(n,r,e)}},U_=`acceptSelectedCodeAction`,W_=`previewSelectedCodeAction`,G_=class{get templateId(){return`header`}renderTemplate(e){e.classList.add(`group-header`);let t=document.createElement(`span`);return e.append(t),{container:e,text:t}}renderElement(e,t,n){n.text.textContent=e.group?.title??e.label??``}disposeTemplate(e){}},K_=class{get templateId(){return`separator`}renderTemplate(e){e.classList.add(`separator`);let t=document.createElement(`span`);return e.append(t),{container:e,text:t}}renderElement(e,t,n){n.text.textContent=e.label??``}disposeTemplate(e){}},q_=class{get templateId(){return`action`}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);let t=document.createElement(`div`);t.className=`icon`,e.append(t);let n=document.createElement(`span`);n.className=`title`,e.append(n);let r=document.createElement(`span`);return r.className=`description`,e.append(r),{container:e,icon:t,text:n,description:r,keybinding:new Nf(e,Pi)}}renderElement(e,t,n){if(e.group?.icon?(n.icon.className=Qt.asClassName(e.group.icon),e.group.icon.color&&(n.icon.style.color=ji(e.group.icon.color.id))):(n.icon.className=Qt.asClassName(B.lightBulb),n.icon.style.color=`var(--vscode-editorLightBulb-foreground)`),!e.item||!e.label)return;$t(!e.hideIcon,n.icon),n.text.textContent=B_(e.label),e.keybinding?(n.description.textContent=e.keybinding.getLabel(),n.description.style.display=`inline`,n.description.style.letterSpacing=`0.5px`):e.description?(n.description.textContent=B_(e.description),n.description.style.display=`inline`):(n.description.textContent=``,n.description.style.display=`none`);let r=this._keybindingService.lookupKeybinding(U_)?.getLabel(),i=this._keybindingService.lookupKeybinding(W_)?.getLabel();n.container.classList.toggle(`option-disabled`,e.disabled),e.tooltip?n.container.title=e.tooltip:e.disabled?n.container.title=e.label:r&&i?this._supportsPreview&&e.canPreview?n.container.title=A(1635,`{0} to Apply, {1} to Preview`,r,i):n.container.title=A(1636,`{0} to Apply`,r):n.container.title=``}disposeTemplate(e){e.keybinding.dispose()}},q_=V_([H_(1,xs)],q_),J_=class extends UIEvent{constructor(){super(`acceptSelectedAction`)}},Y_=class extends UIEvent{constructor(){super(`previewSelectedAction`)}},X_=class extends z{constructor(e,t,n,r,i,a,o,s){super(),this._delegate=r,this._contextViewService=a,this._keybindingService=o,this._layoutService=s,this._actionLineHeight=24,this._headerLineHeight=26,this._separatorLineHeight=8,this.cts=this._register(new Zd),this.domNode=document.createElement(`div`),this.domNode.classList.add(`actionList`),this._list=this._register(new ie(e,this.domNode,{getHeight:e=>{switch(e.kind){case`header`:return this._headerLineHeight;case`separator`:return this._separatorLineHeight;default:return this._actionLineHeight}},getTemplateId:e=>e.kind},[new q_(t,this._keybindingService),new G_,new K_],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:z_},accessibilityProvider:{getAriaLabel:e=>{if(e.kind===`action`){let t=e.label?B_(e?.label):``;return e.disabled&&(t=A(1637,`{0}, Disabled Reason: {1}`,t,e.disabled)),t}return null},getWidgetAriaLabel:()=>A(1638,`Action Widget`),getRole:e=>{switch(e.kind){case`action`:return`option`;case`separator`:return`separator`;default:return`separator`}},getWidgetRole:()=>`listbox`,...i}})),this._list.style(om),this._register(this._list.onMouseClick(e=>this.onListClick(e))),this._register(this._list.onMouseOver(e=>this.onListHover(e))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(e=>this.onListSelection(e))),this._allMenuItems=n,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind===`action`}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){let t=this._allMenuItems.filter(e=>e.kind===`header`).length,n=this._allMenuItems.filter(e=>e.kind===`separator`).length,r=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight+n*this._separatorLineHeight-n*this._actionLineHeight;this._list.layout(r);let i=e;if(this._allMenuItems.length>=50)i=380;else{let t=this._allMenuItems.map((e,t)=>{let n=this.domNode.ownerDocument.getElementById(this._list.getElementID(t));if(n){n.style.width=`auto`;let e=n.getBoundingClientRect().width;return n.style.width=``,e}return 0});i=Math.max(...t,e)}let a=Math.min(r,this._layoutService.getContainer(Ni(this.domNode)).clientHeight*.7);return this._list.layout(a,i),this.domNode.style.height=`${a}px`,this._list.domFocus(),i}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){let t=this._list.getFocus();if(t.length===0)return;let n=t[0],r=this._list.element(n);if(!this.focusCondition(r))return;let i=e?new Y_:new J_;this._list.setSelection([n],i)}onListSelection(e){if(!e.elements.length)return;let t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof Y_):this._list.setSelection([])}onFocus(){let e=this._list.getFocus();if(e.length===0)return;let t=e[0],n=this._list.element(t);this._delegate.onFocus?.(n.item)}async onListHover(e){let t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind===`action`){let e=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=e?e.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index==`number`?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}},X_=V_([H_(5,ld),H_(6,xs),H_(7,$c)],X_)})),Q_,$_,ev,tv,nv,rv,iv=t((()=>{y(),ns(),q(),R_(),P(),Z_(),de(),C(),be(),Zo(),F(),Ei(),Q_=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$_=function(e,t){return function(n,r){t(n,r,e)}},Y(`actionBar.toggledBackground`,Ah,A(1639,`Background color for toggled action items in action bar.`)),ev={Visible:new De(`codeActionMenuVisible`,!1,A(1640,`Whether the action widget list is visible`))},tv=Mc(`actionWidgetService`),nv=class extends z{get isVisible(){return ev.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,n){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=n,this._list=this._register(new su)}show(e,t,n,r,i,a,o,s){let c=ev.Visible.bindTo(this._contextKeyService),l=this._instantiationService.createInstance(X_,e,t,n,r,s);this._contextViewService.showContextView({getAnchor:()=>i,render:e=>(c.set(!0),this._renderWidget(e,l,o??[])),onHide:e=>{c.reset(),this._onWidgetClosed(e)}},a,!1)}acceptSelected(e){this._list.value?.acceptSelected(e)}focusPrevious(){this._list?.value?.focusPrevious()}focusNext(){this._list?.value?.focusNext()}hide(e){this._list.value?.hide(e),this._list.clear()}_renderWidget(e,t,n){let r=document.createElement(`div`);if(r.classList.add(`action-widget`),e.appendChild(r),this._list.value=t,this._list.value)r.appendChild(this._list.value.domNode);else throw Error(`List has no value`);let i=new I,a=document.createElement(`div`),o=e.appendChild(a);o.classList.add(`context-view-block`),i.add(ch(o,Ul.MOUSE_DOWN,e=>e.stopPropagation()));let s=document.createElement(`div`),c=e.appendChild(s);c.classList.add(`context-view-pointerBlock`),i.add(ch(c,Ul.POINTER_MOVE,()=>c.remove())),i.add(ch(c,Ul.MOUSE_DOWN,()=>c.remove()));let l=0;if(n.length){let e=this._createActionBar(`.action-widget-action-bar`,n);e&&(r.appendChild(e.getContainer().parentElement),i.add(e),l=e.getContainer().offsetWidth)}let u=this._list.value?.layout(l);r.style.width=`${u}px`;let d=i.add(qn(e));return i.add(d.onDidBlur(()=>this.hide(!0))),i}_createActionBar(e,t){if(!t.length)return;let n=new _s(R(e));return n.push(t,{icon:!1,label:!0}),n}_onWidgetClosed(e){this._list.value?.hide(e)}},nv=Q_([$_(0,ld),$_(1,bh),$_(2,U)],nv),Ds(tv,nv,1),rv=1100,Rr(class extends km{constructor(){super({id:`hideCodeActionWidget`,title:K(1641,`Hide action widget`),precondition:ev.Visible,keybinding:{weight:rv,primary:9,secondary:[1033]}})}run(e){e.get(tv).hide(!0)}}),Rr(class extends km{constructor(){super({id:`selectPrevCodeAction`,title:K(1642,`Select previous action`),precondition:ev.Visible,keybinding:{weight:rv,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(e){let t=e.get(tv);t instanceof nv&&t.focusPrevious()}}),Rr(class extends km{constructor(){super({id:`selectNextCodeAction`,title:K(1643,`Select next action`),precondition:ev.Visible,keybinding:{weight:rv,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(e){let t=e.get(tv);t instanceof nv&&t.focusNext()}}),Rr(class extends km{constructor(){super({id:U_,title:K(1644,`Accept selected action`),precondition:ev.Visible,keybinding:{weight:rv,primary:3,secondary:[2137]}})}run(e){let t=e.get(tv);t instanceof nv&&t.acceptSelected()}}),Rr(class extends km{constructor(){super({id:W_,title:K(1645,`Preview selected action`),precondition:ev.Visible,keybinding:{weight:rv,primary:2051}})}run(e){let t=e.get(tv);t instanceof nv&&t.acceptSelected(!0)}})})),av=t((()=>{})),ov,sv,cv,lv,uv,dv=t((()=>{y(),Us(),O(),Kn(),L_(),M(),N(),q(),sr(),P(),iv(),C(),F(),Ki(),up(),Eh(),In(),M_(),av(),ov=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},sv=function(e,t){return function(n,r){t(n,r,e)}},lv=class extends z{static#e=cv=this;static#t=this.baseId=`editor.widget.postEditWidget`;constructor(e,t,n,r,i,a,o,s,c,l,u){super(),this.typeId=e,this.editor=t,this.showCommand=r,this.range=i,this.edits=a,this.onSelectNewEdit=o,this.additionalActions=s,this._keybindingService=l,this._actionWidgetService=u,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=n.bindTo(c),this.visibleContext.set(!0),this._register(qm(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(qm((()=>this.editor.removeContentWidget(this)))),this._register(this.editor.onDidChangeCursorPosition(e=>{this.dispose()})),this._register(mf.runAndSubscribe(l.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){let e=this._keybindingService.lookupKeybinding(this.showCommand.id)?.getLabel();this.button.element.title=this.showCommand.label+(e?` (${e})`:``)}create(){this.domNode=R(`.post-edit-widget`),this.button=this._register(new Jl(this.domNode,{supportIcons:!0})),this.button.label=`$(insert)`,this._register(ch(this.domNode,Ul.CLICK,()=>this.showSelector()))}getId(){return cv.baseId+`.`+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){let e=td(this.button.element),t={x:e.left+e.width,y:e.top+e.height};this._actionWidgetService.show(`postEditWidget`,!1,this.edits.allEdits.map((e,t)=>({kind:`action`,item:e,label:e.title,disabled:!1,canPreview:!1,group:{title:``,icon:Qt.fromId(t===this.edits.activeEditIndex?B.check.id:B.blank.id)}})),{onHide:()=>{this.editor.focus()},onSelect:e=>{this._actionWidgetService.hide(!1);let t=this.edits.allEdits.findIndex(t=>t===e);if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}},t,this.editor.getDomNode()??void 0,this.additionalActions)}},lv=cv=ov([sv(8,bh),sv(9,xs),sv(10,tv)],lv),uv=class extends z{constructor(e,t,n,r,i,a,o,s){super(),this._id=e,this._editor=t,this._visibleContext=n,this._showCommand=r,this._getAdditionalActions=i,this._instantiationService=a,this._bulkEditService=o,this._notificationService=s,this._currentWidget=this._register(new su),this._register(mf.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,n,r,i){if(!e.length||!this._editor.hasModel())return;let a=this._editor.getModel(),o=t.allEdits.at(t.activeEditIndex);if(!o)return;let s=async a=>{let o=this._editor.getModel();o&&(await o.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:a,allEdits:t.allEdits},n,r,i))},c=(r,i)=>{_d(r)||(this._notificationService.error(i),n&&this.show(e[0],t,s))},l=new Ri(this._editor,3,void 0,i),u;try{u=await ee(r(o,l.token),l.token)}catch(e){return c(e,A(929,`Error resolving edit '{0}':
{1}`,o.title,I_(e)))}finally{l.dispose()}if(i.isCancellationRequested)return;let d=A_(a.uri,e,u),f=e[0],p=a.deltaDecorations([],[{range:f,options:{description:`paste-line-suffix`,stickiness:0}}]);this._editor.focus();let m,h;try{m=await this._bulkEditService.apply(d,{editor:this._editor,token:i}),h=a.getDecorationRange(p[0])}catch(e){return c(e,A(930,`Error applying edit '{0}':
{1}`,o.title,I_(e)))}finally{a.deltaDecorations(p,[])}i.isCancellationRequested||n&&m.isApplied&&t.allEdits.length>1&&this.show(h??f,t,s)}show(e,t,n){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(lv,this._id,this._editor,this._visibleContext,this._showCommand,e,t,n,this._getAdditionalActions()))}clear(){this._currentWidget.clear()}tryShowSelector(){this._currentWidget.value?.showSelector()}},uv=ov([sv(5,U),sv(6,Or),sv(7,Hp)],uv)})),fv,pv,mv,hv,gv,_v,vv,yv,bv=t((()=>{y(),sn(),O(),wu(),jg(),M(),Ng(),q(),fs(),Rt(),lr(),ne(),P(),qr(),jo(),qp(),C(),F(),$s(),yo(),xn(),Mu(),Wg(),Eh(),_(),Gr(),yu(),In(),Zg(),i_(),g_(),M_(),dv(),fv=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},pv=function(e,t){return function(n,r){t(n,r,e)}},hv=`editor.changePasteType`,gv=`editor.pasteAs.preferences`,_v=new De(`pasteWidgetVisible`,!1,A(909,`Whether the paste widget is showing`)),vv=`application/vnd.code.copymetadata`,yv=class extends z{static#e=mv=this;static#t=this.ID=`editor.contrib.copyPasteActionController`;static get(e){return e.getContribution(mv.ID)}constructor(e,t,n,r,i,a,o,s,c,l){super(),this._logService=n,this._bulkEditService=r,this._clipboardService=i,this._commandService=a,this._configService=o,this._languageFeaturesService=s,this._quickInputService=c,this._progressService=l,this._editor=e;let u=e.getContainerDomNode();this._register(ch(u,`copy`,e=>this.handleCopy(e))),this._register(ch(u,`cut`,e=>this.handleCopy(e))),this._register(ch(u,`paste`,e=>this.handlePaste(e),!0)),this._pasteProgressManager=this._register(new Xg(`pasteIntoEditor`,e,t)),this._postPasteWidgetManager=this._register(t.createInstance(uv,`pasteIntoEditor`,e,_v,{id:hv,label:A(910,`Show paste options...`)},()=>mv._configureDefaultAction?[mv._configureDefaultAction]:[]))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}async pasteAs(e){this._logService.trace(`CopyPasteController.pasteAs`),this._editor.focus();try{this._logService.trace(`Before calling editor.action.clipboardPasteAction`),this._pasteAsActionContext={preferred:e},await this._commandService.executeCommand(`editor.action.clipboardPasteAction`)}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(96).enabled}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){let t=null;if(e.clipboardData){let[n,r]=Gp.getTextData(e.clipboardData);t=(r||pp.INSTANCE.get(n))?.id||null,this._logService.trace(`CopyPasteController#handleCopy for id : `,t,` with text.length : `,n.length)}else this._logService.trace(`CopyPasteController#handleCopy`);if(!this._editor.hasTextFocus()||(this._clipboardService.clearInternalState?.(),!e.clipboardData||!this.isPasteAsEnabled()))return;let n=this._editor.getModel(),r=this._editor.getSelections();if(!n||!r?.length)return;let i=this._editor.getOption(45),a=r,o=r.length===1&&r[0].isEmpty();if(o){if(!i)return;a=[new T(a[0].startLineNumber,1,a[0].startLineNumber,1+n.getLineLength(a[0].startLineNumber))]}let s=this._editor._getViewModel()?.getPlainTextToCopy(r,i,_n),c={multicursorText:Array.isArray(s)?s:null,pasteOnNewLine:o,mode:null},l=this._languageFeaturesService.documentPasteEditProvider.ordered(n).filter(e=>!!e.prepareDocumentPaste);if(!l.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:c});return}let u=Bg(e.clipboardData),d=l.flatMap(e=>e.copyMimeTypes??[]),f=t??ta();this.setCopyMetadata(e.clipboardData,{id:f,providerCopyMimeTypes:d,defaultPastePayload:c});let p=l.map(e=>({providerMimeTypes:e.copyMimeTypes,operation:Zn(t=>e.prepareDocumentPaste(n,a,u,t).catch(e=>{console.error(e)}))}));mv._currentCopyOperation?.operations.forEach(e=>e.operation.cancel()),mv._currentCopyOperation={handle:f,operations:p}}async handlePaste(e){if(e.clipboardData){let[t,n]=Gp.getTextData(e.clipboardData),r=n||pp.INSTANCE.get(t);this._logService.trace(`CopyPasteController#handlePaste for id : `,r?.id)}else this._logService.trace(`CopyPasteController#handlePaste`);if(!e.clipboardData||!this._editor.hasTextFocus())return;n_.get(this._editor)?.closeMessage(),this._currentPasteOperation?.cancel(),this._currentPasteOperation=void 0;let t=this._editor.getModel(),n=this._editor.getSelections();if(!n?.length||!t||this._editor.getOption(103)||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;let r=this.fetchCopyMetadata(e);this._logService.trace(`CopyPasteController#handlePaste with metadata : `,r?.id,` and text.length : `,e.clipboardData.getData(`text/plain`).length);let i=Hg(e.clipboardData);i.delete(vv);let a=Array.from(e.clipboardData.files).map(e=>e.type),o=[...e.clipboardData.types,...a,...r?.providerCopyMimeTypes??[],Xn.uriList],s=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(e=>{let t=this._pasteAsActionContext?.preferred;return t&&!this.providerMatchesPreference(e,t)?!1:e.pasteMimeTypes?.some(e=>Dg(e,o))});if(!s.length){this._pasteAsActionContext?.preferred&&(this.showPasteAsNoEditMessage(n,this._pasteAsActionContext.preferred),e.preventDefault(),e.stopImmediatePropagation());return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,s,n,i,r):this.doPasteInline(s,n,i,r,e)}showPasteAsNoEditMessage(e,t){let n=`only`in t?t.only.value:`preferences`in t?t.preferences.length?t.preferences.map(e=>e.value).join(`, `):A(911,`empty`):t.providerId;n_.get(this._editor)?.showMessage(A(912,`No paste edits for '{0}' found`,n),e[0].getStartPosition())}doPasteInline(e,t,n,r,i){this._logService.trace(`CopyPasteController#doPasteInline`);let a=this._editor;if(!a.hasModel())return;let o=new Ri(a,3,void 0),s=Zn(async a=>{let c=this._editor;if(!c.hasModel())return;let l=c.getModel(),u=new I,d=u.add(new Zd(a));u.add(o.token.onCancellationRequested(()=>d.cancel()));let f=d.token;try{if(await this.mergeInDataFromCopy(e,n,r,f),f.isCancellationRequested)return;let a=e.filter(e=>this.isSupportedPasteProvider(e,n));if(!a.length||a.length===1&&a[0]instanceof l_)return this.applyDefaultPasteHandler(n,r,f,i);let o={triggerKind:Ws.Automatic},s=await this.getPasteEdits(a,n,l,t,o,f);if(u.add(s),f.isCancellationRequested)return;if(s.edits.length===1&&s.edits[0].provider instanceof l_)return this.applyDefaultPasteHandler(n,r,f,i);if(s.edits.length){let e=c.getOption(96).showPasteSelector===`afterPaste`;return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:this.getInitialActiveEditIndex(l,s.edits),allEdits:s.edits},e,async(e,n)=>{if(!e.provider.resolveDocumentPasteEdit)return e;let r=e.provider.resolveDocumentPasteEdit(e,n),i=new so,a=await this._pasteProgressManager.showWhile(t[0].getEndPosition(),A(913,`Resolving paste edit for '{0}'. Click to cancel`,e.title),$i(Promise.race([i.p,r]),n),{cancel:()=>i.cancel()},0);return a&&(e.insertText=a.insertText,e.additionalEdit=a.additionalEdit),e},f)}await this.applyDefaultPasteHandler(n,r,f,i)}finally{u.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),A(914,`Running paste handlers. Click to cancel and do basic paste`),s,{cancel:async()=>{s.cancel(),!o.token.isCancellationRequested&&await this.applyDefaultPasteHandler(n,r,o.token,i)}}).finally(()=>{o.dispose()}),this._currentPasteOperation=s}showPasteAsPick(e,t,n,r,i){this._logService.trace(`CopyPasteController#showPasteAsPick`);let a=Zn(async o=>{let s=this._editor;if(!s.hasModel())return;let c=s.getModel(),l=new I,u=l.add(new Ri(s,3,void 0,o));try{if(await this.mergeInDataFromCopy(t,r,i,u.token),u.token.isCancellationRequested)return;let a=t.filter(t=>this.isSupportedPasteProvider(t,r,e));e&&(a=a.filter(t=>this.providerMatchesPreference(t,e)));let o={triggerKind:Ws.PasteAs,only:e&&`only`in e?e.only:void 0},s=l.add(await this.getPasteEdits(a,r,c,n,o,u.token));if(u.token.isCancellationRequested)return;if(e&&(s={edits:s.edits.filter(t=>`only`in e?e.only.contains(t.kind):`preferences`in e?e.preferences.some(e=>e.contains(t.kind)):e.providerId===t.provider.id),dispose:s.dispose}),!s.edits.length){e&&this.showPasteAsNoEditMessage(n,e);return}let d;if(e)d=s.edits.at(0);else{let e={id:`editor.pasteAs.default`,label:A(915,`Configure default paste action`),edit:void 0},t=await this._quickInputService.pick([...s.edits.map(e=>({label:e.title,description:e.kind?.value,edit:e})),...mv._configureDefaultAction?[p({type:`separator`}),{label:mv._configureDefaultAction.label,edit:void 0}]:[]],{placeHolder:A(916,`Select Paste Action`)});if(t===e){mv._configureDefaultAction?.run();return}d=t?.edit}if(!d)return;let f=A_(c.uri,n,d);await this._bulkEditService.apply(f,{editor:this._editor})}finally{l.dispose(),this._currentPasteOperation===a&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:A(917,`Running paste handlers`)},()=>a)}setCopyMetadata(e,t){this._logService.trace(`CopyPasteController#setCopyMetadata new id : `,t.id),e.setData(vv,JSON.stringify(t))}fetchCopyMetadata(e){if(this._logService.trace(`CopyPasteController#fetchCopyMetadata`),!e.clipboardData)return;let t=e.clipboardData.getData(vv);if(t)try{return JSON.parse(t)}catch{return}let[n,r]=Gp.getTextData(e.clipboardData);if(r)return{defaultPastePayload:{mode:r.mode,multicursorText:r.multicursorText??null,pasteOnNewLine:!!r.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,n,r){if(this._logService.trace(`CopyPasteController#mergeInDataFromCopy with metadata : `,n?.id),n?.id&&mv._currentCopyOperation?.handle===n.id){let n=mv._currentCopyOperation.operations.filter(t=>e.some(e=>e.pasteMimeTypes.some(e=>Dg(e,t.providerMimeTypes)))).map(e=>e.operation),i=await Promise.all(n);if(r.isCancellationRequested)return;for(let e of i.reverse())if(e)for(let[n,r]of e)t.replace(n,r)}if(!t.has(Xn.uriList)){let e=await this._clipboardService.readResources();if(r.isCancellationRequested)return;e.length&&t.append(Xn.uriList,wg(Ag.create(e)))}}async getPasteEdits(e,t,n,r,i,a){let o=new I;return{edits:j_(Oh(await $i(Promise.all(e.map(async e=>{try{let s=await e.provideDocumentPasteEdits?.(n,r,t,i,a);return s&&o.add(s),s?.edits?.map(t=>({...t,provider:e}))}catch(e){_d(e)||console.error(e);return}})),a)??[]).flat().filter(e=>!i.only||i.only.contains(e.kind))),dispose:()=>o.dispose()}}async applyDefaultPasteHandler(e,t,n,r){let i=await(e.get(Xn.text)??e.get(`text`))?.asString()??``;if(n.isCancellationRequested)return;let a={clipboardEvent:r,text:i,pasteOnNewLine:t?.defaultPastePayload.pasteOnNewLine??!1,multicursorText:t?.defaultPastePayload.multicursorText??null,mode:null};this._logService.trace(`CopyPasteController#applyDefaultPasteHandler for id : `,t?.id),this._editor.trigger(`keyboard`,`paste`,a)}isSupportedPasteProvider(e,t,n){return e.pasteMimeTypes?.some(e=>t.matches(e))?!n||this.providerMatchesPreference(e,n):!1}providerMatchesPreference(e,t){return`only`in t?e.providedPasteEditKinds.some(e=>t.only.contains(e)):`preferences`in t?t.preferences.some(e=>t.preferences.some(t=>t.contains(e))):e.id===t.providerId}getInitialActiveEditIndex(e,t){let n=this._configService.getValue(gv,{resource:e.uri});for(let e of Array.isArray(n)?n:[]){let n=new Mg(e),r=t.findIndex(e=>n.contains(e.kind));if(r>=0)return r}return 0}},yv=mv=fv([pv(1,U),pv(2,Fp),pv(3,Or),pv(4,qu),pv(5,no),pv(6,xl),pv(7,V),pv(8,Ne),pv(9,Ch)],yv)}));function xv(e){return e.register(),e}function Sv(e,t){e&&(e.addImplementation(1e4,`code-editor`,(e,n)=>{let r=e.get(Fp);r.trace(`registerExecCommandImpl (addImplementation code-editor for : `,t,`)`);let i=e.get(ec).getFocusedCodeEditor();if(i&&i.hasTextFocus()){let e=i.getOption(45),n=i.getSelection();return n&&n.isEmpty()&&!e||(i.getOption(169)&&t===`cut`?(Cv(i),r.trace(`registerExecCommandImpl (before execCommand copy)`),i.getContainerDomNode().ownerDocument.execCommand(`copy`),i.trigger(void 0,`cut`,void 0),r.trace(`registerExecCommandImpl (after execCommand copy)`)):(Cv(i),r.trace(`registerExecCommandImpl (before execCommand `+t+`)`),i.getContainerDomNode().ownerDocument.execCommand(t),r.trace(`registerExecCommandImpl (after execCommand `+t+`)`))),!0}return!1}),e.addImplementation(0,`generic-dom`,(e,n)=>{let r=e.get(Fp);return r.trace(`registerExecCommandImpl (addImplementation generic-dom for : `,t,`)`),r.trace(`registerExecCommandImpl (before execCommand `+t+`)`),Am().execCommand(t),r.trace(`registerExecCommandImpl (after execCommand `+t+`)`),!0}))}function Cv(e){if(e.getOption(169)){let t=Ai.get(e.getId());t&&t.onWillCopy()}}var wv,Tv,Ev,Dv,Ov,kv,Av,jv,Mv=t((()=>{Dl(),y(),Rt(),em(),P(),de(),qr(),C(),$s(),Cg(),Ue(),Mu(),Pt(),v(),ff(),yc(),bv(),wv=`9_cutcopypaste`,Tv=ke||document.queryCommandSupported(`cut`),Ev=ke||document.queryCommandSupported(`copy`),Dv=navigator.clipboard===void 0||kf?document.queryCommandSupported(`paste`):!0,Ov=Tv?xv(new yr({id:`editor.action.clipboardCutAction`,precondition:void 0,kbOpts:ke?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:g.MenubarEditMenu,group:`2_ccp`,title:A(806,`Cu&&t`),order:1},{menuId:g.EditorContext,group:wv,title:A(807,`Cut`),when:J.writable,order:1},{menuId:g.CommandPalette,group:``,title:A(808,`Cut`),order:1},{menuId:g.SimpleEditorContext,group:wv,title:A(809,`Cut`),when:J.writable,order:1}]})):void 0,kv=Ev?xv(new yr({id:`editor.action.clipboardCopyAction`,precondition:void 0,kbOpts:ke?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:g.MenubarEditMenu,group:`2_ccp`,title:A(810,`&&Copy`),order:2},{menuId:g.EditorContext,group:wv,title:A(811,`Copy`),order:2},{menuId:g.CommandPalette,group:``,title:A(812,`Copy`),order:1},{menuId:g.SimpleEditorContext,group:wv,title:A(813,`Copy`),order:2}]})):void 0,gi.appendMenuItem(g.MenubarEditMenu,{submenu:g.MenubarCopy,title:K(818,`Copy As`),group:`2_ccp`,order:3}),gi.appendMenuItem(g.EditorContext,{submenu:g.EditorContextCopy,title:K(819,`Copy As`),group:wv,order:3}),gi.appendMenuItem(g.EditorContext,{submenu:g.EditorContextShare,title:K(820,`Share`),group:`11_share`,order:-1,when:b.and(b.notEquals(`resourceScheme`,`output`),J.editorTextFocus)}),gi.appendMenuItem(g.ExplorerContext,{submenu:g.ExplorerContextShare,title:K(821,`Share`),group:`11_share`,order:-1}),Av=Dv?xv(new yr({id:`editor.action.clipboardPasteAction`,precondition:void 0,kbOpts:ke?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:g.MenubarEditMenu,group:`2_ccp`,title:A(814,`&&Paste`),order:4},{menuId:g.EditorContext,group:wv,title:A(815,`Paste`),when:J.writable,order:4},{menuId:g.CommandPalette,group:``,title:A(816,`Paste`),order:1},{menuId:g.SimpleEditorContext,group:wv,title:A(817,`Paste`),when:J.writable,order:4}]})):void 0,jv=class extends S{constructor(){super({id:`editor.action.clipboardCopyWithSyntaxHighlightingAction`,label:K(822,`Copy with Syntax Highlighting`),precondition:void 0,kbOpts:{kbExpr:J.textInputFocus,primary:0,weight:100}})}run(e,t){let n=e.get(Fp);n.trace(`ExecCommandCopyWithSyntaxHighlightingAction#run`),t.hasModel()&&(!t.getOption(45)&&t.getSelection().isEmpty()||(of.forceCopyWithSyntaxHighlighting=!0,t.focus(),n.trace(`ExecCommandCopyWithSyntaxHighlightingAction (before execCommand copy)`),t.getContainerDomNode().ownerDocument.execCommand(`copy`),n.trace(`ExecCommandCopyWithSyntaxHighlightingAction (after execCommand copy)`),of.forceCopyWithSyntaxHighlighting=!1))}},Sv(Ov,`cut`),Sv(kv,`copy`),Av&&(Av.addImplementation(1e4,`code-editor`,(e,t)=>{let n=e.get(Fp);n.trace(`registerExecCommandImpl (addImplementation code-editor for : paste)`);let r=e.get(ec),i=e.get(qu),a=e.get(Ta),o=e.get(Sg),s=r.getFocusedCodeEditor();if(s&&s.hasModel()&&s.hasTextFocus()){if(s.getOption(169)){let e=Ai.get(s.getId());e&&e.onWillPaste()}let e=vd.create(!0);n.trace(`registerExecCommandImpl (before triggerPaste)`);let t=i.triggerPaste(xt().vscodeWindowId);return t?(n.trace(`registerExecCommandImpl (triggerPaste defined)`),t.then(async()=>{if(n.trace(`registerExecCommandImpl (after triggerPaste)`),o.quality!==`stable`){let t=e.elapsed();a.publicLog2(`editorAsyncPaste`,{duration:t})}return yv.get(s)?.finishedPaste()??Promise.resolve()})):(n.trace(`registerExecCommandImpl (triggerPaste undefined)`),vo?(n.trace(`registerExecCommandImpl (Paste handling on web)`),(async()=>{let e=await i.readText();if(e!==``){let t=pp.INSTANCE.get(e),r=!1,i=null,a=null;t&&(r=s.getOption(45)&&!!t.isFromEmptySelection,i=t.multicursorText===void 0?null:t.multicursorText,a=t.mode),n.trace(`registerExecCommandImpl (clipboardText.length : `,e.length,` id : `,t?.id,`)`),s.trigger(`keyboard`,`paste`,{text:e,pasteOnNewLine:r,multicursorText:i,mode:a})}})()):!0)}return!1}),Av.addImplementation(0,`generic-dom`,(e,t)=>(e.get(Fp).trace(`registerExecCommandImpl (addImplementation generic-dom for : paste)`),e.get(qu).triggerPaste(xt().vscodeWindowId)??!1))),Ev&&D(jv)}));function Nv(e,t){return!(e.include&&!e.include.intersects(t)||e.excludes&&e.excludes.some(n=>Fv(t,n,e.include))||!e.includeSourceActions&&Iv.Source.contains(t))}function Pv(e,t){let n=t.kind?new Mg(t.kind):void 0;return!(e.include&&(!n||!e.include.contains(n))||e.excludes&&n&&e.excludes.some(t=>Fv(n,t,e.include))||!e.includeSourceActions&&n&&Iv.Source.contains(n)||e.onlyIncludePreferredActions&&!t.isPreferred)}function Fv(e,t,n){return!(!t.contains(e)||n&&t.contains(n))}var Iv,Lv,Rv,zv,Bv=t((()=>{M(),Ng(),Iv=new class{constructor(){this.QuickFix=new Mg(`quickfix`),this.Refactor=new Mg(`refactor`),this.RefactorExtract=this.Refactor.append(`extract`),this.RefactorInline=this.Refactor.append(`inline`),this.RefactorMove=this.Refactor.append(`move`),this.RefactorRewrite=this.Refactor.append(`rewrite`),this.Notebook=new Mg(`notebook`),this.Source=new Mg(`source`),this.SourceOrganizeImports=this.Source.append(`organizeImports`),this.SourceFixAll=this.Source.append(`fixAll`),this.SurroundWith=this.Refactor.append(`surround`)}},(function(e){e.Refactor=`refactor`,e.RefactorPreview=`refactor preview`,e.Lightbulb=`lightbulb`,e.Default=`other (default)`,e.SourceAction=`source action`,e.QuickFix=`quick fix action`,e.FixAll=`fix all`,e.OrganizeImports=`organize imports`,e.AutoFix=`auto fix`,e.QuickFixHover=`quick fix hover window`,e.OnSave=`save participants`,e.ProblemsView=`problems view`})(Lv||={}),Rv=class e{static fromUser(t,n){return!t||typeof t!=`object`?new e(n.kind,n.apply,!1):new e(e.getKindFromUser(t,n.kind),e.getApplyFromUser(t,n.apply),e.getPreferredUser(t))}static getApplyFromUser(e,t){switch(typeof e.apply==`string`?e.apply.toLowerCase():``){case`first`:return`first`;case`never`:return`never`;case`ifsingle`:return`ifSingle`;default:return t}}static getKindFromUser(e,t){return typeof e.kind==`string`?new Mg(e.kind):t}static getPreferredUser(e){return typeof e.preferred==`boolean`?e.preferred:!1}constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}},zv=class{constructor(e,t,n){this.action=e,this.provider=t,this.highlightRange=n}async resolve(e){if(this.provider?.resolveCodeAction&&!this.action.edit){let t;try{t=await this.provider.resolveCodeAction(this.action,e)}catch(e){Jc(e)}t&&(this.action.edit=t.edit)}return this}}}));async function Vv(e,t,n,r,i,a){let o=r.filter||{},s={...o,excludes:[...o.excludes||[],Iv.Notebook]},c={only:o.include?.value,trigger:r.type},l=new Ht(t,a),u=Hv(e,t,r.type===2?s:o),d=new I,f=u.map(async e=>{let r=setTimeout(()=>i.report(e),1250);try{let r=await e.provideCodeActions(t,n,c,l.token);if(l.token.isCancellationRequested)return r?.dispose(),ny;r&&d.add(r);let i=(r?.actions||[]).filter(e=>e&&Pv(o,e)),a=Wv(e,i,o.include);return{actions:i.map(t=>new zv(t,e)),documentation:a}}catch(e){if(_d(e))throw e;return Jc(e),ny}finally{clearTimeout(r)}}),p=e.onDidChange(()=>{uo(e.all(t),u)||l.cancel()});try{let n=await Promise.all(f),i=n.map(e=>e.actions).flat(),a=new ty(i,[...Oh(n.map(e=>e.documentation)),...Uv(e,t,r,i)],d);return d.add(a),a}catch(e){throw d.dispose(),e}finally{p.dispose(),l.dispose()}}function Hv(e,t,n){return e.all(t).filter(e=>e.providedCodeActionKinds?e.providedCodeActionKinds.some(e=>Nv(n,new Mg(e))):!0)}function*Uv(e,t,n,r){if(t&&r.length)for(let i of e.all(t))i._getAdditionalMenuItems&&(yield*i._getAdditionalMenuItems?.({trigger:n.type,only:n.filter?.include?.value},r.map(e=>e.action)))}function Wv(e,t,n){if(!e.documentation)return;let r=e.documentation.map(e=>({kind:new Mg(e.kind),command:e.command}));if(n){let e;for(let t of r)t.kind.contains(n)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return e?.command}for(let e of t)if(e.kind){for(let t of r)if(t.kind.contains(new Mg(e.kind)))return t.command}}async function Gv(e,t,n,r,i=W.None){let a=e.get(Or),o=e.get(no),s=e.get(Ta),c=e.get(Hp),l=e.get(ur);if(s.publicLog2(`codeAction.applyCodeAction`,{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:n}),l.playSignal(tn.codeActionTriggered),await t.resolve(i),!i.isCancellationRequested&&!(t.action.edit?.edits.length&&!(await a.apply(t.action.edit,{editor:r?.editor,label:t.action.title,quotableLabel:t.action.title,code:`undoredo.codeAction`,respectAutoSaveConfig:n!==ry.OnSave,showPreview:r?.preview,reason:dm.codeAction({kind:t.action.kind,providerId:Dt.fromExtensionId(t.provider?.extensionId)})})).isApplied)){if(t.action.command)try{await o.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(e){let t=Kv(e);c.error(typeof t==`string`?t:A(823,`An unknown error occurred while applying the code action`))}setTimeout(()=>l.playSignal(tn.codeActionApplied),ey)}}function Kv(e){if(typeof e==`string`)return e;if(e instanceof Error&&typeof e.message==`string`)return e.message}var qv,Jv,Yv,Xv,Zv,Qv,$v,ey,ty,ny,ry,iy=t((()=>{sn(),wu(),M(),Ng(),q(),xd(),P(),Gf(),jo(),up(),yo(),Ue(),Eh(),_(),ze(),Gr(),yu(),Yd(),ah(),In(),Bv(),qv=`editor.action.codeAction`,Jv=`editor.action.quickFix`,Yv=`editor.action.autoFix`,Xv=`editor.action.refactor`,Zv=`editor.action.sourceAction`,Qv=`editor.action.organizeImports`,$v=`editor.action.fixAll`,ey=1e3,ty=class e extends z{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:t},{action:n}){return t.isAI&&!n.isAI?1:!t.isAI&&n.isAI?-1:Xf(t.diagnostics)?Xf(n.diagnostics)?e.codeActionsPreferredComparator(t,n):-1:Xf(n.diagnostics)?1:e.codeActionsPreferredComparator(t,n)}constructor(t,n,r){super(),this.documentation=n,this._register(r),this.allActions=[...t].sort(e.codeActionsComparator),this.validActions=this.allActions.filter(({action:e})=>!e.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Iv.QuickFix.contains(new Mg(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}},ny={actions:[],documentation:void 0},(function(e){e.OnSave=`onSave`,e.FromProblemsView=`fromProblemsView`,e.FromCodeActions=`fromCodeActions`,e.FromAILightbulb=`fromAILightbulb`,e.FromProblemsHover=`fromProblemsHover`})(ry||={}),hn.registerCommand(`_executeCodeActionProvider`,async function(e,t,n,r,i){if(!(t instanceof Fc))throw bp();let{codeActionProvider:a}=e.get(V),o=e.get(Ip).getModel(t);if(!o)throw bp();let s=X.isISelection(n)?X.liftSelection(n):T.isIRange(n)?o.validateRange(n):void 0;if(!s)throw bp();let c=typeof r==`string`?new Mg(r):void 0,l=await Vv(a,o,s,{type:1,triggerAction:Lv.Default,filter:{includeSourceActions:!0,include:c}},Ae.None,W.None),u=[],d=Math.min(l.validActions.length,typeof i==`number`?i:0);for(let e=0;e<d;e++)u.push(l.validActions[e].resolve(W.None));try{return await Promise.all(u),l.validActions.map(e=>e.action)}finally{setTimeout(()=>l.dispose(),100)}})})),ay,oy,sy,cy,ly=t((()=>{Ng(),ma(),iy(),Bv(),Ki(),ay=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},oy=function(e,t){return function(n,r){t(n,r,e)}},cy=class{static#e=sy=this;static#t=this.codeActionCommands=[Xv,qv,Zv,Qv,$v];constructor(e){this.keybindingService=e}getResolver(){let e=new Dr(()=>this.keybindingService.getKeybindings().filter(e=>sy.codeActionCommands.indexOf(e.command)>=0).filter(e=>e.resolvedKeybinding).map(e=>{let t=e.commandArgs;return e.command===`editor.action.organizeImports`?t={kind:Iv.SourceOrganizeImports.value}:e.command===`editor.action.fixAll`&&(t={kind:Iv.SourceFixAll.value}),{resolvedKeybinding:e.resolvedKeybinding,...Rv.fromUser(t,{kind:Mg.None,apply:`never`})}}));return t=>{if(t.kind)return this.bestKeybindingForCodeAction(t,e.value)?.resolvedKeybinding}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;let n=new Mg(e.kind);return t.filter(e=>e.kind.contains(n)).filter(t=>t.preferred?e.isPreferred:!0).reduceRight((e,t)=>e?e.kind.contains(t.kind)?t:e:t,void 0)}},cy=sy=ay([oy(0,xs)],cy)})),uy=t((()=>{})),dy=t((()=>{})),fy=t((()=>{uy(),dy()})),py=t((()=>{})),my=t((()=>{py(),P(),Ei(),Y(`symbolIcon.arrayForeground`,Lr,A(1477,`The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.booleanForeground`,Lr,A(1478,`The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.classForeground`,{dark:`#EE9D28`,light:`#D67E00`,hcDark:`#EE9D28`,hcLight:`#D67E00`},A(1479,`The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.colorForeground`,Lr,A(1480,`The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.constantForeground`,Lr,A(1481,`The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.constructorForeground`,{dark:`#B180D7`,light:`#652D90`,hcDark:`#B180D7`,hcLight:`#652D90`},A(1482,`The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.enumeratorForeground`,{dark:`#EE9D28`,light:`#D67E00`,hcDark:`#EE9D28`,hcLight:`#D67E00`},A(1483,`The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.enumeratorMemberForeground`,{dark:`#75BEFF`,light:`#007ACC`,hcDark:`#75BEFF`,hcLight:`#007ACC`},A(1484,`The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.eventForeground`,{dark:`#EE9D28`,light:`#D67E00`,hcDark:`#EE9D28`,hcLight:`#D67E00`},A(1485,`The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.fieldForeground`,{dark:`#75BEFF`,light:`#007ACC`,hcDark:`#75BEFF`,hcLight:`#007ACC`},A(1486,`The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.fileForeground`,Lr,A(1487,`The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.folderForeground`,Lr,A(1488,`The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.functionForeground`,{dark:`#B180D7`,light:`#652D90`,hcDark:`#B180D7`,hcLight:`#652D90`},A(1489,`The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.interfaceForeground`,{dark:`#75BEFF`,light:`#007ACC`,hcDark:`#75BEFF`,hcLight:`#007ACC`},A(1490,`The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.keyForeground`,Lr,A(1491,`The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.keywordForeground`,Lr,A(1492,`The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.methodForeground`,{dark:`#B180D7`,light:`#652D90`,hcDark:`#B180D7`,hcLight:`#652D90`},A(1493,`The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.moduleForeground`,Lr,A(1494,`The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.namespaceForeground`,Lr,A(1495,`The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.nullForeground`,Lr,A(1496,`The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.numberForeground`,Lr,A(1497,`The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.objectForeground`,Lr,A(1498,`The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.operatorForeground`,Lr,A(1499,`The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.packageForeground`,Lr,A(1500,`The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.propertyForeground`,Lr,A(1501,`The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.referenceForeground`,Lr,A(1502,`The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.snippetForeground`,Lr,A(1503,`The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.stringForeground`,Lr,A(1504,`The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.structForeground`,Lr,A(1505,`The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.textForeground`,Lr,A(1506,`The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.typeParameterForeground`,Lr,A(1507,`The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.unitForeground`,Lr,A(1508,`The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`)),Y(`symbolIcon.variableForeground`,{dark:`#75BEFF`,light:`#007ACC`,hcDark:`#75BEFF`,hcLight:`#007ACC`},A(1509,`The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.`))}));function hy(e,t,n){if(!t)return e.map(e=>({kind:`action`,item:e,group:gy,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title,canPreview:!!e.action.edit?.edits.length}));let r=_y.map(e=>({group:e,actions:[]}));for(let t of e){let e=t.action.kind?new Mg(t.action.kind):Mg.None;for(let n of r)if(n.group.kind.contains(e)){n.actions.push(t);break}}let i=[];for(let e of r)if(e.actions.length){i.push({kind:`header`,group:e.group});for(let t of e.actions){let r=e.group;i.push({kind:`action`,item:t,group:t.action.isAI?{title:r.title,kind:r.kind,icon:B.sparkle}:r,label:t.action.title,disabled:!!t.action.disabled,keybinding:n(t.action)})}}return i}var gy,_y,vy=t((()=>{fy(),Kn(),Bv(),my(),P(),Ng(),gy=Object.freeze({kind:Mg.Empty,title:A(859,`More Actions...`)}),_y=Object.freeze([{kind:Iv.QuickFix,title:A(860,`Quick Fix`)},{kind:Iv.RefactorExtract,title:A(861,`Extract`),icon:B.wrench},{kind:Iv.RefactorInline,title:A(862,`Inline`),icon:B.wrench},{kind:Iv.RefactorRewrite,title:A(863,`Rewrite`),icon:B.wrench},{kind:Iv.RefactorMove,title:A(864,`Move`),icon:B.wrench},{kind:Iv.SurroundWith,title:A(865,`Surround With`),icon:B.surroundWith},{kind:Iv.Source,title:A(866,`Source Action`),icon:B.symbolFile},gy])})),yy,by,xy,Sy,Cy,wy=t((()=>{O(),M(),N(),Ng(),q(),Tl(),C(),yo(),bd(),Su(),ze(),Bv(),iy(),yy=new De(`supportedCodeAction`,``),by=class extends z{constructor(e,t,n,r=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=r,this._autoTriggerTimer=this._register(new fr),this._register(this._markerService.onMarkerChanged(e=>this._onMarkerChanges(e))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){let t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){let t=this._editor.getModel();t&&e.some(e=>Of(e,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Lv.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;let t=this._editor.getSelection();if(e.type===1)return t;let n=this._editor.getOption(73).enabled;if(n!==Cp.Off){if(n===Cp.On)return t;if(n===Cp.OnCode){if(!t.isEmpty())return t;let e=this._editor.getModel(),{lineNumber:n,column:r}=t.getPosition(),i=e.getLineContent(n);if(i.length===0)return;if(r===1){if(/\s/.test(i[0]))return}else if(r===e.getLineMaxColumn(n)){if(/\s/.test(i[i.length-1]))return}else if(/\s/.test(i[r-2])&&/\s/.test(i[r-1]))return}return t}}},(function(e){e.Empty={type:0};class t{constructor(e,t,n){this.trigger=e,this.position=t,this._cancellablePromise=n,this.type=1,this.actions=n.catch(e=>{if(_d(e))return Sy;throw e})}cancel(){this._cancellablePromise.cancel()}}e.Triggered=t})(xy||={}),Sy=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1}),Cy=class extends z{constructor(e,t,n,r,i,a){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=i,this._configurationService=a,this._codeActionOracle=this._register(new su),this._state=xy.Empty,this._onDidChangeState=this._register(new j),this.onDidChangeState=this._onDidChangeState.event,this.codeActionsDisposable=this._register(new su),this._disposed=!1,this._supportedCodeActions=yy.bindTo(r),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(73)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(xy.Empty,!0))}_settingEnabledNearbyQuickfixes(){let e=this._editor?.getModel();return this._configurationService?this._configurationService.getValue(`editor.codeActionWidget.includeNearbyQuickFixes`,{resource:e?.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(xy.Empty);let e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(103)){let t=this._registry.all(e).flatMap(e=>e.providedCodeActionKinds??[]);this._supportedCodeActions.set(t.join(` `)),this._codeActionOracle.value=new by(this._editor,this._markerService,t=>{if(!t){this.setState(xy.Empty);return}let n=t.selection.getStartPosition(),r=Zn(async n=>{if(this._settingEnabledNearbyQuickfixes()&&t.trigger.type===1&&(t.trigger.triggerAction===Lv.QuickFix||t.trigger.filter?.include?.contains(Iv.QuickFix))){let r=await Vv(this._registry,e,t.selection,t.trigger,Ae.None,n);this.codeActionsDisposable.value=r;let i=[...r.allActions];if(n.isCancellationRequested)return r.dispose(),Sy;let a=r.validActions?.some(e=>e.action.kind&&Iv.QuickFix.contains(new Mg(e.action.kind))&&!e.action.isAI),o=this._markerService.read({resource:e.uri});if(a){for(let e of r.validActions)e.action.command?.arguments?.some(e=>typeof e==`string`&&e.includes(`_typescript.applyFixAllCodeAction`))&&(e.action.diagnostics=[...o.filter(e=>e.relatedInformation)]);return{validActions:r.validActions,allActions:i,documentation:r.documentation,hasAutoFix:r.hasAutoFix,hasAIFix:r.hasAIFix,allAIFixes:r.allAIFixes,dispose:()=>{this.codeActionsDisposable.value=r}}}else if(!a&&o.length>0){let a=t.selection.getPosition(),s=a,c=Number.MAX_VALUE,l=[...r.validActions];for(let u of o){let d=u.endColumn,f=u.endLineNumber,p=u.startLineNumber;if(f===a.lineNumber||p===a.lineNumber){s=new H(f,d);let u={type:t.trigger.type,triggerAction:t.trigger.triggerAction,filter:{include:t.trigger.filter?.include?t.trigger.filter?.include:Iv.QuickFix},autoApply:t.trigger.autoApply,context:{notAvailableMessage:t.trigger.context?.notAvailableMessage||``,position:s}},p=new X(s.lineNumber,s.column,s.lineNumber,s.column),m=await Vv(this._registry,e,p,u,Ae.None,n);if(n.isCancellationRequested)return m.dispose(),Sy;if(m.validActions.length!==0){for(let e of m.validActions)e.action.command?.arguments?.some(e=>typeof e==`string`&&e.includes(`_typescript.applyFixAllCodeAction`))&&(e.action.diagnostics=[...o.filter(e=>e.relatedInformation)]);r.allActions.length===0&&i.push(...m.allActions),Math.abs(a.column-d)<c?l.unshift(...m.validActions):l.push(...m.validActions)}c=Math.abs(a.column-d)}}let u=l.filter((e,t,n)=>n.findIndex(t=>t.action.title===e.action.title)===t);return u.sort((e,t)=>e.action.isPreferred&&!t.action.isPreferred?-1:!e.action.isPreferred&&t.action.isPreferred||e.action.isAI&&!t.action.isAI?1:!e.action.isAI&&t.action.isAI?-1:0),{validActions:u,allActions:i,documentation:r.documentation,hasAutoFix:r.hasAutoFix,hasAIFix:r.hasAIFix,allAIFixes:r.allAIFixes,dispose:()=>{this.codeActionsDisposable.value=r}}}}if(t.trigger.type===1){let r=await Vv(this._registry,e,t.selection,t.trigger,Ae.None,n);return this.codeActionsDisposable.value=r,r}let r=await Vv(this._registry,e,t.selection,t.trigger,Ae.None,n);return this.codeActionsDisposable.value=r,r});t.trigger.type===1&&this._progressService?.showWhile(r,250);let i=new xy.Triggered(t.trigger,n,r),a=!1;this._state.type===1&&(a=this._state.trigger.type===1&&i.type===1&&i.trigger.type===2&&this._state.position!==i.position),a?setTimeout(()=>{this.setState(i)},500):this.setState(i)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Lv.Default})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value?.trigger(e),this.codeActionsDisposable.dispose()}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}})),Ty=t((()=>{})),Ey,Dy,Oy,ky,Ay,jy,My,Ny,Py,Fy,Iy=t((()=>{y(),Hd(),Kn(),N(),q(),sr(),Ty(),zf(),md(),Ut(),iy(),P(),Ki(),Ie(),_(),Ey=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Dy=function(e,t){return function(n,r){t(n,r,e)}},ky=To(`gutter-lightbulb`,B.lightBulb,A(867,`Icon which spawns code actions menu from the gutter when there is no space in the editor.`)),Ay=To(`gutter-lightbulb-auto-fix`,B.lightbulbAutofix,A(868,`Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.`)),jy=To(`gutter-lightbulb-sparkle`,B.lightbulbSparkle,A(869,`Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.`)),My=To(`gutter-lightbulb-aifix-auto-fix`,B.lightbulbSparkleAutofix,A(870,`Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.`)),Ny=To(`gutter-lightbulb-sparkle-filled`,B.sparkleFilled,A(871,`Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.`)),(function(e){e.Hidden={type:0};class t{constructor(e,t,n,r){this.actions=e,this.trigger=t,this.editorPosition=n,this.widgetPosition=r,this.type=1}}e.Showing=t})(Py||={}),Fy=class extends z{static#e=Oy=this;static#t=this.GUTTER_DECORATION=L.register({description:`codicon-gutter-lightbulb-decoration`,glyphMarginClassName:Qt.asClassName(B.lightBulb),glyphMargin:{position:lm.Left},stickiness:1});static#n=this.ID=`editor.contrib.lightbulbWidget`;static#r=this._posPref=[0];constructor(e,t){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new j),this.onClick=this._onClick.event,this._state=Py.Hidden,this._gutterState=Py.Hidden,this._iconClasses=[],this.lightbulbClasses=[`codicon-`+ky.id,`codicon-`+My.id,`codicon-`+Ay.id,`codicon-`+jy.id,`codicon-`+Ny.id],this.gutterDecoration=Oy.GUTTER_DECORATION,this._domNode=R(`div.lightBulbWidget`),this._domNode.role=`listbox`,this._register(Lf.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(e=>{let t=this._editor.getModel();(this.state.type!==1||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide(),(this.gutterState.type!==1||!t||this.gutterState.editorPosition.lineNumber>=t.getLineCount())&&this.gutterHide()})),this._register(gc(this._domNode,e=>{if(this.state.type!==1)return;this._editor.focus(),e.preventDefault();let{top:t,height:n}=td(this._domNode),r=this._editor.getOption(75),i=Math.floor(r/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(i+=r),this._onClick.fire({x:e.posx,y:t+n+i,actions:this.state.actions,trigger:this.state.trigger})})),this._register(ch(this._domNode,`mouseenter`,e=>{(e.buttons&1)==1&&this.hide()})),this._register(mf.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{this._preferredKbLabel=this._keybindingService.lookupKeybinding(`editor.action.autoFix`)?.getLabel()??void 0,this._quickFixKbLabel=this._keybindingService.lookupKeybinding(`editor.action.quickFix`)?.getLabel()??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async e=>{if(!e.target.element||!this.lightbulbClasses.some(t=>e.target.element&&e.target.element.classList.contains(t))||this.gutterState.type!==1)return;this._editor.focus();let{top:t,height:n}=td(e.target.element),r=this._editor.getOption(75),i=Math.floor(r/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(i+=r),this._onClick.fire({x:e.event.posx,y:t+n+i,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return`LightBulbWidget`}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0||!this._editor.hasTextFocus()||!this._editor.getOptions().get(73).enabled)return this.gutterHide(),this.hide();let r=this._editor.getModel();if(!r)return this.gutterHide(),this.hide();let{lineNumber:i,column:a}=r.validatePosition(n),o=r.getOptions().tabSize,s=this._editor.getOptions().get(59),c=zi(r.getLineContent(i),o),l=s.spaceWidth*c>22,u=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1),d=this._editor.getLineDecorations(i),f=!1;if(d)for(let e of d){let t=e.options.glyphMarginClassName;if(t&&!this.lightbulbClasses.some(e=>t.includes(e))){f=!0;break}}let p=i,m=1;if(!l){let o=e=>{let t=r.getLineContent(e);return/^\s*$|^\s+/.test(t)||t.length<=m};if(i>1&&!u(i-1)){let a=i===r.getLineCount(),s=i>1&&o(i-1),c=!a&&o(i+1),l=o(i),u=!c&&!s;if(!c&&!s&&!f)return this.gutterState=new Py.Showing(e,t,n,{position:{lineNumber:p,column:m},preference:Oy._posPref}),this.renderGutterLightbub(),this.hide();s||a||s&&!l?--p:(c||u&&l)&&(p+=1)}else if(i===1&&(i===r.getLineCount()||!o(i+1)&&!o(i)))if(this.gutterState=new Py.Showing(e,t,n,{position:{lineNumber:p,column:m},preference:Oy._posPref}),f)this.gutterHide();else return this.renderGutterLightbub(),this.hide();else if(i<r.getLineCount()&&!u(i+1))p+=1;else if(a*s.spaceWidth<22)return this.hide();m=/^\S\s*$/.test(r.getLineContent(p))?2:1}this.state=new Py.Showing(e,t,n,{position:{lineNumber:p,column:m},preference:Oy._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());let h=e.validActions,ee=e.validActions[0].action.kind;if(h.length!==1||!ee){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==Py.Hidden&&(this.state=Py.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==Py.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=Py.Hidden)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=B.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):e=this.state.actions.hasAutoFix?this.state.actions.hasAIFix?B.lightbulbSparkleAutofix:B.lightbulbAutofix:this.state.actions.hasAIFix?B.lightbulbSparkle:B.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=Qt.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let e,t=!1;this.gutterState.actions.allAIFixes?(e=Ny,this.gutterState.actions.validActions.length===1&&(t=!0)):e=this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?My:Ay:this.gutterState.actions.hasAIFix?jy:ky,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t),this.gutterDecoration=L.register({description:`codicon-gutter-lightbulb-decoration`,glyphMarginClassName:Qt.asClassName(e),glyphMargin:{position:lm.Left},stickiness:1})}renderGutterLightbub(){let e=this._editor.getSelection();e&&(this._gutterDecorationID===void 0?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}_addGutterDecoration(e){this._editor.changeDecorations(t=>{this._gutterDecorationID=t.addDecoration(new T(e,0,e,0),this.gutterDecoration)})}_removeGutterDecoration(e){this._editor.changeDecorations(t=>{t.removeDecoration(e),this._gutterDecorationID=void 0})}_updateGutterDecoration(e,t){this._editor.changeDecorations(n=>{n.changeDecoration(e,new T(t,0,t,0)),n.changeDecorationOptions(e,this.gutterDecoration)})}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=A(872,`Run: {0}`,this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=A(873,`Show Code Actions. Preferred Quick Fix Available ({0})`,this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=A(874,`Show Code Actions ({0})`,this._quickFixKbLabel):e||(this.title=A(875,`Show Code Actions`)))}set title(e){this._domNode.title=e}},Fy=Oy=Ey([Dy(1,xs)],Fy)})),Ly,Ry,zy,By,Vy,Hy=t((()=>{y(),qc(),M(),Ng(),ma(),q(),P(),iv(),jo(),qp(),C(),F(),Ic(),yo(),Ei(),qs(),Yf(),Su(),md(),yu(),i_(),Bv(),iy(),ly(),vy(),wy(),Iy(),Ly=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ry=function(e,t){return function(n,r){t(n,r,e)}},By=`quickfix-edit-highlight`,Vy=class extends z{static#e=zy=this;static#t=this.ID=`editor.contrib.codeActionController`;static get(e){return e.getContribution(zy.ID)}constructor(e,t,n,r,i,a,o,s,c,l,u){super(),this._commandService=o,this._configurationService=s,this._actionWidgetService=c,this._instantiationService=l,this._progressService=u,this._activeCodeActions=this._register(new su),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new Cy(this._editor,i.codeActionProvider,t,n,a,s)),this._register(this._model.onDidChangeState(e=>this.update(e))),this._lightBulbWidget=new Dr(()=>{let e=this._editor.getContribution(Fy.ID);return e&&this._register(e.onClick(e=>this.showCodeActionsFromLightbulb(e.actions,e))),e}),this._resolver=r.createInstance(cy),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){let t=e.validActions[0],n=t.action.command;n&&n.id===`inlineChat.start`&&n.arguments&&n.arguments.length>=1&&(n.arguments[0]={...n.arguments[0],autoSend:!1}),await this.applyCodeAction(t,!1,!1,ry.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,n){return this.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,r){if(!this._editor.hasModel())return;n_.get(this._editor)?.closeMessage();let i=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:r,context:{notAvailableMessage:e,position:i}})}_trigger(e){return this._model.trigger(e)}async applyCodeAction(e,t,n,r){let i=this._progressService.show(!0,500);try{await this._instantiationService.invokeFunction(Gv,e,r,{preview:n,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:Lv.QuickFix,filter:{}}),i.done()}}hideLightBulbWidget(){this._lightBulbWidget.rawValue?.hide(),this._lightBulbWidget.rawValue?.gutterHide()}async update(e){if(e.type!==1){this.hideLightBulbWidget();return}let t;try{t=await e.actions}catch(e){$p(e);return}if(!this._disposed&&this._editor.getSelection()?.startLineNumber===e.position.lineNumber)if(this._lightBulbWidget.value?.update(t,e.trigger,e.position),e.trigger.type===1){if(e.trigger.filter?.include){let n=this.tryGetValidActionToApply(e.trigger,t);if(n){try{this.hideLightBulbWidget(),await this.applyCodeAction(n,!1,!1,ry.FromCodeActions)}finally{t.dispose()}return}if(e.trigger.context){let n=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,t);if(n&&n.action.disabled){n_.get(this._editor)?.showMessage(n.action.disabled,e.trigger.context.position),t.dispose();return}}}let n=!!e.trigger.filter?.include;if(e.trigger.context&&(!t.allActions.length||!n&&!t.validActions.length)){n_.get(this._editor)?.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=t,t.dispose();return}this._activeCodeActions.value=t,this.showCodeActionList(t,this.toCoords(e.position),{includeDisabledActions:n,fromLightbulb:!1})}else this._actionWidgetService.isVisible?t.dispose():this._activeCodeActions.value=t}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply===`first`&&t.validActions.length===0||e.autoApply===`ifSingle`&&t.allActions.length===1))return t.allActions.find(({action:e})=>e.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply===`first`&&t.validActions.length>0||e.autoApply===`ifSingle`&&t.validActions.length===1))return t.validActions[0]}static#n=this.DECORATION=L.register({description:`quickfix-highlight`,className:By});async showCodeActionList(e,t,n){let r=this._editor.createDecorationsCollection(),i=this._editor.getDomNode();if(!i)return;let a=n.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!a.length)return;let o=H.isIPosition(t)?this.toCoords(t):t;this._actionWidgetService.show(`codeActionWidget`,!0,hy(a,this._shouldShowHeaders(),this._resolver.getResolver()),{onSelect:async(e,t)=>{this.applyCodeAction(e,!0,!!t,n.fromLightbulb?ry.FromAILightbulb:ry.FromCodeActions),this._actionWidgetService.hide(!1),r.clear()},onHide:e=>{this._editor?.focus(),r.clear()},onHover:async(e,t)=>{if(t.isCancellationRequested)return;let n=!1,r=e.action.kind;if(r){let e=new Mg(r);n=[Iv.RefactorExtract,Iv.RefactorInline,Iv.RefactorRewrite,Iv.RefactorMove,Iv.Source].some(t=>t.contains(e))}return{canPreview:n||!!e.action.edit?.edits.length}},onFocus:e=>{if(e&&e.action){let t=e.action.ranges,n=e.action.diagnostics;if(r.clear(),t&&t.length>0){let e=n&&n?.length>1?n.map(e=>({range:e,options:zy.DECORATION})):t.map(e=>({range:e,options:zy.DECORATION}));r.set(e)}else if(n&&n.length>0){let e=n.map(e=>({range:e,options:zy.DECORATION}));r.set(e);let t=n[0];if(t.startLineNumber&&t.startColumn){let e=this._editor.getModel()?.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn})?.word;El(A(856,`Context: {0} at line {1} and column {2}.`,e,t.startLineNumber,t.startColumn))}}}else r.clear()}},o,i,this._getActionBarActions(e,t,n))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();let t=this._editor.getScrolledVisiblePosition(e),n=td(this._editor.getDomNode());return{x:n.left+t.left,y:n.top+t.top+t.height}}_shouldShowHeaders(){let e=this._editor?.getModel();return this._configurationService.getValue(`editor.codeActionWidget.showHeaders`,{resource:e?.uri})}_getActionBarActions(e,t,n){if(n.fromLightbulb)return[];let r=e.documentation.map(e=>({id:e.id,label:e.title,tooltip:e.tooltip??``,class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(e.id,...e.arguments??[])}));return n.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&r.push(this._showDisabled?{id:`hideMoreActions`,label:A(857,`Hide Disabled`),enabled:!0,tooltip:``,class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,n))}:{id:`showMoreActions`,label:A(858,`Show Disabled`),enabled:!0,tooltip:``,class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,n))}),r}},Vy=zy=Ly([Ry(1,vf),Ry(2,bh),Ry(3,U),Ry(4,V),Ry(5,fa),Ry(6,no),Ry(7,xl),Ry(8,tv),Ry(9,U),Ry(10,fa)],Vy),$n((e,t)=>{((e,n)=>{n&&t.addRule(`.monaco-editor ${e} { background-color: ${n}; }`)})(`.quickfix-edit-highlight`,e.getColor(qd));let n=e.getColor(np);n&&t.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${hh(e.type)?`dotted`:`solid`} ${n}; box-sizing: border-box; }`)})}));function Uy(e){return b.regex(yy.keys()[0],RegExp(`(\\s|^)`+Xm(e.value)+`\\b`))}function Wy(e,t,n,r,i=Lv.Default){e.hasModel()&&Vy.get(e)?.manualTriggerAtCurrentPosition(t,i,n,r)}var Gy,Ky,qy,Jy,Yy,Xy,Zy,Qy,$y=t((()=>{Ng(),Ga(),v(),yc(),iy(),P(),C(),Bv(),Hy(),wy(),Gy={type:`object`,defaultSnippets:[{body:{kind:``}}],properties:{kind:{type:`string`,description:A(824,`Kind of the code action to run.`)},apply:{type:`string`,description:A(825,`Controls when the returned actions are applied.`),default:`ifSingle`,enum:[`first`,`ifSingle`,`never`],enumDescriptions:[A(826,`Always apply the first returned code action.`),A(827,`Apply the first returned code action if it is the only one.`),A(828,`Do not apply the returned code actions.`)]},preferred:{type:`boolean`,default:!1,description:A(829,`Controls if only preferred code actions should be returned.`)}}},Ky=class extends S{constructor(){super({id:Jv,label:K(846,`Quick Fix...`),precondition:b.and(J.writable,J.hasCodeActionsProvider),kbOpts:{kbExpr:J.textInputFocus,primary:2137,weight:100}})}run(e,t){return Wy(t,A(830,`No code actions available`),void 0,void 0,Lv.QuickFix)}},qy=class extends dn{constructor(){super({id:qv,precondition:b.and(J.writable,J.hasCodeActionsProvider),metadata:{description:`Trigger a code action`,args:[{name:`args`,schema:Gy}]}})}runEditorCommand(e,t,n){let r=Rv.fromUser(n,{kind:Mg.Empty,apply:`ifSingle`});return Wy(t,typeof n?.kind==`string`?r.preferred?A(831,`No preferred code actions for '{0}' available`,n.kind):A(832,`No code actions for '{0}' available`,n.kind):r.preferred?A(833,`No preferred code actions available`):A(834,`No code actions available`),{include:r.kind,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}},Jy=class extends S{constructor(){super({id:Xv,label:K(847,`Refactor...`),precondition:b.and(J.writable,J.hasCodeActionsProvider),kbOpts:{kbExpr:J.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:`1_modification`,order:2,when:b.and(J.writable,Uy(Iv.Refactor))},metadata:{description:`Refactor...`,args:[{name:`args`,schema:Gy}]}})}run(e,t,n){let r=Rv.fromUser(n,{kind:Iv.Refactor,apply:`never`});return Wy(t,typeof n?.kind==`string`?r.preferred?A(835,`No preferred refactorings for '{0}' available`,n.kind):A(836,`No refactorings for '{0}' available`,n.kind):r.preferred?A(837,`No preferred refactorings available`):A(838,`No refactorings available`),{include:Iv.Refactor.contains(r.kind)?r.kind:Mg.None,onlyIncludePreferredActions:r.preferred},r.apply,Lv.Refactor)}},Yy=class extends S{constructor(){super({id:Zv,label:K(848,`Source Action...`),precondition:b.and(J.writable,J.hasCodeActionsProvider),contextMenuOpts:{group:`1_modification`,order:2.1,when:b.and(J.writable,Uy(Iv.Source))},metadata:{description:`Source Action...`,args:[{name:`args`,schema:Gy}]}})}run(e,t,n){let r=Rv.fromUser(n,{kind:Iv.Source,apply:`never`});return Wy(t,typeof n?.kind==`string`?r.preferred?A(839,`No preferred source actions for '{0}' available`,n.kind):A(840,`No source actions for '{0}' available`,n.kind):r.preferred?A(841,`No preferred source actions available`):A(842,`No source actions available`),{include:Iv.Source.contains(r.kind)?r.kind:Mg.None,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply,Lv.SourceAction)}},Xy=class extends S{constructor(){super({id:Qv,label:K(849,`Organize Imports`),precondition:b.and(J.writable,Uy(Iv.SourceOrganizeImports)),kbOpts:{kbExpr:J.textInputFocus,primary:1581,weight:100},metadata:{description:K(850,`Organize imports in the current file. Also called 'Optimize Imports' by some tools`)}})}run(e,t){return Wy(t,A(843,`No organize imports action available`),{include:Iv.SourceOrganizeImports,includeSourceActions:!0},`ifSingle`,Lv.OrganizeImports)}},Zy=class extends S{constructor(){super({id:$v,label:K(851,`Fix All`),precondition:b.and(J.writable,Uy(Iv.SourceFixAll))})}run(e,t){return Wy(t,A(844,`No fix all action available`),{include:Iv.SourceFixAll,includeSourceActions:!0},`ifSingle`,Lv.FixAll)}},Qy=class extends S{constructor(){super({id:Yv,label:K(852,`Auto Fix...`),precondition:b.and(J.writable,Uy(Iv.QuickFix)),kbOpts:{kbExpr:J.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return Wy(t,A(845,`No auto fixes available`),{include:Iv.QuickFix,onlyIncludePreferredActions:!0},`ifSingle`,Lv.AutoFix)}}})),eb=t((()=>{v(),im(),$y(),Hy(),Iy(),P(),Kf(),An(),k(Vy.ID,Vy,3),k(Fy.ID,Fy,4),D(Ky),D(Jy),D(Yy),D(Xy),D(Qy),D(Zy),E(new qy),It.as(dr.Configuration).registerConfiguration({...Sd,properties:{"editor.codeActionWidget.showHeaders":{type:`boolean`,scope:6,description:A(853,`Enable/disable showing group headers in the Code Action menu.`),default:!0}}}),It.as(dr.Configuration).registerConfiguration({...Sd,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:`boolean`,scope:6,description:A(854,`Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic.`),default:!0}}}),It.as(dr.Configuration).registerConfiguration({...Sd,properties:{"editor.codeActions.triggerOnFocusChange":{type:`boolean`,scope:6,markdownDescription:A(855,`Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.`,"`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}})}));async function tb(e,t,n){let r=e.ordered(t),i=new Map,a=new nb,o=r.map(async(e,r)=>{i.set(e,r);try{let r=await Promise.resolve(e.provideCodeLenses(t,n));r&&a.add(r,e)}catch(e){Jc(e)}});return await Promise.all(o),n.isCancellationRequested?(a.dispose(),nb.Empty):(a.lenses=a.lenses.sort((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:i.get(e.provider)<i.get(t.provider)?-1:i.get(e.provider)>i.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0),a)}var nb,rb=t((()=>{wu(),M(),q(),lr(),xd(),Yd(),jo(),yu(),nb=class e{constructor(){this.lenses=[]}static#e=this.Empty=new e;dispose(){this._store?.dispose()}get isDisposed(){return this._store?.isDisposed??!1}add(e,t){_c(e)&&(this._store??=new I,this._store.add(e));for(let n of e.lenses)this.lenses.push({symbol:n,provider:t})}},hn.registerCommand(`_executeCodeLensProvider`,function(e,...t){let[n,r]=t;en(Fc.isUri(n)),en(typeof r==`number`||!r);let{codeLensProvider:i}=e.get(V),a=e.get(Ip).getModel(n);if(!a)throw bp();let o=[],s=new I;return tb(i,a,W.None).then(e=>{s.add(e);let t=[];for(let n of e.lenses)r==null||n.symbol.command?o.push(n.symbol):r-- >0&&n.provider.resolveCodeLens&&t.push(Promise.resolve(n.provider.resolveCodeLens(a,n.symbol,W.None)).then(e=>o.push(e||n.symbol)));return Promise.all(t)}).then(()=>o).finally(()=>{setTimeout(()=>s.dispose(),100)})})})),ib,ab,ob,sb,cb,lb=t((()=>{N(),Gm(),_(),rb(),Zo(),F(),Zl(),Pd(),y(),ib=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ab=function(e,t){return function(n,r){t(n,r,e)}},ob=Mc(`ICodeLensCache`),sb=class{constructor(e,t){this.lineCount=e,this.data=t}},cb=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw Error(`not supported`)}},this._cache=new sh(20,.75),Mo(ou,()=>e.remove(`codelens/cache`,1));let t=`codelens/cache2`,n=e.get(t,1,`{}`);this._deserialize(n);let r=mf.filter(e.onWillSaveState,e=>e.reason===mu.SHUTDOWN);mf.once(r)(n=>{e.store(t,this._serialize(),1,1)})}put(e,t){let n=t.lenses.map(e=>({range:e.symbol.range,command:e.symbol.command&&{id:``,title:e.symbol.command?.title}})),r=new nb;r.add({lenses:n},this._fakeProvider);let i=new sb(e.getLineCount(),r);this._cache.set(e.uri.toString(),i)}get(e){let t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){let e=Object.create(null);for(let[t,n]of this._cache){let r=new Set;for(let e of n.data.lenses)r.add(e.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...r.values()]}}return JSON.stringify(e)}_deserialize(e){try{let t=JSON.parse(e);for(let e in t){let n=t[e],r=[];for(let e of n.lines)r.push({range:new T(e,1,e,11)});let i=new nb;i.add({lenses:r},this._fakeProvider),this._cache.set(e,new sb(n.lineCount,i))}}catch{}}},cb=ib([ab(0,Vd)],cb),Ds(ob,cb,1)})),ub=t((()=>{})),db,fb,pb,mb,hb,gb=t((()=>{y(),Sp(),ub(),_(),md(),db=class{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement(`div`)}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute(`monaco-visible-view-zone`)}},fb=class e{static#e=this._idPool=0;constructor(t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=t,this._id=`codelens.widget-${e._idPool++}`,this.updatePosition(n),this._domNode=document.createElement(`span`),this._domNode.className=`codelens-decoration`}withCommands(t,n){this._commands.clear();let r=[],i=!1;for(let n=0;n<t.length;n++){let a=t[n];if(a&&(i=!0,a.command)){let i=yd(a.command.title.trim());if(a.command.id){let t=`c${e._idPool++}`;r.push(R(`a`,{id:t,title:a.command.tooltip,role:`button`},...i)),this._commands.set(t,a.command)}else r.push(R(`span`,{title:a.command.tooltip},...i));n+1<t.length&&r.push(R(`span`,void 0,`\xA0|\xA0`))}}i?(gn(this._domNode,...r),this._isEmpty&&n&&this._domNode.classList.add(`fadein`),this._isEmpty=!1):gn(this._domNode,R(`span`,void 0,`no commands`))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){this._widgetPosition={position:{lineNumber:e,column:this._editor.getModel().getLineFirstNonWhitespaceColumn(e)},preference:[1]}}getPosition(){return this._widgetPosition||null}},pb=class{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,n=t.length;e<n;e++)this._addDecorationsCallbacks[e](t[e])}},mb=L.register({collapseOnReplaceEdit:!0,description:`codelens`}),hb=class{constructor(e,t,n,r,i,a){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let o,s=[];this._data.forEach((e,t)=>{e.symbol.command&&s.push(e.symbol),n.addDecoration({range:e.symbol.range,options:mb},e=>this._decorationIds[t]=e),o=o?T.plusRange(o,e.symbol.range):T.lift(e.symbol.range)}),this._viewZone=new db(o.startLineNumber-1,i,a),this._viewZoneId=r.addZone(this._viewZone),s.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(s,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new fb(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&=(this._editor.removeContentWidget(this._contentWidget),void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{let n=this._editor.getModel().getDecorationRange(e),r=this._data[t].symbol;return!!(n&&T.isEmpty(r.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((e,n)=>{t.addDecoration({range:e.symbol.range,options:mb},e=>this._decorationIds[n]=e)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){let n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){let n=e[t];if(n){let{symbol:e}=this._data[t];e.command=n.command||e.command}}}getCommand(e){return this._contentWidget?.getCommand(e)}getLineNumber(){let e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){let t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}})),_b,vb,yb,bb=t((()=>{O(),M(),q(),Tr(),v(),bd(),yc(),rb(),lb(),gb(),P(),jo(),up(),xn(),tf(),yu(),_b=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vb=function(e,t){return function(n,r){t(n,r,e)}},yb=class{static#e=this.ID=`css.editor.codeLens`;constructor(e,t,n,r,i,a){this._editor=e,this._languageFeaturesService=t,this._commandService=r,this._notificationService=i,this._codeLensCache=a,this._disposables=new I,this._localToDispose=new I,this._lenses=[],this._oldCodeLensModels=new I,this._provideCodeLensDebounce=n.for(t.codeLensProvider,`CodeLensProvide`,{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,`CodeLensResolve`,{min:250,salt:`resolve`}),this._resolveCodeLensesScheduler=new rn(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(59)||e.hasChanged(25)||e.hasChanged(24))&&this._updateLensStyle(),e.hasChanged(23)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){this._localDispose(),this._localToDispose.dispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),this._currentCodeLensModel?.dispose()}_getLayoutInfo(){let e=Math.max(1.3,this._editor.getOption(75)/this._editor.getOption(61)),t=this._editor.getOption(25);return(!t||t<5)&&(t=this._editor.getOption(61)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){let{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(24),r=this._editor.getOption(59),{style:i}=this._editor.getContainerDomNode();i.setProperty(`--vscode-editorCodeLens-lineHeight`,`${e}px`),i.setProperty(`--vscode-editorCodeLens-fontSize`,`${t}px`),i.setProperty(`--vscode-editorCodeLens-fontFeatureSettings`,r.fontFeatureSettings),n&&(i.setProperty(`--vscode-editorCodeLens-fontFamily`,n),i.setProperty(`--vscode-editorCodeLens-fontFamilyDefault`,Eu.fontFamily)),this._editor.changeViewZones(t=>{for(let n of this._lenses)n.updateHeight(e,t)})}_localDispose(){this._getCodeLensModelPromise?.cancel(),this._getCodeLensModelPromise=void 0,this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),this._currentCodeLensModel?.dispose()}_onModelChange(){this._localDispose();let e=this._editor.getModel();if(!e||!this._editor.getOption(23)||e.isTooLargeForTokenization())return;let t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&ps(()=>{t===this._codeLensCache.get(e)&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(let t of this._languageFeaturesService.codeLensProvider.all(e))if(typeof t.onDidChange==`function`){let e=t.onDidChange(()=>n.schedule());this._localToDispose.add(e)}let n=new rn(()=>{let t=Date.now();this._getCodeLensModelPromise?.cancel(),this._getCodeLensModelPromise=Zn(t=>tb(this._languageFeaturesService.codeLensProvider,e,t)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r),n.delay=this._provideCodeLensDebounce.update(e,Date.now()-t),this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},$p)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(qm(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{let n=[],r=-1;this._lenses.forEach(e=>{!e.isValid()||r===e.getLineNumber()?n.push(e):(e.update(t),r=e.getLineNumber())});let i=new pb;n.forEach(e=>{e.dispose(i,t),this._lenses.splice(this._lenses.indexOf(e),1)}),i.commit(e)})}),n.schedule(),this._resolveCodeLensesScheduler.cancel(),this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{n.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(qm(()=>{if(this._editor.getModel()){let e=Nn.capture(this._editor);this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{this._disposeAllLenses(e,t)})}),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(e=>{if(e.target.type!==9)return;let t=e.target.element;if(t?.tagName===`SPAN`&&(t=t.parentElement),t?.tagName===`A`)for(let e of this._lenses){let n=e.getCommand(t);if(n){this._commandService.executeCommand(n.id,...n.arguments||[]).catch(e=>this._notificationService.error(e));break}}})),n.schedule()}_disposeAllLenses(e,t){let n=new pb;for(let e of this._lenses)e.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),n=[],r;for(let i of e.lenses){let e=i.symbol.range.startLineNumber;e<1||e>t||(r&&r[r.length-1].symbol.range.startLineNumber===e?r.push(i):(r=[i],n.push(r)))}if(!n.length&&!this._lenses.length)return;let i=Nn.capture(this._editor),a=this._getLayoutInfo();this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{let r=new pb,i=0,o=0;for(;o<n.length&&i<this._lenses.length;){let e=n[o][0].symbol.range.startLineNumber,s=this._lenses[i].getLineNumber();s<e?(this._lenses[i].dispose(r,t),this._lenses.splice(i,1)):s===e?(this._lenses[i].updateCodeLensSymbols(n[o],r),o++,i++):(this._lenses.splice(i,0,new hb(n[o],this._editor,r,t,a.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),i++,o++)}for(;i<this._lenses.length;)this._lenses[i].dispose(r,t),this._lenses.splice(i,1);for(;o<n.length;)this._lenses.push(new hb(n[o],this._editor,r,t,a.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),o++;r.commit(e)})}),i.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0;let e=this._editor.getModel();if(!e)return;let t=[],n=[];if(this._lenses.forEach(r=>{let i=r.computeIfNecessary(e);i&&(t.push(i),n.push(r))}),t.length===0){this._oldCodeLensModels.clear();return}let r=Date.now(),i=Zn(r=>{let i=t.map((t,i)=>{let a=Array(t.length),o=t.map((t,n)=>!t.symbol.command&&typeof t.provider.resolveCodeLens==`function`?Promise.resolve(t.provider.resolveCodeLens(e,t.symbol,r)).then(e=>{a[n]=e},Jc):(a[n]=t.symbol,Promise.resolve(void 0)));return Promise.all(o).then(()=>{!r.isCancellationRequested&&!n[i].isDisposed()&&n[i].updateCommands(a)})});return Promise.all(i)});this._resolveCodeLensesPromise=i,this._resolveCodeLensesPromise.then(()=>{let t=this._resolveCodeLensesDebounce.update(e,Date.now()-r);this._resolveCodeLensesScheduler.delay=t,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),i===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},e=>{$p(e),i===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,this._currentCodeLensModel?.isDisposed?void 0:this._currentCodeLensModel}},yb=_b([vb(1,V),vb(2,Vp),vb(3,no),vb(4,Hp),vb(5,ob)],yb),k(yb.ID,yb,1),D(class extends S{constructor(){super({id:`codelens.showLensesInCurrentLine`,precondition:J.hasCodeLensProvider,label:K(877,`Show CodeLens Commands for Current Line`)})}async run(e,t){if(!t.hasModel())return;let n=e.get(Ne),r=e.get(no),i=e.get(Hp),a=t.getSelection().positionLineNumber,o=t.getContribution(yb.ID);if(!o)return;let s=await o.getModel();if(!s)return;let c=[];for(let e of s.lenses)e.symbol.command&&e.symbol.range.startLineNumber===a&&c.push({label:e.symbol.command.title,command:e.symbol.command});if(c.length===0)return;let l=await n.pick(c,{canPickMany:!1,placeHolder:A(876,`Select a command`)});if(!l)return;let u=l.command;if(s.isDisposed){let e=(await o.getModel())?.lenses.find(e=>e.symbol.range.startLineNumber===a&&e.symbol.command?.title===u.title);if(!e||!e.symbol.command)return;u=e.symbol.command}try{await r.executeCommand(u.id,...u.arguments||[])}catch(e){i.error(e)}}})})),xb,Sb,Cb,wb,Tb=t((()=>{xb=class{constructor(e,t,n,r){this.priority=e,this.range=t,this.initialMousePosX=n,this.initialMousePosY=r,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}},Sb=class{constructor(e,t,n,r,i,a){this.priority=e,this.owner=t,this.range=n,this.initialMousePosX=r,this.initialMousePosY=i,this.supportsMarkerHover=a,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}},Cb=class{constructor(e,t){this.renderedHoverParts=e,this.disposables=t}dispose(){for(let e of this.renderedHoverParts)e.dispose();this.disposables?.dispose()}},wb=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}}})),Eb,Db,Ob,kb,Ab=t((()=>{Ao(),q(),yu(),va(),Eb=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Db=function(e,t){return function(n,r){t(n,r,e)}},Ob=class{constructor(e){this._editorWorkerService=e}async provideDocumentColors(e,t){return this._editorWorkerService.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,n){let r=t.range,i=t.color,a=i.alpha,o=new _o(new to(Math.round(255*i.red),Math.round(255*i.green),Math.round(255*i.blue),a)),s=a?_o.Format.CSS.formatRGBA(o):_o.Format.CSS.formatRGB(o),c=a?_o.Format.CSS.formatHSLA(o):_o.Format.CSS.formatHSL(o),l=a?_o.Format.CSS.formatHexA(o):_o.Format.CSS.formatHex(o),u=[];return u.push({label:s,textEdit:{range:r,text:s}}),u.push({label:c,textEdit:{range:r,text:c}}),u.push({label:l,textEdit:{range:r,text:l}}),u}},Ob=Eb([Db(0,jr)],Ob),kb=class extends z{constructor(e,t){super(),this._register(e.colorProvider.register(`*`,new Ob(t)))}},kb=Eb([Db(0,V),Db(1,jr)],kb)}));async function jb(e,t,n,r=`auto`){return Nb(new Fb,e,t,n,r)}function Mb(e,t,n,r){return Promise.resolve(n.provideColorPresentations(e,t,r))}async function Nb(e,t,n,r,i){let a=!1,o,s=[],c=t.ordered(n);for(let t=c.length-1;t>=0;t--){let l=c[t];if(i!==`always`&&l instanceof Ob)o=l;else try{await e.compute(l,n,r,s)&&(a=!0)}catch(e){Jc(e)}}return a?s:o&&i!==`never`?(await e.compute(o,n,r,s),s):[]}function Pb(e,t){let{colorProvider:n}=e.get(V),r=e.get(Ip).getModel(t);if(!r)throw bp();return{model:r,colorProviderRegistry:n,defaultColorDecoratorsEnablement:e.get(xl).getValue(`editor.defaultColorDecorators`,{resource:t})}}var Fb,Ib,Lb,Rb=t((()=>{wu(),M(),Yd(),yu(),Ab(),qp(),Fb=class{constructor(){}async compute(e,t,n,r){let i=await e.provideDocumentColors(t,n);if(Array.isArray(i))for(let t of i)r.push({colorInfo:t,provider:e});return Array.isArray(i)}},Ib=class{constructor(){}async compute(e,t,n,r){let i=await e.provideDocumentColors(t,n);if(Array.isArray(i))for(let e of i)r.push({range:e.range,color:[e.color.red,e.color.green,e.color.blue,e.color.alpha]});return Array.isArray(i)}},Lb=class{constructor(e){this.colorInfo=e}async compute(e,t,n,r){let i=await e.provideColorPresentations(t,this.colorInfo,W.None);return Array.isArray(i)&&r.push(...i),Array.isArray(i)}}})),zb,Bb,Vb,Hb,Ub,Wb,Gb=t((()=>{O(),Ao(),M(),N(),q(),em(),Ga(),ht(),_(),md(),tf(),yu(),Rb(),qp(),zb=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Bb=function(e,t){return function(n,r){t(n,r,e)}},Hb=Object.create({}),Ub=class extends z{static#e=Vb=this;static#t=this.ID=`editor.contrib.colorDetector`;static#n=this.RECOMPUTE_TIME=1e3;constructor(e,t,n,r){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new I),this._decorationsIds=[],this._colorDatas=new Map,this._decoratorLimitReporter=this._register(new Wb),this._colorDecorationClassRefs=this._register(new I),this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=this._register(new Xa(this._editor)),this._debounceInformation=r.for(n.colorProvider,`Document Colors`,{min:Vb.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(n.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(e=>{let t=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._defaultColorDecoratorsEnablement=this._editor.getOption(166);let n=t!==this._isColorDecoratorsEnabled||e.hasChanged(27),r=e.hasChanged(166);(n||r)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._defaultColorDecoratorsEnablement=this._editor.getOption(166),this.updateColors()}isEnabled(){let e=this._editor.getModel();if(!e)return!1;let t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n==`object`){let e=n.colorDecorators;if(e&&e.enable!==void 0&&!e.enable)return e.enable}return this._editor.getOption(26)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;let e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new fr,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=Zn(async e=>{let t=this._editor.getModel();if(!t)return[];let n=new vd(!1),r=await jb(this._languageFeaturesService.colorProvider,t,e,this._defaultColorDecoratorsEnablement);return this._debounceInformation.update(t,n.elapsed()),r});try{let e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){$p(e)}}stop(){this._timeoutTimer&&=(this._timeoutTimer.cancel(),null),this._computePromise&&=(this._computePromise.cancel(),null),this._localToDispose.clear()}updateDecorations(e){let t=e.map(e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:L.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((t,n)=>this._colorDatas.set(t,e[n]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[],n=this._editor.getOption(27);for(let r=0;r<e.length&&t.length<n;r++){let{red:n,green:i,blue:a,alpha:o}=e[r].colorInfo.color,s=new to(Math.round(n*255),Math.round(i*255),Math.round(a*255),o),c=`rgba(${s.r}, ${s.g}, ${s.b}, ${s.a})`,l=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));t.push({range:{startLineNumber:e[r].colorInfo.range.startLineNumber,startColumn:e[r].colorInfo.range.startColumn,endLineNumber:e[r].colorInfo.range.endLineNumber,endColumn:e[r].colorInfo.range.endColumn},options:{description:`colorDetector`,before:{content:`\xA0`,inlineClassName:`${l.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:Hb}}})}let r=n<e.length?n:!1;this._decoratorLimitReporter.update(e.length,r),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){let t=this._editor.getModel();if(!t)return null;let n=t.getDecorationsInRange(T.fromPositions(e,e)).filter(e=>this._colorDatas.has(e.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},Ub=Vb=zb([Bb(1,xl),Bb(2,V),Bb(3,Vp)],Ub),Wb=class extends z{constructor(){super(...arguments),this._onDidChange=this._register(new j),this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}})),Kb,qb,Jb,Yb,Xb,Zb,Qb,$b,ex,tx,nx,rx,ix,ax,ox,sx=t((()=>{P(),Kb=`editor.action.showHover`,qb=`editor.action.showDefinitionPreviewHover`,Jb=`editor.action.hideHover`,Yb=`editor.action.scrollUpHover`,Xb=`editor.action.scrollDownHover`,Zb=`editor.action.scrollLeftHover`,Qb=`editor.action.scrollRightHover`,$b=`editor.action.pageUpHover`,ex=`editor.action.pageDownHover`,tx=`editor.action.goToTopHover`,nx=`editor.action.goToBottomHover`,rx=`editor.action.increaseHoverVerbosityLevel`,ix=A(1094,`Increase Hover Verbosity Level`),ax=`editor.action.decreaseHoverVerbosityLevel`,ox=A(1095,`Decrease Hover Verbosity Level`)})),cx,lx,ux,dx,fx,px,mx=t((()=>{cx=`editor.action.inlineSuggest.commit`,lx=`editor.action.inlineSuggest.showPrevious`,ux=`editor.action.inlineSuggest.showNext`,dx=`editor.action.inlineSuggest.jump`,fx=`editor.action.inlineSuggest.hide`,px=`editor.action.inlineSuggest.toggleShowCollapsed`})),hx=t((()=>{})),gx,_x,vx,yx,bx,xx,Sx,Cx,wx,Tx,Ex=t((()=>{y(),nc(),ra(),Rd(),Ji(),sn(),O(),Kn(),ds(),q(),ls(),Rt(),sr(),P(),xf(),vl(),de(),jo(),C(),be(),F(),Ki(),Ue(),Ie(),Su(),Gr(),mx(),hx(),gx=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_x=function(e,t){return function(n,r){t(n,r,e)}},yx=class extends z{constructor(e,t,n){super(),this.editor=e,this.model=t,this.instantiationService=n,this.alwaysShowToolbar=Dp(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(71).showToolbar===`always`),this.sessionPosition=void 0,this.position=G(this,e=>{let t=this.model.read(e)?.primaryGhostText.read(e);if(!this.alwaysShowToolbar.read(e)||!t||t.parts.length===0)return this.sessionPosition=void 0,null;let n=t.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==t.lineNumber&&(this.sessionPosition=void 0);let r=new H(t.lineNumber,Math.min(n,this.sessionPosition?.column??2**53-1));return this.sessionPosition=r,r}),this._register(xm((t,n)=>{let r=this.model.read(t);if(!r||!this.alwaysShowToolbar.read(t))return;let i=G(t=>{let n=t.store.add(this.instantiationService.createInstance(Sx.hot.read(t),this.editor,!0,this.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.activeCommands,r.warning,()=>{}));return e.addContentWidget(n),t.store.add(qm(()=>e.removeContentWidget(n))),t.store.add(Xl(e=>{this.position.read(e)&&r.lastTriggerKind.read(e)!==Xe.Explicit&&r.triggerExplicitly()})),n}),a=dp(this,(e,t)=>!!this.position.read(e)||!!t);n.add(Xl(e=>{a.read(e)&&i.read(e)}))}))}},yx=gx([_x(2,U)],yx),bx=To(`inline-suggestion-hints-next`,B.chevronRight,A(1195,`Icon for show next parameter hint.`)),xx=To(`inline-suggestion-hints-previous`,B.chevronLeft,A(1196,`Icon for show previous parameter hint.`)),Sx=class extends z{static#e=vx=this;static#t=this.hot=Yn(vx);static#n=this._dropDownVisible=!1;static get dropDownVisible(){return this._dropDownVisible}static#r=this.id=0;createCommandAction(e,t,n){let r=new cs(e,t,n,!0,()=>this._commandService.executeCommand(e)),i=this.keybindingService.lookupKeybinding(e,this._contextKeyService),a=t;return i&&(a=A(1197,`{0} ({1})`,t,i.getLabel())),r.tooltip=a,r}constructor(e,t,n,r,i,a,o,s,c,l,u,d,f){super(),this.editor=e,this.withBorder=t,this._position=n,this._currentSuggestionIdx=r,this._suggestionCount=i,this._extraCommands=a,this._warning=o,this._relayout=s,this._commandService=c,this.keybindingService=u,this._contextKeyService=d,this._menuService=f,this.id=`InlineSuggestionHintsContentWidget${vx.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._warningMessageContentNode=G(e=>{let t=this._warning.read(e);if(t)return typeof t.message==`string`?t.message:e.store.add(hf(t.message)).element}),this._warningMessageNode=w.div({class:`warningMessage`,style:{maxWidth:400,margin:4,marginBottom:4,display:G(e=>this._warning.read(e)?`block`:`none`)}},[this._warningMessageContentNode]).keepUpdated(this._store),this.nodes=Lt(`div.inlineSuggestionsHints`,{className:this.withBorder?`monaco-hover monaco-hover-content`:``},[this._warningMessageNode.element,Lt(`div@toolBar`)]),this.previousAction=this._register(this.createCommandAction(lx,A(1198,`Previous`),Qt.asClassName(xx))),this.availableSuggestionCountAction=this._register(new cs(`inlineSuggestionHints.availableSuggestionCount`,``,void 0,!1)),this.nextAction=this._register(this.createCommandAction(ux,A(1199,`Next`),Qt.asClassName(bx))),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(g.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new rn(()=>{this.availableSuggestionCountAction.label=``},100)),this.disableButtonsDebounced=this._register(new rn(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this._register(Xl(e=>{this._warningMessageContentNode.read(e),this._warningMessageNode.readEffect(e),this._relayout()})),this.toolBar=this._register(l.createInstance(Tx,this.nodes.toolBar,g.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith(`primary`)},actionViewItemProvider:(e,t)=>{if(e instanceof at)return l.createInstance(wx,e,void 0);if(e===this.availableSuggestionCountAction){let t=new Cx(void 0,e,{label:!0,icon:!1});return t.setClass(`availableSuggestionCount`),t}},telemetrySource:`InlineSuggestionToolbar`})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(e=>{vx._dropDownVisible=e})),this._register(Xl(e=>{this._position.read(e),this.editor.layoutContentWidget(this)})),this._register(Xl(e=>{let t=this._suggestionCount.read(e),n=this._currentSuggestionIdx.read(e);t===void 0?this.clearAvailableSuggestionCountLabelDebounced.schedule():(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${n+1}/${t}`),t!==void 0&&t>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(Xl(e=>{let t=this._extraCommands.read(e).map(e=>({class:void 0,id:e.command.id,enabled:!0,tooltip:e.command.tooltip||``,label:e.command.title,run:t=>this._commandService.executeCommand(e.command.id)}));for(let[e,n]of this.inlineCompletionsActionsMenus.getActions())for(let e of n)e instanceof at&&t.push(e);t.length>0&&t.unshift(new qo),this.toolBar.setAdditionalSecondaryActions(t)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},Sx=vx=gx([_x(8,no),_x(9,U),_x(10,xs),_x(11,bh),_x(12,Ba)],Sx),Cx=class extends js{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}},wx=class extends Wp{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService,!0);if(!e)return super.updateLabel();if(this.label){let t=Lt(`div.keybinding`).root;this._register(new Nf(t,Pi,{disableTitle:!0,...du})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add(`inlineSuggestionStatusBarItemLabel`)}}updateTooltip(){}},Tx=class extends te{constructor(e,t,n,r,i,a,o,s,c){super(e,{resetMenu:t,...n},r,i,a,o,s,c),this.menuId=t,this.options2=n,this.menuService=r,this.contextKeyService=i,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this.additionalPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){let{primary:e,secondary:t}=ju(this.menu.getActions(this.options2?.menuOptions),this.options2?.toolbarOptions?.primaryGroup,this.options2?.toolbarOptions?.shouldInlineSubmenu,this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions);t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),e.push(...this.additionalPrimaryActions),this.setActions(e,t)}setPrependedPrimaryActions(e){uo(this.prependedPrimaryActions,e,(e,t)=>e===t)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){uo(this.additionalActions,e,(e,t)=>e===t)||(this.additionalActions=e,this.updateToolbar())}},Tx=gx([_x(3,Ba),_x(4,bh),_x(5,Ti),_x(6,xs),_x(7,no),_x(8,Ta)],Tx)}));function Dx(e,t,n){let r=td(e);return!(t<r.left||t>r.left+r.width||n<r.top||n>r.top+r.height)}var Ox=t((()=>{y()})),kx,Ax,jx,Mx=t((()=>{O(),M(),N(),q(),kx=class{constructor(e,t,n,r){this.value=e,this.isComplete=t,this.hasLoadingMessage=n,this.options=r}},Ax=class extends z{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new j),this.onResult=this._onResult.event,this._asyncComputationScheduler=this._register(new jx(e=>this._triggerAsyncComputation(e),0)),this._syncComputationScheduler=this._register(new jx(e=>this._triggerSyncComputation(e),0)),this._loadingMessageScheduler=this._register(new jx(e=>this._triggerLoadingMessage(e),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&=(this._asyncIterable.cancel(),null),this._options=void 0,super.dispose()}get _hoverTime(){return this._editor.getOption(69).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t){this._options=t,this._state=e,this._fireResult(t)}_triggerAsyncComputation(e){this._setState(2,e),this._syncComputationScheduler.schedule(e,this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=qf(t=>this._computer.computeAsync(e,t)),(async()=>{try{for await(let t of this._asyncIterable)t&&(this._result.push(t),this._fireResult(e));this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0,e)}catch(e){$p(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(e){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync(e))),this._setState(this._asyncIterableDone?0:3,e)}_triggerLoadingMessage(e){this._state===3&&this._setState(4,e)}_fireResult(e){if(this._state===1||this._state===2)return;let t=this._state===0,n=this._state===4;this._onResult.fire(new kx(this._result.slice(0),t,n,e))}start(e,t){if(e===0)this._state===0&&(this._setState(1,t),this._asyncComputationScheduler.schedule(t,this._firstWaitTime),this._loadingMessageScheduler.schedule(t,this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(t),this._syncComputationScheduler.cancel(),this._triggerSyncComputation(t);break;case 2:this._syncComputationScheduler.cancel(),this._triggerSyncComputation(t);break}}cancel(){this._asyncComputationScheduler.cancel(),this._syncComputationScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&=(this._asyncIterable.cancel(),null),this._result=[],this._options=void 0,this._state=0}get options(){return this._options}},jx=class extends z{constructor(e,t){super(),this._scheduler=this._register(new rn(()=>e(this._options),t))}schedule(e,t){this._options=e,this._scheduler.schedule(t)}cancel(){this._scheduler.cancel()}}})),Nx,Px=t((()=>{y(),eh(),N(),q(),Nx=class{get onDidWillResize(){return this._onDidWillResize.event}get onDidResize(){return this._onDidResize.event}constructor(){this._onDidWillResize=new j,this._onDidResize=new j,this._sashListener=new I,this._size=new Nd(0,0),this._minSize=new Nd(0,0),this._maxSize=new Nd(2**53-1,2**53-1),this.domNode=document.createElement(`div`),this._eastSash=new wc(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new wc(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new wc(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:mh.North}),this._southSash=new wc(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:mh.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(mf.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(mf.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(r=>{e&&(n=r.currentX-r.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(r=>{e&&(n=-(r.currentX-r.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(r=>{e&&(t=-(r.currentY-r.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(r=>{e&&(t=r.currentY-r.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(mf.any(this._eastSash.onDidReset,this._westSash.onDidReset)(e=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(mf.any(this._northSash.onDidReset,this._southSash.onDidReset)(e=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,r){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=r?3:0}layout(e=this.size.height,t=this.size.width){let{height:n,width:r}=this._minSize,{height:i,width:a}=this._maxSize;e=Math.max(n,Math.min(i,e)),t=Math.max(r,Math.min(a,t));let o=new Nd(t,e);Nd.equals(o,this._size)||(this.domNode.style.height=e+`px`,this.domNode.style.width=t+`px`,this._size=o,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}})),Fx,Ix,Lx,Rx=t((()=>{Px(),q(),Su(),y(),Fx=30,Ix=24,Lx=class extends z{constructor(e,t=new Nd(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new Nx),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position=`absolute`,this._resizableNode.minSize=Nd.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(e=>{this._resize(new Nd(e.dimension.width,e.dimension.height)),e.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){return this._contentPosition?.position?H.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){let t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);if(!(!t||!n))return td(t).top+n.top-Fx}_availableVerticalSpaceBelow(e){let t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);if(!t||!n)return;let r=td(t),i=ot(t.ownerDocument.body),a=r.top+n.top+n.height;return i.height-a-Ix}_findPositionPreference(e,t){let n=Math.min(this._availableVerticalSpaceBelow(t)??1/0,e),r=Math.min(this._availableVerticalSpaceAbove(t)??1/0,e),i=Math.min(Math.max(r,n),e),a=Math.min(e,i),o;return o=this._editor.getOption(69).above?a<=r?1:2:a<=n?2:1,o===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),o}_resize(e){this._resizableNode.layout(e.height,e.width)}}}));function zx(e,t,n,r,i,a){let o=n+i/2,s=r+a/2,c=Math.max(Math.abs(e-o)-i/2,0),l=Math.max(Math.abs(t-s)-a/2,0);return Math.sqrt(c*c+l*l)}var Bx,Vx,Hx,Ux,Wx,Gx=t((()=>{y(),Ki(),Rx(),C(),qp(),u(),yc(),aa(),N(),Bx=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Vx=function(e,t){return function(n,r){t(n,r,e)}},Ux=30,Wx=class extends Lx{static#e=Hx=this;static#t=this.ID=`editor.contrib.resizableContentHoverWidget`;static#n=this._lastDimensions=new Nd(0,0);get isVisibleFromKeyboard(){return this._renderedHover?.source===2}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(e,t,n,r,i){let a=new Nd(150,e.getOption(75)+8);super(e,a),this._configurationService=n,this._accessibilityService=r,this._keybindingService=i,this._hover=this._register(new ys(!0)),this._onDidResize=this._register(new j),this.onDidResize=this._onDidResize.event,this._onDidScroll=this._register(new j),this.onDidScroll=this._onDidScroll.event,this._onContentsChanged=this._register(new j),this.onContentsChanged=this._onContentsChanged.event,this._minimumSize=a,this._hoverVisibleKey=J.hoverVisible.bindTo(t),this._hoverFocusedKey=J.hoverFocused.bindTo(t),x(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex=`50`,this._resizableNode.domNode.className=`monaco-resizable-hover`,this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(59)&&this._updateFont()}));let o=this._register(qn(this._resizableNode.domNode));this._register(o.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(o.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._register(this._hover.scrollbar.onScroll(e=>{this._onDidScroll.fire(e)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){super.dispose(),this._renderedHover?.dispose(),this._editor.removeContentWidget(this)}getId(){return Hx.ID}static _applyDimensions(e,t,n){let r=typeof t==`number`?`${t}px`:t,i=typeof n==`number`?`${n}px`:n;e.style.width=r,e.style.height=i}_setContentsDomNodeDimensions(e,t){let n=this._hover.contentsDomNode;return Hx._applyDimensions(n,e,t)}_setContainerDomNodeDimensions(e,t){let n=this._hover.containerDomNode;return Hx._applyDimensions(n,e,t)}_setScrollableElementDimensions(e,t){let n=this._hover.scrollbar.getDomNode();return Hx._applyDimensions(n,e,t)}_setHoverWidgetDimensions(e,t){this._setContainerDomNodeDimensions(e,t),this._setScrollableElementDimensions(e,t),this._setContentsDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,n){let r=typeof t==`number`?`${t}px`:t,i=typeof n==`number`?`${n}px`:n;e.style.maxWidth=r,e.style.maxHeight=i}_setHoverWidgetMaxDimensions(e,t){Hx._applyMaxDimensions(this._hover.contentsDomNode,e,t),Hx._applyMaxDimensions(this._hover.scrollbar.getDomNode(),e,t),Hx._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty(`--vscode-hover-maxWidth`,typeof e==`number`?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions(`none`,`none`),this._setHoverWidgetDimensions(e.width,e.height)}_updateResizableNodeMaxDimensions(){let e=this._findMaximumRenderingWidth()??1/0,t=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new Nd(e,t),this._setHoverWidgetMaxDimensions(e,t)}_resize(e){Hx._lastDimensions=new Nd(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){let e=this._renderedHover?.showAtPosition;if(e)return this._positionPreference===1?this._availableVerticalSpaceAbove(e):this._availableVerticalSpaceBelow(e)}_findMaximumRenderingHeight(){let e=this._findAvailableSpaceVertically();if(!e)return;let t=this._hover.contentsDomNode.children.length-1;return Array.from(this._hover.contentsDomNode.children).forEach(e=>{t+=e.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty(`--vscode-hover-whiteSpace`,`nowrap`),this._hover.containerDomNode.style.setProperty(`--vscode-hover-sourceWhiteSpace`,`nowrap`);let e=Array.from(this._hover.contentsDomNode.children).some(e=>e.scrollWidth>e.clientWidth);return this._hover.containerDomNode.style.removeProperty(`--vscode-hover-whiteSpace`),this._hover.containerDomNode.style.removeProperty(`--vscode-hover-sourceWhiteSpace`),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;let e=this._isHoverTextOverflowing(),t=this._contentWidth===void 0?0:this._contentWidth;return e||this._hover.containerDomNode.clientWidth<t?ot(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth}isMouseGettingCloser(e,t){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;let n=td(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=zx(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,n.left,n.top,n.width,n.height));let r=zx(e,t,n.left,n.top,n.width,n.height);return r>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,r),!0)}_setRenderedHover(e){this._renderedHover?.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle(`hidden`,!e)}_updateFont(){let{fontSize:e,lineHeight:t}=this._editor.getOption(59),n=this._hover.contentsDomNode;n.style.fontSize=`${e}px`,n.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName(`code`)).forEach(e=>this._editor.applyFontInfo(e))}_updateContent(e){let t=this._hover.contentsDomNode;t.style.paddingBottom=``,t.textContent=``,t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){let e=Math.max(this._editor.getLayoutInfo().height/4,250,Hx._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,750,Hx._lastDimensions.width);this._resizableNode.maxSize=new Nd(t,e),this._setHoverWidgetMaxDimensions(t,e)}_render(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this.handleContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(e){if(!this._editor||!this._editor.hasModel())return;this._render(e);let t=zr(this._hover.containerDomNode),n=e.showAtPosition;this._positionPreference=this._findPositionPreference(t,n)??1,this.handleContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();let r=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&Ns(this._configurationService.getValue(`accessibility.verbosity.hover`)===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding(`editor.action.accessibleView`)?.getAriaLabel()??``);r&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+`, `+r)}hide(){if(!this._renderedHover)return;let e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new Nd(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){let e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions(`auto`,`auto`),this._updateMaxDimensions()}setMinimumDimensions(e){this._minimumSize=new Nd(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){let e=this._contentWidth===void 0?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new Nd(e,this._minimumSize.height)}handleContentsChanged(){this._removeConstraintsRenderNormally();let e=this._hover.contentsDomNode,t=zr(e),n=ti(e)+2;if(this._resizableNode.layout(t,n),this._setHoverWidgetDimensions(n,t),t=zr(e),n=ti(e),this._contentWidth=n,this._updateMinimumWidth(),this._resizableNode.layout(t,n),this._renderedHover?.showAtPosition){let e=zr(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(e,this._renderedHover.showAtPosition)}this._layoutContentWidget(),this._onContentsChanged.fire()}focus(){this._hover.containerDomNode.focus()}scrollUp(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(59);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(59);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){let e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-Ux})}scrollRight(){let e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+Ux})}pageUp(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}},Wx=Hx=Bx([Vx(1,bh),Vx(2,xl),Vx(3,qi),Vx(4,xs)],Wx)})),Kx,qx=t((()=>{sn(),O(),Kx=class e{constructor(e,t){this._editor=e,this._participants=t}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];let n=e.getModel(),r=t.range.startLineNumber;if(r>n.getLineCount())return[];let i=n.getLineMaxColumn(r);return e.getLineDecorations(r).filter(e=>{if(e.options.isWholeLine)return!0;let n=e.range.startLineNumber===r?e.range.startColumn:1,a=e.range.endLineNumber===r?e.range.endColumn:i;if(e.options.showIfCollapsed){if(n>t.range.startColumn+1||t.range.endColumn-1>a)return!1}else if(n>t.range.startColumn||t.range.endColumn>a)return!1;return!0})}computeAsync(t,n){let r=t.anchor;if(!this._editor.hasModel()||!r)return bn.EMPTY;let i=e._getLineDecorations(this._editor,r);return bn.merge(this._participants.map(e=>e.computeAsync?e.computeAsync(r,i,t.source,n):bn.EMPTY))}computeSync(t){if(!this._editor.hasModel())return[];let n=t.anchor,r=e._getLineDecorations(this._editor,n),i=[];for(let e of this._participants)i=i.concat(e.computeSync(n,r,t.source));return Oh(i)}}})),Jx,Yx,Xx=t((()=>{Jx=class{constructor(e,t,n){this.hoverParts=e,this.isComplete=t,this.options=n}filter(e){let t=this.hoverParts.filter(t=>t.isValidForHoverAnchor(e));return t.length===this.hoverParts.length?this:new Yx(this,t,this.isComplete,this.options)}},Yx=class extends Jx{constructor(e,t,n,r){super(t,n,r),this.original=e}filter(e){return this.original.filter(e)}}})),Zx,Qx,$x,eS,tS=t((()=>{y(),aa(),q(),Ki(),Os(),ri(),Zx=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qx=function(e,t){return function(n,r){t(n,r,e)}},$x=R,eS=class extends z{get hasContent(){return this._hasContent}constructor(e,t){super(),this._keybindingService=e,this._hoverService=t,this.actions=[],this._hasContent=!1,this.hoverElement=$x(`div.hover-row.status-bar`),this.hoverElement.tabIndex=0,this.actionsElement=x(this.hoverElement,$x(`div.actions`))}addAction(e){let t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;this._hasContent=!0;let r=this._register(rr.render(this.actionsElement,e,n));return this._register(this._hoverService.setupManagedHover(Vr(`element`),r.actionContainer,r.actionRenderedLabel)),this.actions.push(r),r}append(e){let t=x(this.actionsElement,e);return this._hasContent=!0,t}},eS=Zx([Qx(0,xs),Qx(1,ms)],eS)}));async function nS(e,t,n,r,i){let a=await Promise.resolve(e.provideHover(n,r,i)).catch(Jc);if(!(!a||!aS(a)))return new oS(e,a,t)}function rS(e,t,n,r,i=!1){let a=e.ordered(t,i).map((e,i)=>nS(e,i,t,n,r));return bn.fromPromisesResolveOrder(a).coalesce()}async function iS(e,t,n,r,i=!1){let a=[];for await(let o of rS(e,t,n,r,i))a.push(o.hover);return a}function aS(e){let t=e.range!==void 0,n=e.contents!==void 0&&e.contents&&e.contents.length>0;return t&&n}var oS,sS=t((()=>{O(),wu(),M(),v(),yu(),oS=class{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}},se(`_executeHoverProvider`,(e,t,n)=>iS(e.get(V).hoverProvider,t,n,W.None)),se(`_executeHoverProvider_recursive`,(e,t,n)=>iS(e.get(V).hoverProvider,t,n,W.None,!0))}));function cS(e,t,n,r,i){t.sort(Fe(e=>e.ordinal,er));let a=[];for(let o of t){let t=lS(n,o,r,i,e.onContentsChanged);e.fragment.appendChild(t.hoverElement),a.push(t)}return new Cb(a)}function lS(e,t,n,r,i){let a=new I,o=pS(`div.hover-row`),s=pS(`div.hover-row-contents`);o.appendChild(s);let c=t.contents;for(let t of c){if(cu(t))continue;let o=pS(`div.markdown-hover`),c=x(o,pS(`div.hover-contents`)),l=new dt({editor:e},n,r),u=a.add(l.render(t,{asyncRenderCallback:()=>{c.className=`hover-contents code-hover-contents`,i()}}));c.appendChild(u.element),s.appendChild(o)}return{hoverPart:t,hoverElement:o,dispose(){a.dispose()}}}function uS(e,t){switch(t){case fh.Increase:{let t=e.lookupKeybinding(rx);return t?A(1125,`Increase Hover Verbosity ({0})`,t.getLabel()):A(1126,`Increase Hover Verbosity`)}case fh.Decrease:{let t=e.lookupKeybinding(ax);return t?A(1127,`Decrease Hover Verbosity ({0})`,t.getLabel()):A(1128,`Decrease Hover Verbosity`)}}}var dS,fS,pS,mS,hS,gS,_S,vS,yS,bS,xS=t((()=>{y(),sn(),wu(),Fd(),q(),Si(),sx(),_(),h(),Tb(),P(),qp(),Wu(),yu(),Gr(),Ie(),Kn(),sr(),M(),Ki(),aa(),Os(),O(),sS(),jo(),dS=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fS=function(e,t){return function(n,r){t(n,r,e)}},pS=R,mS=To(`hover-increase-verbosity`,B.add,A(1120,`Icon for increaseing hover verbosity.`)),hS=To(`hover-decrease-verbosity`,B.remove,A(1121,`Icon for decreasing hover verbosity.`)),gS=class{constructor(e,t,n,r,i,a=void 0){this.owner=e,this.range=t,this.contents=n,this.isBeforeContent=r,this.ordinal=i,this.source=a}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},_S=class{constructor(e,t,n){this.hover=e,this.hoverProvider=t,this.hoverPosition=n}supportsVerbosityAction(e){switch(e){case fh.Increase:return this.hover.canIncreaseVerbosity??!1;case fh.Decrease:return this.hover.canDecreaseVerbosity??!1}}},vS=class{constructor(e,t,n,r,i,a,o,s){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=r,this._languageFeaturesService=i,this._keybindingService=a,this._hoverService=o,this._commandService=s,this.hoverOrdinal=3}createLoadingMessage(e){return new gS(this,e.range,[new Af().appendText(A(1122,`Loading...`))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];let n=this._editor.getModel(),r=e.range.startLineNumber,i=n.getLineMaxColumn(r),a=[],o=1e3,s=n.getLineLength(r),c=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),l=this._editor.getOption(132),u=this._configurationService.getValue(`editor.maxTokenizationLineLength`,{overrideIdentifier:c}),d=!1;l>=0&&s>l&&e.range.startColumn>=l&&(d=!0,a.push(new gS(this,e.range,[{value:A(1123,"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,o++))),!d&&typeof u==`number`&&s>=u&&a.push(new gS(this,e.range,[{value:A(1124,"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,o++));let f=!1;for(let n of t){let t=n.range.startLineNumber===r?n.range.startColumn:1,s=n.range.endLineNumber===r?n.range.endColumn:i,c=n.options.hoverMessage;if(!c||cu(c))continue;n.options.beforeContentClassName&&(f=!0);let l=new T(e.range.startLineNumber,t,e.range.startLineNumber,s);a.push(new gS(this,l,Wt(c),f,o++))}return a}computeAsync(e,t,n,r){if(!this._editor.hasModel()||e.type!==1)return bn.EMPTY;let i=this._editor.getModel(),a=this._languageFeaturesService.hoverProvider;return a.has(i)?this._getMarkdownHovers(a,i,e,r):bn.EMPTY}async*_getMarkdownHovers(e,t,n,r){let i=n.range.getStartPosition(),a=rS(e,t,i,r);for await(let e of a)if(!cu(e.hover.contents)){let t=e.hover.range?T.lift(e.hover.range):n.range,r=new _S(e.hover,e.provider,i);yield new gS(this,t,e.hover.contents,!1,e.ordinal,r)}}renderHoverParts(e,t){return this._renderedHoverParts=new bS(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}handleScroll(e){this._renderedHoverParts?.handleScroll(e)}updateMarkdownHoverVerbosityLevel(e,t){return Promise.resolve(this._renderedHoverParts?.updateMarkdownHoverPartVerbosityLevel(e,t))}},vS=dS([fS(1,Qi),fS(2,_e),fS(3,xl),fS(4,V),fS(5,xs),fS(6,ms),fS(7,no)],vS),yS=class{constructor(e,t,n,r){this.hoverPart=e,this.hoverElement=t,this.disposables=n,this.actionsContainer=r}dispose(){this.disposables.dispose()}},bS=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this._hoverParticipant=n,this._editor=r,this._languageService=i,this._openerService=a,this._commandService=o,this._keybindingService=s,this._hoverService=c,this._configurationService=l,this._onFinishedRendering=u,this._ongoingHoverOperations=new Map,this._disposables=new I,this.renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._disposables.add(qm(()=>{this.renderedHoverParts.forEach(e=>{e.dispose()}),this._ongoingHoverOperations.forEach(e=>{e.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,n){return e.sort(Fe(e=>e.ordinal,er)),e.map(e=>{let r=this._renderHoverPart(e,n);return t.appendChild(r.hoverElement),r})}_renderHoverPart(e,t){let n=this._renderMarkdownHover(e,t),r=n.hoverElement,i=e.source,a=new I;if(a.add(n),!i)return new yS(e,r,a);let o=i.supportsVerbosityAction(fh.Increase),s=i.supportsVerbosityAction(fh.Decrease);if(!o&&!s)return new yS(e,r,a);let c=pS(`div.verbosity-actions`);r.prepend(c);let l=pS(`div.verbosity-actions-inner`);return c.append(l),a.add(this._renderHoverExpansionAction(l,fh.Increase,o)),a.add(this._renderHoverExpansionAction(l,fh.Decrease,s)),new yS(e,r,a,l)}_renderMarkdownHover(e,t){return lS(this._editor,e,this._languageService,this._openerService,t)}_renderHoverExpansionAction(e,t,n){let r=new I,i=t===fh.Increase,a=x(e,pS(Qt.asCSSSelector(i?mS:hS)));a.tabIndex=0;let o=new $o(`mouse`,void 0,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(r.add(this._hoverService.setupManagedHover(o,a,uS(this._keybindingService,t))),!n)return a.classList.add(`disabled`),r;a.classList.add(`enabled`);let s=()=>this._commandService.executeCommand(t===fh.Increase?rx:ax,{focus:!0});return r.add(new $f(a,s)),r.add(new is(a,s,[3,10])),r}handleScroll(e){this.renderedHoverParts.forEach(t=>{let n=t.actionsContainer;if(!n)return;let r=t.hoverElement,i=e.scrollTop+e.height,a=r.offsetTop,o=r.clientHeight,s=a+o,c;c=s<=i||a>=i?o-22:i-a-22,n.style.top=`${c}px`})}async updateMarkdownHoverPartVerbosityLevel(e,t){let n=this._editor.getModel();if(!n)return;let r=this._getRenderedHoverPartAtIndex(t),i=r?.hoverPart.source;if(!r||!i?.supportsVerbosityAction(e))return;let a=await this._fetchHover(i,n,e);if(!a)return;let o=new _S(a,i.hoverProvider,i.hoverPosition),s=r.hoverPart,c=new gS(this._hoverParticipant,s.range,a.contents,s.isBeforeContent,s.ordinal,o),l=this._updateRenderedHoverPart(t,c);if(l)return{hoverPart:c,hoverElement:l.hoverElement}}async _fetchHover(e,t,n){let r=n===fh.Increase?1:-1,i=e.hoverProvider,a=this._ongoingHoverOperations.get(i);a&&(a.tokenSource.cancel(),r+=a.verbosityDelta);let o=new Zd;this._ongoingHoverOperations.set(i,{verbosityDelta:r,tokenSource:o});let s={verbosityRequest:{verbosityDelta:r,previousHover:e.hover}},c;try{c=await Promise.resolve(i.provideHover(t,e.hoverPosition,o.token,s))}catch(e){Jc(e)}return o.dispose(),this._ongoingHoverOperations.delete(i),c}_updateRenderedHoverPart(e,t){if(e>=this.renderedHoverParts.length||e<0)return;let n=this._renderHoverPart(t,this._onFinishedRendering),r=this.renderedHoverParts[e],i=r.hoverElement,a=n.hoverElement,o=Array.from(a.children);i.replaceChildren(...o);let s=new yS(t,i,n.disposables,n.actionsContainer);return r.dispose(),this.renderedHoverParts[e]=s,s}_getRenderedHoverPartAtIndex(e){return this.renderedHoverParts[e]}dispose(){this._disposables.dispose()}}})),SS=t((()=>{})),CS,wS,TS=t((()=>{SS(),y(),or(),Ao(),N(),q(),CS=R,wS=class extends z{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new j,this.onColorFlushed=this._onColorFlushed.event,this._domNode=CS(`.saturation-wrap`),x(e,this._domNode),this._canvas=document.createElement(`canvas`),this._canvas.className=`saturation-box`,x(this._domNode,this._canvas),this.selection=CS(`.saturation-selection`),x(this._domNode,this.selection),this.layout(),this._register(ch(this._domNode,Ul.POINTER_DOWN,e=>this.onPointerDown(e))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new Zt);let t=td(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>this.onDidChangePosition(e.pageX-t.left,e.pageY-t.top),()=>null);let n=ch(e.target.ownerDocument,Ul.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&=(this.monitor.stopMonitoring(!0),null)},!0)}onDidChangePosition(e,t){let n=Math.max(0,Math.min(1,e/this.width)),r=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,r),this._onDidChange.fire({s:n,v:r})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();let e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){let e=this.model.color.hsva,t=new _o(new mn(e.h,1,1,1)),n=this._canvas.getContext(`2d`),r=n.createLinearGradient(0,0,this._canvas.width,0);r.addColorStop(0,`rgba(255, 255, 255, 1)`),r.addColorStop(.5,`rgba(255, 255, 255, 0.5)`),r.addColorStop(1,`rgba(255, 255, 255, 0)`);let i=n.createLinearGradient(0,0,0,this._canvas.height);i.addColorStop(0,`rgba(0, 0, 0, 0)`),i.addColorStop(1,`rgba(0, 0, 0, 1)`),n.rect(0,0,this._canvas.width,this._canvas.height),n.fillStyle=_o.Format.CSS.format(t),n.fill(),n.fillStyle=r,n.fill(),n.fillStyle=i,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();let t=e.hsva;this.paintSelection(t.s,t.v)}}})),ES,DS=t((()=>{SS(),y(),N(),q(),ES=class extends z{constructor(e){super(),this._onClicked=this._register(new j),this.onClicked=this._onClicked.event,this._button=x(e,document.createElement(`button`)),this._button.classList.add(`insert-button`),this._button.textContent=`Insert`,this._register(ch(this._button,Ul.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}})),OS,kS,AS,jS,MS=t((()=>{SS(),y(),or(),Ao(),N(),q(),OS=R,kS=class extends z{constructor(e,t,n){super(),this.model=t,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new j,this.onColorFlushed=this._onColorFlushed.event,n===`standalone`?(this.domNode=x(e,OS(`.standalone-strip`)),this.overlay=x(this.domNode,OS(`.standalone-overlay`))):(this.domNode=x(e,OS(`.strip`)),this.overlay=x(this.domNode,OS(`.overlay`))),this.slider=x(this.domNode,OS(`.slider`)),this.slider.style.top=`0px`,this._register(ch(this.domNode,Ul.POINTER_DOWN,e=>this.onPointerDown(e))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;let e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){let t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._register(new Zt),n=td(this.domNode);this.domNode.classList.add(`grabbing`),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,e=>this.onDidChangeTop(e.pageY-n.top),()=>null);let r=ch(e.target.ownerDocument,Ul.POINTER_UP,()=>{this._onColorFlushed.fire(),r.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove(`grabbing`)},!0)}onDidChangeTop(e){let t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}},AS=class extends kS{constructor(e,t,n){super(e,t,n),this.domNode.classList.add(`opacity-strip`),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);let{r:t,g:n,b:r}=e.rgba,i=new _o(new to(t,n,r,1)),a=new _o(new to(t,n,r,0));this.overlay.style.background=`linear-gradient(to bottom, ${i} 0%, ${a} 100%)`}getValue(e){return e.hsva.a}},jS=class extends kS{constructor(e,t,n){super(e,t,n),this.domNode.classList.add(`hue-strip`)}getValue(e){return 1-e.hsva.h/360}}})),NS,PS,FS=t((()=>{SS(),y(),Ao(),q(),TS(),DS(),MS(),NS=R,PS=class extends z{constructor(e,t,n,r){super(),this.model=t,this.pixelRatio=n,this._insertButton=null,this._domNode=NS(`.colorpicker-body`),x(e,this._domNode),this._saturationBox=new wS(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new AS(this._domNode,this.model,r),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new jS(this._domNode,this.model,r),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),r===`standalone`&&(this._insertButton=this._register(new ES(this._domNode)),this._domNode.classList.add(`standalone-colorpicker`))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){let n=this.model.color.hsva;this.model.color=new _o(new mn(n.h,e,t,n.a))}onDidOpacityChange(e){let t=this.model.color.hsva;this.model.color=new _o(new mn(t.h,t.s,t.v,e))}onDidHueChange(e){let t=this.model.color.hsva,n=(1-e)*360;this.model.color=new _o(new mn(n===360?0:n,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}})),IS,LS,RS=t((()=>{SS(),y(),q(),P(),N(),Ie(),sr(),Kn(),IS=R,LS=class extends z{constructor(e){super(),this._onClicked=this._register(new j),this.onClicked=this._onClicked.event,this._button=document.createElement(`div`),this._button.classList.add(`close-button`),x(e,this._button);let t=document.createElement(`div`);t.classList.add(`close-button-inner-div`),x(this._button,t),x(t,IS(`.button`+Qt.asCSSSelector(To(`color-picker-close`,B.close,A(878,`Icon to close the color picker`))))).classList.add(`close-icon`),this._register(ch(this._button,Ul.CLICK,()=>{this._onClicked.fire()}))}}})),zS,BS,VS=t((()=>{SS(),y(),Ao(),q(),P(),Ei(),RS(),zS=R,BS=class extends z{constructor(e,t,n,r){super(),this.model=t,this.type=r,this._closeButton=null,this._domNode=zS(`.colorpicker-header`),x(e,this._domNode),this._pickedColorNode=x(this._domNode,zS(`.picked-color`)),x(this._pickedColorNode,zS(`span.codicon.codicon-color-mode`)),this._pickedColorPresentation=x(this._pickedColorNode,document.createElement(`span`)),this._pickedColorPresentation.classList.add(`picked-color-presentation`);let i=A(879,`Click to toggle color options (rgb/hsl/hex)`);this._pickedColorNode.setAttribute(`title`,i),this._originalColorNode=x(this._domNode,zS(`.original-color`)),this._originalColorNode.style.backgroundColor=_o.Format.CSS.format(this.model.originalColor)||``,this.backgroundColor=n.getColorTheme().getColor(vp)||_o.white,this._register(n.onDidColorThemeChange(e=>{this.backgroundColor=e.getColor(vp)||_o.white})),this._register(ch(this._pickedColorNode,Ul.CLICK,()=>this.model.selectNextColorPresentation())),this._register(ch(this._originalColorNode,Ul.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=_o.Format.CSS.format(t.color)||``,this._pickedColorNode.classList.toggle(`light`,t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.type===`standalone`&&(this._domNode.classList.add(`standalone-colorpicker`),this._closeButton=this._register(new LS(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=_o.Format.CSS.format(e)||``,this._pickedColorNode.classList.toggle(`light`,e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:``}}})),HS,US,WS=t((()=>{SS(),Al(),y(),rl(),FS(),VS(),HS=R,US=class extends sm{constructor(e,t,n,r,i){super(),this.model=t,this.pixelRatio=n,this._register(Zc.getInstance(Ni(e)).onDidChange(()=>this.layout())),this._domNode=HS(`.colorpicker-widget`),e.appendChild(this._domNode),this.header=this._register(new BS(this._domNode,this.model,r,i)),this.body=this._register(new PS(this._domNode,this.model,this.pixelRatio,i))}layout(){this.body.layout()}get domNode(){return this._domNode}}})),GS,KS=t((()=>{N(),GS=class{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new j,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new j,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new j,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let n=-1;for(let e=0;e<this.colorPresentations.length;e++)if(t.toLowerCase()===this.colorPresentations[e].label){n=e;break}if(n===-1){let e=t.split(`(`)[0].toLowerCase();for(let t=0;t<this.colorPresentations.length;t++)if(this.colorPresentations[t].label.toLowerCase().startsWith(e)){n=t;break}}n!==-1&&n!==this.presentationIndex&&(this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}}));async function qS(e,t,n){let r=e.getValueInRange(t.range),{red:i,green:a,blue:o,alpha:s}=t.color,c=new _o(new to(Math.round(i*255),Math.round(a*255),Math.round(o*255),s)),l=await Mb(e,t,n,W.None),u=new GS(c,[],0);return u.colorPresentations=l||[],u.guessColorPresentation(c,r),{range:T.lift(t.range),model:u,provider:n}}function JS(e,t,n){let r=[],i=n.presentation.textEdit??{range:t,text:n.presentation.label,forceMoveMarkers:!1};r.push(i),n.presentation.additionalTextEdits&&r.push(...n.presentation.additionalTextEdits);let a=T.lift(i.range),o=e.getModel()._setTrackedRange(null,a,3);return e.executeEdits(`colorpicker`,r),e.pushUndoStop(),e.getModel()._getTrackedRange(o)??a}async function YS(e,t,n,r,i){t.colorPresentations=await Mb(e,{range:r,color:{red:n.rgba.r/255,green:n.rgba.g/255,blue:n.rgba.b/255,alpha:n.rgba.a}},i.provider,W.None)||[]}var XS=t((()=>{wu(),Ao(),Rb(),KS(),_()})),ZS,QS,$S,eC,tC=t((()=>{O(),_(),Gb(),WS(),Tb(),Yf(),XS(),y(),q(),ZS=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},QS=function(e,t){return function(n,r){t(n,r,e)}},$S=class e{constructor(e,t,n,r){this.owner=e,this.range=t,this.model=n,this.provider=r,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}static fromBaseColor(t,n){return new e(t,n.range,n.model,n.provider)}},eC=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t,n){return[]}computeAsync(e,t,n,r){return bn.fromPromise(this._computeAsync(e,t,n))}async _computeAsync(e,t,n){if(!this._editor.hasModel()||!this._isValidRequest(n))return[];let r=Ub.get(this._editor);if(!r)return[];for(let e of t){if(!r.isColorDecoration(e))continue;let t=r.getColorData(e.range.getStartPosition());if(t)return[$S.fromBaseColor(this,await qS(this._editor.getModel(),t.colorInfo,t.provider))]}return[]}_isValidRequest(e){let t=this._editor.getOption(167);switch(e){case 0:return t===`hover`||t===`clickAndHover`;case 1:return t===`click`||t===`clickAndHover`;case 2:return!0}}renderHoverParts(e,t){let n=this._editor;if(t.length===0||!n.hasModel())return new Cb([]);let r=n.getOption(75)+8;e.setMinimumDimensions(new Nd(302,r));let i=new I,a=t[0],o=n.getModel(),s=a.model;this._colorPicker=i.add(new US(e.fragment,s,n.getOption(162),this._themeService,`hover`));let c=!1,l=new T(a.range.startLineNumber,a.range.startColumn,a.range.endLineNumber,a.range.endColumn);return i.add(s.onColorFlushed(async e=>{await YS(o,s,e,l,a),c=!0,l=JS(n,l,s)})),i.add(s.onDidChangeColor(e=>{YS(o,s,e,l,a)})),i.add(n.onDidChangeModelContent(t=>{c?c=!1:(e.hide(),n.focus())})),new Cb([{hoverPart:$S.fromBaseColor(this,a),hoverElement:this._colorPicker.domNode,dispose(){i.dispose()}}])}handleResize(){this._colorPicker?.layout()}handleContentsChanged(){this._colorPicker?.layout()}handleHide(){this._colorPicker?.dispose(),this._colorPicker=void 0}isColorPickerVisible(){return!!this._colorPicker}},eC=ZS([QS(1,mr)],eC)}));function nC(e,t){return!!e[t]}function rC(e){return e===`altKey`?Sh?new oC(57,`metaKey`,6,`altKey`):new oC(5,`ctrlKey`,6,`altKey`):Sh?new oC(6,`altKey`,57,`metaKey`):new oC(6,`altKey`,5,`ctrlKey`)}var iC,aC,oC,sC,cC=t((()=>{N(),q(),Rt(),iC=class{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=nC(e.event,t.triggerModifier),this.hasSideBySideModifier=nC(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}},aC=class{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=nC(e,t.triggerModifier)}},oC=class{constructor(e,t,n,r){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=r}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}},sC=class extends z{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new j),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new j),this.onExecute=this._onExecute.event,this._onCancel=this._register(new j),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=t?.extractLineNumberFromMouseEvent??(e=>e.target.position?e.target.position.lineNumber:0),this._opts=rC(this._editor.getOption(86)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(e=>{if(e.hasChanged(86)){let e=rC(this._editor.getOption(86));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(e=>this._onEditorMouseMove(new iC(e,this._opts)))),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(new iC(e,this._opts)))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(new iC(e,this._opts)))),this._register(this._editor.onKeyDown(e=>this._onEditorKeyDown(new aC(e,this._opts)))),this._register(this._editor.onKeyUp(e=>this._onEditorKeyUp(new aC(e,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(e=>this._onDidChangeCursorSelection(e))),this._register(this._editor.onDidChangeModel(e=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){let t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}}));function lC(e){return Fc.from({scheme:Du.command,path:e.id,query:e.arguments&&encodeURIComponent(JSON.stringify(e.arguments))}).toString()}var uC,dC,fC,pC=t((()=>{M(),q(),Su(),_(),ic(),xd(),uC=class{constructor(e,t){this.range=e,this.direction=t}},dC=class e{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(t){let n=new e(this.hint,t.anchor,this.provider);return n._isResolved=this._isResolved,n._currentResolve=this._currentResolve,n}async resolve(e){if(typeof this.provider.resolveInlayHint==`function`){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){try{let t=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=t?.tooltip??this.hint.tooltip,this.hint.label=t?.label??this.hint.label,this.hint.textEdits=t?.textEdits??this.hint.textEdits,this._isResolved=!0}catch(e){Jc(e),this._isResolved=!1}}},fC=class e{static#e=this._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});static async create(t,n,r,i){let a=[],o=t.ordered(n).reverse().map(t=>r.map(async r=>{try{let o=await t.provideInlayHints(n,r,i);(o?.hints.length||t.onDidChangeInlayHints)&&a.push([o??e._emptyInlayHintList,t])}catch(e){Jc(e)}}));if(await Promise.all(o.flat()),i.isCancellationRequested||n.isDisposed())throw new pf;return new e(r,a,n)}constructor(t,n,r){this._disposables=new I,this.ranges=t,this.provider=new Set;let i=[];for(let[t,a]of n){this._disposables.add(t),this.provider.add(a);for(let n of t.hints){let t=r.validatePosition(n.position),o=`before`,s=e._getRangeAtPosition(r,t),c;s.getStartPosition().isBefore(t)?(c=T.fromPositions(s.getStartPosition(),t),o=`after`):(c=T.fromPositions(t,s.getEndPosition()),o=`before`),i.push(new dC(n,new uC(c,o),a))}}this.items=i.sort((e,t)=>H.compare(e.hint.position,t.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){let n=t.lineNumber,r=e.getWordAtPosition(t);if(r)return new T(n,r.startColumn,n,r.endColumn);e.tokenization.tokenizeIfCheap(n);let i=e.tokenization.getLineTokens(n),a=t.column-1,o=i.findTokenIndexAtOffset(a),s=i.getStartOffset(o),c=i.getEndOffset(o);return c-s===1&&(s===a&&o>1?(s=i.getStartOffset(o-1),c=i.getEndOffset(o-1)):c===a&&o<i.getCount()-1&&(s=i.getStartOffset(o+1),c=i.getEndOffset(o+1))),new T(n,s+1,n,c+1)}}}));function mC(e){let t=e.get(ec).getFocusedCodeEditor();return t instanceof _C?t.getParentEditor():t}var hC,gC,_C,vC=t((()=>{eu(),ff(),ol(),oo(),yu(),u(),jo(),C(),F(),up(),Yf(),hC=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},gC=function(e,t){return function(n,r){t(n,r,e)}},_C=class extends m{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f){super(e,{...r.getRawOptions(),overflowWidgetsDomNode:r.getOverflowWidgetsDomNode()},n,i,a,o,s,c,l,u,d,f),this._parentEditor=r,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(r.onDidChangeConfiguration(e=>this._onParentConfigurationChanged(e)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Ys(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}},_C=hC([gC(4,U),gC(5,ec),gC(6,no),gC(7,bh),gC(8,mr),gC(9,Hp),gC(10,qi),gC(11,yn),gC(12,V)],_C)})),yC=t((()=>{})),bC=t((()=>{})),xC,SC,CC,wC,TC,EC,DC,OC=t((()=>{ss(),eh(),Ao(),kl(),q(),eu(),bC(),_(),md(),xC=new _o(new to(0,122,204)),SC={showArrow:!0,showFrame:!0,className:``,frameColor:xC,arrowColor:xC,keepEditorSelection:!1},CC=`vs.editor.contrib.zoneWidget`,wC=class{constructor(e,t,n,r,i,a,o,s){this.id=``,this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=r,this.showInHiddenAreas=o,this.ordinal=s,this._onDomNodeTop=i,this._onComputedHeight=a}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}},TC=class{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}},EC=class e{static#e=this._IdGenerator=new tm(`.arrow-decoration-`);constructor(t){this._editor=t,this._ruleName=e._IdGenerator.nextId(),this._color=null,this._height=-1,this._decorations=this._editor.createDecorationsCollection()}dispose(){this.hide(),Ko(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){Ko(this._ruleName),Hf(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:T.fromPositions(e),options:{description:`zone-widget-arrow`,className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}},DC=class{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._isSashResizeHeight=!1,this._viewZone=null,this._disposables=new I,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=_u(t),Ys(this.options,SC,!1),this.domNode=document.createElement(`div`),this.options.isAccessible||(this.domNode.setAttribute(`aria-hidden`,`true`),this.domNode.setAttribute(`role`,`presentation`)),this._disposables.add(this.editor.onDidLayoutChange(e=>{let t=this._getWidth(e);this.domNode.style.width=t+`px`,this.domNode.style.left=this._getLeft(e)+`px`,this._onWidth(t)}))}dispose(){this._overlayWidget&&=(this.editor.removeOverlayWidget(this._overlayWidget),null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add(`zone-widget`),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement(`div`),this.container.classList.add(`zone-widget-container`),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new EC(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+`px`}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;let n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash?.layout()}get position(){let e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){let n=T.isIRange(e)?T.lift(e):T.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:L.EMPTY}])}hide(){this._viewZone&&=(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),null),this._overlayWidget&&=(this.editor.removeOverlayWidget(this._overlayWidget),null),this._arrow?.hide(),this._positionMarkerId.clear(),this._isSashResizeHeight=!1}_decoratingElementsHeight(){let e=this.editor.getOption(75),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=this.options.frameWidth??Math.round(e/9);t+=2*n}return t}_getMaximumHeightInLines(){return Math.max(12,this.editor.getLayoutInfo().height/this.editor.getOption(75)*.8)}_showImpl(e,t){let n=e.getStartPosition(),r=this.editor.getLayoutInfo(),i=this._getWidth(r);this.domNode.style.width=`${i}px`,this.domNode.style.left=this._getLeft(r)+`px`;let a=document.createElement(`div`);a.style.overflow=`hidden`;let o=this.editor.getOption(75),s=this._getMaximumHeightInLines();s!==void 0&&(t=Math.min(t,s));let c=0,l=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(o/3),this._arrow.height=c,this._arrow.show(n)),this.options.showFrame&&(l=Math.round(o/9)),this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._overlayWidget&&=(this.editor.removeOverlayWidget(this._overlayWidget),null),this.domNode.style.top=`-1000px`,this._viewZone=new wC(a,n.lineNumber,n.column,t,e=>this._onViewZoneTop(e),e=>this._onViewZoneHeight(e),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=e.addZone(this._viewZone),this._overlayWidget=new TC(CC+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this._updateSashEnablement(),this.container&&this.options.showFrame){let e=this.options.frameWidth?this.options.frameWidth:l;this.container.style.borderTopWidth=e+`px`,this.container.style.borderBottomWidth=e+`px`}let u=t*o-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+`px`,this.container.style.height=u+`px`,this.container.style.overflow=`hidden`),this._doLayout(u,i),this.options.keepEditorSelection||this.editor.setSelection(e);let d=this.editor.getModel();if(d){let t=d.validateRange(new T(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(t,t.startLineNumber===d.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e,t){let n=this._getMaximumHeightInLines(),r=t&&n!==void 0?Math.min(n,e):e;this._viewZone&&this._viewZone.heightInLines!==r&&(this.editor.changeViewZones(e=>{this._viewZone&&(this._viewZone.heightInLines=r,e.layoutZone(this._viewZone.id))}),this._updateSashEnablement())}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new wc(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines,...this._getResizeBounds()})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(75),r=n<0?Math.ceil(n):Math.floor(n),i=e.heightInLines+r;i>e.minLines&&i<e.maxLines&&(this._isSashResizeHeight=!0,this._relayout(i))}}))}_updateSashEnablement(){if(this._resizeSash){let{minLines:e,maxLines:t}=this._getResizeBounds();this._resizeSash.state=e===t?0:3}}_getResizeBounds(){return{minLines:5,maxLines:35}}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){let e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}})),kC,AC,jC,MC,NC,PC,FC,IC,LC,RC,zC,BC,VC,HC=t((()=>{y(),ns(),Ji(),Kn(),sr(),Ao(),N(),eu(),yC(),v(),vC(),OC(),P(),xf(),C(),Zo(),F(),Ei(),Na(),kC=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},AC=function(e,t){return function(n,r){t(n,r,e)}},jC=Mc(`IPeekViewService`),Ds(jC,class{constructor(){this._widgets=new Map}addExclusiveWidget(e,t){let n=this._widgets.get(e);n&&(n.listener.dispose(),n.widget.dispose()),this._widgets.set(e,{widget:t,listener:t.onDidClose(()=>{let n=this._widgets.get(e);n&&n.widget===t&&(n.listener.dispose(),this._widgets.delete(e))})})}},1),(function(e){e.inPeekEditor=new De(`inReferenceSearchEditor`,!0,A(1303,`Whether the current code editor is embedded inside peek`)),e.notInPeekEditor=e.inPeekEditor.toNegated()})(MC||={}),NC=class{static#e=this.ID=`editor.contrib.referenceController`;constructor(e,t){e instanceof _C&&MC.inPeekEditor.bindTo(t)}dispose(){}},NC=kC([AC(1,bh)],NC),k(NC.ID,NC,0),PC={headerBackgroundColor:_o.white,primaryHeadingColor:_o.fromHex(`#333333`),secondaryHeadingColor:_o.fromHex(`#6c6c6cb3`)},FC=class extends DC{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new j,this.onDidClose=this._onDidClose.event,Ys(this.options,PC,!1);let r=Qe(this.editor);r.openedPeekWidgets.set(r.openedPeekWidgets.get()+1,void 0)}dispose(){if(!this.disposed){this.disposed=!0,super.dispose(),this._onDidClose.fire(this);let e=Qe(this.editor);e.openedPeekWidgets.set(e.openedPeekWidgets.get()-1,void 0)}}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass(`peekview-widget`),this._headElement=R(`.head`),this._bodyElement=R(`.body`),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=R(`.peekview-title`),this.options.supportOnTitleClick&&(this._titleElement.classList.add(`clickable`),Km(this._titleElement,`click`,e=>this._onTitleClick(e))),x(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=R(`span.filename`),this._secondaryHeading=R(`span.dirname`),this._metaHeading=R(`span.meta`),x(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);let n=R(`.peekview-actions`);x(this._headElement,n),this._actionbarWidget=new _s(n,this._getActionBarOptions()),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(this._disposables.add(new cs(`peekview.close`,A(1304,`Close`),Qt.asClassName(B.close),!0,()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:fp.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute(`title`,e),t?this._secondaryHeading.innerText=t:We(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,cr(this._metaHeading)):jn(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}let n=Math.ceil(this.editor.getOption(75)*1.2),r=Math.round(e-(n+1));this._doLayoutHead(n,t),this._doLayoutBody(r,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}},FC=kC([AC(2,U)],FC),IC=Y(`peekViewTitle.background`,{dark:`#252526`,light:`#F3F3F3`,hcDark:_o.black,hcLight:_o.white},A(1305,`Background color of the peek view title area.`)),LC=Y(`peekViewTitleLabel.foreground`,{dark:_o.white,light:_o.black,hcDark:_o.white,hcLight:uf},A(1306,`Color of the peek view title.`)),RC=Y(`peekViewTitleDescription.foreground`,{dark:`#ccccccb3`,light:`#616161`,hcDark:`#FFFFFF99`,hcLight:`#292929`},A(1307,`Color of the peek view title info.`)),zC=Y(`peekView.border`,{dark:Gc,light:Gc,hcDark:ue,hcLight:ue},A(1308,`Color of the peek view borders and arrow.`)),BC=Y(`peekViewResult.background`,{dark:`#252526`,light:`#F3F3F3`,hcDark:_o.black,hcLight:_o.white},A(1309,`Background color of the peek view result list.`)),Y(`peekViewResult.lineForeground`,{dark:`#bbbbbb`,light:`#646465`,hcDark:_o.white,hcLight:uf},A(1310,`Foreground color for line nodes in the peek view result list.`)),Y(`peekViewResult.fileForeground`,{dark:_o.white,light:`#1E1E1E`,hcDark:_o.white,hcLight:uf},A(1311,`Foreground color for file nodes in the peek view result list.`)),Y(`peekViewResult.selectionBackground`,{dark:`#3399ff33`,light:`#3399ff33`,hcDark:null,hcLight:null},A(1312,`Background color of the selected entry in the peek view result list.`)),Y(`peekViewResult.selectionForeground`,{dark:_o.white,light:`#6C6C6C`,hcDark:_o.white,hcLight:uf},A(1313,`Foreground color of the selected entry in the peek view result list.`)),VC=Y(`peekViewEditor.background`,{dark:`#001F33`,light:`#F2F8FC`,hcDark:_o.black,hcLight:_o.white},A(1314,`Background color of the peek view editor.`)),Y(`peekViewEditorGutter.background`,VC,A(1315,`Background color of the gutter in the peek view editor.`)),Y(`peekViewEditorStickyScroll.background`,VC,A(1316,`Background color of sticky scroll in the peek view editor.`)),Y(`peekViewEditorStickyScrollGutter.background`,VC,A(1317,`Background color of the gutter part of sticky scroll in the peek view editor.`)),Y(`peekViewResult.matchHighlightBackground`,{dark:`#ea5c004d`,light:`#ea5c004d`,hcDark:null,hcLight:null},A(1318,`Match highlight color in the peek view result list.`)),Y(`peekViewEditor.matchHighlightBackground`,{dark:`#ff8f0099`,light:`#f5d802de`,hcDark:null,hcLight:null},A(1319,`Match highlight color in the peek view editor.`)),Y(`peekViewEditor.matchHighlightBorder`,{dark:null,light:null,hcDark:$u,hcLight:$u},A(1320,`Match highlight border in the peek view editor.`))})),UC,WC,GC,KC,qC=t((()=>{M(),N(),kl(),q(),Gm(),Tl(),Ga(),_(),P(),UC=class{constructor(e,t,n,r){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=r,this.id=Xc.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){let e=this.parent.getPreview(this)?.preview(this.range);return e?A(1080,`{0} in {1} on line {2} at column {3}`,e.value,yp(this.uri),this.range.startLineNumber,this.range.startColumn):A(1079,`in {0} on line {1} at column {2}`,yp(this.uri),this.range.startLineNumber,this.range.startColumn)}},WC=class{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){let n=this._modelReference.object.textEditorModel;if(!n)return;let{startLineNumber:r,startColumn:i,endLineNumber:a,endColumn:o}=e,s=new T(r,n.getWordUntilPosition({lineNumber:r,column:i-t}).startColumn,r,i),c=new T(a,o,a,1073741824),l=n.getValueInRange(s).replace(/^\s+/,``),u=n.getValueInRange(e),d=n.getValueInRange(c).replace(/\s+$/,``);return{value:l+u+d,highlight:{start:l.length,end:l.length+u.length}}}},GC=class{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new hc}dispose(){hm(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){let e=this.children.length;return e===1?A(1081,`1 symbol in {0}, full path {1}`,yp(this.uri),this.uri.fsPath):A(1082,`{0} symbols in {1}, full path {2}`,e,yp(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{let n=await e.createModelReference(t.uri);this._previews.set(t.uri,new WC(n))}catch(e){$p(e)}return this}},KC=class e{constructor(t,n){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new j,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=t,this._title=n;let[r]=t;t.sort(e._compareReferences);let i;for(let n of t)if((!i||!Zp.isEqual(i.uri,n.uri,!0))&&(i=new GC(this,n.uri),this.groups.push(i)),i.children.length===0||e._compareReferences(n,i.children[i.children.length-1])!==0){let e=new UC(r===n,i,n,e=>this._onDidChangeReferenceRange.fire(e));this.references.push(e),i.children.push(e)}}dispose(){hm(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new e(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?A(1083,`No results found`):this.references.length===1?A(1084,`Found 1 symbol in {0}`,this.references[0].uri.fsPath):this.groups.length===1?A(1085,`Found {0} symbols in {1}`,this.references.length,this.groups[0].uri.fsPath):A(1086,`Found {0} symbols in {1} files`,this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,r=n.children.indexOf(e),i=n.children.length,a=n.parent.groups.length;return a===1||t&&r+1<i||!t&&r>0?(r=t?(r+1)%i:(r+i-1)%i,n.children[r]):(r=n.parent.groups.indexOf(n),t?(r=(r+1)%a,n.parent.groups[r].children[0]):(r=(r+a-1)%a,n.parent.groups[r].children[n.parent.groups[r].children.length-1]))}nearestReference(e,t){let n=this.references.map((n,r)=>({idx:r,prefixLen:uu(n.uri.toString(),e.toString()),offsetDist:Math.abs(n.range.startLineNumber-t.lineNumber)*100+Math.abs(n.range.startColumn-t.column)})).sort((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(let n of this.references)if(n.uri.toString()===e.toString()&&T.containsPosition(n.range,t))return n}firstReference(){for(let e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Zp.compare(e.uri,t.uri)||T.compareRangesUsingStarts(e.range,t.range)}}})),JC=t((()=>{})),YC,XC,ZC,QC,$C,ew,tw,nw,rw,iw,aw,ow,sw=t((()=>{y(),Ud(),Ll(),cm(),Ua(),q(),Tl(),ll(),P(),F(),Ki(),Vc(),If(),qC(),YC=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},XC=function(e,t){return function(n,r){t(n,r,e)}},QC=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof KC||e instanceof GC}getChildren(e){if(e instanceof KC)return e.groups;if(e instanceof GC)return e.resolve(this._resolverService).then(e=>e.children);throw Error(`bad tree`)}},QC=YC([XC(0,d)],QC),$C=class{getHeight(){return 23}getTemplateId(e){return e instanceof GC?rw.id:aw.id}},ew=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){if(e instanceof UC){let t=e.parent.getPreview(e)?.preview(e.range);if(t)return t.value}return yp(e.uri)}},ew=YC([XC(0,xs)],ew),tw=class{getId(e){return e instanceof UC?e.id:e.uri}},nw=class extends z{constructor(e,t){super(),this._labelService=t;let n=document.createElement(`div`);n.classList.add(`reference-file`),this.file=this._register(new Dd(n,{supportHighlights:!0})),this.badge=this._register(new Rf(x(n,R(`.count`)),{},Op)),e.appendChild(n)}set(e,t){let n=gd(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});let r=e.children.length;this.badge.setCount(r),r>1?this.badge.setTitleFormat(A(1073,`{0} references`,r)):this.badge.setTitleFormat(A(1074,`{0} reference`,r))}},nw=YC([XC(1,Ap)],nw),rw=class{static#e=ZC=this;static#t=this.id=`FileReferencesRenderer`;constructor(e){this._instantiationService=e,this.templateId=ZC.id}renderTemplate(e){return this._instantiationService.createInstance(nw,e)}renderElement(e,t,n){n.set(e.element,Da(e.filterData))}disposeTemplate(e){e.dispose()}},rw=ZC=YC([XC(0,U)],rw),iw=class extends z{constructor(e){super(),this.label=this._register(new il(e))}set(e,t){let n=e.parent.getPreview(e)?.preview(e.range);if(!n||!n.value)this.label.set(`${yp(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{let{value:e,highlight:r}=n;t&&!lh.isDefault(t)?(this.label.element.classList.toggle(`referenceMatch`,!1),this.label.set(e,Da(t))):(this.label.element.classList.toggle(`referenceMatch`,!0),this.label.set(e,[r]))}}},aw=class e{constructor(){this.templateId=e.id}static#e=this.id=`OneReferenceRenderer`;renderTemplate(e){return new iw(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}},ow=class{getWidgetAriaLabel(){return A(1075,`References`)}getAriaLabel(e){return e.ariaMessage}}})),cw,lw,uw,dw,fw,pw,mw,hw=t((()=>{y(),Re(),Ao(),N(),q(),ic(),Tl(),JC(),vC(),_(),md(),nn(),ll(),sw(),HC(),P(),F(),Ki(),Vc(),Ec(),Yf(),qC(),zt(),Wu(),cw=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},lw=function(e,t){return function(n,r){t(n,r,e)}},uw=class e{static#e=this.DecorationOptions=L.register({description:`reference-decoration`,stickiness:1,className:`reference-decoration`});constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new I,this._callOnModelChange=new I,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();let e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(t){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));let n=[],r=[];for(let i=0,a=t.children.length;i<a;i++){let a=t.children[i];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(n.push({range:a.range,options:e.DecorationOptions}),r.push(i))}this._editor.changeDecorations(e=>{let i=e.deltaDecorations([],n);for(let e=0;e<i.length;e++)this._decorations.set(i[e],t.children[r[e]])})}_onDecorationChanged(){let e=[],t=this._editor.getModel();if(t){for(let[n,r]of this._decorations){let i=t.getDecorationRange(n);if(!i)continue;let a=!1;T.equalsRange(i,r.range)||((T.spansMultipleLines(i)||r.range.endColumn-r.range.startColumn!==i.endColumn-i.startColumn)&&(a=!0),a?(this._decorationIgnoreSet.add(r.id),e.push(n)):r.range=i)}for(let t=0,n=e.length;t<n;t++)this._decorations.delete(e[t]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}},dw=class{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{let r=JSON.parse(e);t=r.ratio,n=r.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}},fw=class extends $l{},pw=class{constructor(e){this.labelService=e,this.disposables=new I}getDragURI(e){return e instanceof GC?e.uri.toString():e instanceof UC?Wr(e.uri,e.range).toString():null}getDragLabel(e){if(e.length!==0)return e.map(e=>this.labelService.getUriBasenameLabel(e.uri)).join(`, `)}onDragStart(e,t){if(!t.dataTransfer)return;let n=e.elements.map(e=>this.getDragURI(e)).filter(Boolean);n.length&&(t.dataTransfer.setData(Fi.RESOURCES,JSON.stringify(n)),t.dataTransfer.setData(Fi.TEXT,n.join(`
`)))}onDragOver(){return!1}drop(){}dispose(){this.disposables.dispose()}},pw=cw([lw(0,Ap)],pw),mw=class extends FC{constructor(e,t,n,r,i,a,o,s,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},a),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=i,this._instantiationService=a,this._peekViewService=o,this._uriLabel=s,this._keybindingService=c,this._disposeOnNewModel=new I,this._callOnDispose=new I,this._onDidSelectReference=new j,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Nd(0,0),this._isClosing=!1,this._applyTheme(r.getColorTheme()),this._callOnDispose.add(r.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}get isClosing(){return this._isClosing}dispose(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),hm(this._preview),hm(this._previewNotAvailableMessage),hm(this._tree),hm(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){let t=e.getColor(zC)||_o.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(IC)||_o.transparent,primaryHeadingColor:e.getColor(LC),secondaryHeadingColor:e.getColor(RC)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?`side`:`open`,source:`title`})}_fillBody(e){this.setCssClass(`reference-zone-widget`),this._messageContainer=x(e,R(`div.messages`)),jn(this._messageContainer),this._splitView=new jh(e,{orientation:1}),this._previewContainer=x(e,R(`div.preview.inline`)),this._preview=this._instantiationService.createInstance(_C,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:`auto`,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),jn(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(_p,A(1076,`no preview available`),Fo,_p.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=x(e,R(`div.ref-tree.inline`));let t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new ow,keyboardNavigationLabelProvider:this._instantiationService.createInstance(ew),identityProvider:new tw,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:BC},dnd:this._instantiationService.createInstance(pw)};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Km(this._treeContainer,`keydown`,e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(fw,`ReferencesWidget`,this._treeContainer,new $C,[this._instantiationService.createInstance(rw),this._instantiationService.createInstance(aw)],this._instantiationService.createInstance(QC),t),this._splitView.addView({onDidChange:mf.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},ba.Distribute),this._splitView.addView({onDidChange:mf.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${e}px`,this._tree.layout(this._dim.height,e)}},ba.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let n=(e,t)=>{e instanceof UC&&(t===`show`&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:`tree`}))};this._disposables.add(this._tree.onDidOpen(e=>{e.sideBySide?n(e.element,`side`):e.editorOptions.pinned?n(e.element,`goto`):n(e.element,`show`)})),jn(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Nd(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(``),this._messageContainer.innerText=A(1077,`No results`),cr(this._messageContainer),Promise.resolve(void 0)):(jn(this._messageContainer),this._decorationsManager=new uw(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{let{event:t,target:n}=e;if(t.detail!==2)return;let r=this._getFocusedReference();r&&this._onDidSelectReference.fire({element:{uri:r.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?`side`:`open`,source:`editor`})})),this.container.classList.add(`results-loaded`),cr(this._treeContainer),cr(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){let[e]=this._tree.getFocus();if(e instanceof UC)return e;if(e instanceof GC&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:`goto`,source:`tree`})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme===Du.inMemory?this.setTitle(A(1078,`References`)):this.setTitle(jc(e.uri),this._uriLabel.getUriLabel(gd(e.uri)));let n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));let r=await n;if(!this._model){r.dispose();return}hm(this._previewModelReference);let i=r.object;if(i){let t=this._preview.getModel()===i.textEditorModel?0:1,n=T.lift(e.range).collapseToStart();this._previewModelReference=r,this._preview.setModel(i.textEditorModel),this._preview.setSelection(n),this._preview.revealRangeInCenter(n,t)}else this._preview.setModel(this._previewNotAvailableMessage),r.dispose()}},mw=cw([lw(3,mr),lw(4,d),lw(5,U),lw(6,jC),lw(7,Ap),lw(8,xs)],mw)}));function gw(e,t){let n=mC(e);if(!n)return;let r=xw.get(n);r&&t(r)}var _w,vw,yw,bw,xw,Sw=t((()=>{O(),M(),ni(),q(),ff(),Su(),_(),HC(),vC(),P(),jo(),qp(),C(),F(),Mi(),Ec(),up(),Zl(),qC(),hw(),yc(),Bm(),_w=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vw=function(e,t){return function(n,r){t(n,r,e)}},bw=new De(`referenceSearchVisible`,!1,A(1070,`Whether reference peek is visible, like 'Peek References' or 'Peek Definition'`)),xw=class{static#e=yw=this;static#t=this.ID=`editor.contrib.referencesController`;static get(e){return e.getContribution(yw.ID)}constructor(e,t,n,r,i,a,o,s){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=r,this._notificationService=i,this._instantiationService=a,this._storageService=o,this._configurationService=s,this._disposables=new I,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=bw.bindTo(n)}dispose(){this._referenceSearchVisible.reset(),this._disposables.dispose(),this._widget?.dispose(),this._model?.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let r;if(this._widget&&(r=this._widget.position),this.closeWidget(),r&&e.containsPosition(r))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));let i=`peekViewLayout`,a=dw.fromJSON(this._storageService.get(i,0,`{}`));this._widget=this._instantiationService.createInstance(mw,this._editor,this._defaultTreeKeyboardSupport,a),this._widget.setTitle(A(1071,`Loading...`)),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget?(this._storageService.store(i,JSON.stringify(this._widget.layoutData),0,1),this._widget.isClosing||this.closeWidget(),this._widget=void 0):this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(e=>{let{element:t,kind:r}=e;if(t)switch(r){case`open`:(e.source!==`editor`||!this._configurationService.getValue(`editor.stablePeek`))&&this.openReference(t,!1,!1);break;case`side`:this.openReference(t,!0,!1);break;case`goto`:n?this._gotoReference(t,!0):this.openReference(t,!1,!0);break}}));let o=++this._requestIdPool;t.then(t=>{if(o!==this._requestIdPool||!this._widget){t.dispose();return}return this._model?.dispose(),this._model=t,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(``):this._widget.setMetaTitle(A(1072,`{0} ({1})`,this._model.title,this._model.references.length));let t=this._editor.getModel().uri,n=new H(e.startLineNumber,e.startColumn),r=this._model.nearestReference(t,n);if(r)return this._widget.setSelection(r).then(()=>{this._widget&&this._editor.getOption(98)===`editor`&&this._widget.focusOnPreviewEditor()})}})},e=>{this._notificationService.error(e)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;let t=this._widget.position;if(!t)return;let n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;let r=this._model.nextOrPreviousReference(n,e),i=this._editor.hasTextFocus(),a=this._widget.isPreviewEditorFocused();await this._widget.setSelection(r),await this._gotoReference(r,!1),i?this._editor.focus():this._widget&&a&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){this._widget?.dispose(),this._model?.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){this._widget?.hide(),this._ignoreModelChangeEvent=!0;let n=T.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:n,selectionSource:`code.jump`,pinned:t}},this._editor).then(e=>{if(this._ignoreModelChangeEvent=!1,!e||!this._widget){this.closeWidget();return}if(this._editor===e)this._widget.show(n),this._widget.focusOnReferenceTree();else{let t=yw.get(e),r=this._model.clone();this.closeWidget(),e.focus(),t?.toggleWidget(n,Zn(e=>Promise.resolve(r)),this._peekMode??!1)}},e=>{this._ignoreModelChangeEvent=!1,$p(e)})}openReference(e,t,n){t||this.closeWidget();let{uri:r,range:i}=e;this._editorService.openCodeEditor({resource:r,options:{selection:i,selectionSource:`code.jump`,pinned:n}},this._editor,t)}},xw=yw=_w([vw(2,bh),vw(3,ec),vw(4,Hp),vw(5,U),vw(6,Vd),vw(7,xl)],xw),ei.registerCommandAndKeybindingRule({id:`togglePeekWidgetFocus`,weight:100,primary:Br(2089,60),when:b.or(bw,MC.inPeekEditor),handler(e){gw(e,e=>{e.changeFocusBetweenPreviewAndReferences()})}}),ei.registerCommandAndKeybindingRule({id:`goToNextReference`,weight:90,primary:62,secondary:[70],when:b.or(bw,MC.inPeekEditor),handler(e){gw(e,e=>{e.goToNextOrPreviousReference(!0)})}}),ei.registerCommandAndKeybindingRule({id:`goToPreviousReference`,weight:90,primary:1086,secondary:[1094],when:b.or(bw,MC.inPeekEditor),handler(e){gw(e,e=>{e.goToNextOrPreviousReference(!1)})}}),hn.registerCommandAlias(`goToNextReferenceFromEmbeddedEditor`,`goToNextReference`),hn.registerCommandAlias(`goToPreviousReferenceFromEmbeddedEditor`,`goToPreviousReference`),hn.registerCommandAlias(`closeReferenceSearchEditor`,`closeReferenceSearch`),hn.registerCommand(`closeReferenceSearch`,e=>gw(e,e=>e.closeWidget())),ei.registerKeybindingRule({id:`closeReferenceSearch`,weight:-1,primary:9,secondary:[1033],when:b.and(MC.inPeekEditor,b.not(`config.editor.stablePeek`))}),ei.registerKeybindingRule({id:`closeReferenceSearch`,weight:250,primary:9,secondary:[1033],when:b.and(bw,b.not(`config.editor.stablePeek`),b.or(J.editorTextFocus,nh.negate()))}),ei.registerCommandAndKeybindingRule({id:`revealReference`,weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:b.and(bw,Js,wm.negate(),gh.negate()),handler(e){let t=e.get(gu).lastFocusedList?.getFocus();Array.isArray(t)&&t[0]instanceof UC&&gw(e,e=>e.revealReference(t[0]))}}),ei.registerCommandAndKeybindingRule({id:`openReferenceToSide`,weight:100,primary:2051,mac:{primary:259},when:b.and(bw,Js,wm.negate(),gh.negate()),handler(e){let t=e.get(gu).lastFocusedList?.getFocus();Array.isArray(t)&&t[0]instanceof UC&&gw(e,e=>e.openReference(t[0],!0,!0))}}),hn.registerCommand(`openReference`,e=>{let t=e.get(gu).lastFocusedList?.getFocus();Array.isArray(t)&&t[0]instanceof UC&&gw(e,e=>e.openReference(t[0],!1,!0))})})),Cw,ww,Tw,Ew,Dw,Ow,kw=t((()=>{N(),q(),Tl(),v(),ff(),_(),P(),C(),Zo(),F(),Ki(),Mi(),up(),Cw=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ww=function(e,t){return function(n,r){t(n,r,e)}},Tw=new De(`hasSymbols`,!1,A(1087,`Whether there are symbol locations that can be navigated via keyboard-only.`)),Ew=Mc(`ISymbolNavigationService`),Dw=class{constructor(e,t,n,r){this._editorService=t,this._notificationService=n,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=Tw.bindTo(e)}reset(){this._ctxHasSymbols.reset(),this._currentState?.dispose(),this._currentMessage?.close(),this._currentModel=void 0,this._currentIdx=-1}put(e){let t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();let n=new Ow(this._editorService);this._currentState=zs(n,n.onDidChange(e=>{if(this._ignoreEditorChange)return;let n=this._editorService.getActiveCodeEditor();if(!n)return;let r=n.getModel(),i=n.getPosition();if(!r||!i)return;let a=!1,o=!1;for(let e of t.references)if(Of(e.uri,r.uri))a=!0,o||=T.containsPosition(e.range,i);else if(a)break;(!a||!o)&&this.reset()}))}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;let t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:T.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){this._currentMessage?.close();let e=this._keybindingService.lookupKeybinding(`editor.gotoNextSymbolFromResult`),t=e?A(1088,`Symbol {0} of {1}, {2} for next`,this._currentIdx+1,this._currentModel.references.length,e.getLabel()):A(1089,`Symbol {0} of {1}`,this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}},Dw=Cw([ww(0,bh),ww(1,ec),ww(2,Hp),ww(3,xs)],Dw),Ds(Ew,Dw,1),E(new class extends dn{constructor(){super({id:`editor.gotoNextSymbolFromResult`,precondition:Tw,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(Ew).revealNext(t)}}),ei.registerCommandAndKeybindingRule({id:`editor.gotoNextSymbolFromResult.cancel`,weight:100,when:Tw,primary:9,handler(e){e.get(Ew).reset()}}),Ow=class{constructor(e){this._listener=new Map,this._disposables=new I,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),hm(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,zs(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){this._listener.get(e)?.dispose(),this._listener.delete(e)}},Ow=Cw([ww(0,ec)],Ow)}));function Aw(e,t){return t.uri.scheme===e.uri.scheme?!0:!wp(t.uri,Du.walkThroughSnippet,Du.vscodeChatCodeBlock,Du.vscodeChatCodeCompareBlock)}async function jw(e,t,n,r,i){let a=n.ordered(e,r).map(n=>Promise.resolve(i(n,e,t)).then(void 0,e=>{Jc(e)}));return Oh((await Promise.all(a)).flat()).filter(t=>Aw(e,t))}function Mw(e,t,n,r,i){return jw(t,n,e,r,(e,t,n)=>e.provideDefinition(t,n,i))}function Nw(e,t,n,r,i){return jw(t,n,e,r,(e,t,n)=>e.provideDeclaration(t,n,i))}function Pw(e,t,n,r,i){return jw(t,n,e,r,(e,t,n)=>e.provideImplementation(t,n,i))}function Fw(e,t,n,r,i){return jw(t,n,e,r,(e,t,n)=>e.provideTypeDefinition(t,n,i))}function Iw(e,t,n,r,i,a){return jw(t,n,e,i,async(e,t,n)=>{let i=(await e.provideReferences(t,n,{includeDeclaration:!0},a))?.filter(e=>Aw(t,e));if(!r||!i||i.length!==2)return i;let o=(await e.provideReferences(t,n,{includeDeclaration:!1},a))?.filter(e=>Aw(t,e));return o&&o.length===1?o:i})}async function Lw(e){let t=new KC(await e(),``),n=t.references.map(e=>e.link);return t.dispose(),n}var Rw=t((()=>{sn(),wu(),M(),ic(),v(),yu(),qC(),se(`_executeDefinitionProvider`,(e,t,n)=>{let r=Mw(e.get(V).definitionProvider,t,n,!1,W.None);return Lw(()=>r)}),se(`_executeDefinitionProvider_recursive`,(e,t,n)=>{let r=Mw(e.get(V).definitionProvider,t,n,!0,W.None);return Lw(()=>r)}),se(`_executeTypeDefinitionProvider`,(e,t,n)=>{let r=Fw(e.get(V).typeDefinitionProvider,t,n,!1,W.None);return Lw(()=>r)}),se(`_executeTypeDefinitionProvider_recursive`,(e,t,n)=>{let r=Fw(e.get(V).typeDefinitionProvider,t,n,!0,W.None);return Lw(()=>r)}),se(`_executeDeclarationProvider`,(e,t,n)=>{let r=Nw(e.get(V).declarationProvider,t,n,!1,W.None);return Lw(()=>r)}),se(`_executeDeclarationProvider_recursive`,(e,t,n)=>{let r=Nw(e.get(V).declarationProvider,t,n,!0,W.None);return Lw(()=>r)}),se(`_executeReferenceProvider`,(e,t,n)=>{let r=Iw(e.get(V).referenceProvider,t,n,!1,!1,W.None);return Lw(()=>r)}),se(`_executeReferenceProvider_recursive`,(e,t,n)=>{let r=Iw(e.get(V).referenceProvider,t,n,!1,!0,W.None);return Lw(()=>r)}),se(`_executeImplementationProvider`,(e,t,n)=>{let r=Pw(e.get(V).implementationProvider,t,n,!1,W.None);return Lw(()=>r)}),se(`_executeImplementationProvider_recursive`,(e,t,n)=>{let r=Pw(e.get(V).implementationProvider,t,n,!0,W.None);return Lw(()=>r)})})),zw,Bw,Vw,Hw,Uw,Ww,Gw,Kw,qw=t((()=>{qc(),O(),ni(),lr(),xd(),In(),En(),v(),ff(),vC(),Su(),_(),yc(),Gr(),Sw(),qC(),kw(),i_(),HC(),P(),de(),jo(),C(),F(),up(),yo(),Rw(),yu(),Ge(),Bm(),gi.appendMenuItem(g.EditorContext,{submenu:g.EditorContextPeek,title:A(1030,`Peek`),group:`navigation`,order:100}),zw=class e{static is(t){return!t||typeof t!=`object`?!1:!!(t instanceof e||H.isIPosition(t.position)&&t.model)}constructor(e,t){this.model=e,this.position=t}},Bw=class e extends Uo{static#e=this._allSymbolNavigationCommands=new Map;static#t=this._activeAlternativeCommands=new Set;static all(){return e._allSymbolNavigationCommands.values()}static _patchConfig(e){let t={...e,f1:!0};if(t.menu)for(let n of Ea.wrap(t.menu))(n.id===g.EditorContext||n.id===g.EditorContextPeek)&&(n.when=b.and(e.precondition,n.when));return t}constructor(t,n){super(e._patchConfig(n)),this.configuration=t,e._allSymbolNavigationCommands.set(n.id,this)}runEditorCommand(t,n,r,i){if(!n.hasModel())return Promise.resolve(void 0);let a=t.get(Hp),o=t.get(ec),s=t.get(fa),c=t.get(Ew),l=t.get(V),u=t.get(U),d=n.getModel(),f=n.getPosition(),p=zw.is(r)?r:new zw(d,f),m=new Ri(n,5),h=$i(this._getLocationModel(l,p.model,p.position,m.token),m.token).then(async t=>{if(!t||m.token.isCancellationRequested)return;Qp(t.ariaMessage);let a;if(t.referenceAt(d.uri,f)){let t=this._getAlternativeCommand(n);t!==void 0&&!e._activeAlternativeCommands.has(t)&&e._allSymbolNavigationCommands.has(t)&&(a=e._allSymbolNavigationCommands.get(t))}let s=t.references.length;if(s===0){if(!this.configuration.muteMessage){let e=d.getWordAtPosition(f);n_.get(n)?.showMessage(this._getNoResultFoundMessage(e),f)}}else if(s===1&&a)e._activeAlternativeCommands.add(this.desc.id),u.invokeFunction(t=>a.runEditorCommand(t,n,r,i).finally(()=>{e._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(o,c,n,t,i)},e=>{a.error(e)}).finally(()=>{m.dispose()});return s.showWhile(h,250),h}async _onResult(e,t,n,r,i){let a=this._getGoToPreference(n);if(!(n instanceof _C)&&(this.configuration.openInPeek||a===`peek`&&r.references.length>1))this._openInPeek(n,r,i);else{let o=r.firstReference(),s=r.references.length>1&&a===`gotoAndPeek`,c=await this._openReference(n,e,o,this.configuration.openToSide,!s);s&&c?this._openInPeek(c,r,i):r.dispose(),a===`goto`&&t.put(o)}}async _openReference(e,t,n,r,i){let a;if(si(n)&&(a=n.targetSelectionRange),a||=n.range,!a)return;let o=await t.openCodeEditor({resource:n.uri,options:{selection:T.collapseToStart(a),selectionRevealType:3,selectionSource:`code.jump`}},e,r);if(o){if(i){let e=o.getModel(),t=o.createDecorationsCollection([{range:a,options:{description:`symbol-navigate-action-highlight`,className:`symbolHighlight`}}]);setTimeout(()=>{o.getModel()===e&&t.clear()},350)}return o}}_openInPeek(e,t,n){let r=xw.get(e);r&&e.hasModel()?r.toggleWidget(n??e.getSelection(),Zn(e=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}},Vw=class extends Bw{async _getLocationModel(e,t,n,r){return new KC(await Mw(e.definitionProvider,t,n,!1,r),A(1031,`Definitions`))}_getNoResultFoundMessage(e){return e&&e.word?A(1032,`No definition found for '{0}'`,e.word):A(1033,`No definition found`)}_getAlternativeCommand(e){return e.getOption(67).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(67).multipleDefinitions}},Rr(class e extends Vw{static#e=this.id=`editor.action.revealDefinition`;constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,title:{...K(1057,`Go to Definition`),mnemonicTitle:A(1034,`Go to &&Definition`)},precondition:J.hasDefinitionProvider,keybinding:[{when:J.editorTextFocus,primary:70,weight:100},{when:b.and(J.editorTextFocus,Fa),primary:2118,weight:100}],menu:[{id:g.EditorContext,group:`navigation`,order:1.1},{id:g.MenubarGoMenu,precondition:null,group:`4_symbol_nav`,order:2}]}),hn.registerCommandAlias(`editor.action.goToDeclaration`,e.id)}}),Rr(class e extends Vw{static#e=this.id=`editor.action.revealDefinitionAside`;constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,title:K(1058,`Open Definition to the Side`),precondition:b.and(J.hasDefinitionProvider,J.isInEmbeddedEditor.toNegated()),keybinding:[{when:J.editorTextFocus,primary:Br(2089,70),weight:100},{when:b.and(J.editorTextFocus,Fa),primary:Br(2089,2118),weight:100}]}),hn.registerCommandAlias(`editor.action.openDeclarationToTheSide`,e.id)}}),Rr(class e extends Vw{static#e=this.id=`editor.action.peekDefinition`;constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,title:K(1059,`Peek Definition`),precondition:b.and(J.hasDefinitionProvider,MC.notInPeekEditor,J.isInEmbeddedEditor.toNegated()),keybinding:{when:J.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:g.EditorContextPeek,group:`peek`,order:2}}),hn.registerCommandAlias(`editor.action.previewDeclaration`,e.id)}}),Hw=class extends Bw{async _getLocationModel(e,t,n,r){return new KC(await Nw(e.declarationProvider,t,n,!1,r),A(1035,`Declarations`))}_getNoResultFoundMessage(e){return e&&e.word?A(1036,`No declaration found for '{0}'`,e.word):A(1037,`No declaration found`)}_getAlternativeCommand(e){return e.getOption(67).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(67).multipleDeclarations}},Rr(class e extends Hw{static#e=this.id=`editor.action.revealDeclaration`;constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,title:{...K(1060,`Go to Declaration`),mnemonicTitle:A(1038,`Go to &&Declaration`)},precondition:b.and(J.hasDeclarationProvider,J.isInEmbeddedEditor.toNegated()),menu:[{id:g.EditorContext,group:`navigation`,order:1.3},{id:g.MenubarGoMenu,precondition:null,group:`4_symbol_nav`,order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?A(1039,`No declaration found for '{0}'`,e.word):A(1040,`No declaration found`)}}),Rr(class extends Hw{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:`editor.action.peekDeclaration`,title:K(1061,`Peek Declaration`),precondition:b.and(J.hasDeclarationProvider,MC.notInPeekEditor,J.isInEmbeddedEditor.toNegated()),menu:{id:g.EditorContextPeek,group:`peek`,order:3}})}}),Uw=class extends Bw{async _getLocationModel(e,t,n,r){return new KC(await Fw(e.typeDefinitionProvider,t,n,!1,r),A(1041,`Type Definitions`))}_getNoResultFoundMessage(e){return e&&e.word?A(1042,`No type definition found for '{0}'`,e.word):A(1043,`No type definition found`)}_getAlternativeCommand(e){return e.getOption(67).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(67).multipleTypeDefinitions}},Rr(class e extends Uw{static#e=this.ID=`editor.action.goToTypeDefinition`;constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,title:{...K(1062,`Go to Type Definition`),mnemonicTitle:A(1044,`Go to &&Type Definition`)},precondition:J.hasTypeDefinitionProvider,keybinding:{when:J.editorTextFocus,primary:0,weight:100},menu:[{id:g.EditorContext,group:`navigation`,order:1.4},{id:g.MenubarGoMenu,precondition:null,group:`4_symbol_nav`,order:3}]})}}),Rr(class e extends Uw{static#e=this.ID=`editor.action.peekTypeDefinition`;constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,title:K(1063,`Peek Type Definition`),precondition:b.and(J.hasTypeDefinitionProvider,MC.notInPeekEditor,J.isInEmbeddedEditor.toNegated()),menu:{id:g.EditorContextPeek,group:`peek`,order:4}})}}),Ww=class extends Bw{async _getLocationModel(e,t,n,r){return new KC(await Pw(e.implementationProvider,t,n,!1,r),A(1045,`Implementations`))}_getNoResultFoundMessage(e){return e&&e.word?A(1046,`No implementation found for '{0}'`,e.word):A(1047,`No implementation found`)}_getAlternativeCommand(e){return e.getOption(67).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(67).multipleImplementations}},Rr(class e extends Ww{static#e=this.ID=`editor.action.goToImplementation`;constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,title:{...K(1064,`Go to Implementations`),mnemonicTitle:A(1048,`Go to &&Implementations`)},precondition:J.hasImplementationProvider,keybinding:{when:J.editorTextFocus,primary:2118,weight:100},menu:[{id:g.EditorContext,group:`navigation`,order:1.45},{id:g.MenubarGoMenu,precondition:null,group:`4_symbol_nav`,order:4}]})}}),Rr(class e extends Ww{static#e=this.ID=`editor.action.peekImplementation`;constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,title:K(1065,`Peek Implementations`),precondition:b.and(J.hasImplementationProvider,MC.notInPeekEditor,J.isInEmbeddedEditor.toNegated()),keybinding:{when:J.editorTextFocus,primary:3142,weight:100},menu:{id:g.EditorContextPeek,group:`peek`,order:5}})}}),Gw=class extends Bw{_getNoResultFoundMessage(e){return e?A(1049,`No references found for '{0}'`,e.word):A(1050,`No references found`)}_getAlternativeCommand(e){return e.getOption(67).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(67).multipleReferences}},Rr(class extends Gw{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:`editor.action.goToReferences`,title:{...K(1066,`Go to References`),mnemonicTitle:A(1051,`Go to &&References`)},precondition:b.and(J.hasReferenceProvider,MC.notInPeekEditor,J.isInEmbeddedEditor.toNegated()),keybinding:{when:J.editorTextFocus,primary:1094,weight:100},menu:[{id:g.EditorContext,group:`navigation`,order:1.45},{id:g.MenubarGoMenu,precondition:null,group:`4_symbol_nav`,order:5}]})}async _getLocationModel(e,t,n,r){return new KC(await Iw(e.referenceProvider,t,n,!0,!1,r),A(1052,`References`))}}),Rr(class extends Gw{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:`editor.action.referenceSearch.trigger`,title:K(1067,`Peek References`),precondition:b.and(J.hasReferenceProvider,MC.notInPeekEditor,J.isInEmbeddedEditor.toNegated()),menu:{id:g.EditorContextPeek,group:`peek`,order:6}})}async _getLocationModel(e,t,n,r){return new KC(await Iw(e.referenceProvider,t,n,!1,!1,r),A(1053,`References`))}}),Kw=class extends Bw{constructor(e,t,n){super(e,{id:`editor.action.goToLocation`,title:K(1068,`Go to Any Symbol`),precondition:b.and(MC.notInPeekEditor,J.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}async _getLocationModel(e,t,n,r){return new KC(this._references,A(1054,`Locations`))}_getNoResultFoundMessage(e){return e&&A(1055,`No results for '{0}'`,e.word)||``}_getGoToPreference(e){return this._gotoMultipleBehaviour??e.getOption(67).multipleReferences}_getAlternativeCommand(){}},hn.registerCommand({id:`editor.action.goToLocations`,metadata:{description:`Go to locations from a position in a file`,args:[{name:`uri`,description:`The text document in which to start`,constraint:Fc},{name:`position`,description:`The position at which to start`,constraint:H.isIPosition},{name:`locations`,description:`An array of locations.`,constraint:Array},{name:`multiple`,description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:`noResultsMessage`,description:`Human readable message that shows when locations is empty.`}]},handler:async(e,t,n,r,i,a,o)=>{en(Fc.isUri(t)),en(H.isIPosition(n)),en(Array.isArray(r)),en(i===void 0||typeof i==`string`),en(o===void 0||typeof o==`boolean`);let s=e.get(ec),c=await s.openCodeEditor({resource:t},s.getFocusedCodeEditor());if(mo(c))return c.setPosition(n),c.revealPositionInCenterIfOutsideViewport(n,0),c.invokeWithinContext(e=>{let t=new class extends Kw{_getNoResultFoundMessage(e){return a||super._getNoResultFoundMessage(e)}}({muteMessage:!a,openInPeek:!!o,openToSide:!1},r,i);e.get(U).invokeFunction(t.run.bind(t),c)})}}),hn.registerCommand({id:`editor.action.peekLocations`,metadata:{description:`Peek locations from a position in a file`,args:[{name:`uri`,description:`The text document in which to start`,constraint:Fc},{name:`position`,description:`The position at which to start`,constraint:H.isIPosition},{name:`locations`,description:`An array of locations.`,constraint:Array},{name:`multiple`,description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(e,t,n,r,i)=>{e.get(no).executeCommand(`editor.action.goToLocations`,t,n,r,i,void 0,!0)}}),hn.registerCommand({id:`editor.action.findReferences`,handler:(e,t,n)=>{en(Fc.isUri(t)),en(H.isIPosition(n));let r=e.get(V),i=e.get(ec);return i.openCodeEditor({resource:t},i.getFocusedCodeEditor()).then(e=>{if(!mo(e)||!e.hasModel())return;let t=xw.get(e);if(!t)return;let i=Zn(t=>Iw(r.referenceProvider,e.getModel(),H.lift(n),!1,!1,t).then(e=>new KC(e,A(1056,`References`)))),a=new T(n.lineNumber,n.column,n.lineNumber,n.column);return Promise.resolve(t.toggleWidget(a,i,!1))})}}),hn.registerCommandAlias(`editor.action.showReferences`,`editor.action.peekLocations`)}));async function Jw(e,t,n,r){let i=e.get(d),a=e.get(Ti),o=e.get(no),s=e.get(U),c=e.get(Hp);if(await r.item.resolve(W.None),!r.part.location)return;let l=r.part.location,u=[],f=new Set(gi.getMenuItems(g.EditorContext).map(e=>Ru(e)?e.command.id:ta()));for(let e of Bw.all())f.has(e.desc.id)&&u.push(new cs(e.desc.id,at.label(e.desc,{renderShortTitle:!0}),void 0,!0,async()=>{let n=await i.createModelReference(l.uri);try{let i=new zw(n.object.textEditorModel,T.getStartPosition(l.range)),a=r.item.anchor.range;await s.invokeFunction(e.runEditorCommand.bind(e),t,i,a)}finally{n.dispose()}}));if(r.part.command){let{command:e}=r.part;u.push(new qo),u.push(new cs(e.id,e.title,void 0,!0,async()=>{try{await o.executeCommand(e.id,...e.arguments??[])}catch(e){c.notify({severity:nf.Error,source:r.item.provider.displayName,message:e})}}))}let p=t.getOption(143);a.showContextMenu({domForShadowRoot:p?t.getDomNode()??void 0:void 0,getAnchor:()=>{let e=td(n);return{x:e.left,y:e.top+e.height+8}},getActions:()=>u,onHide:()=>{t.focus()},autoSelectFirstItem:!0})}async function Yw(e,t,n,r){let i=await e.get(d).createModelReference(r.uri);await n.invokeWithinContext(async e=>{let a=t.hasSideBySideModifier,o=e.get(bh),s=MC.inPeekEditor.getValue(o);return new Vw({openToSide:a,openInPeek:!a&&n.getOption(100)&&!s,muteMessage:!0},{title:{value:``,original:``},id:``,precondition:void 0}).run(e,new zw(i.object.textEditorModel,T.getStartPosition(r.range)),T.lift(r.range))}),i.dispose()}var Xw=t((()=>{y(),Ji(),wu(),ne(),_(),ll(),qw(),HC(),de(),jo(),C(),be(),F(),up()}));function Zw(e){return e.replace(/[ \t]/g,`\xA0`)}var Qw,$w,eT,tT,nT,rT,iT,aT,oT=t((()=>{y(),sn(),O(),wu(),M(),q(),Gm(),lr(),xd(),ht(),Tr(),bd(),vr(),_(),Gr(),zf(),md(),tf(),yu(),ll(),cC(),pC(),Xw(),jo(),Zo(),F(),up(),Ei(),Yf(),Qw=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$w=function(e,t){return function(n,r){t(n,r,e)}},tT=class e{constructor(){this._entries=new sh(50)}get(t){let n=e._key(t);return this._entries.get(n)}set(t,n){let r=e._key(t);this._entries.set(r,n)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}},nT=Mc(`IInlayHintsCache`),Ds(nT,tT,1),rT=class{constructor(e,t){this.item=e,this.index=t}get part(){let e=this.item.hint.label;return typeof e==`string`?{label:e}:e[this.index]}},iT=class{constructor(e,t){this.part=e,this.hasTriggerModifier=t}},aT=class{static#e=eT=this;static#t=this.ID=`editor.contrib.InlayHints`;static#n=this._MAX_DECORATORS=1500;static#r=this._whitespaceData={};static get(e){return e.getContribution(eT.ID)??void 0}constructor(e,t,n,r,i,a,o){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=r,this._commandService=i,this._notificationService=a,this._instaService=o,this._disposables=new I,this._sessionDisposables=new I,this._decorationsMetadata=new Map,this._activeRenderMode=0,this._ruleFactory=this._disposables.add(new Xa(this._editor)),this._debounceInfo=n.for(t.inlayHintsProvider,`InlayHint`,{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(e=>{e.hasChanged(158)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();let e=this._editor.getOption(158);if(e.enabled===`off`)return;let t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled===`on`)this._activeRenderMode=0;else{let t,n;e.enabled===`onUnlessPressed`?(t=0,n=1):(t=1,n=0),this._activeRenderMode=t,this._sessionDisposables.add(Rs.getInstance().event(e=>{if(!this._editor.hasModel())return;let r=e.altKey&&e.ctrlKey&&!(e.shiftKey||e.metaKey)?n:t;if(r!==this._activeRenderMode){this._activeRenderMode=r;let e=this._editor.getModel(),t=this._copyInlayHintsWithCurrentAnchor(e);this._updateHintsDecorators([e.getFullModelRange()],t),a.schedule(0)}}))}let n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(qm(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let r,i=new Set,a=new rn(async()=>{let e=Date.now();r?.dispose(!0),r=new Zd;let n=t.onWillDispose(()=>r?.cancel());try{let n=r.token,o=await fC.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),n);if(a.delay=this._debounceInfo.update(t,Date.now()-e),n.isCancellationRequested){o.dispose();return}for(let e of o.provider)typeof e.onDidChangeInlayHints==`function`&&!i.has(e)&&(i.add(e),this._sessionDisposables.add(e.onDidChangeInlayHints(()=>{a.isScheduled()||a.schedule()})));this._sessionDisposables.add(o),this._updateHintsDecorators(o.ranges,o.items),this._cacheHintsForFastRestore(t)}catch(e){$p(e)}finally{r.dispose(),n.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(a),this._sessionDisposables.add(qm(()=>r?.dispose(!0))),a.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||!a.isScheduled())&&a.schedule()}));let o=this._sessionDisposables.add(new su);this._sessionDisposables.add(this._editor.onDidChangeModelContent(e=>{r?.cancel();let t=Math.max(a.delay,800);this._cursorInfo={position:this._editor.getPosition(),notEarlierThan:Date.now()+t},o.value=ps(()=>a.schedule(0),t),a.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(158)&&a.schedule()})),this._sessionDisposables.add(this._installDblClickGesture(()=>a.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){let e=new I,t=e.add(new sC(this._editor)),n=new I;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(e=>{let[t]=e,r=this._getInlayHintLabelPart(t),i=this._editor.getModel();if(!r||!i){n.clear();return}let a=new Zd;n.add(qm(()=>a.dispose(!0))),r.item.resolve(a.token),this._activeInlayHintPart=r.part.command||r.part.location?new iT(r,t.hasTriggerModifier):void 0;let o=i.validatePosition(r.item.hint.position).lineNumber,s=new T(o,1,o,i.getLineMaxColumn(o)),c=this._getInlineHintsForRange(s);this._updateHintsDecorators([s],c),n.add(qm(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([s],c)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(async e=>{let t=this._getInlayHintLabelPart(e);if(t){let n=t.part;n.location?this._instaService.invokeFunction(Yw,e,this._editor,n.location):zd.is(n.command)&&await this._invokeCommand(n.command,t.item)}})),e}_getInlineHintsForRange(e){let t=new Set;for(let n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;let n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),await n.item.resolve(W.None),Xf(n.item.hint.textEdits))){let t=n.item.hint.textEdits.map(e=>un.replace(T.lift(e.range),e.text));this._editor.executeEdits(`inlayHint.default`,t),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!Oe(e.event.target))return;let t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(Jw,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){if(e.target.type!==6)return;let t=e.target.detail.injectedText?.options;if(t instanceof Zs&&t?.attachedData instanceof rT)return t.attachedData}async _invokeCommand(e,t){try{await this._commandService.executeCommand(e.id,...e.arguments??[])}catch(e){this._notificationService.notify({severity:nf.Error,source:t.provider.displayName,message:e})}}_cacheHintsForFastRestore(e){let t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){let t=new Map;for(let[n,r]of this._decorationsMetadata){if(t.has(r.item))continue;let i=e.getDecorationRange(n);if(i){let e=new uC(i,r.item.anchor.direction),n=r.item.with({anchor:e});t.set(r.item,n)}}return Array.from(t.values())}_getHintsRanges(){let e=this._editor.getModel(),t=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(let r of t.sort(T.compareRangesUsingStarts)){let t=e.validateRange(new T(r.startLineNumber-30,r.startColumn,r.endLineNumber+30,r.endColumn));n.length===0||!T.areIntersectingOrTouching(n[n.length-1],t)?n.push(t):n[n.length-1]=T.plusRange(n[n.length-1],t)}return n}_updateHintsDecorators(e,t){let n=new Map;if(this._cursorInfo&&this._cursorInfo.notEarlierThan>Date.now()&&e.some(e=>e.containsPosition(this._cursorInfo.position))){let{position:e}=this._cursorInfo;this._cursorInfo=void 0;let r=new Map;for(let t of this._editor.getLineDecorations(e.lineNumber)??[]){let n=this._decorationsMetadata.get(t.id);if(t.range.startColumn>e.column)continue;let i=n?.decoration.options[n.item.anchor.direction];if(i&&i.attachedData!==eT._whitespaceData){let e=r.get(n.item)??0;r.set(n.item,e+i.content.length)}}let i=t.filter(t=>t.anchor.range.startLineNumber===e.lineNumber&&t.anchor.range.endColumn<=e.column),a=Array.from(r.values()),o;for(;;){let e=i.shift(),t=a.shift();if(!t&&!e)break;if(e)n.set(e,t??0),o=e;else if(o&&t){let e=n.get(o);e+=t,e+=a.reduce((e,t)=>e+t,0),a.length=0;break}}}let r=[],i=(e,t,n,i,a)=>{let o={content:n,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:i,attachedData:a};r.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:{description:`InlayHint`,showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0,[e.anchor.direction]:this._activeRenderMode===0?o:void 0}}})},a=(e,t)=>{i(e,this._ruleFactory.createClassNameRef({width:`${o/3|0}px`,display:`inline-block`}),``,t?al.Right:al.None,eT._whitespaceData)},{fontSize:o,fontFamily:s,padding:c,isUniform:l}=this._getLayoutInfo(),u=this._editor.getOption(158).maximumLength,d=`--code-editorInlayHintsFontFamily`;this._editor.getContainerDomNode().style.setProperty(d,s);let f={line:0,totalLen:0};for(let e=0;e<t.length;e++){let s=t[e];if(f.line!==s.anchor.range.startLineNumber&&(f={line:s.anchor.range.startLineNumber,totalLen:0}),u&&f.totalLen>u)continue;s.hint.paddingLeft&&a(s,!1);let p=typeof s.hint.label==`string`?[{label:s.hint.label}]:s.hint.label,m=n.get(s),h=0;for(let e=0;e<p.length;e++){let t=p[e],n=e===0,r=e===p.length-1,a={fontSize:`${o}px`,fontFamily:`var(${d}), ${Eu.fontFamily}`,verticalAlign:l?`baseline`:`middle`,unicodeBidi:`isolate`};Xf(s.hint.textEdits)&&(a.cursor=`default`),this._fillInColors(a,s.hint),(t.command||t.location)&&this._activeInlayHintPart?.part.item===s&&this._activeInlayHintPart.part.index===e&&(a.textDecoration=`underline`,this._activeInlayHintPart.hasTriggerModifier&&(a.color=hs(Ms),a.cursor=`pointer`));let ee=t.label;f.totalLen+=ee.length;let te=!1,ne=u===0?0:f.totalLen-u;if(ne>0&&(ee=ee.slice(0,-ne)+``,te=!0),h+=ee.length,m!==void 0){let e=h-m;e>=0&&(h-=e,ee=ee.slice(0,-(1+e))+``,te=!0)}if(c&&(n&&(r||te)?(a.padding=`1px ${Math.max(1,o/4)|0}px`,a.borderRadius=`${o/4|0}px`):n?(a.padding=`1px 0 1px ${Math.max(1,o/4)|0}px`,a.borderRadius=`${o/4|0}px 0 0 ${o/4|0}px`):r||te?(a.padding=`1px ${Math.max(1,o/4)|0}px 1px 0`,a.borderRadius=`0 ${o/4|0}px ${o/4|0}px 0`):a.padding=`1px 0 1px 0`),i(s,this._ruleFactory.createClassNameRef(a),Zw(ee),r&&!s.hint.paddingRight?al.Right:al.None,new rT(s,e)),te)break}if(m!==void 0&&h<m){let e=m-h;i(s,this._ruleFactory.createClassNameRef({}),``.repeat(e),al.None)}if(s.hint.paddingRight&&a(s,!0),r.length>eT._MAX_DECORATORS)break}let p=[];for(let[t,n]of this._decorationsMetadata){let r=this._editor.getModel()?.getDecorationRange(t);r&&e.some(e=>e.containsRange(r))&&(p.push(t),n.classNameRef.dispose(),this._decorationsMetadata.delete(t))}let m=Nn.capture(this._editor);this._editor.changeDecorations(e=>{let t=e.deltaDecorations(p,r.map(e=>e.decoration));for(let e=0;e<t.length;e++){let n=r[e];this._decorationsMetadata.set(t[e],n)}}),m.restore(this._editor)}_fillInColors(e,t){t.kind===Sc.Parameter?(e.backgroundColor=hs(jd),e.color=hs(ru)):t.kind===Sc.Type?(e.backgroundColor=hs(Vl),e.color=hs(Is)):(e.backgroundColor=hs(wl),e.color=hs(Df))}_getLayoutInfo(){let e=this._editor.getOption(158),t=e.padding,n=this._editor.getOption(61),r=this._editor.getOption(58),i=e.fontSize;(!i||i<5||i>n)&&(i=n);let a=e.fontFamily||r;return{fontSize:i,fontFamily:a,padding:t,isUniform:!t&&a===r&&i===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},aT=eT=Qw([$w(1,V),$w(2,Vp),$w(3,nT),$w(4,no),$w(5,Hp),$w(6,U)],aT),hn.registerCommand(`_executeInlayHintProvider`,async(e,...t)=>{let[n,r]=t;en(Fc.isUri(n)),en(T.isIRange(r));let{inlayHintsProvider:i}=e.get(V),a=await e.get(d).createModelReference(n);try{let e=await fC.create(i,a.object.textEditorModel,[T.lift(r)],W.None),t=e.items.map(e=>e.hint);return setTimeout(()=>e.dispose(),0),t}finally{a.dispose()}})})),sT,cT,lT,uT,dT=t((()=>{O(),Fd(),Su(),md(),Tb(),h(),ll(),sS(),xS(),oT(),qp(),Wu(),yu(),P(),Rt(),pC(),sn(),Ki(),Os(),jo(),sT=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},cT=function(e,t){return function(n,r){t(n,r,e)}},lT=class extends Sb{constructor(e,t,n,r){super(10,t,e.item.anchor.range,n,r,!0),this.part=e}},uT=class extends vS{constructor(e,t,n,r,i,a,o,s,c){super(e,t,n,a,s,r,i,c),this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(e){if(!aT.get(this._editor)||e.target.type!==6)return null;let t=e.target.detail.injectedText?.options;return t instanceof Zs&&t.attachedData instanceof rT?new lT(t.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,n,r){return e instanceof lT?new bn(async t=>{let{part:n}=e;if(await n.item.resolve(r),r.isCancellationRequested)return;let i;typeof n.item.hint.tooltip==`string`?i=new Af().appendText(n.item.hint.tooltip):n.item.hint.tooltip&&(i=n.item.hint.tooltip),i&&t.emitOne(new gS(this,e.range,[i],!1,0)),Xf(n.item.hint.textEdits)&&t.emitOne(new gS(this,e.range,[new Af().appendText(A(1154,`Double-click to insert`))],!1,10001));let a;if(typeof n.part.tooltip==`string`?a=new Af().appendText(n.part.tooltip):n.part.tooltip&&(a=n.part.tooltip),a&&t.emitOne(new gS(this,e.range,[a],!1,1)),n.part.location||n.part.command){let r,i=this._editor.getOption(86)===`altKey`?Sh?A(1155,`cmd + click`):A(1156,`ctrl + click`):Sh?A(1157,`option + click`):A(1158,`alt + click`);n.part.location&&n.part.command?r=new Af().appendText(A(1159,`Go to Definition ({0}), right click for more`,i)):n.part.location?r=new Af().appendText(A(1160,`Go to Definition ({0})`,i)):n.part.command&&(r=new Af(`[${A(1161,`Execute Command`)}](${lC(n.part.command)} "${n.part.command.title}") (${i})`,{isTrusted:!0})),r&&t.emitOne(new gS(this,e.range,[r],!1,1e4))}let o=this._resolveInlayHintLabelPartHover(n,r);for await(let e of o)t.emitOne(e)}):bn.EMPTY}async*_resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return;let{uri:n,range:r}=e.part.location,i=await this._resolverService.createModelReference(n);try{let n=i.object.textEditorModel;if(!this._languageFeaturesService.hoverProvider.has(n))return;for await(let i of rS(this._languageFeaturesService.hoverProvider,n,new H(r.startLineNumber,r.startColumn),t))cu(i.hover.contents)||(yield new gS(this,e.item.anchor.range,i.hover.contents,!1,2+i.ordinal))}finally{i.dispose()}}},uT=sT([cT(1,Qi),cT(2,_e),cT(3,xs),cT(4,ms),cT(5,xl),cT(6,d),cT(7,V),cT(8,no)],uT)})),fT,pT,mT,hT,gT,_T,vT,yT=t((()=>{Tb(),q(),tS(),Ki(),md(),Su(),_(),y(),xS(),tC(),dT(),M(),Os(),fT=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},pT=function(e,t){return function(n,r){t(n,r,e)}},gT=mT=class extends z{constructor(e,t,n,r,i,a){super();let o=t.hoverParts;this._renderedHoverParts=this._register(new vT(e,n,o,r,i,a));let s=t.options,c=s.anchor,{showAtPosition:l,showAtSecondaryPosition:u}=mT.computeHoverPositions(e,c.range,o);this.shouldAppearBeforeContent=o.some(e=>e.isBeforeContent),this.showAtPosition=l,this.showAtSecondaryPosition=u,this.initialMousePosX=c.initialMousePosX,this.initialMousePosY=c.initialMousePosY,this.shouldFocus=s.shouldFocus,this.source=s.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}get hoverPartsCount(){return this._renderedHoverParts.hoverPartsCount}focusHoverPartWithIndex(e){this._renderedHoverParts.focusHoverPartWithIndex(e)}async updateHoverVerbosityLevel(e,t,n){this._renderedHoverParts.updateHoverVerbosityLevel(e,t,n)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(e,t,n){let r=1;if(e.hasModel()){let n=e._getViewModel(),i=n.coordinatesConverter,a=i.convertModelRangeToViewRange(t),o=n.getLineMinColumn(a.startLineNumber),s=new H(a.startLineNumber,o);r=i.convertViewPositionToModelPosition(s).column}let i=t.startLineNumber,a=t.startColumn,o;for(let e of n){let t=e.range,n=t.startLineNumber===i,s=t.endLineNumber===i;if(n&&s){let e=t.startColumn,n=Math.min(a,e);a=Math.max(n,r)}e.forceShowAtRange&&(o=t)}let s,c;if(o){let e=o.getStartPosition();s=e,c=e}else s=t.getStartPosition(),c=new H(i,a);return{showAtPosition:s,showAtSecondaryPosition:c}}},gT=mT=fT([pT(4,xs),pT(5,ms)],gT),_T=class{constructor(e,t){this._statusBar=t,e.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}},vT=class extends z{static#e=hT=this;static#t=this._DECORATION_OPTIONS=L.register({description:`content-hover-highlight`,className:`hoverHighlight`});constructor(e,t,n,r,i,a){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=r,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(t,n,r,i,a)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(e,n)),this._updateMarkdownAndColorParticipantInfo(t)}_createEditorDecorations(e,t){if(t.length===0)return z.None;let n=t[0].range;for(let e of t){let t=e.range;n=T.plusRange(n,t)}let r=e.createDecorationsCollection();return r.set([{range:n,options:hT._DECORATION_OPTIONS}]),qm(()=>{r.clear()})}_renderParts(e,t,n,r,i){let a=new eS(r,i),o={fragment:this._fragment,statusBar:a,...n},s=new I;s.add(a);for(let n of e){let e=this._renderHoverPartsForParticipant(t,n,o);s.add(e);for(let t of e.renderedHoverParts)this._renderedParts.push({type:`hoverPart`,participant:n,hoverPart:t.hoverPart,hoverElement:t.hoverElement})}let c=this._renderStatusBar(this._fragment,a);return c&&(s.add(c),this._renderedParts.push({type:`statusBar`,hoverElement:c.hoverElement,actions:c.actions})),s}_renderHoverPartsForParticipant(e,t,n){let r=e.filter(e=>e.owner===t);return r.length>0?t.renderHoverParts(n,r):new Cb([])}_renderStatusBar(e,t){if(t.hasContent)return new _T(e,t)}_registerListenersOnRenderedParts(){let e=new I;return this._renderedParts.forEach((t,n)=>{let r=t.hoverElement;r.tabIndex=0,e.add(ch(r,Ul.FOCUS_IN,e=>{e.stopPropagation(),this._focusedHoverPartIndex=n})),e.add(ch(r,Ul.FOCUS_OUT,e=>{e.stopPropagation(),this._focusedHoverPartIndex=-1}))}),e}_updateMarkdownAndColorParticipantInfo(e){let t=e.find(e=>e instanceof vS&&!(e instanceof uT));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find(e=>e instanceof eC)}focusHoverPartWithIndex(e){e<0||e>=this._renderedParts.length||this._renderedParts[e].hoverElement.focus()}async updateHoverVerbosityLevel(e,t,n){if(!this._markdownHoverParticipant)return;let r;r=t>=0?{start:t,endExclusive:t+1}:this._findRangeOfMarkdownHoverParts(this._markdownHoverParticipant);for(let t=r.start;t<r.endExclusive;t++){let n=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,t);if(n===void 0)continue;let r=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,n);r&&(this._renderedParts[t]={type:`hoverPart`,participant:this._markdownHoverParticipant,hoverPart:r.hoverPart,hoverElement:r.hoverElement})}n&&(t>=0?this.focusHoverPartWithIndex(t):this._context.focus()),this._context.onContentsChanged()}isColorPickerVisible(){return this._colorHoverParticipant?.isColorPickerVisible()??!1}_normalizedIndexToMarkdownHoverIndexRange(e,t){let n=this._renderedParts[t];if(!n||n.type!==`hoverPart`||n.participant!==e)return;let r=this._renderedParts.findIndex(t=>t.type===`hoverPart`&&t.participant===e);if(r===-1)throw new tc;return t-r}_findRangeOfMarkdownHoverParts(e){let t=this._renderedParts.slice(),n=t.findIndex(t=>t.type===`hoverPart`&&t.participant===e),r=t.reverse().findIndex(t=>t.type===`hoverPart`&&t.participant===e);return{start:n,endExclusive:(r>=0?t.length-r:r)+1}}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}get hoverPartsCount(){return this._renderedParts.length}},vT=hT=fT([pT(4,xs),pT(5,ms)],vT)})),bT,xT,ST,CT=t((()=>{y(),q(),Gr(),Mx(),Tb(),F(),Ki(),Gx(),qx(),Xx(),N(),yT(),Ox(),Os(),bT=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xT=function(e,t){return function(n,r){t(n,r,e)}},ST=class extends z{constructor(e,t,n,r){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._hoverService=r,this._currentResult=null,this._renderedContentHover=this._register(new su),this._onContentsChanged=this._register(new j),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(Wx,this._editor)),this._participants=this._initializeHoverParticipants(),this._hoverOperation=this._register(new Ax(this._editor,new Kx(this._editor,this._participants))),this._registerListeners()}_initializeHoverParticipants(){let e=[];for(let t of wb.getAll()){let n=this._instantiationService.createInstance(t,this._editor);e.push(n)}return e.sort((e,t)=>e.hoverOrdinal-t.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(e=>e.handleResize?.())})),this._register(this._contentHoverWidget.onDidScroll(e=>{this._participants.forEach(t=>t.handleScroll?.(e))})),this._register(this._contentHoverWidget.onContentsChanged(()=>{this._participants.forEach(e=>e.handleContentsChanged?.())})),e}_registerListeners(){this._register(this._hoverOperation.onResult(e=>{let t=e.hasLoadingMessage?this._addLoadingMessage(e):e.value;this._withResult(new Jx(t,e.isComplete,e.options))}));let e=this._contentHoverWidget.getDomNode();this._register(Km(e,`keydown`,e=>{e.equals(9)&&this.hide()})),this._register(Km(e,`mouseleave`,e=>{this._onMouseLeave(e)})),this._register(ve.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)})),this._register(this._contentHoverWidget.onContentsChanged(()=>{this._onContentsChanged.fire()}))}_startShowingOrUpdateHover(e,t,n,r,i){if(!(this._contentHoverWidget.position&&this._currentResult))return e?(this._startHoverOperationIfNecessary(e,t,n,r,!1),!0):!1;let a=this._editor.getOption(69).sticky,o=i&&this._contentHoverWidget.isMouseGettingCloser(i.event.posx,i.event.posy);return a&&o?(e&&this._startHoverOperationIfNecessary(e,t,n,r,!0),!0):e?this._currentResult&&this._currentResult.options.anchor.equals(e)?!0:this._currentResult&&e.canAdoptVisibleHover(this._currentResult.options.anchor,this._contentHoverWidget.position)?(this._currentResult&&this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,n,r,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,n,r,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,n,r,i){if(this._hoverOperation.options&&this._hoverOperation.options.anchor.equals(e))return;this._hoverOperation.cancel();let a={anchor:e,source:n,shouldFocus:r,insistOnKeepingHoverVisible:i};this._hoverOperation.start(t,a)}_setCurrentResult(e){let t=e;this._currentResult!==t&&(t&&t.hoverParts.length===0&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover())}_addLoadingMessage(e){for(let t of this._participants){if(!t.createLoadingMessage)continue;let n=t.createLoadingMessage(e.options.anchor);if(n)return e.value.slice(0).concat([n])}return e.value}_withResult(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),!e.isComplete)return;let t=e.hoverParts.length===0,n=e.options.insistOnKeepingHoverVisible;t&&n||this._setCurrentResult(e)}_showHover(e){let t=this._getHoverContext();this._renderedContentHover.value=new gT(this._editor,e,this._participants,t,this._keybindingService,this._hoverService),this._renderedContentHover.value.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover.value):this._renderedContentHover.clear()}_hideHover(){this._contentHoverWidget.hide(),this._participants.forEach(e=>e.handleHide?.())}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._contentHoverWidget.handleContentsChanged()},setMinimumDimensions:e=>{this._contentHoverWidget.setMinimumDimensions(e)},focus:()=>this.focus()}}showsOrWillShow(e){if(this._contentHoverWidget.isResizing)return!0;let t=this._findHoverAnchorCandidates(e);if(!(t.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);let n=t[0];return this._startShowingOrUpdateHover(n,0,0,!1,e)}_findHoverAnchorCandidates(e){let t=[];for(let n of this._participants){if(!n.suggestHoverAnchor)continue;let r=n.suggestHoverAnchor(e);r&&t.push(r)}let n=e.target;switch(n.type){case 6:t.push(new xb(0,n.range,e.event.posx,e.event.posy));break;case 7:{let r=this._editor.getOption(59).typicalHalfwidthCharacterWidth/2;if(!(!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText==`number`&&n.detail.horizontalDistanceToText<r))break;t.push(new xb(0,n.range,e.event.posx,e.event.posy));break}}return t.sort((e,t)=>t.priority-e.priority),t}_onMouseLeave(e){let t=this._editor.getDomNode();(!t||!Dx(t,e.x,e.y))&&this.hide()}startShowingAtRange(e,t,n,r){this._startShowingOrUpdateHover(new xb(0,e,void 0,void 0),t,n,r,null)}async updateHoverVerbosityLevel(e,t,n){this._renderedContentHover.value?.updateHoverVerbosityLevel(e,t,n)}focusedHoverPartIndex(){return this._renderedContentHover.value?.focusedHoverPartIndex??-1}containsNode(e){return e?this._contentHoverWidget.getDomNode().contains(e):!1}focus(){if(this._renderedContentHover.value?.hoverPartsCount===1){this.focusHoverPartWithIndex(0);return}this._contentHoverWidget.focus()}focusHoverPartWithIndex(e){this._renderedContentHover.value?.focusHoverPartWithIndex(e)}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._hoverOperation.cancel(),this._setCurrentResult(null)}getDomNode(){return this._contentHoverWidget.getDomNode()}get isColorPickerVisible(){return this._renderedContentHover.value?.isColorPickerVisible()??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}},ST=bT([xT(1,U),xT(2,xs),xT(3,ms)],ST)})),wT=t((()=>{}));function TT(e){let t=e.target;return!!t&&t.type===6&&t.detail.injectedText?.options.attachedData===Hb}var ET=t((()=>{Gb()})),DT,OT,kT,AT,jT=t((()=>{sx(),q(),F(),Ex(),Ki(),O(),Ox(),CT(),wT(),N(),ET(),be(),DT=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},OT=function(e,t){return function(n,r){t(n,r,e)}},AT=class extends z{static#e=kT=this;static#t=this.ID=`editor.contrib.contentHover`;constructor(e,t,n,r){super(),this._editor=e,this._instantiationService=n,this._keybindingService=r,this._onHoverContentsChanged=this._register(new j),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new I,this._isMouseDown=!1,this._ignoreMouseEvents=!1,this._reactToEditorMouseMoveRunner=this._register(new rn(()=>{this._mouseMoveEvent&&this._reactToEditorMouseMove(this._mouseMoveEvent)},0)),this._register(t.onDidShowContextMenu(()=>{this.hideContentHover(),this._ignoreMouseEvents=!0})),this._register(t.onDidHideContextMenu(()=>{this._ignoreMouseEvents=!1})),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(69)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(kT.ID)}_hookListeners(){let e=this._editor.getOption(69);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled||this._cancelSchedulerAndHide(),this._listenersStore.add(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._listenersStore.add(this._editor.onKeyDown(e=>this._onKeyDown(e))),this._listenersStore.add(this._editor.onMouseLeave(e=>this._onEditorMouseLeave(e))),this._listenersStore.add(this._editor.onDidChangeModel(()=>this._cancelSchedulerAndHide())),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(e=>this._onEditorScrollChanged(e)))}_unhookListeners(){this._listenersStore.clear()}_cancelSchedulerAndHide(){this._cancelScheduler(),this.hideContentHover()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){this._ignoreMouseEvents||(e.scrollTopChanged||e.scrollLeftChanged)&&this.hideContentHover()}_onEditorMouseDown(e){this._ignoreMouseEvents||(this._isMouseDown=!0,!this._shouldKeepHoverWidgetVisible(e)&&this.hideContentHover())}_shouldKeepHoverWidgetVisible(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()||TT(e)}_isMouseOnContentHoverWidget(e){return this._contentWidget?Dx(this._contentWidget.getDomNode(),e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._ignoreMouseEvents||(this._isMouseDown=!1)}_onEditorMouseLeave(e){this._ignoreMouseEvents||this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),!this._shouldKeepHoverWidgetVisible(e)&&this.hideContentHover())}_shouldKeepCurrentHover(e){let t=this._contentWidget;if(!t)return!1;let n=this._hoverSettings.sticky,r=(e,t)=>{let n=this._isMouseOnContentHoverWidget(e);return t&&n},i=e=>{let n=t.isColorPickerVisible,r=this._isMouseOnContentHoverWidget(e),i=n&&r,a=n&&this._isMouseDown;return i||a},a=(e,n)=>{let r=e.event.browserEvent.view;return r?n&&t.containsNode(r.document.activeElement)&&!r.getSelection()?.isCollapsed:!1},o=t.isFocused,s=t.isResizing,c=this._hoverSettings.sticky&&t.isVisibleFromKeyboard;return this.shouldKeepOpenOnEditorMouseMoveOrLeave||o||s||c||r(e,n)||i(e)||a(e,n)}_onEditorMouseMove(e){if(!this._ignoreMouseEvents){if(this._mouseMoveEvent=e,this._shouldKeepCurrentHover(e)){this._reactToEditorMouseMoveRunner.cancel();return}if(this._shouldRescheduleHoverComputation()){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(this._hoverSettings.hidingDelay);return}this._reactToEditorMouseMove(e)}}_shouldRescheduleHoverComputation(){let e=this._hoverSettings.hidingDelay;return(this._contentWidget?.isVisible??!1)&&this._hoverSettings.sticky&&e>0}_reactToEditorMouseMove(e){this._hoverSettings.enabled&&this._getOrCreateContentWidget().showsOrWillShow(e)||this.hideContentHover()}_onKeyDown(e){if(this._ignoreMouseEvents||!this._contentWidget)return;let t=this._isPotentialKeyboardShortcut(e),n=this._isModifierKeyPressed(e);t||n||this._contentWidget.isFocused&&e.keyCode===2||this.hideContentHover()}_isPotentialKeyboardShortcut(e){if(!this._editor.hasModel()||!this._contentWidget)return!1;let t=this._keybindingService.softDispatch(e,this._editor.getDomNode()),n=t.kind===1,r=t.kind===2&&(t.commandId===`editor.action.showHover`||t.commandId===`editor.action.increaseHoverVerbosityLevel`||t.commandId===`editor.action.decreaseHoverVerbosityLevel`)&&this._contentWidget.isVisible;return n||r}_isModifierKeyPressed(e){return e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4}hideContentHover(){Sx.dropDownVisible||this._contentWidget?.hide()}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(ST,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}showContentHover(e,t,n,r){this._getOrCreateContentWidget().startShowingAtRange(e,t,n,r)}_isContentWidgetResizing(){return this._contentWidget?.widget.isResizing||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(e,t,n){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,n)}focus(){this._contentWidget?.focus()}scrollUp(){this._contentWidget?.scrollUp()}scrollDown(){this._contentWidget?.scrollDown()}scrollLeft(){this._contentWidget?.scrollLeft()}scrollRight(){this._contentWidget?.scrollRight()}pageUp(){this._contentWidget?.pageUp()}pageDown(){this._contentWidget?.pageDown()}goToTop(){this._contentWidget?.goToTop()}goToBottom(){this._contentWidget?.goToBottom()}get isColorPickerVisible(){return this._contentWidget?.isColorPickerVisible}get isHoverVisible(){return this._contentWidget?.isVisible}dispose(){super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),this._contentWidget?.dispose()}},AT=kT=DT([OT(1,Ti),OT(2,U),OT(3,xs)],AT)})),MT,NT=t((()=>{q(),_(),jT(),ET(),MT=class extends z{static#e=this.ID=`editor.contrib.colorContribution`;constructor(e){super(),this._editor=e,this._register(e.onMouseDown(e=>this.onMouseDown(e)))}dispose(){super.dispose()}onMouseDown(e){let t=this._editor.getOption(167);if(t!==`click`&&t!==`clickAndHover`||!TT(e))return;let n=this._editor.getContribution(AT.ID);if(!n||n.isColorPickerVisible)return;let r=e.target.range;if(!r)return;let i=new T(r.startLineNumber,r.startColumn+1,r.endLineNumber,r.endColumn+1);n.showContentHover(i,1,1,!1)}}})),PT,FT,IT,LT,RT,zT=t((()=>{wu(),q(),Yf(),Rb(),Gb(),XS(),WS(),_(),y(),PT=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},FT=function(e,t){return function(n,r){t(n,r,e)}},IT=class e{constructor(e,t,n,r){this.owner=e,this.range=t,this.model=n,this.provider=r}static fromBaseColor(t,n){return new e(t,n.range,n.model,n.provider)}},LT=class extends z{constructor(e,t,n,r){super();let i=e.getModel(),a=n.model;this.color=n.model.color,this.colorPicker=this._register(new US(t.fragment,a,e.getOption(162),r,`standalone`)),this._register(a.onColorFlushed(e=>{this.color=e})),this._register(a.onDidChangeColor(e=>{YS(i,a,e,n.range,n)}));let o=!1;this._register(e.onDidChangeModelContent(n=>{o?o=!1:(t.hide(),e.focus())})),YS(i,a,this.color,n.range,n)}},RT=class{constructor(e,t){this._editor=e,this._themeService=t}async createColorHover(e,t,n){if(!this._editor.hasModel()||!Ub.get(this._editor))return null;let r=await jb(n,this._editor.getModel(),W.None),i=null,a=null;for(let t of r){let n=t.colorInfo;T.containsRange(n.range,e.range)&&(i=n,a=t.provider)}let o=i??e,s=a??t,c=!!i;return{colorHover:IT.fromBaseColor(this,await qS(this._editor.getModel(),o,s)),foundInEditor:c}}async updateEditorModel(e){if(!this._editor.hasModel())return;let t=e.model,n=new T(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await YS(this._editor.getModel(),t,this._color,n,e),n=JS(this._editor,n,t))}renderHoverParts(e,t){if(!(t.length===0||!this._editor.hasModel()))return this._setMinimumDimensions(e),this._renderedParts=new LT(this._editor,e,t[0],this._themeService),this._renderedParts}_setMinimumDimensions(e){let t=this._editor.getOption(75)+8;e.setMinimumDimensions(new Nd(302,t))}get _color(){return this._renderedParts?.color}},RT=PT([FT(1,mr)],RT)})),BT,VT,HT,UT,WT,GT,KT,qT=t((()=>{SS(),q(),F(),tS(),Ki(),N(),yu(),Ab(),va(),zT(),y(),Os(),BT=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},VT=function(e,t){return function(n,r){t(n,r,e)}},UT=class{constructor(e,t){this.value=e,this.foundInEditor=t}},WT=8,GT=22,KT=class extends z{static#e=HT=this;static#t=this.ID=`editor.contrib.standaloneColorPickerWidget`;constructor(e,t,n,r,i,a,o,s){super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=n,this._keybindingService=i,this._languageFeaturesService=a,this._editorWorkerService=o,this._hoverService=s,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement(`div`),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new j),this.onResult=this._onResult.event,this._renderedHoverParts=this._register(new su),this._renderedStatusBar=this._register(new su),this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=r.createInstance(RT,this._editor),this._position=this._editor._getViewModel()?.getPrimaryCursorState().modelState.position;let c=this._editor.getSelection(),l=c?{startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},u=this._register(qn(this._body));this._register(u.onDidBlur(e=>{this.hide()})),this._register(u.onDidFocus(e=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(e=>{let t=e.target.element?.classList;t&&t.contains(`colorpicker-color-decoration`)&&this.hide()})),this._register(this.onResult(e=>{this._render(e.value,e.foundInEditor)})),this._start(l),this._body.style.zIndex=`50`,this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return HT.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;let e=this._editor.getOption(69).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){let t=await this._computeAsync(e);t&&this._onResult.fire(new UT(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;let t={range:e,color:{red:0,green:0,blue:0,alpha:1}},n=await this._standaloneColorPickerParticipant.createColorHover(t,new Ob(this._editorWorkerService),this._languageFeaturesService.colorProvider);return n?{result:n.colorHover,foundInEditor:n.foundInEditor}:null}_render(e,t){let n=document.createDocumentFragment();this._renderedStatusBar.value=this._register(new eS(this._keybindingService,this._hoverService));let r={fragment:n,statusBar:this._renderedStatusBar.value,onContentsChanged:()=>{},setMinimumDimensions:()=>{},hide:()=>this.hide(),focus:()=>this.focus()};if(this._colorHover=e,this._renderedHoverParts.value=this._standaloneColorPickerParticipant.renderHoverParts(r,[e]),!this._renderedHoverParts.value){this._renderedStatusBar.clear(),this._renderedHoverParts.clear();return}let i=this._renderedHoverParts.value.colorPicker;this._body.classList.add(`standalone-colorpicker-body`),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+`px`,this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+`px`,this._body.tabIndex=0,this._body.appendChild(n),i.layout();let a=i.body,o=a.saturationBox.domNode.clientWidth,s=a.domNode.clientWidth-o-GT-WT,c=i.body.enterButton;c?.onClicked(()=>{this.updateEditor(),this.hide()});let l=i.header,u=l.pickedColorNode;u.style.width=o+WT+`px`;let d=l.originalColorNode;d.style.width=s+`px`,i.header.closeButton?.onClicked(()=>{this.hide()}),t&&(c&&(c.button.textContent=`Replace`),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}},KT=HT=BT([VT(3,U),VT(4,xs),VT(5,V),VT(6,jr),VT(7,ms)],KT)})),JT,YT,XT,ZT,QT=t((()=>{C(),F(),yc(),qT(),q(),JT=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},YT=function(e,t){return function(n,r){t(n,r,e)}},ZT=class extends z{static#e=XT=this;static#t=this.ID=`editor.contrib.standaloneColorPickerController`;constructor(e,t,n){super(),this._editor=e,this._instantiationService=n,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=J.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=J.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||this._standaloneColorPickerWidget?.focus():this._standaloneColorPickerWidget=this._instantiationService.createInstance(KT,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused))}hide(){this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerWidget?.hide(),this._editor.focus()}insertColor(){this._standaloneColorPickerWidget?.updateEditor(),this.hide()}static get(e){return e.getContribution(XT.ID)}},ZT=XT=JT([YT(1,bh),YT(2,U)],ZT)})),$T,eE,tE,nE=t((()=>{v(),P(),yc(),de(),QT(),$T=class extends Uo{constructor(){super({id:`editor.action.showOrFocusStandaloneColorPicker`,title:{...K(881,`Show or Focus Standalone Color Picker`),mnemonicTitle:A(880,`&&Show or Focus Standalone Color Picker`)},precondition:void 0,menu:[{id:g.CommandPalette}],metadata:{description:K(882,`Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.`)}})}runEditorCommand(e,t){ZT.get(t)?.showOrFocus()}},eE=class extends S{constructor(){super({id:`editor.action.hideColorPicker`,label:K(883,`Hide the Color Picker`),precondition:J.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:K(884,`Hide the standalone color picker.`)}})}run(e,t){ZT.get(t)?.hide()}},tE=class extends S{constructor(){super({id:`editor.action.insertColorWithStandaloneColorPicker`,label:K(885,`Insert Color with Standalone Color Picker`),precondition:J.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:K(886,`Insert hex/rgb/hsl colors with the focused standalone color picker.`)}})}run(e,t){ZT.get(t)?.insertColor()}}})),rE=t((()=>{wu(),M(),xd(),de(),jo(),v(),oe(),Tb(),Rb(),Gb(),Ab(),NT(),tC(),nE(),QT(),_(),D(eE),D(tE),Rr($T),k(MT.ID,MT,2),k(ZT.ID,ZT,1),k(Ub.ID,Ub,1),hl(kb),wb.register(eC),hn.registerCommand(`_executeDocumentColorProvider`,function(e,...t){let[n]=t;if(!(n instanceof Fc))throw bp();let{model:r,colorProviderRegistry:i,defaultColorDecoratorsEnablement:a}=Pb(e,n);return Nb(new Ib,i,r,W.None,a)}),hn.registerCommand(`_executeColorPresentationProvider`,function(e,...t){let[n,r]=t,{uri:i,range:a}=r;if(!(i instanceof Fc)||!Array.isArray(n)||n.length!==4||!T.isIRange(a))throw bp();let{model:o,colorProviderRegistry:s,defaultColorDecoratorsEnablement:c}=Pb(e,i),[l,u,d,f]=n;return Nb(new Lb({range:a,color:{red:l,green:u,blue:d,alpha:f}}),s,o,W.None,c)})})),iE,aE=t((()=>{vr(),Su(),_(),ze(),iE=class e{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;let r=t.length,i=e.length;if(n+r>i)return!1;for(let i=0;i<r;i++){let r=e.charCodeAt(n+i),a=t.charCodeAt(i);if(r!==a&&!(r>=65&&r<=90&&r+32===a)&&!(a>=65&&a<=90&&a+32===r))return!1}return!0}_createOperationsForBlockComment(t,n,r,i,a,o){let s=t.startLineNumber,c=t.startColumn,l=t.endLineNumber,u=t.endColumn,d=a.getLineContent(s),f=a.getLineContent(l),p=d.lastIndexOf(n,c-1+n.length),m=f.indexOf(r,u-1-r.length);if(p!==-1&&m!==-1)if(s===l)d.substring(p+n.length,m).indexOf(r)>=0&&(p=-1,m=-1);else{let e=d.substring(p+n.length),t=f.substring(0,m);(e.indexOf(r)>=0||t.indexOf(r)>=0)&&(p=-1,m=-1)}let h;p!==-1&&m!==-1?(i&&p+n.length<d.length&&d.charCodeAt(p+n.length)===32&&(n+=` `),i&&m>0&&f.charCodeAt(m-1)===32&&(r=` `+r,--m),h=e._createRemoveBlockCommentOperations(new T(s,p+n.length+1,l,m+1),n,r)):(h=e._createAddBlockCommentOperations(t,n,r,this._insertSpace),this._usedEndToken=h.length===1?r:null);for(let e of h)o.addTrackedEditOperation(e.range,e.text)}static _createRemoveBlockCommentOperations(e,t,n){let r=[];return T.isEmpty(e)?r.push(un.delete(new T(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(r.push(un.delete(new T(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(un.delete(new T(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),r}static _createAddBlockCommentOperations(e,t,n,r){let i=[];return T.isEmpty(e)?i.push(un.replace(new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+`  `+n)):(i.push(un.insert(new H(e.startLineNumber,e.startColumn),t+(r?` `:``))),i.push(un.insert(new H(e.endLineNumber,e.endColumn),(r?` `:``)+n))),i}getEditOperations(e,t){let n=this._selection.startLineNumber,r=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);let i=e.getLanguageIdAtPosition(n,r),a=this.languageConfigurationService.getLanguageConfiguration(i).comments;!a||!a.blockCommentStartToken||!a.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,a.blockCommentStartToken,a.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){let n=t.getInverseEditOperations();if(n.length===2){let e=n[0],t=n[1];return new X(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}else{let e=n[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new X(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}})),oE,sE=t((()=>{Ga(),vr(),Su(),_(),ze(),aE(),oE=class e{constructor(e,t,n,r,i,a,o){this.languageConfigurationService=e,this._selection=t,this._indentSize=n,this._type=r,this._insertSpace=i,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=a,this._ignoreFirstLine=o||!1}static _gatherPreflightCommentStrings(e,t,n,r){e.tokenization.tokenizeIfCheap(t);let i=e.getLanguageIdAtPosition(t,1),a=r.getLanguageConfiguration(i).comments,o=a?a.lineCommentToken:null;if(!o)return null;let s=[];for(let e=0,r=n-t+1;e<r;e++)s[e]={ignore:!1,commentStr:o,commentStrOffset:0,commentStrLength:o.length};return s}static _analyzeLines(e,t,n,r,i,a,o,s,c){let l=!0,u=s.getLanguageConfiguration(c).comments?.lineCommentNoIndent??!1,d;d=e===0?!0:e!==1;for(let s=0,c=r.length;s<c;s++){let c=r[s],f=i+s;if(f===i&&o){c.ignore=!0;continue}let p=n.getLineContent(f),m=ka(p);if(m===-1){c.ignore=a,c.commentStrOffset=u?0:p.length;continue}l=!1;let h=u?0:m;if(c.ignore=!1,c.commentStrOffset=h,d&&!iE._haystackHasNeedleAtOffset(p,c.commentStr,h)&&(e===0?d=!1:e===1||(c.ignore=!0)),d&&t){let e=m+c.commentStrLength;e<p.length&&p.charCodeAt(e)===32&&(c.commentStrLength+=1)}}if(e===0&&l){d=!1;for(let e=0,t=r.length;e<t;e++)r[e].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:r}}static _gatherPreflightData(t,n,r,i,a,o,s,c){let l=e._gatherPreflightCommentStrings(r,i,a,c),u=r.getLanguageIdAtPosition(i,1);return l===null?{supported:!1}:e._analyzeLines(t,n,r,l,i,o,s,c,u)}_executeLineComments(t,n,r,i){let a;r.shouldRemoveComments?a=e._createRemoveLineCommentsOperations(r.lines,i.startLineNumber):(e._normalizeInsertionPoint(t,r.lines,i.startLineNumber,this._indentSize),a=this._createAddLineCommentsOperations(r.lines,i.startLineNumber));let o=new H(i.positionLineNumber,i.positionColumn);for(let e=0,r=a.length;e<r;e++)n.addEditOperation(a[e].range,a[e].text),T.isEmpty(a[e].range)&&T.getStartPosition(a[e].range).equals(o)&&t.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(a[e].text||``).length);this._selectionId=n.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,r){let i=t.startLineNumber,a=t.endLineNumber,o=r.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),s=e.getLineContent(i).lastIndexOf(n,o-1),c=e.getLineContent(a).indexOf(r,t.endColumn-1-n.length);return s!==-1&&c===-1&&(c=e.getLineContent(i).indexOf(r,s+n.length),a=i),s===-1&&c!==-1&&(s=e.getLineContent(a).lastIndexOf(n,c),i=a),t.isEmpty()&&(s===-1||c===-1)&&(s=e.getLineContent(i).indexOf(n),s!==-1&&(c=e.getLineContent(i).indexOf(r,s+n.length))),s!==-1&&e.getLineContent(i).charCodeAt(s+n.length)===32&&(n+=` `),c!==-1&&e.getLineContent(a).charCodeAt(c-1)===32&&(r=` `+r,--c),s!==-1&&c!==-1?iE._createRemoveBlockCommentOperations(new T(i,s+n.length+1,a,c+1),n,r):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);let r=e.getLanguageIdAtPosition(n.startLineNumber,1),i=this.languageConfigurationService.getLanguageConfiguration(r).comments;if(!i||!i.blockCommentStartToken||!i.blockCommentEndToken)return;let a=i.blockCommentStartToken,o=i.blockCommentEndToken,s=this._attemptRemoveBlockComment(e,n,a,o);if(!s){if(n.isEmpty()){let t=e.getLineContent(n.startLineNumber),r=ka(t);r===-1&&(r=t.length),s=iE._createAddBlockCommentOperations(new T(n.startLineNumber,r+1,n.startLineNumber,t.length+1),a,o,this._insertSpace)}else s=iE._createAddBlockCommentOperations(new T(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),a,o,this._insertSpace);s.length===1&&(this._deltaColumn=a.length+1)}this._selectionId=t.trackSelection(n);for(let e of s)t.addEditOperation(e.range,e.text)}getEditOperations(t,n){let r=this._selection;if(this._moveEndPositionDown=!1,r.startLineNumber===r.endLineNumber&&this._ignoreFirstLine){n.addEditOperation(new T(r.startLineNumber,t.getLineMaxColumn(r.startLineNumber),r.startLineNumber+1,1),r.startLineNumber===t.getLineCount()?``:`
`),this._selectionId=n.trackSelection(r);return}r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,t.getLineMaxColumn(r.endLineNumber-1)));let i=e._gatherPreflightData(this._type,this._insertSpace,t,r.startLineNumber,r.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(t,n,i,r):this._executeBlockComment(t,n,r)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new X(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];i.ignore||n.push(un.delete(new T(t+r,i.commentStrOffset+1,t+r,i.commentStrOffset+i.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[],r=this._insertSpace?` `:``;for(let i=0,a=e.length;i<a;i++){let a=e[i];a.ignore||n.push(un.insert(new H(t+i,a.commentStrOffset+1),a.commentStr+r))}return n}static nextVisibleColumn(e,t,n,r){return n?e+(t-e%t):e+r}static _normalizeInsertionPoint(t,n,r,i){let a=1073741824,o,s;for(let o=0,s=n.length;o<s;o++){if(n[o].ignore)continue;let s=t.getLineContent(r+o),c=0;for(let t=0,r=n[o].commentStrOffset;c<a&&t<r;t++)c=e.nextVisibleColumn(c,i,s.charCodeAt(t)===9,1);c<a&&(a=c)}a=Math.floor(a/i)*i;for(let c=0,l=n.length;c<l;c++){if(n[c].ignore)continue;let l=t.getLineContent(r+c),u=0;for(o=0,s=n[c].commentStrOffset;u<a&&o<s;o++)u=e.nextVisibleColumn(u,i,l.charCodeAt(o)===9,1);u>a?n[c].commentStrOffset=o-1:n[c].commentStrOffset=o}}}})),cE,lE,uE,dE,fE,pE=t((()=>{ni(),v(),_(),yc(),oo(),aE(),sE(),P(),de(),cE=class extends S{constructor(e,t){super(t),this._type=e}run(e,t){let n=e.get(yn);if(!t.hasModel())return;let r=t.getModel(),i=[],a=r.getOptions(),o=t.getOption(29),s=t.getSelections().map((e,t)=>({selection:e,index:t,ignoreFirstLine:!1}));s.sort((e,t)=>T.compareRangesUsingStarts(e.selection,t.selection));let c=s[0];for(let e=1;e<s.length;e++){let t=s[e];c.selection.endLineNumber===t.selection.startLineNumber&&(c.index<t.index?t.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=t))}for(let e of s)i.push(new oE(n,e.selection,a.indentSize,this._type,o.insertSpace,o.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},lE=class extends cE{constructor(){super(0,{id:`editor.action.commentLine`,label:K(889,`Toggle Line Comment`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:g.MenubarEditMenu,group:`5_insert`,title:A(887,`&&Toggle Line Comment`),order:1}})}},uE=class extends cE{constructor(){super(1,{id:`editor.action.addCommentLine`,label:K(890,`Add Line Comment`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2081),weight:100}})}},dE=class extends cE{constructor(){super(2,{id:`editor.action.removeCommentLine`,label:K(891,`Remove Line Comment`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2099),weight:100}})}},fE=class extends S{constructor(){super({id:`editor.action.blockComment`,label:K(892,`Toggle Block Comment`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:g.MenubarEditMenu,group:`5_insert`,title:A(888,`Toggle &&Block Comment`),order:2}})}run(e,t){let n=e.get(yn);if(!t.hasModel())return;let r=t.getOption(29),i=[],a=t.getSelections();for(let e of a)i.push(new iE(e,r.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},D(lE),D(uE),D(dE),D(fE)})),mE,hE,gE,_E,vE,yE=t((()=>{y(),ra(),Ji(),q(),Rt(),v(),yc(),P(),de(),C(),be(),Ki(),qp(),xc(),mE=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},hE=function(e,t){return function(n,r){t(n,r,e)}},_E=class{static#e=gE=this;static#t=this.ID=`editor.contrib.contextmenu`;static get(e){return e.getContribution(gE.ID)}constructor(e,t,n,r,i,a,o,s){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=r,this._keybindingService=i,this._menuService=a,this._configurationService=o,this._workspaceContextService=s,this._toDispose=new I,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(e=>this._onContextMenu(e))),this._toDispose.add(this._editor.onMouseWheel(e=>{if(this._contextMenuIsBeingShownCount>0){let t=this._contextViewService.getContextViewElement(),n=e.srcElement;n.shadowRoot&&fe(t)===n.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(e=>{this._editor.getOption(30)&&e.keyCode===58&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(30)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let t=!1;for(let n of this._editor.getSelections())if(n.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(30)||!this._editor.hasModel())return;let t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){let n=[],r=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(let t of r){let[,r]=t,i=0;for(let t of r)if(t instanceof ed){let r=this._getMenuActions(e,t.item.submenu);r.length>0&&(n.push(new Cs(t.id,t.label,r)),i++)}else n.push(t),i++;i&&n.push(new qo)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;let n=t;if(!n){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();let e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),t=td(this._editor.getDomNode());n={x:t.left+e.left,y:t.top+e.top+e.height}}let r=this._editor.getOption(143)&&!Mn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>n,getActions:()=>e,getActionViewItem:e=>{let t=this._keybindingFor(e);if(t)return new js(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});let n=e;return typeof n.getActionViewItem==`function`?n.getActionViewItem():new js(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||Ye(this._workspaceContextService.getWorkspace()))return;let t=this._editor.getOption(81),n=0,r=e=>({id:`menu-action-${++n}`,label:e.label,tooltip:``,class:void 0,enabled:e.enabled===void 0?!0:e.enabled,checked:e.checked,run:e.run}),i=(e,t)=>new Cs(`menu-action-${++n}`,e,t,void 0),a=(e,t,n,a,o)=>{if(!t)return r({label:e,enabled:t,run:()=>{}});let s=e=>()=>{this._configurationService.updateValue(n,e)},c=[];for(let e of o)c.push(r({label:e.label,checked:a===e.value,run:s(e.value)}));return i(e,c)},o=[];o.push(r({label:A(893,`Minimap`),checked:t.enabled,run:()=>{this._configurationService.updateValue(`editor.minimap.enabled`,!t.enabled)}})),o.push(new qo),o.push(r({label:A(894,`Render Characters`),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue(`editor.minimap.renderCharacters`,!t.renderCharacters)}})),o.push(a(A(895,`Vertical size`),t.enabled,`editor.minimap.size`,t.size,[{label:A(896,`Proportional`),value:`proportional`},{label:A(897,`Fill`),value:`fill`},{label:A(898,`Fit`),value:`fit`}])),o.push(a(A(899,`Slider`),t.enabled,`editor.minimap.showSlider`,t.showSlider,[{label:A(900,`Mouse Over`),value:`mouseover`},{label:A(901,`Always`),value:`always`}]));let s=this._editor.getOption(143)&&!Mn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>o,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},_E=gE=mE([hE(1,Ti),hE(2,ld),hE(3,bh),hE(4,xs),hE(5,Ba),hE(6,xl),hE(7,ym)],_E),vE=class extends S{constructor(){super({id:`editor.action.showContextMenu`,label:K(902,`Show Editor Context Menu`),precondition:void 0,kbOpts:{kbExpr:J.textInputFocus,primary:1092,weight:100}})}run(e,t){_E.get(t)?.showContextMenu()}},k(_E.ID,_E,2),D(vE)})),bE,xE,SE,CE,wE,TE=t((()=>{q(),v(),yc(),P(),bE=class{constructor(e){this.selections=e}equals(e){let t=this.selections.length;if(t!==e.selections.length)return!1;for(let n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}},xE=class{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}},SE=class e extends z{static#e=this.ID=`editor.contrib.cursorUndoRedoController`;static get(t){return t.getContribution(e.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(e=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(e=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;let n=new bE(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new xE(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new xE(new bE(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new xE(new bE(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}},CE=class extends S{constructor(){super({id:`cursorUndo`,label:K(903,`Cursor Undo`),precondition:void 0,kbOpts:{kbExpr:J.textInputFocus,primary:2099,weight:100}})}run(e,t,n){SE.get(t)?.cursorUndo()}},wE=class extends S{constructor(){super({id:`cursorRedo`,label:K(904,`Cursor Redo`),precondition:void 0})}run(e,t,n){SE.get(t)?.cursorRedo()}},k(SE.ID,SE,0),D(CE),D(wE)})),EE=t((()=>{})),DE,OE=t((()=>{_(),ze(),DE=class{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new T(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new X(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new X(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new X(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new X(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new X(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}}));function kE(e){return Sh?e.altKey:e.ctrlKey}var AE,jE=t((()=>{q(),Rt(),EE(),v(),Su(),_(),ze(),md(),OE(),AE=class e extends z{static#e=this.ID=`editor.contrib.dragAndDrop`;static#t=this.TRIGGER_KEY_VALUE=Sh?6:5;constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._register(this._editor.onMouseDrag(e=>this._onEditorMouseDrag(e))),this._register(this._editor.onMouseDrop(e=>this._onEditorMouseDrop(e))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(e=>this.onEditorKeyDown(e))),this._register(this._editor.onKeyUp(e=>this.onEditorKeyUp(e))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(42)||this._editor.getOption(28)||(kE(e)&&(this._modifierPressed=!0),this._mouseDown&&kE(e)&&this._editor.updateOptions({mouseStyle:`copy`}))}onEditorKeyUp(t){!this._editor.getOption(42)||this._editor.getOption(28)||(kE(t)&&(this._modifierPressed=!1),this._mouseDown&&t.keyCode===e.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:`default`}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:`text`})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let e=(this._editor.getSelections()||[]).filter(e=>t.position&&e.containsPosition(t.position));if(e.length===1)this._dragSelection=e[0];else return}kE(e.event)?this._editor.updateOptions({mouseStyle:`copy`}):this._editor.updateOptions({mouseStyle:`default`}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:`text`}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(t){if(t.target&&(this._hitContent(t.target)||this._hitMargin(t.target))&&t.target.position){let n=new H(t.target.position.lineNumber,t.target.position.column);if(this._dragSelection===null){let e=null;if(t.event.shiftKey){let t=this._editor.getSelection();if(t){let{selectionStartLineNumber:r,selectionStartColumn:i}=t;e=[new X(r,i,n.lineNumber,n.column)]}}else e=(this._editor.getSelections()||[]).map(e=>e.containsPosition(n)?new X(n.lineNumber,n.column,n.lineNumber,n.column):e);this._editor.setSelections(e||[],`mouse`,3)}else (!this._dragSelection.containsPosition(n)||(kE(t.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(n)||this._dragSelection.getStartPosition().equals(n)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(e.ID,new DE(this._dragSelection,n,kE(t.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:`text`}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}static#n=this._DECORATION_OPTIONS=L.register({description:`dnd-target`,className:`dnd-target`});showAt(t){this._dndDecorationIds.set([{range:new T(t.lineNumber,t.column,t.lineNumber,t.column),options:e._DECORATION_OPTIONS}]),this._editor.revealPosition(t,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}},k(AE.ID,AE,2)})),ME,NE=t((()=>{Ng(),P(),v(),yc(),oe(),bv(),g_(),ME=`editor.action.pasteAs`,k(yv.ID,yv,0),hl(h_),E(new class extends dn{constructor(){super({id:hv,precondition:_v,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t){return yv.get(t)?.changePasteType()}}),E(new class extends dn{constructor(){super({id:`editor.hidePasteWidget`,precondition:_v,kbOpts:{weight:100,primary:9}})}runEditorCommand(e,t){yv.get(t)?.clearWidgets()}}),D(class e extends S{static#e=this.argsSchema={oneOf:[{type:`object`,required:[`kind`],properties:{kind:{type:`string`,description:A(905,`The kind of the paste edit to try pasting with.
If there are multiple edits for this kind, the editor will show a picker. If there are no edits of this kind, the editor will show an error message.`)}}},{type:`object`,required:[`preferences`],properties:{preferences:{type:`array`,description:A(906,`List of preferred paste edit kind to try applying.
The first edit matching the preferences will be applied.`),items:{type:`string`}}}}]};constructor(){super({id:ME,label:K(907,`Paste As...`),precondition:J.writable,metadata:{description:`Paste as`,args:[{name:`args`,schema:e.argsSchema}]}})}run(e,t,n){let r;return n&&(`kind`in n?r={only:new Mg(n.kind)}:`preferences`in n&&(r={preferences:n.preferences.map(e=>new Mg(e))})),yv.get(t)?.pasteAs(r)}}),D(class extends S{constructor(){super({id:`editor.action.pasteAsText`,label:K(908,`Paste as Text`),precondition:J.writable})}run(e,t){return yv.get(t)?.pasteAs({providerId:l_.id})}})})),PE,FE,IE=t((()=>{PE=class{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){let t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}},FE=class{constructor(e){this.identifier=e}}})),LE,RE=t((()=>{Zo(),F(),IE(),LE=Mc(`treeViewsDndService`),Ds(LE,PE,1)})),zE,BE,VE,HE,UE,WE,GE,KE=t((()=>{sn(),O(),jg(),M(),Ng(),q(),P(),qp(),C(),zg(),F(),Wg(),_(),yu(),IE(),RE(),In(),Zg(),M_(),dv(),zE=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},BE=function(e,t){return function(n,r){t(n,r,e)}},HE=`editor.dropIntoEditor.preferences`,UE=`editor.changeDropType`,WE=new De(`dropWidgetVisible`,!1,A(926,`Whether the drop widget is showing`)),GE=class extends z{static#e=VE=this;static#t=this.ID=`editor.contrib.dropIntoEditorController`;static get(e){return e.getContribution(VE.ID)}constructor(e,t,n,r,i){super(),this._configService=n,this._languageFeaturesService=r,this._treeViewsDragAndDropService=i,this.treeItemsTransfer=Rg.getInstance(),this._dropProgressManager=this._register(t.createInstance(Xg,`dropIntoEditor`,e)),this._postDropWidgetManager=this._register(t.createInstance(uv,`dropIntoEditor`,e,WE,{id:UE,label:A(927,`Show drop options...`)},()=>VE._configureDefaultAction?[VE._configureDefaultAction]:[])),this._register(e.onDropIntoEditor(t=>this.onDropIntoEditor(e,t.position,t.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,n){if(!n.dataTransfer||!e.hasModel())return;VE._currentDropOperation?.cancel(),e.focus(),e.setPosition(t);let r=Zn(async i=>{let a=new I,o=a.add(new Ri(e,1,void 0,i));try{let r=await this.extractDataTransferData(n);if(r.size===0||o.token.isCancellationRequested)return;let s=e.getModel();if(!s)return;let c=this._languageFeaturesService.documentDropEditProvider.ordered(s).filter(e=>e.dropMimeTypes?e.dropMimeTypes.some(e=>r.matches(e)):!0),l=a.add(await this.getDropEdits(c,s,t,r,o.token));if(o.token.isCancellationRequested)return;if(l.edits.length){let n=this.getInitialActiveEditIndex(s,l.edits),r=e.getOption(43).showDropSelector===`afterDrop`;await this._postDropWidgetManager.applyEditAndShowIfNeeded([T.fromPositions(t)],{activeEditIndex:n,allEdits:l.edits},r,async e=>e,i)}}finally{a.dispose(),VE._currentDropOperation===r&&(VE._currentDropOperation=void 0)}});this._dropProgressManager.showWhile(t,A(928,`Running drop handlers. Click to cancel`),r,{cancel:()=>r.cancel()}),VE._currentDropOperation=r}async getDropEdits(e,t,n,r,i){let a=new I;return{edits:j_(Oh(await $i(Promise.all(e.map(async e=>{try{let o=await e.provideDocumentDropEdits(t,n,r,i);return o&&a.add(o),o?.edits.map(t=>({...t,providerId:e.id}))}catch(e){_d(e)||console.error(e),console.error(e)}})),i)??[]).flat()),dispose:()=>a.dispose()}}getInitialActiveEditIndex(e,t){let n=this._configService.getValue(HE,{resource:e.uri});for(let e of Array.isArray(n)?n:[]){let n=new Mg(e),r=t.findIndex(e=>e.kind&&n.contains(e.kind));if(r>=0)return r}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new kg;let t=Hg(e.dataTransfer);if(this.treeItemsTransfer.hasData(FE.prototype)){let e=this.treeItemsTransfer.getData(FE.prototype);if(Array.isArray(e))for(let n of e){let e=await this._treeViewsDragAndDropService.removeDragOperationTransfer(n.identifier);if(e)for(let[n,r]of e)t.replace(n,r)}}return t}},GE=VE=zE([BE(1,U),BE(2,xl),BE(3,V),BE(4,LE)],GE)})),qE=t((()=>{v(),oe(),g_(),KE(),k(GE.ID,GE,2),hl(m_),E(new class extends dn{constructor(){super({id:UE,precondition:WE,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t,n){GE.get(t)?.changeDropType()}}),E(new class extends dn{constructor(){super({id:`editor.hideDropWidget`,precondition:WE,kbOpts:{weight:100,primary:9}})}runEditorCommand(e,t,n){GE.get(t)?.clearWidgets()}})})),JE,YE=t((()=>{_(),zf(),md(),Ei(),Yf(),JE=class e{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){let e=this._findScopeDecorationIds.map(e=>this._editor.getModel().getDecorationRange(e)).filter(e=>!!e);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){let t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){let t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(t){let n=this._editor.getModel().getDecorationsInRange(t);for(let t of n){let n=t.options;if(n===e._FIND_MATCH_DECORATION||n===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(t.id)}return 0}setCurrentFindMatch(t){let n=null,r=0;if(t)for(let e=0,i=this._decorations.length;e<i;e++){let i=this._editor.getModel().getDecorationRange(this._decorations[e]);if(t.equalsRange(i)){n=this._decorations[e],r=e+1;break}}return(this._highlightedDecorationId!==null||n!==null)&&this._editor.changeDecorations(t=>{if(this._highlightedDecorationId!==null&&(t.changeDecorationOptions(this._highlightedDecorationId,e._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),n!==null&&(this._highlightedDecorationId=n,t.changeDecorationOptions(this._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(t.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),n!==null){let r=this._editor.getModel().getDecorationRange(n);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){let e=r.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);r=new T(r.startLineNumber,r.startColumn,e,t)}this._rangeHighlightDecorationId=t.addDecoration(r,e._RANGE_HIGHLIGHT_DECORATION)}}),r}set(t,n){this._editor.changeDecorations(r=>{let i=e._FIND_MATCH_DECORATION,a=[];if(t.length>1e3){i=e._FIND_MATCH_NO_OVERVIEW_DECORATION;let n=this._editor.getModel().getLineCount(),r=this._editor.getLayoutInfo().height/n,o=Math.max(2,Math.ceil(3/r)),s=t[0].range.startLineNumber,c=t[0].range.endLineNumber;for(let n=1,r=t.length;n<r;n++){let r=t[n].range;c+o>=r.startLineNumber?r.endLineNumber>c&&(c=r.endLineNumber):(a.push({range:new T(s,1,c,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),s=r.startLineNumber,c=r.endLineNumber)}a.push({range:new T(s,1,c,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let o=Array(t.length);for(let e=0,n=t.length;e<n;e++)o[e]={range:t[e].range,options:i};this._decorations=r.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=r.deltaDecorations(this._overviewRulerApproximateDecorations,a),this._rangeHighlightDecorationId&&=(r.removeDecoration(this._rangeHighlightDecorationId),null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(e=>r.removeDecoration(e)),this._findScopeDecorationIds=[]),n?.length&&(this._findScopeDecorationIds=n.map(t=>r.addDecoration(t,e._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],r=this._editor.getModel().getDecorationRange(n);if(!(!r||r.endLineNumber>e.lineNumber)&&(r.endLineNumber<e.lineNumber||!(r.endColumn>e.column)))return r}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let n=this._decorations[t],r=this._editor.getModel().getDecorationRange(n);if(!(!r||r.startLineNumber<e.lineNumber)&&(r.startLineNumber>e.lineNumber||!(r.startColumn<e.column)))return r}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}static#e=this._CURRENT_FIND_MATCH_DECORATION=L.register({description:`current-find-match`,stickiness:1,zIndex:13,className:`currentFindMatch`,inlineClassName:`currentFindMatchInline`,showIfCollapsed:!0,overviewRuler:{color:hs(Om),position:Rl.Center},minimap:{color:hs(_r),position:1}});static#t=this._FIND_MATCH_DECORATION=L.register({description:`find-match`,stickiness:1,zIndex:10,className:`findMatch`,inlineClassName:`findMatchInline`,showIfCollapsed:!0,overviewRuler:{color:hs(Om),position:Rl.Center},minimap:{color:hs(_r),position:1}});static#n=this._FIND_MATCH_NO_OVERVIEW_DECORATION=L.register({description:`find-match-no-overview`,stickiness:1,className:`findMatch`,showIfCollapsed:!0});static#r=this._FIND_MATCH_ONLY_OVERVIEW_DECORATION=L.register({description:`find-match-only-overview`,stickiness:1,overviewRuler:{color:hs(Om),position:Rl.Center}});static#i=this._RANGE_HIGHLIGHT_DECORATION=L.register({description:`find-range-highlight`,stickiness:1,className:`rangeHighlight`,isWholeLine:!0});static#a=this._FIND_SCOPE_DECORATION=L.register({description:`find-scope`,className:`findScope`,isWholeLine:!0})}})),XE,ZE=t((()=>{_(),XE=class{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let e=[];for(let t=0;t<this._ranges.length;t++)e.push({range:this._ranges[t],text:this._replaceStrings[t]});e.sort((e,t)=>T.compareRangesUsingStarts(e.range,t.range));let n=[],r=e[0];for(let t=1;t<e.length;t++)r.range.endLineNumber===e[t].range.startLineNumber&&r.range.endColumn===e[t].range.startColumn?(r.range=r.range.plusRange(e[t].range),r.text+=e[t].text):(n.push(r),r=e[t]);n.push(r);for(let e of n)t.addEditOperation(e.range,e.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}}));function QE(e,t){if(e&&e[0]!==``){let n=$E(e,t,`-`),r=$E(e,t,`_`);return n&&!r?eD(e,t,`-`):!n&&r?eD(e,t,`_`):e[0].toUpperCase()===e[0]?t.toUpperCase():e[0].toLowerCase()===e[0]?t.toLowerCase():bc(e[0][0])&&t.length>0?t[0].toUpperCase()+t.substr(1):e[0][0].toUpperCase()!==e[0][0]&&t.length>0?t[0].toLowerCase()+t.substr(1):t}else return t}function $E(e,t,n){return e[0].indexOf(n)!==-1&&t.indexOf(n)!==-1&&e[0].split(n).length===t.split(n).length}function eD(e,t,n){let r=t.split(n),i=e[0].split(n),a=``;return r.forEach((e,t)=>{a+=QE([i[t]],e)+n}),a.slice(0,-1)}var tD=t((()=>{Ga()}));function nD(e){if(!e||e.length===0)return new aD(null);let t=[],n=new sD(e);for(let r=0,i=e.length;r<i;r++){let a=e.charCodeAt(r);if(a===92){if(r++,r>=i)break;let a=e.charCodeAt(r);switch(a){case 92:n.emitUnchanged(r-1),n.emitStatic(`\\`,r+1);break;case 110:n.emitUnchanged(r-1),n.emitStatic(`
`,r+1);break;case 116:n.emitUnchanged(r-1),n.emitStatic(`	`,r+1);break;case 117:case 85:case 108:case 76:n.emitUnchanged(r-1),n.emitStatic(``,r+1),t.push(String.fromCharCode(a));break}continue}if(a===36){if(r++,r>=i)break;let a=e.charCodeAt(r);if(a===36){n.emitUnchanged(r-1),n.emitStatic(`$`,r+1);continue}if(a===48||a===38){n.emitUnchanged(r-1),n.emitMatchIndex(0,r+1,t),t.length=0;continue}if(49<=a&&a<=57){let o=a-48;if(r+1<i){let i=e.charCodeAt(r+1);if(48<=i&&i<=57){r++,o=o*10+(i-48),n.emitUnchanged(r-2),n.emitMatchIndex(o,r+1,t),t.length=0;continue}}n.emitUnchanged(r-1),n.emitMatchIndex(o,r+1,t),t.length=0;continue}}}return n.finalize()}var rD,iD,aD,oD,sD,cD=t((()=>{tD(),rD=class{constructor(e){this.staticValue=e,this.kind=0}},iD=class{constructor(e){this.pieces=e,this.kind=1}},aD=class e{static fromStaticValue(t){return new e([oD.staticValue(t)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new rD(``):e.length===1&&e[0].staticValue!==null?this._state=new rD(e[0].staticValue):this._state=new iD(e)}buildReplaceString(t,n){if(this._state.kind===0)return n?QE(t,this._state.staticValue):this._state.staticValue;let r=``;for(let n=0,i=this._state.pieces.length;n<i;n++){let i=this._state.pieces[n];if(i.staticValue!==null){r+=i.staticValue;continue}let a=e._substitute(i.matchIndex,t);if(i.caseOps!==null&&i.caseOps.length>0){let e=[],t=i.caseOps.length,n=0;for(let r=0,o=a.length;r<o;r++){if(n>=t){e.push(a.slice(r));break}switch(i.caseOps[n]){case`U`:e.push(a[r].toUpperCase());break;case`u`:e.push(a[r].toUpperCase()),n++;break;case`L`:e.push(a[r].toLowerCase());break;case`l`:e.push(a[r].toLowerCase()),n++;break;default:e.push(a[r])}}a=e.join(``)}r+=a}return r}static _substitute(e,t){if(t===null)return``;if(e===0)return t[0];let n=``;for(;e>0;){if(e<t.length)return(t[e]||``)+n;n=String(e%10)+n,e=Math.floor(e/10)}return`$`+n}},oD=class e{static staticValue(t){return new e(t,-1,null)}static caseOps(t,n){return new e(null,t,n)}constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}},sD=class{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=``}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=oD.staticValue(this._currentStaticPiece),this._currentStaticPiece=``),this._result[this._resultLen++]=oD.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=oD.staticValue(this._currentStaticPiece),this._currentStaticPiece=``),new aD(this._result)}}})),lD,uD,dD,fD,pD,mD,hD,gD,_D,vD,yD,bD,xD=t((()=>{Co(),O(),q(),Xr(),Su(),_(),ze(),Fs(),YE(),ZE(),cD(),C(),lD=new De(`findWidgetVisible`,!1),lD.toNegated(),uD=new De(`findInputFocussed`,!1),dD=new De(`replaceInputFocussed`,!1),fD={primary:545,mac:{primary:2593}},pD={primary:565,mac:{primary:2613}},mD={primary:560,mac:{primary:2608}},hD={primary:554,mac:{primary:2602}},gD={primary:558,mac:{primary:2606}},_D={StartFindAction:`actions.find`,StartFindWithSelection:`actions.findWithSelection`,StartFindWithArgs:`editor.actions.findWithArgs`,NextMatchFindAction:`editor.action.nextMatchFindAction`,PreviousMatchFindAction:`editor.action.previousMatchFindAction`,GoToMatchFindAction:`editor.action.goToMatchFindAction`,NextSelectionMatchFindAction:`editor.action.nextSelectionMatchFindAction`,PreviousSelectionMatchFindAction:`editor.action.previousSelectionMatchFindAction`,StartFindReplaceAction:`editor.action.startFindReplaceAction`,CloseFindWidgetCommand:`closeFindWidget`,ToggleCaseSensitiveCommand:`toggleFindCaseSensitive`,ToggleWholeWordCommand:`toggleFindWholeWord`,ToggleRegexCommand:`toggleFindRegex`,ToggleSearchScopeCommand:`toggleFindInSelection`,TogglePreserveCaseCommand:`togglePreserveCase`,ReplaceOneAction:`editor.action.replaceOne`,ReplaceAllAction:`editor.action.replaceAll`,SelectAllMatchesAction:`editor.action.selectAllMatches`},vD=19999,yD=240,bD=class e{constructor(e,t){this._toDispose=new I,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new fr,this._decorations=new JE(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new rn(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(e=>{(e.reason===3||e.reason===5||e.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,hm(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},yD)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;t===void 0?n=this._decorations.getFindScopes():t!==null&&(n=Array.isArray(t)?t:[t]),n!==null&&(n=n.map(e=>{if(e.startLineNumber!==e.endLineNumber){let t=e.endLineNumber;return e.endColumn===1&&--t,new T(e.startLineNumber,1,t,this._editor.getModel().getLineMaxColumn(t))}return e}));let r=this._findMatches(n,!1,vD);this._decorations.set(r,n);let i=this._editor.getSelection(),a=this._decorations.getCurrentMatchesPosition(i);if(a===0&&r.length>0){let e=Ln(r.map(e=>e.range),e=>T.compareRangesUsingStarts(e,i)>=0);a=e>0?e-1+1:a}this._state.changeMatchInfo(a,this._decorations.getCount(),void 0),e&&this._editor.getOption(50).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf(`^`)>=0||this._state.searchString.indexOf(`$`)>=0),{lineNumber:n,column:r}=e,i=this._editor.getModel();return t||r===1?(n===1?n=i.getLineCount():n--,r=i.getLineMaxColumn(n)):r--,new H(n,r)}_moveToPrevMatch(t,n=!1){if(!this._state.canNavigateBack()){let e=this._decorations.matchAfterPosition(t);e&&this._setCurrentFindMatch(e);return}if(this._decorations.getCount()<19999){let e=this._decorations.matchBeforePosition(t);e&&e.isEmpty()&&e.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),e=this._decorations.matchBeforePosition(t)),e&&this._setCurrentFindMatch(e);return}if(this._cannotFind())return;let r=this._decorations.getFindScope(),i=e._getSearchRange(this._editor.getModel(),r);i.getEndPosition().isBefore(t)&&(t=i.getEndPosition()),t.isBefore(i.getStartPosition())&&(t=i.getEndPosition());let{lineNumber:a,column:o}=t,s=this._editor.getModel(),c=new H(a,o),l=s.findPreviousMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(147):null,!1);if(l&&l.range.isEmpty()&&l.range.getStartPosition().equals(c)&&(c=this._prevSearchPosition(c),l=s.findPreviousMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(147):null,!1)),l){if(!n&&!i.containsRange(l.range))return this._moveToPrevMatch(l.range.getStartPosition(),!0);this._setCurrentFindMatch(l.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf(`^`)>=0||this._state.searchString.indexOf(`$`)>=0),{lineNumber:n,column:r}=e,i=this._editor.getModel();return t||r===i.getLineMaxColumn(n)?(n===i.getLineCount()?n=1:n++,r=1):r++,new H(n,r)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){let t=this._decorations.matchBeforePosition(e);t&&this._setCurrentFindMatch(t);return}if(this._decorations.getCount()<19999){let t=this._decorations.matchAfterPosition(e);t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),t&&this._setCurrentFindMatch(t);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(t,n,r,i=!1){if(this._cannotFind())return null;let a=this._decorations.getFindScope(),o=e._getSearchRange(this._editor.getModel(),a);o.getEndPosition().isBefore(t)&&(t=o.getStartPosition()),t.isBefore(o.getStartPosition())&&(t=o.getStartPosition());let{lineNumber:s,column:c}=t,l=this._editor.getModel(),u=new H(s,c),d=l.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(147):null,n);return r&&d&&d.range.isEmpty()&&d.range.getStartPosition().equals(u)&&(u=this._nextSearchPosition(u),d=l.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(147):null,n)),d?!i&&!o.containsRange(d.range)?this._getNextMatch(d.range.getEndPosition(),n,r,!0):d:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){let t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?nD(this._state.replaceString):aD.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let r=e.buildReplaceString(n.matches,this._state.preserveCase),i=new fd(t,r);this._executeEditorCommand(`replace`,i),this._decorations.setStartPosition(new H(t.startLineNumber,t.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(t,n,r){let i=(t||[null]).map(t=>e._getSearchRange(this._editor.getModel(),t));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(147):null,n,r)}replaceAll(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=19999?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){let e=new Bl(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(147):null).parseSearchRequest();if(!e)return;let t=e.regex;if(!t.multiline){let e=`mu`;t.ignoreCase&&(e+=`i`),t.global&&(e+=`g`),t=new RegExp(t.source,e)}let n=this._editor.getModel(),r=n.getValue(1),i=n.getFullModelRange(),a=this._getReplacePattern(),o,s=this._state.preserveCase;o=a.hasReplacementPatterns||s?r.replace(t,function(){return a.buildReplaceString(arguments,s)}):r.replace(t,a.buildReplaceString(null,s));let c=new Ce(i,o,this._editor.getSelection());this._executeEditorCommand(`replaceAll`,c)}_regularReplaceAll(e){let t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(let e=0,i=n.length;e<i;e++)r[e]=t.buildReplaceString(n[e].matches,this._state.preserveCase);let i=new XE(this._editor.getSelection(),n.map(e=>e.range),r);this._executeEditorCommand(`replaceAll`,i)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map(e=>new X(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)),n=this._editor.getSelection();for(let e=0,r=t.length;e<r;e++)if(t[e].equalsRange(n)){t=[n].concat(t.slice(0,e),t.slice(e+1));break}this._editor.setSelections(t)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}})),SD=t((()=>{})),CD,wD=t((()=>{y(),SD(),qt(),rl(),O(),xD(),Ei(),ri(),CD=class e extends sm{static#e=this.ID=`editor.contrib.findOptionsWidget`;constructor(e,t,n){super(),this._hideSoon=this._register(new rn(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement(`div`),this._domNode.className=`findOptionsWidget`,this._domNode.style.display=`none`,this._domNode.style.top=`10px`,this._domNode.style.zIndex=`12`,this._domNode.setAttribute(`role`,`presentation`),this._domNode.setAttribute(`aria-hidden`,`true`);let r={inputActiveOptionBorder:ji(Le),inputActiveOptionForeground:ji(Eo),inputActiveOptionBackground:ji(Ah)},i=this._register(Vu());this.caseSensitive=this._register(new Yr({appendTitle:this._keybindingLabelFor(_D.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:i,...r})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Ui({appendTitle:this._keybindingLabelFor(_D.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:i,...r})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new di({appendTitle:this._keybindingLabelFor(_D.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:i,...r})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(e=>{let t=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,t=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,t=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,t=!0),!this._state.isRevealed&&t&&this._revealTemporarily()})),this._register(ch(this._domNode,Ul.MOUSE_LEAVE,e=>this._onMouseLeave())),this._register(ch(this._domNode,`mouseover`,e=>this._onMouseOver()))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:``}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return e.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display=`block`)}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display=`none`)}}}));function TD(e,t){return e===1?!0:e===2?!1:t}var ED,DD=t((()=>{N(),q(),_(),xD(),ED=class extends z{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return TD(this._isRegexOverride,this._isRegex)}get wholeWord(){return TD(this._wholeWordOverride,this._wholeWord)}get matchCase(){return TD(this._matchCaseOverride,this._matchCase)}get preserveCase(){return TD(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new j),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString=``,this._replaceString=``,this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,n){let r={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},i=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,r.matchesPosition=!0,i=!0),this._matchesCount!==t&&(this._matchesCount=t,r.matchesCount=!0,i=!0),n!==void 0&&(T.equalsRange(this._currentMatch,n)||(this._currentMatch=n,r.currentMatch=!0,i=!0)),i&&this._onFindReplaceStateChange.fire(r)}change(e,t,n=!0){let r={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},i=!1,a=this.isRegex,o=this.wholeWord,s=this.matchCase,c=this.preserveCase;e.searchString!==void 0&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,i=!0),e.replaceString!==void 0&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,i=!0),e.isRevealed!==void 0&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,i=!0),e.isReplaceRevealed!==void 0&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,i=!0),e.isRegex!==void 0&&(this._isRegex=e.isRegex),e.wholeWord!==void 0&&(this._wholeWord=e.wholeWord),e.matchCase!==void 0&&(this._matchCase=e.matchCase),e.preserveCase!==void 0&&(this._preserveCase=e.preserveCase),e.searchScope!==void 0&&(e.searchScope?.every(e=>this._searchScope?.some(t=>!T.equalsRange(t,e)))||(this._searchScope=e.searchScope,r.searchScope=!0,i=!0)),e.loop!==void 0&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,i=!0),e.isSearching!==void 0&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,r.isSearching=!0,i=!0),e.filters!==void 0&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,r.filters=!0,i=!0),this._isRegexOverride=e.isRegexOverride===void 0?0:e.isRegexOverride,this._wholeWordOverride=e.wholeWordOverride===void 0?0:e.wholeWordOverride,this._matchCaseOverride=e.matchCaseOverride===void 0?0:e.matchCaseOverride,this._preserveCaseOverride=e.preserveCaseOverride===void 0?0:e.preserveCaseOverride,a!==this.isRegex&&(i=!0,r.isRegex=!0),o!==this.wholeWord&&(i=!0,r.wholeWord=!0),s!==this.matchCase&&(i=!0,r.matchCase=!0),c!==this.preserveCase&&(i=!0,r.preserveCase=!0),i&&this._onFindReplaceStateChange.fire(r)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=19999}}})),OD=t((()=>{})),kD,AD,jD,MD,ND=t((()=>{y(),Nr(),Yu(),rl(),Kn(),N(),dd(),P(),ri(),kD=A(5,`input`),AD=A(6,`Preserve Case`),jD=class extends Vn{constructor(e){super({icon:B.preserveCase,title:AD+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Vr(`element`),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},MD=class extends sm{get onDidOptionChange(){return this._onDidOptionChange.event}get onKeyDown(){return this._onKeyDown.event}get onPreserveCaseKeyDown(){return this._onPreserveCaseKeyDown.event}constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new j),this._onKeyDown=this._register(new j),this._onMouseDown=this._register(new j),this._onInput=this._register(new j),this._onKeyUp=this._register(new j),this._onPreserveCaseKeyDown=this._register(new j),this.contextViewProvider=t,this.placeholder=r.placeholder||``,this.validation=r.validation,this.label=r.label||kD;let i=r.appendPreserveCaseLabel||``,a=r.history||new Set([]),o=!!r.flexibleHeight,s=!!r.flexibleWidth,c=r.flexibleMaxHeight;this.domNode=document.createElement(`div`),this.domNode.classList.add(`monaco-findInput`),this.inputBox=this._register(new Se(this.domNode,this.contextViewProvider,{ariaLabel:this.label||``,placeholder:this.placeholder||``,validationOptions:{validation:this.validation},history:a,showHistoryHint:r.showHistoryHint,flexibleHeight:o,flexibleWidth:s,flexibleMaxHeight:c,inputBoxStyles:r.inputBoxStyles})),this.preserveCase=this._register(new jD({appendTitle:i,isChecked:!1,...r.toggleStyles})),this._register(this.preserveCase.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(e=>{this._onPreserveCaseKeyDown.fire(e)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let l=[this.preserveCase.domNode];this.onkeydown(this.domNode,e=>{if(e.equals(15)||e.equals(17)||e.equals(9)){let t=l.indexOf(this.domNode.ownerDocument.activeElement);if(t>=0){let n=-1;e.equals(17)?n=(t+1)%l.length:e.equals(15)&&(n=t===0?l.length-1:t-1),e.equals(9)?(l[t].blur(),this.inputBox.focus()):n>=0&&l[n].focus(),au.stop(e,!0)}}});let u=document.createElement(`div`);u.className=`controls`,u.style.display=this._showOptionButtons?`block`:`none`,u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,e=>this._onKeyDown.fire(e)),this.onkeyup(this.inputBox.inputElement,e=>this._onKeyUp.fire(e)),this.oninput(this.inputBox.inputElement,e=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,e=>this._onMouseDown.fire(e))}enable(){this.domNode.classList.remove(`disabled`),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add(`disabled`),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox?.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+`px`}dispose(){super.dispose()}}}));function PD(e,t){if(HD.includes(t))throw Error(`Cannot register the same widget multiple times`);HD.push(t);let n=new I,r=new De(RD,!1).bindTo(e),i=new De(zD,!0).bindTo(e),a=new De(BD,!0).bindTo(e),o=()=>{r.set(!0),VD=t},s=()=>{r.set(!1),VD===t&&(VD=void 0)};return ua(t.element)&&o(),n.add(t.onDidFocus(()=>o())),n.add(t.onDidBlur(()=>s())),n.add(qm(()=>{HD.splice(HD.indexOf(t),1),s()})),{historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:a,dispose(){n.dispose()}}}var FD,ID,LD,RD,zD,BD,VD,HD,UD,WD,GD=t((()=>{Di(),ND(),C(),Mi(),P(),q(),y(),FD=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ID=function(e,t){return function(n,r){t(n,r,e)}},LD=new De(`suggestWidgetVisible`,!1,A(1681,`Whether suggestion are visible`)),RD=`historyNavigationWidgetFocus`,zD=`historyNavigationForwardsEnabled`,BD=`historyNavigationBackwardsEnabled`,VD=void 0,HD=[],UD=class extends gt{constructor(e,t,n,r){super(e,t,n);let i=this._register(r.createScoped(this.inputBox.element));this._register(PD(i,this.inputBox))}},UD=FD([ID(3,bh)],UD),WD=class extends MD{constructor(e,t,n,r,i=!1){super(e,t,i,n);let a=this._register(r.createScoped(this.inputBox.element));this._register(PD(a,this.inputBox))}},WD=FD([ID(3,bh)],WD),ei.registerCommandAndKeybindingRule({id:`history.showPrevious`,weight:200,when:b.and(b.has(RD),b.equals(BD,!0),b.not(`isComposing`),LD.isEqualTo(!1)),primary:16,secondary:[528],handler:e=>{VD?.showPreviousValue()}}),ei.registerCommandAndKeybindingRule({id:`history.showNext`,weight:200,when:b.and(b.has(RD),b.equals(zD,!0),b.not(`isComposing`),LD.isEqualTo(!1)),primary:18,secondary:[530],handler:e=>{VD?.showNextValue()}})}));function KD(e){return e.lookupKeybinding(`history.showPrevious`)?.getElectronAccelerator()===`Up`&&e.lookupKeybinding(`history.showNext`)?.getElectronAccelerator()===`Down`}var qD=t((()=>{}));function JD(e,t,n){let r=!!t.match(/\n/);if(n&&r&&n.selectionStart>0){e.stopPropagation();return}}function YD(e,t,n){let r=!!t.match(/\n/);if(n&&r&&n.selectionEnd<n.value.length){e.stopPropagation();return}}var XD,ZD,QD,$D,eO,tO,nO,rO,iO,aO,oO,sO,cO,lO,uO,dO,fO,pO,mO,hO,gO,_O,vO,yO,bO,xO,SO,CO,wO,TO,EO=t((()=>{y(),qc(),Nr(),eh(),rl(),O(),Kn(),M(),q(),Rt(),Ga(),OD(),_(),xD(),P(),GD(),qD(),Ei(),Ie(),Yf(),sr(),qs(),lr(),If(),ri(),XD=To(`find-collapsed`,B.chevronRight,A(948,`Icon to indicate that the editor find widget is collapsed.`)),ZD=To(`find-expanded`,B.chevronDown,A(949,`Icon to indicate that the editor find widget is expanded.`)),QD=To(`find-selection`,B.selection,A(950,`Icon for 'Find in Selection' in the editor find widget.`)),$D=To(`find-replace`,B.replace,A(951,`Icon for 'Replace' in the editor find widget.`)),eO=To(`find-replace-all`,B.replaceAll,A(952,`Icon for 'Replace All' in the editor find widget.`)),tO=To(`find-previous-match`,B.arrowUp,A(953,`Icon for 'Find Previous' in the editor find widget.`)),nO=To(`find-next-match`,B.arrowDown,A(954,`Icon for 'Find Next' in the editor find widget.`)),rO=A(955,`Find / Replace`),iO=A(956,`Find`),aO=A(957,`Find`),oO=A(958,`Previous Match`),sO=A(959,`Next Match`),cO=A(960,`Find in Selection`),lO=A(961,`Close`),uO=A(962,`Replace`),dO=A(963,`Replace`),fO=A(964,`Replace`),pO=A(965,`Replace All`),mO=A(966,`Toggle Replace`),hO=A(967,`Only the first {0} results are highlighted, but all find operations work on the entire text.`,vD),gO=A(968,`{0} of {1}`),_O=A(969,`No results`),vO=419,yO=221,bO=69,xO=33,SO=Sh?256:2048,CO=class{constructor(e){this.afterLineNumber=e,this.heightInPx=xO,this.suppressMouseDown=!1,this.domNode=document.createElement(`div`),this.domNode.className=`dock-find-viewzone`}},wO=class e extends sm{static#e=this.ID=`editor.contrib.findWidget`;constructor(e,t,n,r,i,a,o,s,c){super(),this._hoverService=o,this._findWidgetSearchHistory=s,this._replaceWidgetHistory=c,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=r,this._keybindingService=i,this._contextKeyService=a,this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Io(500),this._register(qm(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(e=>{if(e.hasChanged(103)&&(this._codeEditor.getOption(103)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(164)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(50)){let e=this._codeEditor.getOption(50).loop;this._state.change({loop:e},!1);let t=this._codeEditor.getOption(50).addExtraSpaceOnTop;t&&!this._viewZone&&(this._viewZone=new CO(0),this._showViewZone()),!t&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){let e=await this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}})),this._findInputFocused=uD.bindTo(a),this._findFocusTracker=this._register(qn(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=dD.bindTo(a),this._replaceFocusTracker=this._register(qn(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(50).addExtraSpaceOnTop&&(this._viewZone=new CO(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(e=>{if(e.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return e.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(103)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=ti(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let e=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle(`no-results`,e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,$p)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=bO+`px`,this._state.matchesCount>=19999?this._matchesCount.title=hO:this._matchesCount.title=``,this._matchesCount.firstChild?.remove();let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=19999&&(t+=`+`);let n=String(this._state.matchesPosition);n===`0`&&(n=`?`),e=Je(gO,n,t)}else e=_O;this._matchesCount.appendChild(document.createTextNode(e)),Qp(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),bO=Math.max(bO,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===_O)return n===``?A(970,`{0} found`,e):A(971,`{0} found for '{1}'`,e,n);if(t){let r=A(972,`{0} found for '{1}', at {2}`,e,n,t.startLineNumber+`:`+t.startColumn),i=this._codeEditor.getModel();return i&&t.startLineNumber<=i.getLineCount()&&t.startLineNumber>=1?`${i.getLineContent(t.startLineNumber)}, ${r}`:r}return A(973,`{0} found for '{1}'`,e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle(`replaceToggled`,this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(103);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;let e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(50).autoFindInSelection){case`always`:this._toggleSelectionFind.checked=!0;break;case`never`:this._toggleSelectionFind.checked=!1;break;case`multiline`:{let t=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=t;break}default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add(`visible`),this._domNode.setAttribute(`aria-hidden`,`false`)},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(50).seedSearchStringFromSelection&&e){let n=this._codeEditor.getDomNode();if(n){let r=td(n),i=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),a=r.left+(i?i.left:0),o=i?i.top:0;if(this._viewZone&&o<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);let n=zu(this._domNode).left;a>n&&(t=!1);let i=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());r.left+(i?i.left:0)>n&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove(`visible`),this._domNode.setAttribute(`aria-hidden`,`true`),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(50).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;let t=this._viewZone;this._viewZoneId!==void 0||!t||this._codeEditor.changeViewZones(n=>{t.heightInPx=this._getHeight(),this._viewZoneId=n.addZone(t),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+t.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(50).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new CO(0));let t=this._viewZone;this._codeEditor.changeViewZones(n=>{if(this._viewZoneId!==void 0){let r=this._getHeight();if(r===t.heightInPx)return;let i=r-t.heightInPx;t.heightInPx=r,n.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+i);return}else{let r=this._getHeight();if(r-=this._codeEditor.getOption(95).top,r<=0)return;t.heightInPx=r,this._viewZoneId=n.addZone(t),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&=(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;let e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add(`hiddenEditor`);return}else this._domNode.classList.contains(`hiddenEditor`)&&this._domNode.classList.remove(`hiddenEditor`);let t=e.width,n=e.minimap.minimapWidth,r=!1,i=!1,a=!1;if(this._resized&&ti(this._domNode)>vO){this._domNode.style.maxWidth=`${t-28-n-15}px`,this._replaceInput.width=ti(this._findInput.domNode);return}if(vO+28+n>=t&&(i=!0),vO+28+n-bO>=t&&(a=!0),vO+28+n-bO>=t+50&&(r=!0),this._domNode.classList.toggle(`collapsed-find-widget`,r),this._domNode.classList.toggle(`narrow-find-widget`,a),this._domNode.classList.toggle(`reduced-find-widget`,i),!a&&!r&&(this._domNode.style.maxWidth=`${t-28-n-15}px`),this._findInput.layout({collapsedFindWidget:r,narrowFindWidget:a,reducedFindWidget:i}),this._resized){let e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=ti(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){let e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(e=>{e.endColumn===1&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));let t=this._state.currentMatch;return e.startLineNumber!==e.endLineNumber&&!T.equalsRange(e,t)?e:null}).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(SO|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return JD(e,this._findInput.getValue(),this._findInput.domNode.querySelector(`textarea`));if(e.equals(18))return YD(e,this._findInput.getValue(),this._findInput.domNode.querySelector(`textarea`))}_onReplaceInputKeyDown(e){if(e.equals(SO|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return JD(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector(`textarea`));if(e.equals(18))return YD(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector(`textarea`))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:``}_buildDomNode(){let e=this._codeEditor.getOption(50).history,t=this._codeEditor.getOption(50).replaceHistory;this._findInput=this._register(new UD(null,this._contextViewProvider,{width:yO,label:iO,placeholder:aO,appendCaseSensitiveLabel:this._keybindingLabelFor(_D.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(_D.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(_D.ToggleRegexCommand),validation:e=>{if(e.length===0||!this._findInput.getRegex())return null;try{return new RegExp(e,`gu`),null}catch(e){return{content:e.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>KD(this._keybindingService),inputBoxStyles:zc,toggleStyles:nl,history:e===`workspace`?this._findWidgetSearchHistory:new Set([])},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(e=>{e.equals(3)&&!this._codeEditor.getOption(50).findOnType&&this._state.change({searchString:this._findInput.getValue()},!0),this._onFindInputKeyDown(e)})),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||!this._codeEditor.getOption(50).findOnType||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())})),this._register(this._findInput.onRegexKeyDown(e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(e=>{this._tryUpdateHeight()&&this._showViewZone()})),wr&&this._register(this._findInput.onMouseDown(e=>this._onFindInputMouseDown(e))),this._matchesCount=document.createElement(`div`),this._matchesCount.className=`matchesCount`,this._updateMatchesCount();let n=this._register(Vu());this._prevBtn=this._register(new TO({label:oO+this._keybindingLabelFor(_D.PreviousMatchFindAction),icon:tO,hoverDelegate:n,onTrigger:()=>{No(this._codeEditor.getAction(_D.PreviousMatchFindAction)).run().then(void 0,$p)}},this._hoverService)),this._nextBtn=this._register(new TO({label:sO+this._keybindingLabelFor(_D.NextMatchFindAction),icon:nO,hoverDelegate:n,onTrigger:()=>{No(this._codeEditor.getAction(_D.NextMatchFindAction)).run().then(void 0,$p)}},this._hoverService));let r=document.createElement(`div`);r.className=`find-part`,r.appendChild(this._findInput.domNode);let i=document.createElement(`div`);i.className=`find-actions`,r.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Vn({icon:QD,title:cO+this._keybindingLabelFor(_D.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:n,inputActiveOptionBackground:ji(Ah),inputActiveOptionBorder:ji(Le),inputActiveOptionForeground:ji(Eo)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let e=this._codeEditor.getSelections();e=e.map(e=>(e.endColumn===1&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new TO({label:lO+this._keybindingLabelFor(_D.CloseFindWidgetCommand),icon:wn,hoverDelegate:n,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new WD(null,void 0,{label:uO,placeholder:dO,appendPreserveCaseLabel:this._keybindingLabelFor(_D.TogglePreserveCaseCommand),history:t===`workspace`?this._replaceWidgetHistory:new Set([]),flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>KD(this._keybindingService),inputBoxStyles:zc,toggleStyles:nl},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(e=>this._onReplaceInputKeyDown(e))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())}));let a=this._register(Vu());this._replaceBtn=this._register(new TO({label:fO+this._keybindingLabelFor(_D.ReplaceOneAction),icon:$D,hoverDelegate:a,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new TO({label:pO+this._keybindingLabelFor(_D.ReplaceAllAction),icon:eO,hoverDelegate:a,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));let o=document.createElement(`div`);o.className=`replace-part`,o.appendChild(this._replaceInput.domNode);let s=document.createElement(`div`);s.className=`replace-actions`,o.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new TO({label:mO,className:`codicon toggle left`,onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=ti(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement(`div`),this._domNode.className=`editor-widget find-widget`,this._domNode.setAttribute(`aria-hidden`,`true`),this._domNode.ariaLabel=rO,this._domNode.role=`dialog`,this._domNode.style.width=`${vO}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(r),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(o),this._resizeSash=this._register(new wc(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=vO;this._register(this._resizeSash.onDidStart(()=>{c=ti(this._domNode)})),this._register(this._resizeSash.onDidChange(e=>{this._resized=!0;let t=c+e.startX-e.currentX;t<vO||t>(parseFloat(_i(this._domNode).maxWidth)||0)||(this._domNode.style.width=`${t}px`,this._isReplaceVisible&&(this._replaceInput.width=ti(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{let e=ti(this._domNode);if(e<vO)return;let t=vO;if(!this._resized||e===vO){let e=this._codeEditor.getLayoutInfo();t=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${t}px`,this._isReplaceVisible&&(this._replaceInput.width=ti(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){let e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}getViewState(){let e=!1;return this._viewZone&&this._viewZoneId&&(e=this._viewZone.heightInPx>this._codeEditor.getScrollTop()),{widgetViewZoneVisible:e,scrollTop:this._codeEditor.getScrollTop()}}setViewState(e){e&&e.widgetViewZoneVisible&&this._layoutViewZone(e.scrollTop)}},TO=class extends sm{constructor(e,t){super(),this._opts=e;let n=`button`;this._opts.className&&(n=n+` `+this._opts.className),this._opts.icon&&(n=n+` `+Qt.asClassName(this._opts.icon)),this._domNode=document.createElement(`div`),this._domNode.tabIndex=0,this._domNode.className=n,this._domNode.setAttribute(`role`,`button`),this._domNode.setAttribute(`aria-label`,this._opts.label),this._register(t.setupManagedHover(e.hoverDelegate??Vr(`element`),this._domNode,this._opts.label)),this.onclick(this._domNode,e=>{this._opts.onTrigger(),e.preventDefault()}),this.onkeydown(this._domNode,e=>{if(e.equals(10)||e.equals(3)){this._opts.onTrigger(),e.preventDefault();return}this._opts.onKeyDown?.(e)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle(`disabled`,!e),this._domNode.setAttribute(`aria-disabled`,String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute(`aria-expanded`,String(!!e)),e?(this._domNode.classList.remove(...Qt.asClassNameArray(XD)),this._domNode.classList.add(...Qt.asClassNameArray(ZD))):(this._domNode.classList.remove(...Qt.asClassNameArray(ZD)),this._domNode.classList.add(...Qt.asClassNameArray(XD)))}},$n((e,t)=>{let n=e.getColor(np);n&&t.addRule(`.monaco-editor .findMatch { border: 1px ${hh(e.type)?`dotted`:`solid`} ${n}; box-sizing: border-box; }`);let r=e.getColor(Qs);r&&t.addRule(`.monaco-editor .findScope { border: 1px ${hh(e.type)?`dashed`:`solid`} ${r}; }`);let i=e.getColor(ue);i&&t.addRule(`.monaco-editor .find-widget { border: 1px solid ${i}; }`);let a=e.getColor(Pp);a&&t.addRule(`.monaco-editor .findMatchInline { color: ${a}; }`);let o=e.getColor(bu);o&&t.addRule(`.monaco-editor .currentFindMatchInline { color: ${o}; }`)})})),DO,OO,kO,AO,jO=t((()=>{N(),Zl(),DO=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},OO=function(e,t){return function(n,r){t(n,r,e)}},AO=class{static#e=kO=this;static#t=this.FIND_HISTORY_KEY=`workbench.find.history`;static#n=this._instance=null;static getOrCreate(e){return kO._instance||=new kO(e),kO._instance}constructor(e){this.storageService=e,this.inMemoryValues=new Set,this._onDidChangeEmitter=new j,this.onDidChange=this._onDidChangeEmitter.event,this.load()}delete(e){let t=this.inMemoryValues.delete(e);return this.save(),t}add(e){return this.inMemoryValues.add(e),this.save(),this}has(e){return this.inMemoryValues.has(e)}forEach(e,t){return this.load(),this.inMemoryValues.forEach(e)}replace(e){this.inMemoryValues=new Set(e),this.save()}load(){let e,t=this.storageService.get(kO.FIND_HISTORY_KEY,1);if(t)try{e=JSON.parse(t)}catch{}this.inMemoryValues=new Set(e||[])}save(){let e=[];return this.inMemoryValues.forEach(t=>e.push(t)),new Promise(t=>{this.storageService.store(kO.FIND_HISTORY_KEY,JSON.stringify(e),1,0),this._onDidChangeEmitter.fire(e),t()})}},AO=kO=DO([OO(0,Vd)],AO)})),MO,NO,PO,FO,IO=t((()=>{N(),Zl(),MO=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},NO=function(e,t){return function(n,r){t(n,r,e)}},FO=class{static#e=PO=this;static#t=this.FIND_HISTORY_KEY=`workbench.replace.history`;static#n=this._instance=null;static getOrCreate(e){return PO._instance||=new PO(e),PO._instance}constructor(e){this.storageService=e,this.inMemoryValues=new Set,this._onDidChangeEmitter=new j,this.onDidChange=this._onDidChangeEmitter.event,this.load()}delete(e){let t=this.inMemoryValues.delete(e);return this.save(),t}add(e){return this.inMemoryValues.add(e),this.save(),this}has(e){return this.inMemoryValues.has(e)}forEach(e,t){return this.load(),this.inMemoryValues.forEach(e)}replace(e){this.inMemoryValues=new Set(e),this.save()}load(){let e,t=this.storageService.get(PO.FIND_HISTORY_KEY,1);if(t)try{e=JSON.parse(t)}catch{}this.inMemoryValues=new Set(e||[])}save(){let e=[];return this.inMemoryValues.forEach(t=>e.push(t)),new Promise(t=>{this.storageService.store(PO.FIND_HISTORY_KEY,JSON.stringify(e),1,0),this._onDidChangeEmitter.fire(e),t()})}},FO=PO=MO([NO(0,Vd)],FO)}));function LO(e,t=`single`,n=!1){if(!e.hasModel())return null;let r=e.getSelection();if(t===`single`&&r.startLineNumber===r.endLineNumber||t===`multiple`){if(r.isEmpty()){let t=e.getConfiguredWordAtPosition(r.getStartPosition());if(t&&!1===n)return t.word}else if(e.getModel().getValueLengthInRange(r)<VO)return e.getModel().getValueInRange(r)}return null}var RO,zO,BO,VO,HO,UO,WO,GO,KO,qO,JO,YO,XO,ZO,QO,$O,ek,tk,nk,rk=t((()=>{O(),q(),Ga(),v(),Ro(),yc(),zf(),xD(),wD(),DD(),EO(),P(),de(),qr(),C(),be(),Ki(),up(),xn(),Zl(),Yf(),Os(),jO(),IO(),RO=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},zO=function(e,t){return function(n,r){t(n,r,e)}},VO=524288,HO=class extends z{static#e=BO=this;static#t=this.ID=`editor.contrib.findController`;get editor(){return this._editor}static get(e){return e.getContribution(BO.ID)}constructor(e,t,n,r,i,a){super(),this._editor=e,this._findWidgetVisible=lD.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=r,this._notificationService=i,this._hoverService=a,this._updateHistoryDelayer=new Io(500),this._state=this._register(new ED),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean(`editor.matchCase`,1,!1),wholeWord:this._storageService.getBoolean(`editor.wholeWord`,1,!1),isRegex:this._storageService.getBoolean(`editor.isRegex`,1,!1),preserveCase:this._storageService.getBoolean(`editor.preserveCase`,1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:`none`,seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(50).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&=(this._model.dispose(),null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store(`editor.isRegex`,this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store(`editor.wholeWord`,this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store(`editor.matchCase`,this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store(`editor.preserveCase`,this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean(`editor.matchCase`,1,this._state.matchCase),wholeWord:this._storageService.getBoolean(`editor.wholeWord`,1,this._state.wholeWord),isRegex:this._storageService.getBoolean(`editor.isRegex`,1,this._state.isRegex),preserveCase:this._storageService.getBoolean(`editor.preserveCase`,1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!uD.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(e=>(e.endColumn===1&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Xm(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;let n={...t,isRevealed:!0};if(e.seedSearchStringFromSelection===`single`){let t=LO(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);t&&(this._state.isRegex?n.searchString=Xm(t):n.searchString=t)}else if(e.seedSearchStringFromSelection===`multiple`&&!e.updateSearchScope){let t=LO(this._editor,e.seedSearchStringFromSelection);t&&(n.searchString=t)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let e=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(n.searchString=e)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let e=this._editor.getSelections();e.some(e=>!e.isEmpty())&&(n.searchScope=e)}n.loop=e.loop,this._state.change(n,!1),this._model||=new bD(this._editor,this._state)}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?this._editor.getModel()?.isTooLargeForHeapOperation()?(this._notificationService.warn(A(932,`The file is too large to perform a replace all operation.`)),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(50).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():``}setGlobalBufferTerm(e){this._editor.getOption(50).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},HO=BO=RO([zO(1,bh),zO(2,Vd),zO(3,qu),zO(4,Hp),zO(5,ms)],HO),UO=class extends HO{constructor(e,t,n,r,i,a,o,s){super(e,n,a,o,i,s),this._contextViewService=t,this._keybindingService=r,this._widget=null,this._findOptionsWidget=null,this._findWidgetSearchHistory=AO.getOrCreate(a),this._replaceWidgetHistory=FO.getOrCreate(a)}async _start(e,t){this._widget||this._createFindWidget();let n=this._editor.getSelection(),r=!1;switch(this._editor.getOption(50).autoFindInSelection){case`always`:r=!0;break;case`never`:r=!1;break;case`multiline`:r=!!n&&n.startLineNumber!==n.endLineNumber;break;default:break}e.updateSearchScope=e.updateSearchScope||r,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new wO(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._hoverService,this._findWidgetSearchHistory,this._replaceWidgetHistory)),this._findOptionsWidget=this._register(new CD(this._editor,this._state,this._keybindingService))}saveViewState(){return this._widget?.getViewState()}restoreViewState(e){this._widget?.setViewState(e)}},UO=RO([zO(1,ld),zO(2,bh),zO(3,xs),zO(4,Hp),zO(5,Vd),zO(6,qu),zO(7,ms)],UO),WO=cl(new ep({id:_D.StartFindAction,label:K(939,`Find`),precondition:b.or(J.focus,b.has(`editorIsOpen`)),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:g.MenubarEditMenu,group:`3_find`,title:A(933,`&&Find`),order:1}})),WO.addImplementation(0,(e,t,n)=>{let r=HO.get(t);return r?r.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(50).seedSearchStringFromSelection===`never`?`none`:`single`,seedSearchStringFromNonEmptySelection:t.getOption(50).seedSearchStringFromSelection===`selection`,seedSearchStringFromGlobalClipboard:t.getOption(50).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(50).loop}):!1}),GO={description:`Open a new In-Editor Find Widget.`,args:[{name:`Open a new In-Editor Find Widget args`,schema:{properties:{searchString:{type:`string`},replaceString:{type:`string`},isRegex:{type:`boolean`},matchWholeWord:{type:`boolean`},isCaseSensitive:{type:`boolean`},preserveCase:{type:`boolean`},findInSelection:{type:`boolean`}}}}]},KO=class extends S{constructor(){super({id:_D.StartFindWithArgs,label:K(940,`Find with Arguments`),precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:GO})}async run(e,t,n){let r=HO.get(t);if(r){let e=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};await r.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getState().searchString.length===0&&t.getOption(50).seedSearchStringFromSelection!==`never`?`single`:`none`,seedSearchStringFromNonEmptySelection:t.getOption(50).seedSearchStringFromSelection===`selection`,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:n?.findInSelection||!1,loop:t.getOption(50).loop},e),r.setGlobalBufferTerm(r.getState().searchString)}}},qO=class extends S{constructor(){super({id:_D.StartFindWithSelection,label:K(941,`Find with Selection`),precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){let n=HO.get(t);n&&(await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:`multiple`,seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(50).loop}),n.setGlobalBufferTerm(n.getState().searchString))}},JO=class extends S{async run(e,t){let n=HO.get(t);n&&!this._run(n)&&(await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(50).seedSearchStringFromSelection!==`never`?`single`:`none`,seedSearchStringFromNonEmptySelection:t.getOption(50).seedSearchStringFromSelection===`selection`,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(50).loop}),this._run(n))}},YO=class extends JO{constructor(){super({id:_D.NextMatchFindAction,label:K(942,`Find Next`),precondition:void 0,kbOpts:[{kbExpr:J.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:b.and(J.focus,uD),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}},XO=class extends JO{constructor(){super({id:_D.PreviousMatchFindAction,label:K(943,`Find Previous`),precondition:void 0,kbOpts:[{kbExpr:J.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:b.and(J.focus,uD),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}},ZO=class extends S{constructor(){super({id:_D.GoToMatchFindAction,label:K(944,`Go to Match...`),precondition:lD}),this._highlightDecorations=[]}run(e,t,n){let r=HO.get(t);if(!r)return;let i=r.getState().matchesCount;if(i<1){e.get(Hp).notify({severity:nf.Warning,message:A(934,`No matches. Try searching for something else.`)});return}let a=e.get(Ne),o=new I,s=o.add(a.createInputBox());s.placeholder=A(935,`Type a number to go to a specific match (between 1 and {0})`,i);let c=e=>{let t=parseInt(e);if(isNaN(t))return;let n=r.getState().matchesCount;if(t>0&&t<=n)return t-1;if(t<0&&t>=-n)return n+t},l=e=>{let n=c(e);if(typeof n==`number`){s.validationMessage=void 0,r.goToMatch(n);let e=r.getState().currentMatch;e&&this.addDecorations(t,e)}else s.validationMessage=A(936,`Please type a number between 1 and {0}`,r.getState().matchesCount),this.clearDecorations(t)};o.add(s.onDidChangeValue(e=>{l(e)})),o.add(s.onDidAccept(()=>{let e=c(s.value);typeof e==`number`?(r.goToMatch(e),s.hide()):s.validationMessage=A(937,`Please type a number between 1 and {0}`,r.getState().matchesCount)})),o.add(s.onDidHide(()=>{this.clearDecorations(t),o.dispose()})),s.show()}clearDecorations(e){e.changeDecorations(e=>{this._highlightDecorations=e.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(e=>{this._highlightDecorations=e.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:`find-match-quick-access-range-highlight`,className:`rangeHighlight`,isWholeLine:!0}},{range:t,options:{description:`find-match-quick-access-range-highlight-overview`,overviewRuler:{color:hs(on),position:Rl.Full}}}])})}},QO=class extends S{async run(e,t){let n=HO.get(t);if(!n)return;let r=LO(t,`single`,!1);r&&n.setSearchString(r),this._run(n)||(await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:`none`,seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(50).loop}),this._run(n))}},$O=class extends QO{constructor(){super({id:_D.NextSelectionMatchFindAction,label:K(945,`Find Next Selection`),precondition:void 0,kbOpts:{kbExpr:J.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}},ek=class extends QO{constructor(){super({id:_D.PreviousSelectionMatchFindAction,label:K(946,`Find Previous Selection`),precondition:void 0,kbOpts:{kbExpr:J.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}},tk=cl(new ep({id:_D.StartFindReplaceAction,label:K(947,`Replace`),precondition:b.or(J.focus,b.has(`editorIsOpen`)),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:g.MenubarEditMenu,group:`3_find`,title:A(938,`&&Replace`),order:2}})),tk.addImplementation(0,(e,t,n)=>{if(!t.hasModel()||t.getOption(103))return!1;let r=HO.get(t);if(!r)return!1;let i=t.getSelection(),a=r.isFindInputFocused(),o=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&t.getOption(50).seedSearchStringFromSelection!==`never`&&!a,s=a||o?2:1;return r.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?`single`:`none`,seedSearchStringFromNonEmptySelection:t.getOption(50).seedSearchStringFromSelection===`selection`,seedSearchStringFromGlobalClipboard:t.getOption(50).seedSearchStringFromSelection!==`never`,shouldFocus:s,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(50).loop})}),k(HO.ID,UO,0),D(KO),D(qO),D(YO),D(XO),D(ZO),D($O),D(ek),nk=dn.bindToContribution(HO.get),E(new nk({id:_D.CloseFindWidgetCommand,precondition:lD,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:b.and(J.focus,b.not(`isComposing`)),primary:9,secondary:[1033]}})),E(new nk({id:_D.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:J.focus,primary:fD.primary,mac:fD.mac,win:fD.win,linux:fD.linux}})),E(new nk({id:_D.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:J.focus,primary:pD.primary,mac:pD.mac,win:pD.win,linux:pD.linux}})),E(new nk({id:_D.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:J.focus,primary:mD.primary,mac:mD.mac,win:mD.win,linux:mD.linux}})),E(new nk({id:_D.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:J.focus,primary:hD.primary,mac:hD.mac,win:hD.win,linux:hD.linux}})),E(new nk({id:_D.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:J.focus,primary:gD.primary,mac:gD.mac,win:gD.win,linux:gD.linux}})),E(new nk({id:_D.ReplaceOneAction,precondition:lD,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:J.focus,primary:3094}})),E(new nk({id:_D.ReplaceOneAction,precondition:lD,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:b.and(J.focus,dD),primary:3}})),E(new nk({id:_D.ReplaceAllAction,precondition:lD,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:J.focus,primary:2563}})),E(new nk({id:_D.ReplaceAllAction,precondition:lD,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:b.and(J.focus,dD),primary:void 0,mac:{primary:2051}}})),E(new nk({id:_D.SelectAllMatchesAction,precondition:lD,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:J.focus,primary:515}}))})),ik=t((()=>{})),ak,ok,sk,ck,lk,uk,dk=t((()=>{ak={0:` `,1:`u`,2:`r`},ok=16777215,sk=4278190080,ck=class{constructor(e){let t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){let t=e/32|0,n=e%32;return(this._states[t]&1<<n)!=0}set(e,t){let n=e/32|0,r=e%32,i=this._states[n];t?this._states[n]=i|1<<r:this._states[n]=i&~(1<<r)}},lk=class e{constructor(e,t,n){if(e.length!==t.length||e.length>65535)throw Error(`invalid startIndexes or endIndexes size`);this._startIndexes=e,this._endIndexes=t,this._collapseStates=new ck(e.length),this._userDefinedStates=new ck(e.length),this._recoveredStates=new ck(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(t,n)=>{let r=e[e.length-1];return this.getStartLineNumber(r)<=t&&this.getEndLineNumber(r)>=n};for(let n=0,r=this._startIndexes.length;n<r;n++){let r=this._startIndexes[n],i=this._endIndexes[n];if(r>16777215||i>16777215)throw Error(`startLineNumber or endLineNumber must not exceed `+ok);for(;e.length>0&&!t(r,i);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=r+((a&255)<<24),this._endIndexes[n]=i+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&ok}getEndLineNumber(e){return this._endIndexes[e]&ok}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let r=0;r<this._types.length;r++)this._types[r]===e&&(this.setCollapsed(r,t),n=!0);return n}toRegion(e){return new uk(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&sk)>>>24)+((this._endIndexes[e]&sk)>>>16);return t===65535?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let r=Math.floor((t+n)/2);e<this.getStartLineNumber(r)?n=r:t=r+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${ak[this.getSource(t)]}${this.isCollapsed(t)?`+`:`-`}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(`, `)}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&ok,endLineNumber:this._endIndexes[e]&ok,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(t){let n=t.length,r=new Uint32Array(n),i=new Uint32Array(n),a=[],o=!1;for(let e=0;e<n;e++){let n=t[e];r[e]=n.startLineNumber,i[e]=n.endLineNumber,a.push(n.type),n.type&&(o=!0)}o||(a=void 0);let s=new e(r,i,a);for(let e=0;e<n;e++)t[e].isCollapsed&&s.setCollapsed(e,!0),s.setSource(e,t[e].source);return s}static sanitizeAndMerge(e,t,n,r){n??=Number.MAX_VALUE;let i=(e,t)=>Array.isArray(e)?(n=>n<t?e[n]:void 0):(n=>n<t?e.toFoldRange(n):void 0),a=i(e,e.length),o=i(t,t.length),s=0,c=0,l=a(0),u=o(0),d=[],f,p=0,m=[];for(;l||u;){let e;if(u&&(!l||l.startLineNumber>=u.startLineNumber))l&&l.startLineNumber===u.startLineNumber?(u.source===1?e=u:(e=l,e.isCollapsed=u.isCollapsed&&(l.endLineNumber===u.endLineNumber||!r?.startsInside(l.startLineNumber+1,l.endLineNumber+1)),e.source=0),l=a(++s)):(e=u,u.isCollapsed&&u.source===0&&(e.source=2)),u=o(++c);else{let t=c,n=u;for(;;){if(!n||n.startLineNumber>l.endLineNumber){e=l;break}if(n.source===1&&n.endLineNumber>l.endLineNumber)break;n=o(++t)}l=a(++s)}if(e){for(;f&&f.endLineNumber<e.startLineNumber;)f=d.pop();e.endLineNumber>e.startLineNumber&&e.startLineNumber>p&&e.endLineNumber<=n&&(!f||f.endLineNumber>=e.endLineNumber)&&(m.push(e),p=e.startLineNumber,f&&d.push(f),f=e)}}return m}},uk=class{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}}));function fk(e,t,n){let r=[];for(let i of n){let n=e.getRegionAtLine(i);if(n){let i=!n.isCollapsed;if(r.push(n),t>1){let a=e.getRegionsInside(n,(e,n)=>e.isCollapsed!==i&&n<t);r.push(...a)}}}e.toggleCollapseState(r)}function pk(e,t,n=Number.MAX_VALUE,r){let i=[];if(r&&r.length>0)for(let a of r){let r=e.getRegionAtLine(a);if(r&&(r.isCollapsed!==t&&i.push(r),n>1)){let a=e.getRegionsInside(r,(e,r)=>e.isCollapsed!==t&&r<n);i.push(...a)}}else{let r=e.getRegionsInside(null,(e,r)=>e.isCollapsed!==t&&r<n);i.push(...r)}e.toggleCollapseState(i)}function mk(e,t,n,r){let i=[];for(let a of r){let r=e.getAllRegionsAtLine(a,(e,r)=>e.isCollapsed!==t&&r<=n);i.push(...r)}e.toggleCollapseState(i)}function hk(e,t,n){let r=[];for(let i of n){let n=e.getAllRegionsAtLine(i,e=>e.isCollapsed!==t);n.length>0&&r.push(n[0])}e.toggleCollapseState(r)}function gk(e,t,n,r){let i=e.getRegionsInside(null,(e,i)=>i===t&&e.isCollapsed!==n&&!r.some(t=>e.containsLine(t)));e.toggleCollapseState(i)}function _k(e,t,n){let r=[];for(let t of n){let n=e.getAllRegionsAtLine(t,void 0);n.length>0&&r.push(n[0])}let i=e.getRegionsInside(null,e=>r.every(t=>!t.containedBy(e)&&!e.containedBy(t))&&e.isCollapsed!==t);e.toggleCollapseState(i)}function vk(e,t,n){let r=e.textModel,i=e.regions,a=[];for(let e=i.length-1;e>=0;e--)if(n!==i.isCollapsed(e)){let n=i.getStartLineNumber(e);t.test(r.getLineContent(n))&&a.push(i.toRegion(e))}e.toggleCollapseState(a)}function yk(e,t,n){let r=e.regions,i=[];for(let e=r.length-1;e>=0;e--)n!==r.isCollapsed(e)&&t===r.getType(e)&&i.push(r.toRegion(e));e.toggleCollapseState(i)}function bk(e,t){let n=null,r=t.getRegionAtLine(e);if(r!==null&&(n=r.startLineNumber,e===n)){let e=r.parentIndex;n=e===-1?null:t.regions.getStartLineNumber(e)}return n}function xk(e,t){let n=t.getRegionAtLine(e);if(n!==null&&n.startLineNumber===e){if(e!==n.startLineNumber)return n.startLineNumber;{let e=n.parentIndex,r=0;for(e!==-1&&(r=t.regions.getStartLineNumber(n.parentIndex));n!==null;)if(n.regionIndex>0){if(n=t.regions.toRegion(n.regionIndex-1),n.startLineNumber<=r)return null;if(n.parentIndex===e)return n.startLineNumber}else return null}}else if(t.regions.length>0)for(n=t.regions.toRegion(t.regions.length-1);n!==null;){if(n.startLineNumber<e)return n.startLineNumber;n=n.regionIndex>0?t.regions.toRegion(n.regionIndex-1):null}return null}function Sk(e,t){let n=t.getRegionAtLine(e);if(n!==null&&n.startLineNumber===e){let e=n.parentIndex,r=0;if(e!==-1)r=t.regions.getEndLineNumber(n.parentIndex);else if(t.regions.length===0)return null;else r=t.regions.getEndLineNumber(t.regions.length-1);for(;n!==null;)if(n.regionIndex<t.regions.length){if(n=t.regions.toRegion(n.regionIndex+1),n.startLineNumber>=r)return null;if(n.parentIndex===e)return n.startLineNumber}else return null}else if(t.regions.length>0)for(n=t.regions.toRegion(0);n!==null;){if(n.startLineNumber>e)return n.startLineNumber;n=n.regionIndex<t.regions.length?t.regions.toRegion(n.regionIndex+1):null}return null}var Ck,wk=t((()=>{N(),dk(),Bp(),Ck=class{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new j,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new lk(new Uint32Array,new Uint32Array),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((e,t)=>e.regionIndex-t.regionIndex);let t={};this._decorationProvider.changeDecorations(n=>{let r=0,i=-1,a=-1,o=e=>{for(;r<e;){let e=this._regions.getEndLineNumber(r),t=this._regions.isCollapsed(r);if(e<=i){let i=this.regions.getSource(r)!==0;n.changeDecorationOptions(this._editorDecorationIds[r],this._decorationProvider.getDecorationOption(t,e<=a,i))}t&&e>a&&(a=e),r++}};for(let n of e){let e=n.regionIndex,r=this._editorDecorationIds[e];if(r&&!t[r]){t[r]=!0,o(e);let n=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,n),i=Math.max(i,this._regions.getEndLineNumber(e))}}o(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){let t=[],n=t=>{for(let n of e)if(!(n.startLineNumber>t.endLineNumber||t.startLineNumber>n.endLineNumber))return!0;return!1};for(let e=0;e<this._regions.length;e++){let r=this._regions.toFoldRange(e);(r.source===0||!n(r))&&t.push(r)}this.updatePost(lk.fromFoldRanges(t))}update(e,t){let n=this._currentFoldedOrManualRanges(t),r=lk.sanitizeAndMerge(e,n,this._textModel.getLineCount(),t);this.updatePost(lk.fromFoldRanges(r))}updatePost(e){let t=[],n=-1;for(let r=0,i=e.length;r<i;r++){let i=e.getStartLineNumber(r),a=e.getEndLineNumber(r),o=e.isCollapsed(r),s=e.getSource(r)!==0,c={startLineNumber:i,startColumn:this._textModel.getLineMaxColumn(i),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:c,options:this._decorationProvider.getDecorationOption(o,a<=n,s)}),o&&a>n&&(n=a)}this._decorationProvider.changeDecorations(e=>this._editorDecorationIds=e.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e){let t=[];for(let n=0,r=this._regions.length;n<r;n++){let r=this.regions.isCollapsed(n),i=this.regions.getSource(n);if(r||i!==0){let a=this._regions.toFoldRange(n),o=this._textModel.getDecorationRange(this._editorDecorationIds[n]);o&&(r&&e?.startsInside(o.startLineNumber+1,o.endLineNumber)&&(r=!1),t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:a.type,isCollapsed:r,source:i}))}}return t}getMemento(){let e=this._currentFoldedOrManualRanges(),t=[],n=this._textModel.getLineCount();for(let r=0,i=e.length;r<i;r++){let i=e[r];if(i.startLineNumber>=i.endLineNumber||i.startLineNumber<1||i.endLineNumber>n)continue;let a=this._getLinesChecksum(i.startLineNumber+1,i.endLineNumber);t.push({startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,isCollapsed:i.isCollapsed,source:i.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){if(!Array.isArray(e))return;let t=[],n=this._textModel.getLineCount();for(let r of e){if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>n)continue;let e=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);(!r.checksum||e===r.checksum)&&t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,type:void 0,isCollapsed:r.isCollapsed??!0,source:r.source??0})}let r=lk.sanitizeAndMerge(this._regions,t,n);this.updatePost(lk.fromFoldRanges(r))}_getLinesChecksum(e,t){return ml(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let r=this._regions.findRange(e),i=1;for(;r>=0;){let e=this._regions.toRegion(r);(!t||t(e,i))&&n.push(e),i++,r=e.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],r=e?e.regionIndex+1:0,i=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){let e=[];for(let a=r,o=this._regions.length;a<o;a++){let r=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<i){for(;e.length>0&&!r.containedBy(e[e.length-1]);)e.pop();e.push(r),t(r,e.length)&&n.push(r)}else break}}else for(let e=r,a=this._regions.length;e<a;e++){let r=this._regions.toRegion(e);if(this._regions.getStartLineNumber(e)<i)(!t||t(r))&&n.push(r);else break}return n}}}));function Tk(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}function Ek(e,t){let n=Ln(e,e=>t<e.startLineNumber)-1;return n>=0&&e[n].endLineNumber>=t?e[n]:null}var Dk,Ok=t((()=>{Co(),N(),_(),Qr(),Dk=class{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new j,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(e=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(e=>e.range.endLineNumber!==e.range.startLineNumber||Ir(e.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,r=0,i=Number.MAX_VALUE,a=-1,o=this._foldingModel.regions;for(;n<o.length;n++){if(!o.isCollapsed(n))continue;let s=o.getStartLineNumber(n)+1,c=o.getEndLineNumber(n);i<=s&&c<=a||(!e&&r<this._hiddenRanges.length&&this._hiddenRanges[r].startLineNumber===s&&this._hiddenRanges[r].endLineNumber===c?(t.push(this._hiddenRanges[r]),r++):(e=!0,t.push(new T(s,1,c,1))),i=s,a=c)}(this._hasLineChanges||e||r<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Ek(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,r=null,i=e=>((!r||!Tk(e,r))&&(r=Ek(this._hiddenRanges,e)),r?r.startLineNumber-1:null);for(let r=0,a=e.length;r<a;r++){let a=e[r],o=i(a.startLineNumber);o&&(a=a.setStartPosition(o,n.getLineMaxColumn(o)),t=!0);let s=i(a.endLineNumber);s&&(a=a.setEndPosition(s,n.getLineMaxColumn(s)),t=!0),e[r]=a}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&=(this._foldingModelListener.dispose(),null)}}}));function kk(e,t,n,r=Pk){let i=e.getOptions().tabSize,a=new Nk(r),o;n&&(o=RegExp(`(${n.start.source})|(?:${n.end.source})`));let s=[],c=e.getLineCount()+1;s.push({indent:-1,endAbove:c,line:c});for(let n=e.getLineCount();n>0;n--){let r=e.getLineContent(n),c=zi(r,i),l=s[s.length-1];if(c===-1){t&&(l.endAbove=n);continue}let u;if(o&&(u=r.match(o)))if(u[1]){let e=s.length-1;for(;e>0&&s[e].indent!==-2;)e--;if(e>0){s.length=e+1,l=s[e],a.insertFirst(n,l.line,c),l.line=n,l.indent=c,l.endAbove=n;continue}}else{s.push({indent:-2,endAbove:n,line:n});continue}if(l.indent>c){do s.pop(),l=s[s.length-1];while(l.indent>c);let e=l.endAbove-1;e-n>=1&&a.insertFirst(n,e,c)}l.indent===c?l.endAbove=n:s.push({indent:c,endAbove:n,line:n})}return a.toIndentRanges(e)}var Ak,jk,Mk,Nk,Pk,Fk=t((()=>{Ut(),dk(),Ak=5e3,jk=`indent`,Mk=class{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=n,this.id=jk}dispose(){}compute(e){let t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=t&&!!t.offSide,r=t&&t.markers;return Promise.resolve(kk(this.editorModel,n,r,this.foldingRangesLimit))}},Nk=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>16777215||t>16777215)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){let t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=this._length-1,r=0;n>=0;n--,r++)e[r]=this._startIndexes[n],t[r]=this._endIndexes[n];return new lk(e,t)}else{this._foldingRangesLimit.update(this._length,t);let n=0,r=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let i=this._indentOccurrences[e];if(i){if(i+n>t){r=e;break}n+=i}}let i=e.getOptions().tabSize,a=new Uint32Array(t),o=new Uint32Array(t);for(let s=this._length-1,c=0;s>=0;s--){let l=this._startIndexes[s],u=zi(e.getLineContent(l),i);(u<r||u===r&&n++<t)&&(a[c]=l,o[c]=this._endIndexes[s],c++)}return new lk(a,o)}}},Pk={limit:Ak,update:()=>{}}})),Ik,Lk,Rk,zk,Bk,Vk,Hk,Uk,Wk,Gk=t((()=>{Kn(),md(),P(),Ei(),Ie(),Yf(),sr(),Ik=Y(`editor.foldBackground`,{light:Ee(fm,.3),dark:Ee(fm,.3),hcDark:null,hcLight:null},A(994,`Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.`),!0),Y(`editor.foldPlaceholderForeground`,{light:`#808080`,dark:`#808080`,hcDark:null,hcLight:null},A(995,`Color of the collapsed text after the first line of a folded range.`)),Y(`editorGutter.foldingControlForeground`,$r,A(996,`Color of the folding control in the editor gutter.`)),Lk=To(`folding-expanded`,B.chevronDown,A(997,`Icon for expanded ranges in the editor glyph margin.`)),Rk=To(`folding-collapsed`,B.chevronRight,A(998,`Icon for collapsed ranges in the editor glyph margin.`)),zk=To(`folding-manual-collapsed`,Rk,A(999,`Icon for manually collapsed ranges in the editor glyph margin.`)),Bk=To(`folding-manual-expanded`,Lk,A(1e3,`Icon for manually expanded ranges in the editor glyph margin.`)),Vk={color:hs(Ik),position:1},Hk=A(1001,`Click to expand the range.`),Uk=A(1002,`Click to collapse the range.`),Wk=class e{static#e=this.COLLAPSED_VISUAL_DECORATION=L.register({description:`folding-collapsed-visual-decoration`,stickiness:0,afterContentClassName:`inline-folded`,isWholeLine:!0,linesDecorationsTooltip:Hk,firstLineDecorationClassName:Qt.asClassName(Rk)});static#t=this.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=L.register({description:`folding-collapsed-highlighted-visual-decoration`,stickiness:0,afterContentClassName:`inline-folded`,className:`folded-background`,minimap:Vk,isWholeLine:!0,linesDecorationsTooltip:Hk,firstLineDecorationClassName:Qt.asClassName(Rk)});static#n=this.MANUALLY_COLLAPSED_VISUAL_DECORATION=L.register({description:`folding-manually-collapsed-visual-decoration`,stickiness:0,afterContentClassName:`inline-folded`,isWholeLine:!0,linesDecorationsTooltip:Hk,firstLineDecorationClassName:Qt.asClassName(zk)});static#r=this.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=L.register({description:`folding-manually-collapsed-highlighted-visual-decoration`,stickiness:0,afterContentClassName:`inline-folded`,className:`folded-background`,minimap:Vk,isWholeLine:!0,linesDecorationsTooltip:Hk,firstLineDecorationClassName:Qt.asClassName(zk)});static#i=this.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=L.register({description:`folding-no-controls-range-decoration`,stickiness:0,afterContentClassName:`inline-folded`,isWholeLine:!0,linesDecorationsTooltip:Hk});static#a=this.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=L.register({description:`folding-no-controls-range-decoration`,stickiness:0,afterContentClassName:`inline-folded`,className:`folded-background`,minimap:Vk,isWholeLine:!0,linesDecorationsTooltip:Hk});static#o=this.EXPANDED_VISUAL_DECORATION=L.register({description:`folding-expanded-visual-decoration`,stickiness:1,isWholeLine:!0,firstLineDecorationClassName:`alwaysShowFoldIcons `+Qt.asClassName(Lk),linesDecorationsTooltip:Uk});static#s=this.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=L.register({description:`folding-expanded-auto-hide-visual-decoration`,stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Qt.asClassName(Lk),linesDecorationsTooltip:Uk});static#c=this.MANUALLY_EXPANDED_VISUAL_DECORATION=L.register({description:`folding-manually-expanded-visual-decoration`,stickiness:0,isWholeLine:!0,firstLineDecorationClassName:`alwaysShowFoldIcons `+Qt.asClassName(Bk),linesDecorationsTooltip:Uk});static#l=this.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=L.register({description:`folding-manually-expanded-auto-hide-visual-decoration`,stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Qt.asClassName(Bk),linesDecorationsTooltip:Uk});static#u=this.NO_CONTROLS_EXPANDED_RANGE_DECORATION=L.register({description:`folding-no-controls-range-decoration`,stickiness:0,isWholeLine:!0});static#d=this.HIDDEN_RANGE_DECORATION=L.register({description:`folding-hidden-range-decoration`,stickiness:1});constructor(e){this.editor=e,this.showFoldingControls=`mouseover`,this.showFoldingHighlights=!0}getDecorationOption(t,n,r){return n?e.HIDDEN_RANGE_DECORATION:this.showFoldingControls===`never`?t?this.showFoldingHighlights?e.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:e.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:e.NO_CONTROLS_EXPANDED_RANGE_DECORATION:t?r?this.showFoldingHighlights?e.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:e.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?e.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:e.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls===`mouseover`?r?e.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:e.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:r?e.MANUALLY_EXPANDED_VISUAL_DECORATION:e.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}}));function Kk(e,t,n){let r=null,i=e.map((e,i)=>Promise.resolve(e.provideFoldingRanges(t,Jk,n)).then(e=>{if(!n.isCancellationRequested&&Array.isArray(e)){Array.isArray(r)||(r=[]);let n=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=n&&r.push({start:t.start,end:t.end,rank:i,kind:t.kind})}},Jc));return Promise.all(i).then(e=>r)}function qk(e,t){let n=e.sort((e,t)=>{let n=e.start-t.start;return n===0&&(n=e.rank-t.rank),n}),r=new Zk(t),i,a=[];for(let e of n)if(!i)i=e,r.add(e.start,e.end,e.kind&&e.kind.value,a.length);else if(e.start>i.start)if(e.end<=i.end)a.push(i),i=e,r.add(e.start,e.end,e.kind&&e.kind.value,a.length);else{if(e.start>i.end){do i=a.pop();while(i&&e.start>i.end);i&&a.push(i),i=e}r.add(e.start,e.end,e.kind&&e.kind.value,a.length)}return r.toIndentRanges()}var Jk,Yk,Xk,Zk,Qk=t((()=>{M(),q(),dk(),Jk={},Yk=`syntax`,Xk=class{constructor(e,t,n,r,i){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=n,this.foldingRangesLimit=r,this.fallbackRangeProvider=i,this.id=Yk,this.disposables=new I,i&&this.disposables.add(i);for(let e of t)typeof e.onDidChange==`function`&&this.disposables.add(e.onDidChange(n))}compute(e){return Kk(this.providers,this.editorModel,e).then(t=>this.editorModel.isDisposed()?null:t?qk(t,this.foldingRangesLimit):this.fallbackRangeProvider?.compute(e)??null)}dispose(){this.disposables.dispose()}},Zk=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,r){if(e>16777215||t>16777215)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._nestingLevels[i]=r,this._types[i]=n,this._length++,r<30&&(this._nestingLevelCounts[r]=(this._nestingLevelCounts[r]||0)+1)}toIndentRanges(){let e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new lk(e,t,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,n=this._nestingLevelCounts.length;for(let r=0;r<this._nestingLevelCounts.length;r++){let i=this._nestingLevelCounts[r];if(i){if(i+t>e){n=r;break}t+=i}}let r=new Uint32Array(e),i=new Uint32Array(e),a=[];for(let o=0,s=0;o<this._length;o++){let c=this._nestingLevels[o];(c<n||c===n&&t++<e)&&(r[s]=this._startIndexes[o],i[s]=this._endIndexes[o],a[s]=this._types[o],s++)}return new lk(r,i,a)}}}}));function $k(e){return!e||e.length===0?{startsInside:()=>!1}:{startsInside(t,n){for(let r of e){let e=r.startLineNumber;if(e>=t&&e<=n)return!0}return!1}}}function eA(e){if(!Xi(e)){if(!Yo(e))return!1;let t=e;if(!Xi(t.levels)&&!us(t.levels)||!Xi(t.direction)&&!Ts(t.direction)||!Xi(t.selectionLines)&&(!Array.isArray(t.selectionLines)||!t.selectionLines.every(us)))return!1}return!0}var tA,nA,rA,iA,aA,oA,sA,cA,lA,uA,dA,fA,pA,mA,hA,gA,_A,vA,yA,bA,xA,SA,CA,wA,TA,EA,DA,OA=t((()=>{O(),wu(),M(),ni(),q(),Ga(),lr(),ik(),Tr(),v(),yc(),Gr(),oo(),wk(),Ok(),Fk(),P(),C(),Gk(),dk(),Qk(),up(),tf(),em(),yu(),N(),jo(),xd(),Yd(),qp(),tA=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},nA=function(e,t){return function(n,r){t(n,r,e)}},iA=new De(`foldingEnabled`,!1),aA=class extends z{static#e=rA=this;static#t=this.ID=`editor.contrib.folding`;static get(e){return e.getContribution(rA.ID)}static getFoldingRangeProviders(e,t){let n=e.foldingRangeProvider.ordered(t);return rA._foldingRangeSelector?.(n,t)??n}constructor(e,t,n,r,i,a){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=a,this.localToDispose=this._register(new I),this.editor=e,this._foldingLimitReporter=this._register(new oA(e));let o=this.editor.getOptions();this._isEnabled=o.get(52),this._useFoldingProviders=o.get(53)!==`indentation`,this._unfoldOnClickAfterEndOfLine=o.get(57),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=o.get(55),this.updateDebounceInfo=i.for(a.foldingRangeProvider,`Folding`,{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new Wk(e),this.foldingDecorationProvider.showFoldingControls=o.get(125),this.foldingDecorationProvider.showFoldingHighlights=o.get(54),this.foldingEnabled=iA.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(e=>{if(e.hasChanged(52)&&(this._isEnabled=this.editor.getOptions().get(52),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(56)&&this.onModelChanged(),e.hasChanged(125)||e.hasChanged(54)){let e=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=e.get(125),this.foldingDecorationProvider.showFoldingHighlights=e.get(54),this.triggerFoldingModelChanged()}e.hasChanged(53)&&(this._useFoldingProviders=this.editor.getOptions().get(53)!==`indentation`,this.onFoldingStrategyChanged()),e.hasChanged(57)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(57)),e.hasChanged(55)&&(this._foldingImportsByDefault=this.editor.getOptions().get(55))})),this.onModelChanged()}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new Ck(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new Dk(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(e=>this.onHiddenRangesChanges(e))),this.updateScheduler=new Io(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new rn(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(e=>this.onDidChangeModelContent(e))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(e=>this.onEditorMouseDown(e))),this.localToDispose.add(this.editor.onMouseUp(e=>this.onEditorMouseUp(e))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&=(this.foldingRegionPromise.cancel(),null),this.updateScheduler?.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.rangeProvider?.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider?.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;let t=new Mk(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){let n=rA.getFoldingRangeProviders(this.languageFeaturesService,e);n.length>0&&(this.rangeProvider=new Xk(e,n,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){this.hiddenRangeModel?.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&=(this.foldingRegionPromise.cancel(),null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{let e=this.foldingModel;if(!e)return null;let t=new vd,n=this.getRangeProvider(e.textModel),r=this.foldingRegionPromise=Zn(e=>n.compute(e));return r.then(n=>{if(n&&r===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){let e=n.setCollapsedAllOfType(bm.Imports.value,!0);e&&(r=Nn.capture(this.editor),this._currentModelHasFoldedImports=e)}let i=this.editor.getSelections();e.update(n,$k(i)),r?.restore(this.editor);let a=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=a)}return e})}).then(void 0,e=>($p(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){let e=this.getFoldingModel();e&&e.then(e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let n=[];for(let r of t){let t=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&n.push(...e.getAllRegionsAtLine(t,e=>e.isCollapsed&&t>e.startLineNumber))}n.length&&(e.toggleCollapseState(n),this.reveal(t[0].getPosition()))}}}).then(void 0,$p)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;let t=e.target.range,n=!1;switch(e.target.type){case 4:{let t=e.target.detail,r=e.target.element.offsetLeft;if(t.offsetX-r<4)return;n=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){let t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,i=e.target.range;if(!i||i.startLineNumber!==n)return;if(r){if(e.target.type!==4)return}else{let e=this.editor.getModel();if(!e||i.startColumn!==e.getLineMaxColumn(n))return}let a=t.getRegionAtLine(n);if(a&&a.startLineNumber===n){let i=a.isCollapsed;if(r||i){let r=e.event.altKey,o=[];if(r){let e=t.getRegionsInside(null,e=>!e.containedBy(a)&&!a.containedBy(e));for(let t of e)t.isCollapsed&&o.push(t);o.length===0&&(o=e)}else{let n=e.event.middleButton||e.event.shiftKey;if(n)for(let e of t.getRegionsInside(a))e.isCollapsed===i&&o.push(e);(i||!n||o.length===0)&&o.push(a)}t.toggleCollapseState(o),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},aA=rA=tA([nA(1,bh),nA(2,yn),nA(3,Hp),nA(4,Vp),nA(5,V)],aA),oA=class extends z{constructor(e){super(),this.editor=e,this._onDidChange=this._register(new j),this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(56)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}},sA=class extends S{runEditorCommand(e,t,n){let r=e.get(yn),i=aA.get(t);if(!i)return;let a=i.getFoldingModel();if(a)return this.reportTelemetry(e,t),a.then(e=>{if(e){this.invoke(i,e,t,n,r);let a=t.getSelection();a&&i.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(e=>e.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(e=>e+1):this.getSelectedLines(t)}run(e,t){}},cA=class extends sA{constructor(){super({id:`editor.unfold`,label:K(974,`Unfold`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:`Unfold the content in the editor`,args:[{name:`Unfold editor argument`,description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:eA,schema:{type:`object`,properties:{levels:{type:`number`,default:1},direction:{type:`string`,enum:[`up`,`down`],default:`down`},selectionLines:{type:`array`,items:{type:`number`}}}}}]}})}invoke(e,t,n,r){let i=r&&r.levels||1,a=this.getLineNumbers(r,n);r&&r.direction===`up`?mk(t,!1,i,a):pk(t,!1,i,a)}},lA=class extends sA{constructor(){super({id:`editor.unfoldRecursively`,label:K(975,`Unfold Recursively`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2142),weight:100}})}invoke(e,t,n,r){pk(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}},uA=class extends sA{constructor(){super({id:`editor.fold`,label:K(976,`Fold`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:`Fold the content in the editor`,args:[{name:`Fold editor argument`,description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:eA,schema:{type:`object`,properties:{levels:{type:`number`},direction:{type:`string`,enum:[`up`,`down`]},selectionLines:{type:`array`,items:{type:`number`}}}}}]}})}invoke(e,t,n,r){let i=this.getLineNumbers(r,n),a=r&&r.levels,o=r&&r.direction;typeof a!=`number`&&typeof o!=`string`?hk(t,!0,i):o===`up`?mk(t,!0,a||1,i):pk(t,!0,a||1,i)}},dA=class extends sA{constructor(){super({id:`editor.toggleFold`,label:K(977,`Toggle Fold`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2090),weight:100}})}invoke(e,t,n){fk(t,1,this.getSelectedLines(n))}},fA=class extends sA{constructor(){super({id:`editor.foldRecursively`,label:K(978,`Fold Recursively`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2140),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);pk(t,!0,Number.MAX_VALUE,r)}},pA=class extends sA{constructor(){super({id:`editor.toggleFoldRecursively`,label:K(979,`Toggle Fold Recursively`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,3114),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);fk(t,Number.MAX_VALUE,r)}},mA=class extends sA{constructor(){super({id:`editor.foldAllBlockComments`,label:K(980,`Fold All Block Comments`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2138),weight:100}})}invoke(e,t,n,r,i){if(t.regions.hasTypes())yk(t,bm.Comment.value,!0);else{let e=n.getModel();if(!e)return;let r=i.getLanguageConfiguration(e.getLanguageId()).comments;r&&r.blockCommentStartToken&&vk(t,RegExp(`^\\s*`+Xm(r.blockCommentStartToken)),!0)}}},hA=class extends sA{constructor(){super({id:`editor.foldAllMarkerRegions`,label:K(981,`Fold All Regions`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2077),weight:100}})}invoke(e,t,n,r,i){if(t.regions.hasTypes())yk(t,bm.Region.value,!0);else{let e=n.getModel();if(!e)return;let r=i.getLanguageConfiguration(e.getLanguageId()).foldingRules;r&&r.markers&&r.markers.start&&vk(t,new RegExp(r.markers.start),!0)}}},gA=class extends sA{constructor(){super({id:`editor.unfoldAllMarkerRegions`,label:K(982,`Unfold All Regions`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2078),weight:100}})}invoke(e,t,n,r,i){if(t.regions.hasTypes())yk(t,bm.Region.value,!1);else{let e=n.getModel();if(!e)return;let r=i.getLanguageConfiguration(e.getLanguageId()).foldingRules;r&&r.markers&&r.markers.start&&vk(t,new RegExp(r.markers.start),!1)}}},_A=class extends sA{constructor(){super({id:`editor.foldAllExcept`,label:K(983,`Fold All Except Selected`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2136),weight:100}})}invoke(e,t,n){_k(t,!0,this.getSelectedLines(n))}},vA=class extends sA{constructor(){super({id:`editor.unfoldAllExcept`,label:K(984,`Unfold All Except Selected`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2134),weight:100}})}invoke(e,t,n){_k(t,!1,this.getSelectedLines(n))}},yA=class extends sA{constructor(){super({id:`editor.foldAll`,label:K(985,`Fold All`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2069),weight:100}})}invoke(e,t,n){pk(t,!0)}},bA=class extends sA{constructor(){super({id:`editor.unfoldAll`,label:K(986,`Unfold All`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2088),weight:100}})}invoke(e,t,n){pk(t,!1)}},xA=class e extends sA{static#e=this.ID_PREFIX=`editor.foldLevel`;static#t=this.ID=t=>e.ID_PREFIX+t;getFoldingLevel(){return parseInt(this.id.substr(e.ID_PREFIX.length))}invoke(e,t,n){gk(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}},SA=class extends sA{constructor(){super({id:`editor.gotoParentFold`,label:K(987,`Go to Parent Fold`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let e=bk(r[0],t);e!==null&&n.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}},CA=class extends sA{constructor(){super({id:`editor.gotoPreviousFold`,label:K(988,`Go to Previous Folding Range`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let e=xk(r[0],t);e!==null&&n.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}},wA=class extends sA{constructor(){super({id:`editor.gotoNextFold`,label:K(989,`Go to Next Folding Range`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let e=Sk(r[0],t);e!==null&&n.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}},TA=class extends sA{constructor(){super({id:`editor.createFoldingRangeFromSelection`,label:K(990,`Create Folding Range from Selection`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2135),weight:100}})}invoke(e,t,n){let r=[],i=n.getSelections();if(i){for(let e of i){let t=e.endLineNumber;e.endColumn===1&&--t,t>e.startLineNumber&&(r.push({startLineNumber:e.startLineNumber,endLineNumber:t,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:e.startLineNumber,startColumn:1,endLineNumber:e.startLineNumber,endColumn:1}))}if(r.length>0){r.sort((e,t)=>e.startLineNumber-t.startLineNumber);let e=lk.sanitizeAndMerge(t.regions,r,n.getModel()?.getLineCount());t.updatePost(lk.fromFoldRanges(e))}}}},EA=class extends sA{constructor(){super({id:`editor.removeManualFoldingRanges`,label:K(991,`Remove Manual Folding Ranges`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2137),weight:100}})}invoke(e,t,n){let r=n.getSelections();if(r){let n=[];for(let e of r){let{startLineNumber:t,endLineNumber:r}=e;n.push(r>=t?{startLineNumber:t,endLineNumber:r}:{endLineNumber:r,startLineNumber:t})}t.removeManualRanges(n),e.triggerFoldingModelChanged()}}},DA=class extends sA{constructor(){super({id:`editor.toggleImportFold`,label:K(992,`Toggle Import Fold`),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,weight:100}})}async invoke(e,t){let n=[],r=t.regions;for(let e=r.length-1;e>=0;e--)r.getType(e)===bm.Imports.value&&n.push(r.toRegion(e));t.toggleCollapseState(n),e.triggerFoldingModelChanged()}},k(aA.ID,aA,0),D(cA),D(lA),D(uA),D(fA),D(pA),D(yA),D(bA),D(mA),D(hA),D(gA),D(_A),D(vA),D(dA),D(SA),D(CA),D(wA),D(TA),D(EA),D(DA);for(let e=1;e<=7;e++)oa(new xA({id:xA.ID(e),label:K(993,`Fold Level {0}`,e),precondition:iA,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2048|21+e),weight:100}}));hn.registerCommand(`_executeFoldingRangeProvider`,async function(e,...t){let[n]=t;if(!(n instanceof Fc))throw bp();let r=e.get(V),i=e.get(Ip).getModel(n);if(!i)throw bp();let a=e.get(xl);if(!a.getValue(`editor.folding`,{resource:n}))return[];let o=e.get(yn),s=a.getValue(`editor.foldingStrategy`,{resource:n}),c={get limit(){return a.getValue(`editor.foldingMaximumRegions`,{resource:n})},update:(e,t)=>{}},l=new Mk(i,o,c),u=l;if(s!==`indentation`){let e=aA.getFoldingRangeProviders(r,i);e.length&&(u=new Xk(i,e,()=>{},c,l))}let d=await u.compute(W.None),f=[];try{if(d)for(let e=0;e<d.length;e++){let t=d.getType(e);f.push({start:d.getStartLineNumber(e),end:d.getEndLineNumber(e),kind:t?bm.fromValue(t):void 0})}return f}finally{u.dispose()}})})),kA,AA,jA,MA=t((()=>{v(),sp(),P(),kA=class extends S{constructor(){super({id:`editor.action.fontZoomIn`,label:K(1003,`Increase Editor Font Size`),precondition:void 0})}run(e,t){$d.setZoomLevel($d.getZoomLevel()+1)}},AA=class extends S{constructor(){super({id:`editor.action.fontZoomOut`,label:K(1004,`Decrease Editor Font Size`),precondition:void 0})}run(e,t){$d.setZoomLevel($d.getZoomLevel()-1)}},jA=class extends S{constructor(){super({id:`editor.action.fontZoomReset`,label:K(1005,`Reset Editor Font Size`),precondition:void 0})}run(e,t){$d.setZoomLevel(0)}},D(kA),D(AA),D(jA)})),NA,PA,FA,IA,LA,RA,zA=t((()=>{sn(),wu(),M(),ni(),q(),v(),ff(),Vm(),_(),yc(),va(),yu(),Nu(),Cf(),P(),Gf(),jo(),C(),F(),yo(),NA=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},PA=function(e,t){return function(n,r){t(n,r,e)}},FA=class{static#e=this.ID=`editor.contrib.autoFormat`;constructor(e,t,n,r){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._accessibilitySignalService=r,this._disposables=new I,this._sessionDisposables=new I,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(e=>{e.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(65)||!this._editor.hasModel())return;let e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let n=new tt;for(let e of t.autoFormatTriggerCharacters)n.add(e.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(e=>{let t=e.charCodeAt(e.length-1);n.has(t)&&this._trigger(String.fromCharCode(t))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;let t=this._editor.getModel(),n=this._editor.getPosition(),r=new Zd,i=this._editor.onDidChangeModelContent(e=>{if(e.isFlush){r.cancel(),i.dispose();return}for(let t=0,a=e.changes.length;t<a;t++)if(e.changes[t].range.endLineNumber<=n.lineNumber){r.cancel(),i.dispose();return}});mp(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),r.token).then(e=>{r.token.isCancellationRequested||Xf(e)&&(this._accessibilitySignalService.playSignal(tn.format,{userGesture:!1}),uc.execute(this._editor,e,!0))}).finally(()=>{i.dispose()})}},FA=NA([PA(1,V),PA(2,jr),PA(3,ur)],FA),IA=class{static#e=this.ID=`editor.contrib.formatOnPaste`;constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new I,this._callOnModel=new I,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(64)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(Kp,this.editor,e,2,Ae.None,W.None,!1).catch($p))}},IA=NA([PA(1,V),PA(2,U)],IA),LA=class extends S{constructor(){super({id:`editor.action.formatDocument`,label:K(1006,`Format Document`),precondition:b.and(J.notInCompositeEditor,J.writable,J.hasDocumentFormattingProvider),kbOpts:{kbExpr:J.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:`1_modification`,order:1.3}})}async run(e,t){if(t.hasModel()){let n=e.get(U);await e.get(fa).showWhile(n.invokeFunction(sf,t,1,Ae.None,W.None,!0),250)}}},RA=class extends S{constructor(){super({id:`editor.action.formatSelection`,label:K(1007,`Format Selection`),precondition:b.and(J.writable,J.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2084),weight:100},contextMenuOpts:{when:J.hasNonEmptySelection,group:`1_modification`,order:1.31}})}async run(e,t){if(!t.hasModel())return;let n=e.get(U),r=t.getModel(),i=t.getSelections().map(e=>e.isEmpty()?new T(e.startLineNumber,1,e.startLineNumber,r.getLineMaxColumn(e.startLineNumber)):e);await e.get(fa).showWhile(n.invokeFunction(Kp,t,i,1,Ae.None,W.None,!0),250)}},k(FA.ID,FA,2),k(IA.ID,IA,2),D(LA),D(RA),hn.registerCommand(`editor.action.format`,async e=>{let t=e.get(ec).getFocusedCodeEditor();if(!t||!t.hasModel())return;let n=e.get(no);t.getSelection().isEmpty()?await n.executeCommand(`editor.action.formatDocument`):await n.executeCommand(`editor.action.formatSelection`)})})),BA,VA,HA,UA,WA,GA,KA,qA,JA=t((()=>{sn(),wu(),M(),Ge(),Gm(),Su(),_(),tf(),F(),Zo(),Yd(),q(),yu(),BA=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},VA=function(e,t){return function(n,r){t(n,r,e)}},HA=class{remove(){this.parent?.children.delete(this.id)}static findId(e,t){let n;typeof e==`string`?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let r=n;for(let e=0;t.children.get(r)!==void 0;e++)r=`${n}_${e}`;return r}static empty(e){return e.children.size===0}},UA=class extends HA{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}},WA=class extends HA{constructor(e,t,n,r){super(),this.id=e,this.parent=t,this.label=n,this.order=r,this.children=new Map}},GA=class e extends HA{static create(t,n,r){let i=new Zd(r),a=new e(n.uri),o=t.ordered(n),s=o.map((t,r)=>{let o=HA.findId(`provider_${r}`,a),s=new WA(o,a,t.displayName??`Unknown Outline Provider`,r);return Promise.resolve(t.provideDocumentSymbols(n,i.token)).then(t=>{for(let n of t||[])e._makeOutlineElement(n,s);return s},e=>(Jc(e),s)).then(e=>{HA.empty(e)?e.remove():a._groups.set(o,e)})}),c=t.onDidChange(()=>{uo(t.ordered(n),o)||i.cancel()});return Promise.all(s).then(()=>i.token.isCancellationRequested&&!r.isCancellationRequested?e.create(t,n,r):a._compact()).finally(()=>{i.dispose(),c.dispose(),i.dispose()})}static _makeOutlineElement(t,n){let r=new UA(HA.findId(t,n),n,t);if(t.children)for(let n of t.children)e._makeOutlineElement(n,r);n.children.set(r.id,r)}constructor(e){super(),this.uri=e,this.id=`root`,this.parent=void 0,this._groups=new Map,this.children=new Map,this.id=`root`,this.parent=void 0}_compact(){let e=0;for(let[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let e=Ea.first(this._groups.values());for(let[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){let e=[];for(let t of this.children.values())t instanceof UA?e.push(t.symbol):e.push(...Ea.map(t.children.values(),e=>e.symbol));return e.sort((e,t)=>T.compareRangesUsingStarts(e.range,t.range))}asListOfDocumentSymbols(){let t=this.getTopLevelSymbols(),n=[];return e._flattenDocumentSymbols(n,t,``),n.sort((e,t)=>H.compare(T.getStartPosition(e.range),T.getStartPosition(t.range))||H.compare(T.getEndPosition(t.range),T.getEndPosition(e.range)))}static _flattenDocumentSymbols(t,n,r){for(let i of n)t.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||r,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&e._flattenDocumentSymbols(t,i.children,i.name)}},KA=Mc(`IOutlineModelService`),qA=class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new I,this._cache=new sh(15,.7),this._debounceInformation=t.for(e.documentSymbolProvider,`DocumentSymbols`,{min:350}),this._disposables.add(n.onModelRemoved(e=>{this._cache.delete(e.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){let n=this._languageFeaturesService.documentSymbolProvider,r=n.ordered(e),i=this._cache.get(e.id);if(!i||i.versionId!==e.getVersionId()||!uo(i.provider,r)){let t=new Zd;i={versionId:e.getVersionId(),provider:r,promiseCnt:0,source:t,promise:GA.create(n,e,t.token),model:void 0},this._cache.set(e.id,i);let a=Date.now();i.promise.then(t=>{i.model=t,this._debounceInformation.update(e,Date.now()-a)}).catch(t=>{this._cache.delete(e.id)})}if(i.model)return i.model;i.promiseCnt+=1;let a=t.onCancellationRequested(()=>{--i.promiseCnt===0&&(i.source.cancel(),this._cache.delete(e.id))});try{return await i.promise}finally{a.dispose()}}},qA=BA([VA(0,V),VA(1,Vp),VA(2,Ip)],qA),Ds(KA,qA,1)})),YA=t((()=>{wu(),lr(),xd(),ll(),JA(),jo(),hn.registerCommand(`_executeDocumentSymbolProvider`,async function(e,...t){let[n]=t;en(Fc.isUri(n));let r=e.get(KA),i=await e.get(d).createModelReference(n);try{return(await r.getOrCreate(i.object.textEditorModel,W.None)).getTopLevelSymbols()}finally{i.dispose()}})})),XA,ZA=t((()=>{XA=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{let t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)}}}getImplementations(){return this._implementations}}}));function QA(e){return e instanceof rj?e._instance:e}function $A(e,t){return class extends t{constructor(){super(...arguments),this._autorun=void 0}init(...t){this._autorun=xm((n,r)=>{let i=e.read(n);this._instance=r.add(this.instantiationService.createInstance(i,...t))})}dispose(){this._autorun?.dispose()}}}function ej(e){return Zi()?$A(e,ij):e.get()}var tj,nj,rj,ij,aj=t((()=>{Es(),ls(),F(),tj=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},nj=function(e,t){return function(n,r){t(n,r,e)}},rj=class{constructor(e){this.instantiationService=e}init(...e){}},ij=class extends rj{constructor(e,t){super(t),this.init(e)}},ij=tj([nj(1,U)],ij)}));function oj(){return gj}async function sj(e,t,n,r=hj.default,i={triggerKind:0},a=W.None){let o=new vd;n=n.clone();let s=t.getWordAtPosition(n),c=s?new T(n.lineNumber,s.startColumn,n.lineNumber,s.endColumn):T.fromPositions(n),l={replace:c,insert:c.setEndPosition(n.lineNumber,n.column)},u=[],d=new I,f=[],p=!1,m=(e,t,i)=>{let a=!1;if(!t)return a;for(let i of t.suggestions)if(!r.kindFilter.has(i.kind)){if(!r.showDeprecated&&i?.tags?.includes(1))continue;i.range||=l,i.sortText||=typeof i.label==`string`?i.label:i.label.label,!p&&i.insertTextRules&&i.insertTextRules&4&&(p=O_.guessNeedsClipboard(i.insertText)),u.push(new mj(n,i,t,e)),a=!0}return _c(t)&&d.add(t),f.push({providerName:e._debugDisplayName??`unknown_provider`,elapsedProvider:t.duration??-1,elapsedOverall:i.elapsed()}),a},h=(async()=>{})();for(let o of e.orderedGroups(t)){let e=!1;if(await Promise.all(o.map(async o=>{if(r.providerItemsToReuse.has(o)){let t=r.providerItemsToReuse.get(o);t.forEach(e=>u.push(e)),e||=t.length>0;return}if(!(r.providerFilter.size>0&&!r.providerFilter.has(o)))try{let r=new vd;e=m(o,await o.provideCompletionItems(t,n,i,a),r)||e}catch(e){Jc(e)}})),e||a.isCancellationRequested)break}return await h,a.isCancellationRequested?(d.dispose(),Promise.reject(new pf)):new _j(u.sort(dj(r.snippetSortOrder)),p,{entries:f,elapsed:o.elapsed()},d)}function cj(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.textLabel<t.textLabel?-1:e.textLabel>t.textLabel?1:e.completion.kind-t.completion.kind}function lj(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===28)return-1;if(t.completion.kind===28)return 1}return cj(e,t)}function uj(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===28)return 1;if(t.completion.kind===28)return-1}return cj(e,t)}function dj(e){return vj.get(e)}function fj(e,t){e.getContribution(`editor.contrib.suggestController`)?.triggerSuggest(new Set().add(t),void 0,!0)}var Z,pj,mj,hj,gj,_j,vj,yj,bj=t((()=>{wu(),M(),Ua(),q(),em(),lr(),xd(),Su(),_(),ll(),k_(),P(),de(),jo(),C(),yu(),GD(),Z={Visible:LD,HasFocusedSuggestion:new De(`suggestWidgetHasFocusedSuggestion`,!1,A(1437,`Whether any suggestion is focused`)),DetailsVisible:new De(`suggestWidgetDetailsVisible`,!1,A(1438,`Whether suggestion details are visible`)),MultipleSuggestions:new De(`suggestWidgetMultipleSuggestions`,!1,A(1439,`Whether there are multiple suggestions to pick from`)),MakesTextEdit:new De(`suggestionMakesTextEdit`,!0,A(1440,`Whether inserting the current suggestion yields in a change or has everything already been typed`)),AcceptSuggestionsOnEnter:new De(`acceptSuggestionOnEnter`,!0,A(1441,`Whether suggestions are inserted when pressing Enter`)),HasInsertAndReplaceRange:new De(`suggestionHasInsertAndReplaceRange`,!1,A(1442,`Whether the current suggestion has insert and replace behaviour`)),InsertMode:new De(`suggestionInsertMode`,void 0,{type:`string`,description:A(1443,`Whether the default behaviour is to insert or replace`)}),CanResolve:new De(`suggestionCanResolve`,!1,A(1444,`Whether the current suggestion supports to resolve further details`))},pj=new g(`suggestWidgetStatusBar`),mj=class{constructor(e,t,n,r){this.position=e,this.completion=t,this.container=n,this.provider=r,this.isInvalid=!1,this.score=lh.Default,this.distance=0,this.textLabel=typeof t.label==`string`?t.label:t.label?.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,T.isIRange(t.range)?(this.editStart=new H(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new H(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new H(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new H(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new H(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new H(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range.insert)||T.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof r.resolveCompletionItem!=`function`&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration===void 0?-1:this._resolveDuration}async resolve(e){if(!this._resolveCache){let t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),n=new vd(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(e=>{Object.assign(this.completion,e),this._resolveDuration=n.elapsed()},e=>{_d(e)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}},hj=class e{static#e=this.default=new e;constructor(e=2,t=new Set,n=new Set,r=new Map,i=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.providerItemsToReuse=r,this.showDeprecated=i}},_j=class{constructor(e,t,n,r){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=r}},vj=new Map,vj.set(0,lj),vj.set(2,uj),vj.set(1,cj),hn.registerCommand(`_executeCompletionItemProvider`,async(e,...t)=>{let[n,r,i,a]=t;en(Fc.isUri(n)),en(H.isIPosition(r)),en(typeof i==`string`||!i),en(typeof a==`number`||!a);let{completionProvider:o}=e.get(V),s=await e.get(d).createModelReference(n);try{let e={incomplete:!1,suggestions:[]},t=[],n=s.object.textEditorModel.validatePosition(r),c=await sj(o,s.object.textEditorModel,n,void 0,{triggerCharacter:i??void 0,triggerKind:i?1:0});for(let n of c.items)t.length<(a??0)&&t.push(n.resolve(W.None)),e.incomplete=e.incomplete||n.container.incomplete,e.suggestions.push(n.completion);try{return await Promise.all(t),e}finally{setTimeout(()=>c.disposable.dispose(),100)}}finally{s.dispose()}}),yj=class{static isAllOff(e){return e.other===`off`&&e.comments===`off`&&e.strings===`off`}static isAllOn(e){return e.other===`on`&&e.comments===`on`&&e.strings===`on`}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}})),xj,Sj=t((()=>{C(),P(),xj=class{static#e=this.inlineSuggestionVisible=new De(`inlineSuggestionVisible`,!1,A(1181,`Whether an inline suggestion is visible`));static#t=this.inlineSuggestionHasIndentation=new De(`inlineSuggestionHasIndentation`,!1,A(1182,`Whether the inline suggestion starts with whitespace`));static#n=this.inlineSuggestionHasIndentationLessThanTabSize=new De(`inlineSuggestionHasIndentationLessThanTabSize`,!0,A(1183,`Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab`));static#r=this.suppressSuggestions=new De(`inlineSuggestionSuppressSuggestions`,void 0,A(1184,`Whether suggestions should be suppressed for the current suggestion`));static#i=this.cursorBeforeGhostText=new De(`cursorBeforeGhostText`,!1,A(1185,`Whether the cursor is at ghost text`));static#a=this.cursorInIndentation=new De(`cursorInIndentation`,!1,A(1186,`Whether the cursor is in indentation`));static#o=this.hasSelection=new De(`editor.hasSelection`,!1,A(1187,`Whether the editor has a selection`));static#s=this.cursorAtInlineEdit=new De(`cursorAtInlineEdit`,!1,A(1188,`Whether the cursor is at an inline edit`));static#c=this.inlineEditVisible=new De(`inlineEditIsVisible`,!1,A(1189,`Whether an inline edit is visible`));static#l=this.tabShouldJumpToInlineEdit=new De(`tabShouldJumpToInlineEdit`,!1,A(1190,`Whether tab should jump to an inline edit.`));static#u=this.tabShouldAcceptInlineEdit=new De(`tabShouldAcceptInlineEdit`,!1,A(1191,`Whether tab should accept the inline edit.`));static#d=this.inInlineEditsPreviewEditor=new De(`inInlineEditsPreviewEditor`,!0,A(1192,`Whether the current code editor is showing an inline edits preview`))}}));function Cj(e){return e.sourceId+` @@ `+JSON.stringify({...e,modelUri:e.modelUri?.toString(),sourceId:void 0})}function wj(e,t){return Dp(t.onDidChangeContext,()=>t.getContextKeyValue(e))}var Tj,Ej,Dj,Oj=t((()=>{q(),ls(),C(),bl(),Tj=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ej=function(e,t){return function(n,r){t(n,r,e)}},Dj=class extends z{static cast(){return this}constructor(e,t,n){super(),this._key=e,this._contextKeyService=t,this._dataChannelService=n,this._isEnabledContextKeyValue=wj(`structuredLogger.enabled:`+this._key,this._contextKeyService).recomputeInitiallyAndOnChange(this._store),this.isEnabled=this._isEnabledContextKeyValue.map(e=>e!==void 0)}log(e){return this._isEnabledContextKeyValue.get()?(this._dataChannelService.getDataChannel(`structuredLogger:`+this._key).sendData(e),!0):!1}},Dj=Tj([Ej(1,bh),Ej(2,c)],Dj)})),kj,Aj,jj,Mj=t((()=>{q(),ls(),F(),$s(),ol(),Oj(),kj=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Aj=function(e,t){return function(n,r){t(n,r,e)}},jj=class extends z{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._loggerService=n,this._structuredLogger=this._register(this._instantiationService.createInstance(Dj.cast(),`editor.inlineSuggest.logChangeReason.commandId`));let r=this._loggerService?.createLogger(`textModelChanges`,{hidden:!1,name:`Text Model Changes Reason`}),i=Dp(this,r.onDidChangeLogLevel,()=>r.getLevel());this._register(Xl(e=>{xu(i.read(e),rp.Trace)&&e.store.add(this._editor.onDidChangeModelContent(e=>{this._editor.getModel()?.uri.scheme!==`output`&&r.trace(`onDidChangeModelContent: `+e.detailedReasons.map(e=>e.toKey(Number.MAX_VALUE)).join(`, `))}))})),this._register(Xl(e=>{this._editor instanceof m&&this._structuredLogger.isEnabled.read(e)&&e.store.add(this._editor.onDidChangeModelContent(e=>{let t=this._editor.getModel();if(!t)return;let n=e.detailedReasons[0],r={...n.metadata,sourceId:`TextModel.setChangeReason`,source:n.metadata.source,time:Date.now(),modelUri:t.uri,modelVersion:t.getVersionId()};setTimeout(()=>{this._structuredLogger.log(r)},0)}))}))}},jj=kj([Aj(1,U),Aj(2,Jd)],jj)})),Nj=t((()=>{}));function Pj(e,t=_n){return Ls(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}var Fj=t((()=>{pm(),Rt()})),Ij,Lj,Rj,zj,Bj,Vj,Hj,Uj,Wj,Gj,Kj=t((()=>{Fj(),jl(),Tl(),Ga(),ne(),oo(),k_(),P(),xc(),Ij=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Lj=function(e,t){return function(n,r){t(n,r,e)}},Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0}),Rj=class{constructor(e){this._delegates=e}resolve(e){for(let t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}},zj=class{constructor(e,t,n,r){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=r}resolve(e){let{name:t}=e;if(t===`SELECTION`||t===`TM_SELECTED_TEXT`){let t=this._model.getValueInRange(this._selection)||void 0,n=this._selection.startLineNumber!==this._selection.endLineNumber;if(!t&&this._overtypingCapturer){let e=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);e&&(t=e.value,n=e.multiline)}if(t&&n&&e.snippet){let n=Pm(this._model.getLineContent(this._selection.startLineNumber),0,this._selection.startColumn-1),r=n;e.snippet.walk(t=>t===e?!1:(t instanceof b_&&(r=Pm(Li(t.value).pop())),!0));let i=uu(r,n);t=t.replace(/(\r\n|\r|\n)(.*)/g,(e,t,n)=>`${t}${r.substr(i)}${n}`)}return t}else if(t===`TM_CURRENT_LINE`)return this._model.getLineContent(this._selection.positionLineNumber);else if(t===`TM_CURRENT_WORD`){let e=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return e&&e.word||void 0}else if(t===`TM_LINE_INDEX`)return String(this._selection.positionLineNumber-1);else if(t===`TM_LINE_NUMBER`)return String(this._selection.positionLineNumber);else if(t===`CURSOR_INDEX`)return String(this._selectionIdx);else if(t===`CURSOR_NUMBER`)return String(this._selectionIdx+1)}},Bj=class{constructor(e,t){this._labelService=e,this._model=t}resolve(e){let{name:t}=e;if(t===`TM_FILENAME`)return rm(this._model.uri.fsPath);if(t===`TM_FILENAME_BASE`){let e=rm(this._model.uri.fsPath),t=e.lastIndexOf(`.`);return t<=0?e:e.slice(0,t)}else if(t===`TM_DIRECTORY`)return Qc(this._model.uri.fsPath)===`.`?``:this._labelService.getUriLabel(gd(this._model.uri));else if(t===`TM_FILEPATH`)return this._labelService.getUriLabel(this._model.uri);else if(t===`RELATIVE_FILEPATH`)return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}},Vj=class{constructor(e,t,n,r){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=r}resolve(e){if(e.name!==`CLIPBOARD`)return;let t=this._readClipboardText();if(t){if(this._spread){let e=t.split(/\r\n|\n|\r/).filter(e=>!ut(e));if(e.length===this._selectionCount)return e[this._selectionIdx]}return t}}},Hj=class{constructor(e,t,n){this._model=e,this._selection=t,this._languageConfigurationService=n}resolve(e){let{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),r=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(r){if(t===`LINE_COMMENT`)return r.lineCommentToken||void 0;if(t===`BLOCK_COMMENT_START`)return r.blockCommentStartToken||void 0;if(t===`BLOCK_COMMENT_END`)return r.blockCommentEndToken||void 0}}},Hj=Ij([Lj(2,yn)],Hj),Uj=class e{constructor(){this._date=new Date}static#e=this.dayNames=[A(1388,`Sunday`),A(1389,`Monday`),A(1390,`Tuesday`),A(1391,`Wednesday`),A(1392,`Thursday`),A(1393,`Friday`),A(1394,`Saturday`)];static#t=this.dayNamesShort=[A(1395,`Sun`),A(1396,`Mon`),A(1397,`Tue`),A(1398,`Wed`),A(1399,`Thu`),A(1400,`Fri`),A(1401,`Sat`)];static#n=this.monthNames=[A(1402,`January`),A(1403,`February`),A(1404,`March`),A(1405,`April`),A(1406,`May`),A(1407,`June`),A(1408,`July`),A(1409,`August`),A(1410,`September`),A(1411,`October`),A(1412,`November`),A(1413,`December`)];static#r=this.monthNamesShort=[A(1414,`Jan`),A(1415,`Feb`),A(1416,`Mar`),A(1417,`Apr`),A(1418,`May`),A(1419,`Jun`),A(1420,`Jul`),A(1421,`Aug`),A(1422,`Sep`),A(1423,`Oct`),A(1424,`Nov`),A(1425,`Dec`)];resolve(t){let{name:n}=t;if(n===`CURRENT_YEAR`)return String(this._date.getFullYear());if(n===`CURRENT_YEAR_SHORT`)return String(this._date.getFullYear()).slice(-2);if(n===`CURRENT_MONTH`)return String(this._date.getMonth().valueOf()+1).padStart(2,`0`);if(n===`CURRENT_DATE`)return String(this._date.getDate().valueOf()).padStart(2,`0`);if(n===`CURRENT_HOUR`)return String(this._date.getHours().valueOf()).padStart(2,`0`);if(n===`CURRENT_MINUTE`)return String(this._date.getMinutes().valueOf()).padStart(2,`0`);if(n===`CURRENT_SECOND`)return String(this._date.getSeconds().valueOf()).padStart(2,`0`);if(n===`CURRENT_DAY_NAME`)return e.dayNames[this._date.getDay()];if(n===`CURRENT_DAY_NAME_SHORT`)return e.dayNamesShort[this._date.getDay()];if(n===`CURRENT_MONTH_NAME`)return e.monthNames[this._date.getMonth()];if(n===`CURRENT_MONTH_NAME_SHORT`)return e.monthNamesShort[this._date.getMonth()];if(n===`CURRENT_SECONDS_UNIX`)return String(Math.floor(this._date.getTime()/1e3));if(n===`CURRENT_TIMEZONE_OFFSET`){let e=this._date.getTimezoneOffset(),t=e>0?`-`:`+`,n=Math.trunc(Math.abs(e/60)),r=n<10?`0`+n:n,i=Math.abs(e)-n*60,a=i<10?`0`+i:i;return t+r+`:`+a}}},Wj=class{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;let t=Fm(this._workspaceService.getWorkspace());if(!Zm(t)){if(e.name===`WORKSPACE_NAME`)return this._resolveWorkspaceName(t);if(e.name===`WORKSPACE_FOLDER`)return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(Aa(e))return rm(e.uri.path);let t=rm(e.configPath.path);return t.endsWith(`code-workspace`)&&(t=t.substr(0,t.length-dh.length-1)),t}_resoveWorkspacePath(e){if(Aa(e))return Pj(e.uri.fsPath);let t=rm(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?Pj(n):`/`}},Gj=class{resolve(e){let{name:t}=e;if(t===`RANDOM`)return Math.random().toString().slice(-6);if(t===`RANDOM_HEX`)return Math.random().toString(16).slice(-6);if(t===`UUID`)return ta()}}})),qj,Jj,Yj,Xj,Zj,Qj,$j=t((()=>{sn(),q(),Ga(),Nj(),vr(),_(),ze(),oo(),md(),Vc(),xc(),k_(),Kj(),ah(),qj=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Jj=function(e,t){return function(n,r){t(n,r,e)}},Xj=class e{static#e=this._decor={active:L.register({description:`snippet-placeholder-1`,stickiness:0,className:`snippet-placeholder`}),inactive:L.register({description:`snippet-placeholder-2`,stickiness:1,className:`snippet-placeholder`}),activeFinal:L.register({description:`snippet-placeholder-3`,stickiness:1,className:`finish-snippet-placeholder`}),inactiveFinal:L.register({description:`snippet-placeholder-4`,stickiness:1,className:`finish-snippet-placeholder`})};constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=zo(t.placeholders,S_.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw Error(`Snippet not initialized!`);if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let t=this._editor.getModel();this._editor.changeDecorations(n=>{for(let r of this._snippet.placeholders){let i=this._snippet.offset(r),a=this._snippet.fullLen(r),o=T.fromPositions(t.getPositionAt(this._offset+i),t.getPositionAt(this._offset+i+a)),s=r.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive,c=n.addDecoration(o,s);this._placeholderDecorations.set(r,c)}})}move(t){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let e=[];for(let t of this._placeholderGroups[this._placeholderGroupsIdx])if(t.transform){let n=this._placeholderDecorations.get(t),r=this._editor.getModel().getDecorationRange(n),i=this._editor.getModel().getValueInRange(r),a=t.transform.resolve(i).split(/\r\n|\r|\n/);for(let e=1;e<a.length;e++)a[e]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+a[e]);e.push(un.replace(r,a.join(this._editor.getModel().getEOL())))}e.length>0&&this._editor.executeEdits(`snippet.placeholderTransform`,e)}let n=!1;t===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,n=!0):t===!1&&this._placeholderGroupsIdx>0&&(--this._placeholderGroupsIdx,n=!0);let r=this._editor.getModel().changeDecorations(t=>{let r=new Set,i=[];for(let a of this._placeholderGroups[this._placeholderGroupsIdx]){let o=this._placeholderDecorations.get(a),s=this._editor.getModel().getDecorationRange(o);i.push(new X(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn)),n&&=this._hasPlaceholderBeenCollapsed(a),t.changeDecorationOptions(o,a.isFinalTabstop?e._decor.activeFinal:e._decor.active),r.add(a);for(let n of this._snippet.enclosingPlaceholders(a)){let i=this._placeholderDecorations.get(n);t.changeDecorationOptions(i,n.isFinalTabstop?e._decor.activeFinal:e._decor.active),r.add(n)}}for(let[n,i]of this._placeholderDecorations)r.has(n)||t.changeDecorationOptions(i,n.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive);return i});return n?this.move(t):r??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof S_){let e=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(e).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){let[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){let e=new Map;for(let t of this._placeholderGroups){let n;for(let r of t){if(r.isFinalTabstop)break;n||(n=[],e.set(r.index,n));let t=this._placeholderDecorations.get(r),i=this._editor.getModel().getDecorationRange(t);if(!i){e.delete(r.index);break}n.push(i)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;let e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;let t=this._placeholderDecorations.get(e);if(!t)return;let n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof C_,!e)),e}merge(t){let n=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(r=>{for(let i of this._placeholderGroups[this._placeholderGroupsIdx]){let a=t.shift();console.assert(a._offset!==-1),console.assert(!a._placeholderDecorations);let o=a._snippet.placeholderInfo.last.index;for(let e of a._snippet.placeholderInfo.all)e.isFinalTabstop?e.index=i.index+(o+1)/this._nestingLevel:e.index=i.index+e.index/this._nestingLevel;this._snippet.replace(i,a._snippet.children);let s=this._placeholderDecorations.get(i);r.removeDecoration(s),this._placeholderDecorations.delete(i);for(let t of a._snippet.placeholders){let i=a._snippet.offset(t),o=a._snippet.fullLen(t),s=T.fromPositions(n.getPositionAt(a._offset+i),n.getPositionAt(a._offset+i+o)),c=r.addDecoration(s,e._decor.inactive);this._placeholderDecorations.set(t,c)}}this._placeholderGroups=zo(this._snippet.placeholders,S_.compareByIndex)})}},Zj={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},Qj=Yj=class{static adjustWhitespace(e,t,n,r,i){let a=Pm(e.getLineContent(t.lineNumber),0,t.column-1),o;return r.walk(t=>{if(!(t instanceof b_)||t.parent instanceof C_||i&&!i.has(t))return!0;let s=t.value.split(/\r\n|\r|\n/);if(n){let n=r.offset(t);if(n===0)s[0]=e.normalizeIndentation(s[0]);else{o??=r.toString();let t=o.charCodeAt(n-1);(t===10||t===13)&&(s[0]=e.normalizeIndentation(a+s[0]))}for(let t=1;t<s.length;t++)s[t]=e.normalizeIndentation(a+s[t])}let c=s.join(e.getEOL());return c!==t.value&&(t.parent.replace(t,[new b_(c)]),o=void 0),!0}),a}static adjustSelection(e,t,n,r){if(n!==0||r!==0){let{positionLineNumber:i,positionColumn:a}=t,o=a-n,s=a+r,c=e.validateRange({startLineNumber:i,startColumn:o,endLineNumber:i,endColumn:s});t=X.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,r,i,a,o,s,c){let l=[],u=[];if(!e.hasModel())return{edits:l,snippets:u};let d=e.getModel(),f=e.invokeWithinContext(e=>e.get(ym)),p=e.invokeWithinContext(e=>new Bj(e.get(Ap),d)),m=()=>o,h=d.getValueInRange(Yj.adjustSelection(d,e.getSelection(),n,0)),ee=d.getValueInRange(Yj.adjustSelection(d,e.getSelection(),0,r)),te=d.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),ne=e.getSelections().map((e,t)=>({selection:e,idx:t})).sort((e,t)=>T.compareRangesUsingStarts(e.selection,t.selection));for(let{selection:o,idx:re}of ne){let ie=Yj.adjustSelection(d,o,n,0),ae=Yj.adjustSelection(d,o,0,r);h!==d.getValueInRange(ie)&&(ie=o),ee!==d.getValueInRange(ae)&&(ae=o);let oe=o.setStartPosition(ie.startLineNumber,ie.startColumn).setEndPosition(ae.endLineNumber,ae.endColumn),se=new O_().parse(t,!0,i),ce=oe.getStartPosition(),le=Yj.adjustWhitespace(d,ce,a||re>0&&te!==d.getLineFirstNonWhitespaceColumn(o.positionLineNumber),se);se.resolveVariables(new Rj([p,new Vj(m,re,ne.length,e.getOption(87)===`spread`),new zj(d,o,re,s),new Hj(d,o,c),new Uj,new Wj(f),new Gj])),l[re]=un.replace(oe,se.toString()),l[re].identifier={major:re,minor:0},l[re]._isTracked=!0,u[re]=new Xj(e,se,le)}return{edits:l,snippets:u}}static createEditsAndSnippetsFromEdits(e,t,n,r,i,a,o){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};let s=[],c=e.getModel(),l=new O_,u=new D_,d=new Rj([e.invokeWithinContext(e=>new Bj(e.get(Ap),c)),new Vj(()=>i,0,e.getSelections().length,e.getOption(87)===`spread`),new zj(c,e.getSelection(),0,a),new Hj(c,e.getSelection(),o),new Uj,new Wj(e.invokeWithinContext(e=>e.get(ym))),new Gj]);t=t.sort((e,t)=>T.compareRangesUsingStarts(e.range,t.range));let f=0;for(let e=0;e<t.length;e++){let{range:n,template:i,keepWhitespace:a}=t[e];if(e>0){let r=t[e-1].range,i=T.fromPositions(r.getEndPosition(),n.getStartPosition()),a=new b_(c.getValueInRange(i));u.appendChild(a),f+=a.value.length}let o=l.parseFragment(i,u);Yj.adjustWhitespace(c,n.getStartPosition(),a===void 0?r:!a,u,new Set(o)),u.resolveVariables(d);let p=u.toString(),m=p.slice(f);f=p.length;let h=un.replace(n,m);h.identifier={major:e,minor:0},h._isTracked=!0,s.push(h)}return l.ensureFinalTabstop(u,n,!0),{edits:s,snippets:[new Xj(e,u,``)]}}constructor(e,t,n=Zj,r){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=r,this._templateMerges=[],this._snippets=[]}dispose(){hm(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(` -> `)}"`}insert(e){if(!this._editor.hasModel())return;let{edits:t,snippets:n}=typeof this._template==`string`?Yj.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Yj.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=n,this._editor.executeEdits(e??dm.snippet(),t,e=>{let t=e.filter(e=>!!e.identifier);for(let e=0;e<n.length;e++)n[e].initialize(t[e].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):t.map(e=>X.fromPositions(e.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=Zj){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);let{edits:n,snippets:r}=Yj.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits(`snippet`,n,e=>{let t=e.filter(e=>!!e.identifier);for(let e=0;e<r.length;e++)r[e].initialize(t[e].textChange);let n=r[0].isTrivialSnippet;if(!n){for(let e of this._snippets)e.merge(r);console.assert(r.length===0)}return this._snippets[0].hasPlaceholder&&!n?this._move(void 0):t.map(e=>X.fromPositions(e.range.getEndPosition()))})}next(){let e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){let e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){let t=[];for(let n of this._snippets){let r=n.move(e);t.push(...r)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(let n of this._snippets){let r=n.computePossibleSelections();if(t.size===0)for(let[n,i]of r){i.sort(T.compareRangesUsingStarts);for(let r of e)if(i[0].containsRange(r)){t.set(n,[]);break}}if(t.size===0)return!1;t.forEach((e,t)=>{e.push(...r.get(t))})}e.sort(T.compareRangesUsingStarts);for(let[n,r]of t){if(r.length!==e.length){t.delete(n);continue}r.sort(T.compareRangesUsingStarts);for(let i=0;i<r.length;i++)if(!r[i].containsRange(e[i])){t.delete(n);continue}}return t.size>0}},Qj=Yj=qj([Jj(3,yn)],Qj)})),eM,tM,nM,rM,iM,aM,oM=t((()=>{q(),lr(),v(),Su(),yc(),oo(),yu(),bj(),P(),C(),$s(),$j(),eM=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tM=function(e,t){return function(n,r){t(n,r,e)}},rM={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},iM=class{static#e=nM=this;static#t=this.ID=`snippetController2`;static get(e){return e.getContribution(nM.ID)}static#n=this.InSnippetMode=new De(`inSnippetMode`,!1,A(1384,`Whether the editor in current in snippet mode`));static#r=this.HasNextTabstop=new De(`hasNextTabstop`,!1,A(1385,`Whether there is a next tab stop when in snippet mode`));static#i=this.HasPrevTabstop=new De(`hasPrevTabstop`,!1,A(1386,`Whether there is a previous tab stop when in snippet mode`));constructor(e,t,n,r,i){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=i,this._snippetListener=new I,this._modelVersionId=-1,this._inSnippet=nM.InSnippetMode.bindTo(r),this._hasNextTabstop=nM.HasNextTabstop.bindTo(r),this._hasPrevTabstop=nM.HasPrevTabstop.bindTo(r)}dispose(){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._session?.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,t===void 0?rM:{...rM,...t})}catch(t){this.cancel(),this._logService.error(t),this._logService.error(`snippet_error`),this._logService.error(`insert_template=`,e),this._logService.error(`existing_template=`,this._session?this._session._logInfo():`<no_session>`)}}_doInsert(e,t){if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!=`string`&&this.cancel(),this._session?(en(typeof e==`string`),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Qj(this._editor,e,t,this._languageConfigurationService),this._session.insert(t.reason)),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._session?.hasChoice){let e={_debugDisplayName:`snippetChoiceCompletions`,provideCompletionItems:(e,t)=>{if(!this._session||e!==this._editor.getModel()||!H.equals(this._editor.getPosition(),t))return;let{activeChoice:n}=this._session;if(!n||n.choice.options.length===0)return;let r=e.getValueInRange(n.range),i=!!n.choice.options.find(e=>e.value===r),a=[];for(let e=0;e<n.choice.options.length;e++){let t=n.choice.options[e];a.push({kind:13,label:t.value,insertText:t.value,sortText:`a`.repeat(e+1),range:n.range,filterText:i?`${r}_${t.value}`:void 0,command:{id:`jumpToNextSnippetPlaceholder`,title:A(1387,`Go to next placeholder...`)}})}return{suggestions:a}}},t=this._editor.getModel(),n,r=!1;this._choiceCompletions={provider:e,enable:()=>{r||=(n=this._languageFeaturesService.completionProvider.register({language:t.getLanguageId(),pattern:t.uri.fsPath,scheme:t.uri.scheme,exclusive:!0},e),this._snippetListener.add(n),!0)},disable:()=>{n?.dispose(),r=!1}}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(e=>e.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId()||!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}let{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){this._choiceCompletions?.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{fj(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,this._session?.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session?.prev(),this._updateState()}next(){this._session?.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},iM=nM=eM([tM(1,Fp),tM(2,V),tM(3,bh),tM(4,yn)],iM),k(iM.ID,iM,4),aM=dn.bindToContribution(iM.get),E(new aM({id:`jumpToNextSnippetPlaceholder`,precondition:b.and(iM.InSnippetMode,iM.HasNextTabstop),handler:e=>e.next(),kbOpts:{weight:130,kbExpr:J.textInputFocus,primary:2}})),E(new aM({id:`jumpToPrevSnippetPlaceholder`,precondition:b.and(iM.InSnippetMode,iM.HasPrevTabstop),handler:e=>e.prev(),kbOpts:{weight:130,kbExpr:J.textInputFocus,primary:1026}})),E(new aM({id:`leaveSnippet`,precondition:iM.InSnippetMode,handler:e=>e.cancel(!0),kbOpts:{weight:130,kbExpr:J.textInputFocus,primary:9,secondary:[1033]}})),E(new aM({id:`acceptSnippet`,precondition:iM.InSnippetMode,handler:e=>e.finish()}))}));function sM(e){return new cM(e)}var cM,lM=t((()=>{On(),cM=class extends pn{constructor(e){super(),this._textModel=e}getOffset(e){return this._textModel.getOffsetAt(e)}getPosition(e){return this._textModel.getPositionAt(e)}}}));function uM(){return gM}function dM(e){return fM(e).map(e=>e.getEndPosition())}function fM(e){let t=Bi.createSortPermutation(e,Fe(e=>e.range,T.compareRangesUsingStarts)),n=new xr(t.apply(e)).getNewRanges();return t.inverse().apply(n)}function pM(e,t){let n=sM(t),r=t.getValue();return e.map(e=>n.getStringReplacement(e)).map(e=>e.removeCommonSuffixPrefix(r)).map(e=>n.getTextReplacement(e))}function mM(e,t){let n=Cc(`result`,[]),r=[];return t.add(Xl(t=>{let i=e.read(t);Ot(e=>{if(i.length!==r.length){r.length=i.length;for(let e=0;e<r.length;e++)r[e]||(r[e]=Cc(`item`,i[e]));n.set([...r],e)}r.forEach((t,n)=>t.set(i[n],e))})})),n}function hM(e,t){return new Promise(n=>{let r,i=setTimeout(()=>{r&&r.dispose(),n()},e);t&&(r=t.onCancellationRequested(()=>{clearTimeout(i),r&&r.dispose(),n()}))})}var gM,_M,vM=t((()=>{sn(),ls(),ao(),_(),yh(),lM(),gM=[],_M=class{constructor(e){this._contextKeyService=e}bind(e,t){return vn(e,this._contextKeyService,t instanceof Function?t:e=>t.read(e))}}}));function yM(e,t,n,r){return e===r?t+n:n*(-(2**(-10*e/r))+1)+t}function bM(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}var xM,SM,CM,wM=t((()=>{y(),ls(),xM=class{constructor(e,t,n,r=yM){this.startValue=e,this.endValue=t,this.durationMs=n,this._interpolationFunction=r,this.startTimeMs=Date.now(),e===t&&(this.durationMs=0)}isFinished(){return Date.now()>=this.startTimeMs+this.durationMs}getValue(){let e=Date.now()-this.startTimeMs;return e>=this.durationMs?this.endValue:this._interpolationFunction(e,this.startValue,this.endValue-this.startValue,this.durationMs)}},SM=class{constructor(e){this._value=Cc(this,e)}getValue(e){let t=this._value.read(e);return t.isFinished()||CM.instance.invalidateOnNextAnimationFrame(e),t.getValue()}},CM=class e{constructor(){this._counter=bf(this),this._isScheduled=!1}static#e=this.instance=new e;invalidateOnNextAnimationFrame(e){this._counter.read(e),this._isScheduled||(this._isScheduled=!0,xt().requestAnimationFrame(()=>{this._isScheduled=!1,this._update()}))}_update(){this._counter.trigger(void 0)}}}));function TM(e,t){return uo(e,t,EM)}function EM(e,t){return e===t?!0:!e||!t?!1:e instanceof DM&&t instanceof DM||e instanceof kM&&t instanceof kM?e.equals(t):!1}var DM,OM,kM,AM=t((()=>{sn(),Ga(),Su(),_(),yh(),zm(),Cu(),DM=class{constructor(e,t){this.lineNumber=e,this.parts=t,Lp(()=>ip(t,(e,t)=>e.column<=t.column))}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,n)=>t.equals(e.parts[n]))}renderForScreenReader(e){if(this.parts.length===0)return``;let t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return new xr([...this.parts.map(e=>new ca(T.fromPositions(new H(1,e.column)),e.lines.map(e=>e.line).join(`
`)))]).applyToString(n).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}},OM=class{constructor(e,t,n,r=[]){this.column=e,this.text=t,this.preview=n,this._inlineDecorations=r,this.lines=Li(this.text).map((e,t)=>({line:e,lineDecorations:$e.filter(this._inlineDecorations,t+1,1,e.length+1)}))}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,n)=>t.line===e.lines[n].line&&$e.equalsArr(t.lineDecorations,e.lines[n].lineDecorations))}},kM=class{constructor(e,t,n,r=0){this.lineNumber=e,this.columnRange=t,this.text=n,this.additionalReservedLineCount=r,this.parts=[new OM(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=Li(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,n)=>t===e.newLines[n])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}}));function jM(e,t,n){let r=n?e.range.intersectRanges(n):e.range;if(!r)return e;let i=e.text.replaceAll(`\r
`,`
`),a=t.getValueInRange(r,1),o=uu(a,i),s=eo.ofText(a.substring(0,o)).addToPosition(e.range.getStartPosition()),c=i.substring(o);return new ca(T.fromPositions(s,e.range.getEndPosition()),c)}function MM(e,t){return e.text.startsWith(t.text)&&NM(e.range,t.range)}function NM(e,t){return t.getStartPosition().equals(e.getStartPosition())&&t.getEndPosition().isBeforeOrEqual(e.getEndPosition())}var PM=t((()=>{Ga(),_(),ko(),yh()}));function FM(e,t,n,r,i=0){let a=jM(e,t);if(a.range.endLineNumber!==a.range.startLineNumber)return;let o=t.getLineContent(a.range.startLineNumber),s=Pm(o).length;if(a.range.startColumn-1<=s){let e=Pm(a.text).length,t=o.substring(a.range.startColumn-1,s),[n,r]=[a.range.getStartPosition(),a.range.getEndPosition()],i=n.column+t.length<=r.column?n.delta(0,t.length):r;a=new ca(T.fromPositions(i,r),a.text.startsWith(t)?a.text.substring(t.length):a.text.substring(e))}let c=t.getValueInRange(a.range),l=IM(c,a.text);if(!l)return;let u=a.range.startLineNumber,d=[];if(n===`prefix`){let e=l.filter(e=>e.originalLength===0);if(e.length>1||e.length===1&&e[0].originalStart!==c.length)return}let f=a.text.length-i;for(let e of l){let t=a.range.startColumn+e.originalStart+e.originalLength;if(n===`subwordSmart`&&r&&r.lineNumber===a.range.startLineNumber&&t<r.column||e.originalLength>0)return;if(e.modifiedLength===0)continue;let i=e.modifiedStart+e.modifiedLength,o=Math.max(e.modifiedStart,Math.min(i,f)),s=a.text.substring(e.modifiedStart,o),c=a.text.substring(o,Math.max(e.modifiedStart,i));s.length>0&&d.push(new OM(t,s,!1)),c.length>0&&d.push(new OM(t,c,!0))}return new DM(u,d)}function IM(e,t){if(zM?.originalValue===e&&zM?.newValue===t)return zM?.changes;{let n=RM(e,t,!0);if(n){let r=LM(n);if(r>0){let i=RM(e,t,!1);i&&LM(i)<r&&(n=i)}}return zM={originalValue:e,newValue:t,changes:n},n}}function LM(e){let t=0;for(let n of e)t+=n.originalLength;return t}function RM(e,t,n){if(e.length>5e3||t.length>5e3)return;function r(e){let t=0;for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r>t&&(t=r)}return t}let i=Math.max(r(e),r(t));function a(e){if(e<0)throw Error(`unexpected`);return i+e+1}function o(e){let t=0,r=0,i=new Int32Array(e.length);for(let o=0,s=e.length;o<s;o++)n&&e[o]===`(`?(i[o]=a(2*(r*100+t)),t++):n&&e[o]===`)`?(t=Math.max(t-1,0),i[o]=a(2*(r*100+t)+1),t===0&&r++):i[o]=e.charCodeAt(o);return i}let s=o(e),c=o(t);return new Za({getElements:()=>s},{getElements:()=>c}).ComputeDiff(!1).changes}var zM,BM=t((()=>{jt(),Ga(),_(),yh(),AM(),PM(),zM=void 0}));function VM(e,t){let n,r=!1,i=new Bd(new na(e,void 0,t.update),(e,i)=>{r||=(n=t.initial instanceof Function?t.initial():t.initial,!0);let a=t.update(e,n,i);return n=a,a},t.changeTracker,()=>{r&&=(t.disposeFinal?.(n),!1)},t.equalityComparer??Kr,(e,t,a)=>{if(!r)throw new tc(`Can only set when there is a listener! This is to prevent leaks.`);Ja(t,t=>{n=e,i.setValue(e,t,a)})},$m.ofCaller());return i}var HM=t((()=>{pt(),Lm(),re(),pu(),Ma()}));function UM(e){let t=e.map(e=>new Wn(pa.ofStartAndLength(e.rangeOffset,e.rangeLength),e.text));return t.reverse(),new Vf(t)}var WM=t((()=>{Go(),wh()}));function GM(e,t,n,r){let i=jM(e,n),a=e.range;if(!a||t&&!t.getStartPosition().equals(a.getStartPosition())||r.lineNumber!==i.range.startLineNumber||i.isEmpty)return!1;let o=n.getValueInRange(i.range,1),s=i.text,c=Math.max(0,r.column-i.range.startColumn),l=s.substring(0,c),u=s.substring(c),d=o.substring(0,c),f=o.substring(c),p=n.getLineIndentColumn(i.range.startLineNumber);return i.range.startColumn<=p&&(d=d.trimStart(),d.length===0&&(f=f.trimStart()),l=l.trimStart(),l.length===0&&(u=u.trimStart())),l.startsWith(d)&&!!yi(f,u)}function KM(e,t,n){let r=e.getEOL(),i=e.getValueInRange(t),a=n.replace(/\r\n|\r|\n/g,r),o=Gi.getDefault().computeDiff(Li(i),Li(a),{ignoreTrimWhitespace:!1,computeMoves:!1,extendToSubwords:!0,maxComputationTimeMs:500}).changes.flatMap(e=>e.innerChanges??[]);function s(e,t){let n=eo.fromPosition(t.getStartPosition());return eo.ofRange(t).createRange(n.addToPosition(e))}let c=new Te(a);return new Vf(o.map(n=>{let r=s(t.getStartPosition(),n.originalRange);return JM(new Wn(sM(e).getOffsetRange(r),c.getValueOfRange(n.modifiedRange)),e.getValueInRange(r),o.length,e)}))}function qM(e,t){let n=t.getEOL();return e.replaceRange.isEmpty&&e.newText.includes(n)&&(e=YM(e,t)),e}function JM(e,t,n,r){let i=r.getEOL();if(e.newText.endsWith(i)&&t.endsWith(i)&&(e=new Wn(e.replaceRange.deltaEnd(-i.length),e.newText.slice(0,-i.length))),n===1&&e.replaceRange.isEmpty&&e.newText.includes(i)){let t=r.getPositionAt(e.replaceRange.start);r.getLineLength(t.lineNumber)!==0&&(e=YM(e,r))}if(n===1){let n=uu(t,e.newText),r=ql(t.slice(n),e.newText.slice(n));if(n+r===t.length)return new Wn(e.replaceRange.deltaStart(n).deltaEnd(-r),e.newText.substring(n,e.newText.length-r));if(n+r===e.newText.length)return new Wn(e.replaceRange.deltaStart(n).deltaEnd(-r),``)}return e}function YM(e,t){if(!e.replaceRange.isEmpty)throw new tc(`Unexpected original range`);if(e.replaceRange.start===0)return e;let n=t.getEOL(),r=t.getPositionAt(e.replaceRange.start),i=r.column,a=r.lineNumber;return i===1&&a>1&&e.newText.endsWith(n)&&!e.newText.startsWith(n)?new Wn(e.replaceRange.delta(-1),n+e.newText.slice(0,-n.length)):e}var XM,ZM,QM,$M,eN,tN,nN,rN=t((()=>{M(),Ua(),ls(),Ga(),Go(),wh(),_(),yh(),go(),ko(),bs(),Gr(),Qn(),PM(),lM(),(function(e){function t(e,t){return e.isInlineEdit?tN.create(e,t):eN.create(e,t)}e.create=t})(XM||={}),ZM=class{constructor(e,t,n){this._data=e,this.identity=t,this.displayLocation=n}get source(){return this._data.source}get isFromExplicitRequest(){return this._data.context.triggerKind===Xe.Explicit}get forwardStable(){return this.source.inlineSuggestions.enableForwardStability??!1}get editRange(){return this.getSingleTextEdit().range}get targetRange(){return this.displayLocation?.range??this.editRange}get insertText(){return this.getSingleTextEdit().text}get semanticId(){return this.hash}get action(){return this._sourceInlineCompletion.action}get command(){return this._sourceInlineCompletion.command}get warning(){return this._sourceInlineCompletion.warning}get showInlineEditMenu(){return!!this._sourceInlineCompletion.showInlineEditMenu}get hash(){return JSON.stringify([this.getSingleTextEdit().text,this.getSingleTextEdit().range.getStartPosition().toString()])}get requestUuid(){return this._data.context.requestUuid}get partialAccepts(){return this._data.partialAccepts}get _sourceInlineCompletion(){return this._data.sourceInlineCompletion}addRef(){this.identity.addRef(),this.source.addRef()}removeRef(){this.identity.removeRef(),this.source.removeRef()}reportInlineEditShown(e,t,n){this._data.reportInlineEditShown(e,this.insertText,t,n)}reportPartialAccept(e,t,n){this._data.reportPartialAccept(e,t,n)}reportEndOfLife(e){this._data.reportEndOfLife(e)}setEndOfLifeReason(e){this._data.setEndOfLifeReason(e)}reportInlineEditError(e){this._data.reportInlineEditError(e)}setIsPreceeded(e){this._data.setIsPreceeded(e.partialAccepts)}getSourceCompletion(){return this._sourceInlineCompletion}},QM=class e{constructor(){this._onDispose=bf(this),this._refCount=1,this.id=`InlineCompletionIdentity`+ e.idCounter++}static#e=this.idCounter=0;addRef(){this._refCount++}removeRef(){this._refCount--,this._refCount===0&&this._onDispose.trigger(void 0)}},$M=class e{static create(t){return new e(t.range,t.label,t.kind)}constructor(e,t,n){this.range=e,this.label=t,this.kind=n}withEdit(t,n){let r=os([new pa(n.getOffset(this.range.getStartPosition()),n.getOffset(this.range.getEndPosition()))],t)[0];if(r)return new e(n.getRange(r),this.label,this.kind)}},eN=class e extends ZM{static create(t,n){let r=new QM,i=sM(n),a=t.insertText.replace(/\r\n|\r|\n/g,n.getEOL()),o=qM(new Wn(i.getOffsetRange(t.range),a),n),s=o.removeCommonSuffixAndPrefix(n.getValue()),c=i.getTextReplacement(o),l=t.displayLocation?$M.create(t.displayLocation):void 0;return new e(o,s,c,c.range,t.snippetInfo,t.additionalTextEdits,t,r,l)}constructor(e,t,n,r,i,a,o,s,c){super(o,s,c),this._edit=e,this._trimmedEdit=t,this._textEdit=n,this._originalRange=r,this.snippetInfo=i,this.additionalTextEdits=a,this.isInlineEdit=!1}get hash(){return JSON.stringify(this._trimmedEdit.toJson())}getSingleTextEdit(){return this._textEdit}withIdentity(t){return new e(this._edit,this._trimmedEdit,this._textEdit,this._originalRange,this.snippetInfo,this.additionalTextEdits,this._data,t,this.displayLocation)}withEdit(t,n){let r=os([this._edit.replaceRange],t);if(r.length===0)return;let i=new Wn(r[0],this._textEdit.text),a=sM(n),o=a.getTextReplacement(i),s=this.displayLocation;if(!(s&&(s=s.withEdit(t,a),!s)))return new e(i,i.removeCommonSuffixAndPrefix(n.getValue()),o,this._originalRange,this.snippetInfo,this.additionalTextEdits,this._data,this.identity,s)}canBeReused(e,t){let n=this._textEdit.range;return!!n&&n.containsPosition(t)&&this.isVisible(e,t)&&eo.ofRange(n).isGreaterThanOrEqualTo(eo.ofRange(this._originalRange))}isVisible(e,t){return GM(this.getSingleTextEdit(),this._originalRange,e,t)}},tN=class e extends ZM{static create(t,n){let r=KM(n,t.range,t.insertText),i=new Jf(n);return new e(r,xr.fromStringEdit(r,i).toReplacement(i),t,new QM,r.replacements.map(e=>{let t=T.fromPositions(n.getPositionAt(e.replaceRange.start),n.getPositionAt(e.replaceRange.endExclusive)),r=n.getValueInRange(t);return nN.create(e,r)}),t.displayLocation?$M.create(t.displayLocation):void 0,!1,n.getVersionId())}constructor(e,t,n,r,i,a,o=!1,s){super(n,r,a),this._edit=e,this._textEdit=t,this._edits=i,this._lastChangePartOfInlineEdit=o,this._inlineEditModelVersion=s,this.snippetInfo=void 0,this.additionalTextEdits=[],this.isInlineEdit=!0}get updatedEditModelVersion(){return this._inlineEditModelVersion}get updatedEdit(){return this._edit}getSingleTextEdit(){return this._textEdit}withIdentity(t){return new e(this._edit,this._textEdit,this._data,t,this._edits,this.displayLocation,this._lastChangePartOfInlineEdit,this._inlineEditModelVersion)}canBeReused(e,t){return this._lastChangePartOfInlineEdit&&this.updatedEditModelVersion===e.getVersionId()}withEdit(e,t){return this._applyTextModelChanges(e,this._edits,t)}_applyTextModelChanges(t,n,r){if(n=n.map(e=>e.applyTextModelChanges(t)),n.some(e=>e.edit===void 0))return;let i=r.getVersionId(),a=this._inlineEditModelVersion,o=n.some(e=>e.lastChangeUpdatedEdit);if(o&&(a=i??-1),i===null||a+20<i||(n=n.filter(e=>!e.edit.isEmpty),n.length===0))return;let s=new Vf(n.map(e=>e.edit)),c=sM(r),l=c.getTextEdit(s).toReplacement(new Jf(r)),u=this.displayLocation;if(!(u&&(u=u.withEdit(t,c),!u)))return new e(s,l,this._data,this.identity,n,u,o,a)}},nN=class e{static create(t,n){let r=uu(t.newText,n),i=ql(t.newText,n);return new e(t,t.newText.substring(r,t.newText.length-i),r,i)}get edit(){return this._edit}get lastChangeUpdatedEdit(){return this._lastChangeUpdatedEdit}constructor(e,t,n,r,i=!1){this._edit=e,this._trimmedNewText=t,this._prefixLength=n,this._suffixLength=r,this._lastChangeUpdatedEdit=i}applyTextModelChanges(e){let t=this._clone();return t._applyTextModelChanges(e),t}_clone(){return new e(this._edit,this._trimmedNewText,this._prefixLength,this._suffixLength,this._lastChangeUpdatedEdit)}_applyTextModelChanges(e){if(this._lastChangeUpdatedEdit=!1,!this._edit)throw new tc(`UpdatedInnerEdits: No edit to apply changes to`);let t=this._applyChanges(this._edit,e);if(!t){this._edit=void 0;return}this._edit=t.edit,this._lastChangeUpdatedEdit=t.editHasChanged}_applyChanges(e,t){let n=e.replaceRange.start,r=e.replaceRange.endExclusive,i=e.newText,a=!1,o=this._prefixLength>0||this._suffixLength>0;for(let s=t.replacements.length-1;s>=0;s--){let c=t.replacements[s],l=c.newText.length>0&&c.replaceRange.isEmpty;if(l&&!o&&c.replaceRange.start===n&&i.startsWith(c.newText)){n+=c.newText.length,i=i.substring(c.newText.length),r=Math.max(n,r),a=!0;continue}if(l&&o&&c.replaceRange.start===n+this._prefixLength&&this._trimmedNewText.startsWith(c.newText)){r+=c.newText.length,a=!0,this._prefixLength+=c.newText.length,this._trimmedNewText=this._trimmedNewText.substring(c.newText.length);continue}if(c.newText.length===0&&c.replaceRange.length>0&&c.replaceRange.start>=n+this._prefixLength&&c.replaceRange.endExclusive<=r-this._suffixLength){r-=c.replaceRange.length,a=!0;continue}if(c.equals(e)){a=!0,n=c.replaceRange.endExclusive,i=``;continue}if(!(c.replaceRange.start>r)){if(c.replaceRange.endExclusive<n){n+=c.newText.length-c.replaceRange.length,r+=c.newText.length-c.replaceRange.length;continue}return}}return this._trimmedNewText.length===0&&n+this._prefixLength===r-this._suffixLength?{edit:new Wn(new pa(n+this._prefixLength,n+this._prefixLength),``),editHasChanged:!0}:{edit:new Wn(new pa(n,r),i),editHasChanged:a}}}}));function iN(e,t){let n=new Ca(new yt,e=>t.getLanguageConfiguration(e)),r=Um(new Dm(new aN([e]),n),[],void 0,!0),i=``,a=e.getLineContent();function o(e,t){if(e.kind===2)if(o(e.openingBracket,t),t=Qu(t,e.openingBracket.length),e.child&&(o(e.child,t),t=Qu(t,e.child.length)),e.closingBracket)o(e.closingBracket,t),t=Qu(t,e.closingBracket.length);else{let t=n.getSingleLanguageBracketTokens(e.openingBracket.languageId).findClosingTokenText(e.openingBracket.bracketIds);i+=t}else if(e.kind!==3){if(e.kind===0||e.kind===1)i+=a.substring(le(t),le(Qu(t,e.length)));else if(e.kind===4)for(let n of e.children)o(n,t),t=Qu(t,n.length)}}return o(r,0),i}var aN,oN=t((()=>{Ve(),mi(),pc(),rt(),Ra(),aN=class{constructor(e){this.lines=e,this.tokenization={getLineTokens:e=>this.lines[e-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}})),sN,cN=t((()=>{sN=class e{constructor(){this._nodes=new Set,this._outgoingEdges=new Map}static from(t,n){let r=new e;for(let e of t)r._nodes.add(e);for(let e of t){let t=n(e);if(t.length>0){let n=new Set;for(let e of t)n.add(e);r._outgoingEdges.set(e,n)}}return r}removeCycles(){let e=[],t=new Set,n=new Set,r=[],i=a=>{t.add(a),n.add(a);let o=this._outgoingEdges.get(a);if(o)for(let s of o)t.has(s)?n.has(s)&&(e.push(s),r.push({from:a,to:s})):i(s);n.delete(a)};for(let e of this._nodes)t.has(e)||i(e);for(let{from:e,to:t}of r){let n=this._outgoingEdges.get(e);n&&n.delete(t)}return{foundCycles:e}}getOutgoing(e){let t=this._outgoingEdges.get(e);return t?Array.from(t):[]}}})),lN,uN,dN=t((()=>{(function(e){e.Jump=`jump`,e.Accept=`accept`,e.Inactive=`inactive`})(lN||={}),(function(e){e.GhostText=`ghostText`,e.Custom=`custom`,e.SideBySide=`sideBySide`,e.Deletion=`deletion`,e.InsertionInline=`insertionInline`,e.InsertionMultiLine=`insertionMultiLine`,e.WordReplacements=`wordReplacements`,e.LineReplacement=`lineReplacement`,e.Collapsed=`collapsed`})(uN||={})}));function fN(e,t,n,r,i,a){let o=yl(`icr`),s=new Zd,c,l={...r,requestUuid:o},u=hN(t,n),d=Yp(e,e=>e.groupId),f=sN.from(e,e=>e.yieldsToGroupIds?.flatMap(e=>d.get(e)??[])??[]),{foundCycles:p}=f.removeCycles();p.length>0&&Jc(Error(`Inline completions: cyclic yield-to dependency detected. Path: ${p.map(e=>e.toString?e.toString():``+e).join(` -> `)}`));let m=0,h=new Th(async e=>{try{if(m++,s.token.isCancellationRequested)return;let r=f.getOutgoing(e);for(let e of r){let r=await h.get(e);if(r){for(let e of r.inlineSuggestions.items)if(e.isInlineEdit||typeof e.insertText!=`string`||GM(new ca(T.lift(e.range)??u,e.insertText),void 0,n,t))return}}let o,d=Date.now();try{o=await e.provideInlineCompletions(n,t,l,s.token)}catch(e){Jc(e);return}let p=Date.now();if(!o)return;let ee=[],te=new yN(o,ee,e);if(te.addRef(),pN(s.token,()=>te.removeRef(c)),s.token.isCancellationRequested)return;for(let e of o.items)ee.push(mN(e,te,u,n,a,l,i,{startTime:d,endTime:p}));return te}finally{m--}});return{get didAllProvidersReturn(){return m===0},lists:xo.fromPromisesResolveOrder(e.map(e=>h.get(e))).filter(Wf),cancelAndDispose:e=>{c===void 0&&(c=e,s.dispose(!0))}}}function pN(e,t){if(e.isCancellationRequested)return t(),z.None;{let n=e.onCancellationRequested(()=>{n.dispose(),t()});return{dispose:()=>n.dispose()}}}function mN(e,t,n,r,i,a,o,s){let c,l,u=e.range?T.lift(e.range):n;if(typeof e.insertText==`string`){if(c=e.insertText,i&&e.completeBracketPairs){c=gN(c,u.getStartPosition(),r,i);let t=c.length-e.insertText.length;t!==0&&(u=new T(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn+t))}l=void 0}else if(`snippet`in e.insertText){let t=e.insertText.snippet.length;if(i&&e.completeBracketPairs){e.insertText.snippet=gN(e.insertText.snippet,u.getStartPosition(),r,i);let n=e.insertText.snippet.length-t;n!==0&&(u=new T(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn+n))}let n=new O_().parse(e.insertText.snippet);n.children.length===1&&n.children[0]instanceof b_?(c=n.children[0].value,l=void 0):(c=n.toString(),l={snippet:e.insertText.snippet,range:u})}else Xd(e.insertText);let d=e.displayLocation?{range:T.lift(e.displayLocation.range),label:e.displayLocation.label,kind:e.displayLocation.kind}:void 0;return new _N(u,c,l,d,e.additionalTextEdits||uM(),e,t,a,e.isInlineEdit??!1,o,s,e.correlationId)}function hN(e,t){let n=t.getWordAtPosition(e),r=t.getLineMaxColumn(e.lineNumber);return n?new T(e.lineNumber,n.startColumn,e.lineNumber,r):T.fromPositions(e,e.with(void 0,r))}function gN(e,t,n,r){let i=n.getLineContent(t.lineNumber),a=Wn.replace(new pa(t.column-1,i.length),e),o=n.tokenization.tokenizeLinesAt(t.lineNumber,[a.replace(i)])?.[0].sliceZeroCopy(a.getRangeAfterReplace());return o?iN(o,r):e}var _N,vN,yN,bN=t((()=>{Cu(),O(),wu(),M(),q(),ne(),Go(),wh(),_(),yh(),Gr(),oN(),k_(),vM(),Wc(),cN(),Me(),dN(),lr(),rN(),_N=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d){this.range=e,this.insertText=t,this.snippetInfo=n,this.displayLocation=r,this.additionalTextEdits=i,this.sourceInlineCompletion=a,this.source=o,this.context=s,this.isInlineEdit=c,this._requestInfo=l,this._providerRequestInfo=u,this._correlationId=d,this._didShow=!1,this._timeUntilShown=void 0,this._showStartTime=void 0,this._shownDuration=0,this._showUncollapsedStartTime=void 0,this._showUncollapsedDuration=0,this._didReportEndOfLife=!1,this._lastSetEndOfLifeReason=void 0,this._isPreceeded=!1,this._partiallyAcceptedCount=0,this._partiallyAcceptedSinceOriginal={characters:0,ratio:0,count:0},this._viewData={editorType:l.editorType}}get showInlineEditMenu(){return this.sourceInlineCompletion.showInlineEditMenu??!1}get partialAccepts(){return this._partiallyAcceptedSinceOriginal}async reportInlineEditShown(e,t,n,r){this.updateShownDuration(n),!this._didShow&&(this._didShow=!0,this._viewData.viewKind=n,this._viewData.renderData=r,this._timeUntilShown=Date.now()-this._requestInfo.startTime,this.source.provider.handleItemDidShow?.(this.source.inlineSuggestions,this.sourceInlineCompletion,t),this.sourceInlineCompletion.shownCommand&&await e.executeCommand(this.sourceInlineCompletion.shownCommand.id,...this.sourceInlineCompletion.shownCommand.arguments||[]))}reportPartialAccept(e,t,n){this._partiallyAcceptedCount++,this._partiallyAcceptedSinceOriginal.characters+=n.characters,this._partiallyAcceptedSinceOriginal.ratio=Math.min(this._partiallyAcceptedSinceOriginal.ratio+(1-this._partiallyAcceptedSinceOriginal.ratio)*n.ratio,1),this._partiallyAcceptedSinceOriginal.count+=n.count,this.source.provider.handlePartialAccept?.(this.source.inlineSuggestions,this.sourceInlineCompletion,e,t)}reportEndOfLife(e){if(!this._didReportEndOfLife&&(this._didReportEndOfLife=!0,this.reportInlineEditHidden(),e||=this._lastSetEndOfLifeReason??{kind:ja.Ignored,userTypingDisagreed:!1,supersededBy:void 0},e.kind===ja.Rejected&&this.source.provider.handleRejection&&this.source.provider.handleRejection(this.source.inlineSuggestions,this.sourceInlineCompletion),this.source.provider.handleEndOfLifetime)){let t={requestUuid:this.context.requestUuid,correlationId:this._correlationId,partiallyAccepted:this._partiallyAcceptedCount,partiallyAcceptedCountSinceOriginal:this._partiallyAcceptedSinceOriginal.count,partiallyAcceptedRatioSinceOriginal:this._partiallyAcceptedSinceOriginal.ratio,partiallyAcceptedCharactersSinceOriginal:this._partiallyAcceptedSinceOriginal.characters,shown:this._didShow,shownDuration:this._shownDuration,shownDurationUncollapsed:this._showUncollapsedDuration,preceeded:this._isPreceeded,timeUntilShown:this._timeUntilShown,timeUntilProviderRequest:this._providerRequestInfo.startTime-this._requestInfo.startTime,timeUntilProviderResponse:this._providerRequestInfo.endTime-this._requestInfo.startTime,editorType:this._viewData.editorType,languageId:this._requestInfo.languageId,requestReason:this._requestInfo.reason,viewKind:this._viewData.viewKind,error:this._viewData.error,typingInterval:this._requestInfo.typingInterval,typingIntervalCharacterCount:this._requestInfo.typingIntervalCharacterCount,...this._viewData.renderData};this.source.provider.handleEndOfLifetime(this.source.inlineSuggestions,this.sourceInlineCompletion,e,t)}}reportInlineEditError(e){this._viewData.error?this._viewData.error+=`; ${e}`:this._viewData.error=e}setIsPreceeded(e){this._isPreceeded=!0,(this._partiallyAcceptedSinceOriginal.characters!==0||this._partiallyAcceptedSinceOriginal.ratio!==0||this._partiallyAcceptedSinceOriginal.count!==0)&&console.warn(`Expected partiallyAcceptedCountSinceOriginal to be { characters: 0, rate: 0, partialAcceptances: 0 } before setIsPreceeded.`),this._partiallyAcceptedSinceOriginal=e}setEndOfLifeReason(e){this.reportInlineEditHidden(),this._lastSetEndOfLifeReason=e}updateShownDuration(e){let t=Date.now();this._showStartTime||=t;let n=e===uN.Collapsed;!n&&this._showUncollapsedStartTime===void 0&&(this._showUncollapsedStartTime=t),n&&this._showUncollapsedStartTime!==void 0&&(this._showUncollapsedDuration+=t-this._showUncollapsedStartTime)}reportInlineEditHidden(){if(this._showStartTime===void 0)return;let e=Date.now();this._shownDuration+=e-this._showStartTime,this._showStartTime=void 0,this._showUncollapsedStartTime!==void 0&&(this._showUncollapsedDuration+=e-this._showUncollapsedStartTime,this._showUncollapsedStartTime=void 0)}},(function(e){e.TextEditor=`textEditor`,e.DiffEditor=`diffEditor`,e.Notebook=`notebook`})(vN||={}),yN=class{constructor(e,t,n){this.inlineSuggestions=e,this.inlineSuggestionsData=t,this.provider=n,this.refCount=0}addRef(){this.refCount++}removeRef(e={kind:`other`}){if(this.refCount--,this.refCount===0){for(let e of this.inlineSuggestionsData)e.reportEndOfLife();this.provider.disposeInlineCompletions(this.inlineSuggestions,e)}}}}));function xN(e,t){return[...e].every(e=>t.has(e))}function SN(e,t){let n=new Set;return e.filter(e=>{let r=t(e);return n.has(r)?!1:(n.add(r),!0)})}function CN(e,t){let n=t.indexOf(e);return n>-1?[e,...t.slice(0,n),...t.slice(n+1)]:t}var wN,TN,EN,DN,ON,kN,AN,jN=t((()=>{sn(),Co(),wu(),cd(),q(),ls(),HM(),lr(),qp(),F(),$s(),ao(),Go(),Gr(),oo(),WM(),Oj(),vM(),rN(),bN(),wN=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},TN=function(e,t){return function(n,r){t(n,r,e)}},DN=class extends z{static#e=EN=this;static#t=this._requestId=0;constructor(e,t,n,r,i,a,o,s){super(),this._textModel=e,this._versionId=t,this._debounceValue=n,this._cursorPosition=r,this._languageConfigurationService=i,this._logService=a,this._configurationService=o,this._instantiationService=s,this._updateOperation=this._register(new su),this._state=VM(this,{initial:()=>({inlineCompletions:AN.createEmpty(),suggestWidgetInlineCompletions:AN.createEmpty()}),disposeFinal:e=>{e.inlineCompletions.dispose(),e.suggestWidgetInlineCompletions.dispose()},changeTracker:Up(()=>({versionId:this._versionId})),update:(e,t,n)=>{let r=Vf.compose(n.changes.map(e=>e.change?UM(e.change.changes):Vf.empty).filter(Wf));if(r.isEmpty())return t;try{return{inlineCompletions:t.inlineCompletions.createStateWithAppliedEdit(r,this._textModel),suggestWidgetInlineCompletions:t.suggestWidgetInlineCompletions.createStateWithAppliedEdit(r,this._textModel)}}finally{t.inlineCompletions.dispose(),t.suggestWidgetInlineCompletions.dispose()}}}),this.inlineCompletions=this._state.map(this,e=>e.inlineCompletions),this.suggestWidgetInlineCompletions=this._state.map(this,e=>e.suggestWidgetInlineCompletions),this.clearOperationOnTextModelChange=G(this,e=>{this._versionId.read(e),this._updateOperation.clear()}),this._loadingCount=Cc(this,0),this._loggingEnabled=Po(`editor.inlineSuggest.logFetch`,!1,this._configurationService).recomputeInitiallyAndOnChange(this._store),this._structuredFetchLogger=this._register(this._instantiationService.createInstance(Dj.cast(),`editor.inlineSuggest.logFetch.commandId`)),this.clearOperationOnTextModelChange.recomputeInitiallyAndOnChange(this._store)}_log(e){this._loggingEnabled.get()&&this._logService.info(Cj(e)),this._structuredFetchLogger.log(e)}fetch(e,t,n,r,i,a,o){let s=new ON(this._cursorPosition.get(),n,this._textModel.getVersionId(),new Set(e)),c=n.selectedSuggestionInfo?this.suggestWidgetInlineCompletions.get():this.inlineCompletions.get();if(this._updateOperation.value?.request.satisfies(s))return this._updateOperation.value.promise;if(c?.request?.satisfies(s))return Promise.resolve(!0);let l=!!this._updateOperation.value;this._updateOperation.clear();let u=new Zd,d=(async()=>{this._loadingCount.set(this._loadingCount.get()+1,void 0);let c=new I;try{let d=this._debounceValue.get(this._textModel),f=Pe(e.map(e=>e.debounceDelayMs),wo(er))??d;if((l||i&&n.triggerKind===Xe.Automatic)&&await hM(f,u.token),u.token.isCancellationRequested||this._store.isDisposed||this._textModel.getVersionId()!==s.versionId)return!1;let p=EN._requestId++;(this._loggingEnabled.get()||this._structuredFetchLogger.isEnabled.get())&&this._log({sourceId:`InlineCompletions.fetch`,kind:`start`,requestId:p,modelUri:this._textModel.uri,modelVersion:this._textModel.getVersionId(),context:{triggerKind:n.triggerKind,suggestInfo:n.selectedSuggestionInfo?!0:void 0},time:Date.now(),provider:t});let m=new Date,h=fN(e,this._cursorPosition.get(),this._textModel,n,o,this._languageConfigurationService);pN(u.token,()=>h.cancelAndDispose({kind:`tokenCancellation`}));let ee=!1,te=[];for await(let e of h.lists)if(e){e.addRef(),c.add(qm(()=>e.removeRef(e.inlineSuggestionsData.length===0?{kind:`empty`}:{kind:`notTaken`})));for(let t of e.inlineSuggestionsData){if(!n.includeInlineEdits&&(t.isInlineEdit||t.showInlineEditMenu)||!n.includeInlineCompletions&&!(t.isInlineEdit||t.showInlineEditMenu))continue;let e=XM.create(t,this._textModel);te.push(e),!e.isInlineEdit&&!e.showInlineEditMenu&&n.triggerKind===Xe.Automatic&&e.isVisible(this._textModel,this._cursorPosition.get())&&(ee=!0)}if(ee)break}if(h.cancelAndDispose({kind:`lostRace`}),this._loggingEnabled.get()||this._structuredFetchLogger.isEnabled.get()){let e=h.didAllProvidersReturn,t;(u.token.isCancellationRequested||this._store.isDisposed||this._textModel.getVersionId()!==s.versionId)&&(t=`canceled`);let n=te.map(e=>({range:e.editRange.toString(),text:e.insertText,isInlineEdit:!!e.isInlineEdit,source:e.source.provider.groupId}));this._log({sourceId:`InlineCompletions.fetch`,kind:`end`,requestId:p,durationMs:Date.now()-m.getTime(),error:t,result:n,time:Date.now(),didAllProvidersReturn:e})}let ne=n.earliestShownDateTime-Date.now();if(ne>0&&await hM(ne,u.token),u.token.isCancellationRequested||this._store.isDisposed||this._textModel.getVersionId()!==s.versionId||a.get())return!1;let re=new Date;this._debounceValue.update(this._textModel,re.getTime()-m.getTime());let ie=this._cursorPosition.get();this._updateOperation.clear(),Ot(e=>{let t=this._state.get();n.selectedSuggestionInfo?this._state.set({inlineCompletions:AN.createEmpty(),suggestWidgetInlineCompletions:t.suggestWidgetInlineCompletions.createStateWithAppliedResults(te,s,this._textModel,ie,r)},e):this._state.set({inlineCompletions:t.inlineCompletions.createStateWithAppliedResults(te,s,this._textModel,ie,r),suggestWidgetInlineCompletions:AN.createEmpty()},e),t.inlineCompletions.dispose(),t.suggestWidgetInlineCompletions.dispose()})}finally{this._loadingCount.set(this._loadingCount.get()-1,void 0),c.dispose()}return!0})(),f=new kN(s,u,d);return this._updateOperation.value=f,d}clear(e){this._updateOperation.clear();let t=this._state.get();this._state.set({inlineCompletions:AN.createEmpty(),suggestWidgetInlineCompletions:AN.createEmpty()},e),t.inlineCompletions.dispose(),t.suggestWidgetInlineCompletions.dispose()}seedInlineCompletionsWithSuggestWidget(){let e=this.inlineCompletions.get(),t=this.suggestWidgetInlineCompletions.get();t&&Ot(n=>{if(!e||(t.request?.versionId??-1)>(e.request?.versionId??-1)){e?.dispose();let r=this._state.get();this._state.set({inlineCompletions:t.clone(),suggestWidgetInlineCompletions:AN.createEmpty()},n),r.inlineCompletions.dispose(),r.suggestWidgetInlineCompletions.dispose()}this.clearSuggestWidgetInlineCompletions(n)})}clearSuggestWidgetInlineCompletions(e){this._updateOperation.value?.request.context.selectedSuggestionInfo&&this._updateOperation.clear()}cancelUpdate(){this._updateOperation.clear()}},DN=EN=wN([TN(4,yn),TN(5,Fp),TN(6,xl),TN(7,U)],DN),ON=class{constructor(e,t,n,r){this.position=e,this.context=t,this.versionId=n,this.providers=r}satisfies(e){return this.position.equals(e.position)&&wi(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,ye())&&(e.context.triggerKind===Xe.Automatic||this.context.triggerKind===Xe.Explicit)&&this.versionId===e.versionId&&xN(e.providers,this.providers)}},kN=class{constructor(e,t,n){this.request=e,this.cancellationTokenSource=t,this.promise=n}dispose(){this.cancellationTokenSource.cancel()}},AN=class e extends z{static createEmpty(){return new e([],void 0)}constructor(e,t){for(let t of e)t.addRef();super(),this.inlineCompletions=e,this.request=t,this._register({dispose:()=>{for(let e of this.inlineCompletions)e.removeRef()}})}_findById(e){return this.inlineCompletions.find(t=>t.identity===e)}_findByHash(e){return this.inlineCompletions.find(t=>t.hash===e)}createStateWithAppliedEdit(t,n){return new e(this.inlineCompletions.map(e=>e.withEdit(t,n)).filter(Wf),this.request)}createStateWithAppliedResults(t,n,r,i,a){let o;if(a){let e=this._findById(a);if(e&&e.canBeReused(r,n.position)){o=e;let n=t.find(t=>t.hash===e.hash);t=n?CN(n,t):[e,...t]}}let s=o?!o.isInlineEdit:t.some(e=>!e.isInlineEdit&&e.isVisible(r,i)),c=[];for(let e of t){let t=this._findByHash(e.hash),n;t&&t!==e?(n=e.withIdentity(t.identity),e.setIsPreceeded(t),t.setEndOfLifeReason({kind:ja.Ignored,userTypingDisagreed:!1,supersededBy:e.getSourceCompletion()})):n=e,s!==n.isInlineEdit&&c.push(n)}return c.sort(Fe(e=>e.showInlineEditMenu,_a)),c=SN(c,e=>e.semanticId),new e(c,n)}clone(){return new e(this.inlineCompletions,this.request)}}})),MN,NN=t((()=>{MN=class{constructor(e,t,n){this.edit=e,this.commands=t,this.inlineCompletion=n}equals(e){return this.edit.equals(e.edit)&&this.inlineCompletion===e.inlineCompletion}}})),PN,FN=t((()=>{sn(),q(),PN=class e extends z{static#e=this.MAX_SESSION_GAP_MS=3e3;static#t=this.MIN_SESSION_DURATION_MS=1e3;static#n=this.SESSION_HISTORY_LIMIT=50;static#r=this.TYPING_SPEED_WINDOW_MS=3e5;static#i=this.MIN_CHARS_FOR_RELIABLE_SPEED=20;getTypingInterval(){return(this._cacheInvalidated||this._cachedTypingIntervalResult===null)&&(this._cachedTypingIntervalResult=this._calculateTypingInterval(),this._cacheInvalidated=!1),this._cachedTypingIntervalResult}constructor(e){super(),this._textModel=e,this._typingSessions=[],this._currentSession=null,this._lastChangeTime=0,this._cachedTypingIntervalResult=null,this._cacheInvalidated=!0,this._register(this._textModel.onDidChangeContent(e=>this._updateTypingSpeed(e)))}_updateTypingSpeed(t){let n=Date.now();if(!this._isUserTyping(t)){this._finalizeCurrentSession();return}this._currentSession&&n-this._lastChangeTime>e.MAX_SESSION_GAP_MS&&this._finalizeCurrentSession(),this._currentSession||={startTime:n,endTime:n,characterCount:0},this._currentSession.endTime=n,this._currentSession.characterCount+=this._getActualCharacterCount(t),this._lastChangeTime=n,this._cacheInvalidated=!0}_getActualCharacterCount(e){let t=0;for(let n of e.changes)t+=Math.max(n.text.length,n.rangeLength);return t}_isUserTyping(e){if(!e.detailedReasons||e.detailedReasons.length===0)return!1;for(let t of e.detailedReasons)if(this._isUserTypingReason(t))return!0;return!1}_isUserTypingReason(e){if(e.metadata.isUndoing||e.metadata.isRedoing)return!1;switch(e.metadata.source){case`cursor`:{let t=e.metadata.kind;return t===`type`||t===`compositionType`||t===`compositionEnd`}default:return!1}}_finalizeCurrentSession(){this._currentSession&&=(this._currentSession.endTime-this._currentSession.startTime>=e.MIN_SESSION_DURATION_MS&&this._currentSession.characterCount>0&&(this._typingSessions.push(this._currentSession),this._typingSessions.length>e.SESSION_HISTORY_LIMIT&&this._typingSessions.shift()),null)}_calculateTypingInterval(){if(this._currentSession){let t={...this._currentSession};if(t.endTime-t.startTime>=e.MIN_SESSION_DURATION_MS&&t.characterCount>0){let e=[...this._typingSessions,t];return this._calculateSpeedFromSessions(e)}}return this._calculateSpeedFromSessions(this._typingSessions)}_calculateSpeedFromSessions(t){if(t.length===0)return{averageInterval:0,characterCount:0};let n=[...t].sort((e,t)=>t.endTime-e.endTime),r=Date.now()-e.TYPING_SPEED_WINDOW_MS,i=n.filter(e=>e.endTime>r),a=n.splice(i.length),o=As(i.map(e=>e.characterCount));for(let t=0;t<a.length&&o<e.MIN_CHARS_FOR_RELIABLE_SPEED;t++)i.push(a[t]),o+=a[t].characterCount;let s=As(i.map(e=>e.endTime-e.startTime));if(s===0||o<=1)return{averageInterval:0,characterCount:o};let c=s/Math.max(1,o-1);return{averageInterval:Math.round(c),characterCount:o}}dispose(){this._finalizeCurrentSession(),super.dispose()}}}));function IN(e,t,n){if(t.length===1)return[];let r=new Jf(e),i=r.getTransformer(),a=i.getOffset(t[0]),o=t.slice(1).map(e=>i.getOffset(e));n=n.removeCommonPrefixAndSuffix(r);let s=i.getStringReplacement(n),c=s.replaceRange.start-a,l=s.replaceRange.join(pa.emptyAt(a)),u=r.getValueOfOffsetRange(l);return o.map(e=>{let t=e+c,n=new pa(t,t+s.replaceRange.length),a=n.join(pa.emptyAt(e));if(r.getValueOfOffsetRange(a)!==u)return;let o=new Wn(n,s.newText);return i.getTextReplacement(o)}).filter(Wf)}var LN,RN,zN,BN,VN,HN=t((()=>{Co(),cd(),M(),N(),q(),ls(),Ga(),lr(),u(),jo(),F(),Na(),xa(),ar(),Su(),_(),ze(),yh(),ko(),Gr(),oo(),Qn(),yu(),oM(),vM(),wM(),BM(),AM(),jN(),NN(),bN(),PM(),ah(),ff(),Wo(),FN(),Go(),wh(),xd(),LN=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},RN=function(e,t){return function(n,r){t(n,r,e)}},zN=class extends z{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p){super(),this.textModel=e,this._selectedSuggestItem=t,this._textModelVersionId=n,this._positions=r,this._debounceValue=i,this._enabled=a,this._editor=o,this._instantiationService=s,this._commandService=c,this._languageConfigurationService=l,this._accessibilityService=u,this._languageFeaturesService=d,this._codeEditorService=f,this._inlineCompletionsService=p,this._isActive=Cc(this,!1),this._onlyRequestInlineEditsSignal=bf(this),this._forceUpdateExplicitlySignal=bf(this),this._noDelaySignal=bf(this),this._fetchSpecificProviderSignal=bf(this),this._selectedInlineCompletionId=Cc(this,void 0),this.primaryPosition=G(this,e=>this._positions.read(e)[0]??new H(1,1)),this._isAcceptingPartially=!1,this._appearedInsideViewport=G(this,e=>{let t=this.state.read(e);if(!t||!t.inlineCompletion)return!1;let n=t.inlineCompletion.targetRange,r=this._editorObs.editor.getVisibleRanges();return r.length<1?!1:new T(r[0].startLineNumber,r[0].startColumn,r[r.length-1].endLineNumber,r[r.length-1].endColumn).containsRange(n)}),this._onDidAccept=new j,this.onDidAccept=this._onDidAccept.event,this._lastShownInlineCompletionInfo=void 0,this._lastAcceptedInlineCompletionInfo=void 0,this._didUndoInlineEdits=Pl({owner:this,changeTracker:{createChangeSummary:()=>({didUndo:!1}),handleChange:(e,t)=>(t.didUndo=e.didChange(this._textModelVersionId)&&!!e.change?.isUndoing,!0)}},(e,t)=>{let n=this._textModelVersionId.read(e);return n!==null&&this._lastAcceptedInlineCompletionInfo&&this._lastAcceptedInlineCompletionInfo.textModelVersionIdAfter===n-1&&this._lastAcceptedInlineCompletionInfo.inlineCompletion.isInlineEdit&&t.didUndo?(this._lastAcceptedInlineCompletionInfo=void 0,!0):!1}),this._preserveCurrentCompletionReasons=new Set([BN.Redo,BN.Undo,BN.AcceptWord]),this.dontRefetchSignal=bf(this),this._fetchInlineCompletionsPromise=Pl({owner:this,changeTracker:{createChangeSummary:()=>({dontRefetch:!1,preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Xe.Automatic,onlyRequestInlineEdits:!1,shouldDebounce:!0,provider:void 0,textChange:!1,changeReason:``}),handleChange:(e,t)=>{if(e.didChange(this._textModelVersionId)){this._preserveCurrentCompletionReasons.has(this._getReason(e.change))&&(t.preserveCurrentCompletion=!0);let n=e.change?.detailedReasons??[];t.changeReason=n.length>0?n[0].getType():``,t.textChange=!0}else e.didChange(this._forceUpdateExplicitlySignal)?(t.preserveCurrentCompletion=!0,t.inlineCompletionTriggerKind=Xe.Explicit):e.didChange(this.dontRefetchSignal)?t.dontRefetch=!0:e.didChange(this._onlyRequestInlineEditsSignal)?t.onlyRequestInlineEdits=!0:e.didChange(this._fetchSpecificProviderSignal)&&(t.provider=e.change);return!0}}},(e,t)=>{if(this._source.clearOperationOnTextModelChange.read(e),this._noDelaySignal.read(e),this.dontRefetchSignal.read(e),this._onlyRequestInlineEditsSignal.read(e),this._forceUpdateExplicitlySignal.read(e),this._fetchSpecificProviderSignal.read(e),!((this._enabled.read(e)&&this._selectedSuggestItem.read(e)||this._isActive.read(e))&&(!this._inlineCompletionsService.isSnoozing()||t.inlineCompletionTriggerKind===Xe.Explicit))){this._source.cancelUpdate();return}this._textModelVersionId.read(e);let n=this._source.suggestWidgetInlineCompletions.get(),r=this._selectedSuggestItem.read(e);if(this._shouldShowOnSuggestConflict.get()&&(r=void 0),n&&!r&&this._source.seedInlineCompletionsWithSuggestWidget(),t.dontRefetch)return Promise.resolve(!0);if(this._didUndoInlineEdits.read(e)&&t.inlineCompletionTriggerKind!==Xe.Explicit){Ot(e=>{this._source.clear(e)});return}let i=``;t.provider?i+=`providerOnDidChange`:t.inlineCompletionTriggerKind===Xe.Explicit&&(i+=`explicit`),t.changeReason&&(i+=i.length>0?`:${t.changeReason}`:t.changeReason);let a=this._typing.getTypingInterval(),o={editorType:this.editorType,startTime:Date.now(),languageId:this.textModel.getLanguageId(),reason:i,typingInterval:a.averageInterval,typingIntervalCharacterCount:a.characterCount},s={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:r?.toSelectedSuggestionInfo(),includeInlineCompletions:!t.onlyRequestInlineEdits,includeInlineEdits:this._inlineEditsEnabled.read(e),requestIssuedDateTime:o.startTime,earliestShownDateTime:o.startTime+(t.inlineCompletionTriggerKind===Xe.Explicit||this.inAcceptFlow.get()?0:this._minShowDelay.get())};s.triggerKind===Xe.Automatic&&t.textChange&&this.textModel.getAlternativeVersionId()===this._lastShownInlineCompletionInfo?.alternateTextModelVersionId&&(s={...s,includeInlineCompletions:!this._lastShownInlineCompletionInfo.inlineCompletion.isInlineEdit,includeInlineEdits:this._lastShownInlineCompletionInfo.inlineCompletion.isInlineEdit});let c=this.selectedInlineCompletion.get()??this._inlineCompletionItems.get()?.inlineEdit,l=t.preserveCurrentCompletion||c?.forwardStable?c:void 0,u=this._jumpedToId.map(e=>!!e&&e===this._inlineCompletionItems.get()?.inlineEdit?.semanticId),d=t.provider?{providers:[t.provider],label:`single:`+t.provider.providerId?.toString()}:{providers:this._languageFeaturesService.inlineCompletionsProvider.all(this.textModel),label:void 0},f=this.getAvailableProviders(d.providers);return this._source.fetch(f,d.label,s,l?.identity,t.shouldDebounce,u,o)}),this._inlineCompletionItems=Ff({owner:this},e=>{let t=this._source.inlineCompletions.read(e);if(!t)return;let n=this.primaryPosition.read(e),r,i=[];for(let e of t.inlineCompletions)e.isInlineEdit?r=e:e.isVisible(this.textModel,n)&&i.push(e);return i.length!==0&&(r=void 0),{inlineCompletions:i,inlineEdit:r}}),this._filteredInlineCompletionItems=Ff({owner:this,equalsFn:Ku()},e=>this._inlineCompletionItems.read(e)?.inlineCompletions??[]),this.selectedInlineCompletionIndex=G(this,e=>{let t=this._selectedInlineCompletionId.read(e),n=this._filteredInlineCompletionItems.read(e),r=this._selectedInlineCompletionId===void 0?-1:n.findIndex(e=>e.semanticId===t);return r===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):r}),this.selectedInlineCompletion=G(this,e=>this._filteredInlineCompletionItems.read(e)[this.selectedInlineCompletionIndex.read(e)]),this.activeCommands=Ff({owner:this,equalsFn:Ku()},e=>this.selectedInlineCompletion.read(e)?.source.inlineSuggestions.commands??[]),this.inlineCompletionsCount=G(this,e=>{if(this.lastTriggerKind.read(e)===Xe.Explicit)return this._filteredInlineCompletionItems.read(e).length}),this._hasVisiblePeekWidgets=G(this,e=>this._editorObs.openedPeekWidgets.read(e)>0),this._shouldShowOnSuggestConflict=G(this,e=>{let t=this._showOnSuggestConflict.read(e);if(t!==`never`&&this.selectedInlineCompletion.read(e)){let n=this._selectedSuggestItem.read(e);return n?t===`whenSuggestListIsIncomplete`?n.listIncomplete:!0:!1}return!1}),this.state=Ff({owner:this,equalsFn:(e,t)=>!e||!t?e===t:e.kind===`ghostText`&&t.kind===`ghostText`?TM(e.ghostTexts,t.ghostTexts)&&e.inlineCompletion===t.inlineCompletion&&e.suggestItem===t.suggestItem:e.kind===`inlineEdit`&&t.kind===`inlineEdit`?e.inlineEdit.equals(t.inlineEdit):!1},e=>{let t=this.textModel,n=this._inlineCompletionItems.read(e),r=n?.inlineEdit;if(r){if(this._hasVisiblePeekWidgets.read(e))return;let i=r.getSingleTextEdit();i=jM(i,t);let a=this.primaryPosition.map(e=>Xt.fromRangeInclusive(r.targetRange).addMargin(1,1).contains(e.lineNumber)),o=r.source.inlineSuggestions.commands,s=new MN(i,o??[],r),c=r.updatedEdit;return{kind:`inlineEdit`,inlineEdit:s,inlineCompletion:r,edits:c?xr.fromStringEdit(c,new Jf(this.textModel)).replacements:[i],cursorAtInlineEdit:a,nextEditUri:(n.inlineEdit?.command?.id===`vscode.open`||n.inlineEdit?.command?.id===`_workbench.open`)&&n.inlineEdit?.command.arguments?.length?Fc.from(n.inlineEdit?.command.arguments[0]):void 0}}let i=this._selectedSuggestItem.read(e);if(!this._shouldShowOnSuggestConflict.read(e)&&i){let n=jM(i.getSingleTextEdit(),t),r=this._computeAugmentation(n,e);if(!this._suggestPreviewEnabled.read(e)&&!r)return;let a=r?.edit??n,o=r?r.edit.text.length-n.text.length:0,s=this._suggestPreviewMode.read(e),c=this._positions.read(e),l=[a,...IN(this.textModel,c,a)].map((e,n)=>({edit:e,ghostText:e?FM(e,t,s,c[n],o):void 0})).filter(({edit:e,ghostText:t})=>e!==void 0&&t!==void 0),u=l.map(({edit:e})=>e),d=l.map(({ghostText:e})=>e);return{kind:`ghostText`,edits:u,primaryGhostText:d[0]??new DM(a.range.endLineNumber,[]),ghostTexts:d,inlineCompletion:r?.completion,suggestItem:i}}else{if(!this._isActive.read(e))return;let n=this.selectedInlineCompletion.read(e);if(!n)return;let r=n.getSingleTextEdit(),i=this._inlineSuggestMode.read(e),a=this._positions.read(e),o=[r,...IN(this.textModel,a,r)].map((e,n)=>({edit:e,ghostText:e?FM(e,t,i,a[n],0):void 0})).filter(({edit:e,ghostText:t})=>e!==void 0&&t!==void 0),s=o.map(({edit:e})=>e),c=o.map(({ghostText:e})=>e);return c[0]?{kind:`ghostText`,edits:s,primaryGhostText:c[0],ghostTexts:c,inlineCompletion:n,suggestItem:void 0}:void 0}}),this.inlineCompletionState=G(this,e=>{let t=this.state.read(e);if(!(!t||t.kind!==`ghostText`)&&!this._editorObs.inComposition.read(e))return t}),this.inlineEditState=G(this,e=>{let t=this.state.read(e);if(!(!t||t.kind!==`inlineEdit`))return t}),this.inlineEditAvailable=G(this,e=>!!this.inlineEditState.read(e)),this.warning=G(this,e=>this.inlineCompletionState.read(e)?.inlineCompletion?.warning),this.ghostTexts=Ff({owner:this,equalsFn:TM},e=>{let t=this.inlineCompletionState.read(e);if(t)return t.ghostTexts}),this.primaryGhostText=Ff({owner:this,equalsFn:EM},e=>{let t=this.inlineCompletionState.read(e);if(t)return t?.primaryGhostText}),this.showCollapsed=G(this,e=>{let t=this.state.read(e);if(!t||t.kind!==`inlineEdit`||t.inlineCompletion.displayLocation)return!1;let n=t.inlineCompletion.updatedEditModelVersion===this._textModelVersionId.read(e);return(this._inlineEditsShowCollapsedEnabled.read(e)||!n)&&this._jumpedToId.read(e)!==t.inlineCompletion.semanticId&&!this._inAcceptFlow.read(e)}),this._tabShouldIndent=G(this,e=>{if(this._inAcceptFlow.read(e))return!1;function t(e){return e.startLineNumber!==e.endLineNumber}function n(e,t){let n=e.getLineIndentColumn(t),r=e.getLineLastNonWhitespaceColumn(t);return new T(t,n,t,Math.max(r,n))}return this._editorObs.selections.read(e)?.some(e=>e.isEmpty()?this.textModel.getLineLength(e.startLineNumber)===0:t(e)||e.containsRange(n(this.textModel,e.startLineNumber)))}),this.tabShouldJumpToInlineEdit=G(this,e=>{if(this._tabShouldIndent.read(e))return!1;let t=this.inlineEditState.read(e);return t?this.showCollapsed.read(e)?!0:this._inAcceptFlow.read(e)&&this._appearedInsideViewport.read(e)?!1:!t.cursorAtInlineEdit.read(e):!1}),this.tabShouldAcceptInlineEdit=G(this,e=>{let t=this.inlineEditState.read(e);return!t||this.showCollapsed.read(e)?!1:this._inAcceptFlow.read(e)&&this._appearedInsideViewport.read(e)||t.inlineCompletion.targetRange.startLineNumber===this._editorObs.cursorLineNumber.read(e)||this._jumpedToId.read(e)===t.inlineCompletion.semanticId?!0:this._tabShouldIndent.read(e)?!1:t.cursorAtInlineEdit.read(e)}),this._jumpedToId=Cc(this,void 0),this._inAcceptFlow=Cc(this,!1),this.inAcceptFlow=this._inAcceptFlow,this._source=this._register(this._instantiationService.createInstance(DN,this.textModel,this._textModelVersionId,this._debounceValue,this.primaryPosition)),this.lastTriggerKind=this._source.inlineCompletions.map(this,e=>e?.request?.context.triggerKind),this._editorObs=Qe(this._editor);let m=this._editorObs.getOption(133);this._suggestPreviewEnabled=m.map(e=>e.preview),this._suggestPreviewMode=m.map(e=>e.previewMode);let h=this._editorObs.getOption(71);this._inlineSuggestMode=h.map(e=>e.mode),this._suppressedInlineCompletionGroupIds=h.map(e=>new Set(e.experimental.suppressInlineSuggestions.split(`,`))),this._inlineEditsEnabled=h.map(e=>!!e.edits.enabled),this._inlineEditsShowCollapsedEnabled=h.map(e=>e.edits.showCollapsed),this._triggerCommandOnProviderChange=h.map(e=>e.triggerCommandOnProviderChange),this._minShowDelay=h.map(e=>e.minShowDelay),this._showOnSuggestConflict=h.map(e=>e.experimental.showOnSuggestConflict),this._typing=this._register(new PN(this.textModel)),this._register(this._inlineCompletionsService.onDidChangeIsSnoozing(e=>{e&&this.stop()}));{let e=this.textModel.uri.scheme===`vscode-notebook-cell`,[t]=this._codeEditorService.listDiffEditors().filter(e=>e.getOriginalEditor().getId()===this._editor.getId()||e.getModifiedEditor().getId()===this._editor.getId());this.isInDiffEditor=!!t,this.editorType=e?vN.Notebook:this.isInDiffEditor?vN.DiffEditor:vN.TextEditor}this._register(sc(this.state,e=>{e&&e.inlineCompletion&&this._inlineCompletionsService.reportNewCompletion(e.inlineCompletion.requestUuid)})),this._register(sc(this._fetchInlineCompletionsPromise)),this._register(Xl(e=>{this._editorObs.versionId.read(e),this._inAcceptFlow.set(!1,void 0)})),this._register(Xl(e=>{this.state.map((e,t)=>!e||e.kind===`inlineEdit`&&!e.cursorAtInlineEdit.read(t)).read(e)&&this._jumpedToId.set(void 0,void 0)}));let ee=this.inlineEditState.map(e=>e?.inlineCompletion.semanticId);this._register(Xl(e=>{ee.read(e)&&(this._editor.pushUndoStop(),this._lastShownInlineCompletionInfo={alternateTextModelVersionId:this.textModel.getAlternativeVersionId(),inlineCompletion:this.state.get().inlineCompletion})}));let te=Dp(this._languageFeaturesService.inlineCompletionsProvider.onDidChange,()=>this._languageFeaturesService.inlineCompletionsProvider.all(e));Au(this,te,(e,t)=>{e.onDidChangeInlineCompletions&&t.add(e.onDidChangeInlineCompletions(()=>{if(!this._enabled.get()||(this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor())!==this._editor)return;if(this._triggerCommandOnProviderChange.get()){this.trigger(void 0,{onlyFetchInlineEdits:!0});return}let t=this.state.get();t&&(t.inlineCompletion||t.edits)&&t.inlineCompletion?.source.provider!==e||Ot(t=>{this._fetchSpecificProviderSignal.trigger(t,e),this.trigger(t)})}))}).recomputeInitiallyAndOnChange(this._store),this._didUndoInlineEdits.recomputeInitiallyAndOnChange(this._store)}getIndentationInfo(e){let t=!1,n=!0,r=this?.primaryGhostText.read(e);if(this?._selectedSuggestItem&&r&&r.parts.length>0){let{column:e,lines:i}=r.parts[0],a=i[0].line;if(e<=this.textModel.getLineIndentColumn(r.lineNumber)){let e=ka(a);e===-1&&(e=a.length-1),t=e>0;let r=this.textModel.getOptions().tabSize;n=Pr.visibleColumnFromColumn(a,e+1,r)<r}}return{startsWithIndentation:t,startsWithIndentationLessThanTabSize:n}}_getReason(e){return e?.isUndoing?BN.Undo:e?.isRedoing?BN.Redo:this.isAcceptingPartially?BN.AcceptWord:BN.Other}getAvailableProviders(e){let t=this._suppressedInlineCompletionGroupIds.get(),n=e.filter(e=>!(e.groupId&&t.has(e.groupId))),r=new Set;for(let e of n)e.excludesGroupIds?.forEach(e=>r.add(e));let i=[];for(let e of n)e.groupId&&r.has(e.groupId)||i.push(e);return i}async trigger(e,t){Ja(e,e=>{t?.onlyFetchInlineEdits&&this._onlyRequestInlineEditsSignal.trigger(e),t?.noDelay&&this._noDelaySignal.trigger(e),this._isActive.set(!0,e)}),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e,t=!1){Ja(e,e=>{t&&this._onlyRequestInlineEditsSignal.trigger(e),this._isActive.set(!0,e),this._inAcceptFlow.set(!0,e),this._forceUpdateExplicitlySignal.trigger(e)}),await this._fetchInlineCompletionsPromise.get()}stop(e=`automatic`,t){Ja(t,t=>{if(e===`explicitCancel`){let e=this.state.get()?.inlineCompletion;e&&e.reportEndOfLife({kind:ja.Rejected})}this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){let n=this.textModel,r=this._source.suggestWidgetInlineCompletions.read(t);return Sn(r?r.inlineCompletions.filter(e=>!e.isInlineEdit):[this.selectedInlineCompletion.read(t)].filter(Wf),t=>{let r=t.getSingleTextEdit();return r=jM(r,n,T.fromPositions(r.range.getStartPosition(),e.range.getEndPosition())),MM(r,e)?{completion:t,edit:r}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();let t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){let n=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[n].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}_getMetadata(e,t,n=void 0){return n?dm.inlineCompletionPartialAccept({nes:e.isInlineEdit,requestUuid:e.requestUuid,providerId:e.source.provider.providerId,languageId:t,type:n}):dm.inlineCompletionAccept({nes:e.isInlineEdit,requestUuid:e.requestUuid,providerId:e.source.provider.providerId,languageId:t})}async accept(e=this._editor){if(e.getModel()!==this.textModel)throw new tc;let t,n=!1,r=this.state.get();if(r?.kind===`ghostText`){if(!r||r.primaryGhostText.isEmpty()||!r.inlineCompletion)return;t=r.inlineCompletion}else if(r?.kind===`inlineEdit`)t=r.inlineCompletion,n=!!r.nextEditUri;else return;t.addRef();try{if(e.pushUndoStop(),!n)if(t.snippetInfo){let n=ca.delete(t.editRange),r=t.additionalTextEdits.map(e=>new ca(T.lift(e.range),e.text??``)),i=xr.fromParallelReplacementsUnsorted([n,...r]);e.edit(i,this._getMetadata(t,this.textModel.getLanguageId())),e.setPosition(t.snippetInfo.range.getStartPosition(),`inlineCompletionAccept`),iM.get(e)?.insert(t.snippetInfo.snippet,{undoStopBefore:!1})}else{let n=r.edits,i=n;r.kind===`ghostText`&&(i=pM(n,this.textModel));let a=dM(i).map(e=>X.fromPositions(e)),o=t.additionalTextEdits.map(e=>new ca(T.lift(e.range),e.text??``)),s=xr.fromParallelReplacementsUnsorted([...n,...o]);if(e.edit(s,this._getMetadata(t,this.textModel.getLanguageId())),t.displayLocation===void 0&&e.setSelections(r.kind===`inlineEdit`?a.slice(-1):a,`inlineCompletionAccept`),r.kind===`inlineEdit`&&!this._accessibilityService.isMotionReduced()){let t=s.getNewRanges(),n=this._store.add(new VN(e,t,()=>{this._store.delete(n)}))}}this._onDidAccept.fire(),this.stop(),t.command&&await this._commandService.executeCommand(t.command.id,...t.command.arguments||[]).then(void 0,Jc),t.reportEndOfLife({kind:ja.Accepted})}finally{t.removeRef(),this._inAcceptFlow.set(!0,void 0),this._lastAcceptedInlineCompletionInfo={textModelVersionIdAfter:this.textModel.getVersionId(),inlineCompletion:t}}}async acceptNextWord(){await this._acceptNext(this._editor,`word`,(e,t)=>{let n=this.textModel.getLanguageIdAtPosition(e.lineNumber,e.column),r=this._languageConfigurationService.getLanguageConfiguration(n),i=new RegExp(r.wordDefinition.source,r.wordDefinition.flags.replace(`g`,``)),a=t.match(i),o=0;o=a&&a.index!==void 0?a.index===0?a[0].length:a.index:t.length;let s=/\s+/g.exec(t);return s&&s.index!==void 0&&s.index+s[0].length<o&&(o=s.index+s[0].length),o},0)}async acceptNextLine(){await this._acceptNext(this._editor,`line`,(e,t)=>{let n=t.match(/\n/);return n&&n.index!==void 0?n.index+1:t.length},1)}async _acceptNext(e,t,n,r){if(e.getModel()!==this.textModel)throw new tc;let i=this.inlineCompletionState.get();if(!i||i.primaryGhostText.isEmpty()||!i.inlineCompletion)return;let a=i.primaryGhostText,o=i.inlineCompletion;if(o.snippetInfo){await this.accept(e);return}let s=a.parts[0],c=new H(a.lineNumber,s.column),l=s.text,u=n(c,l);if(u===l.length&&a.parts.length===1){this.accept(e);return}let d=l.substring(0,u),f=this._positions.get(),p=f[0];o.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();let n=T.fromPositions(p,c),r=new ca(n,e.getModel().getValueInRange(n)+d),i=[r,...IN(this.textModel,f,r)].filter(Wf),a=dM(i).map(e=>X.fromPositions(e));e.edit(xr.fromParallelReplacementsUnsorted(i),this._getMetadata(o,t)),e.setSelections(a,`inlineCompletionPartialAccept`),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}let n=T.fromPositions(o.editRange.getStartPosition(),eo.ofText(d).addToPosition(c)),i=e.getModel().getValueInRange(n,1).length;o.reportPartialAccept(i,{kind:r,acceptedLength:i},{characters:u,ratio:u/l.length,count:1})}finally{o.removeRef()}}handleSuggestAccepted(e){let t=jM(e.getSingleTextEdit(),this.textModel),n=this._computeAugmentation(t,void 0);if(!n)return;let r=this.textModel.getValueInRange(n.completion.editRange,1).length+t.text.length;n.completion.reportPartialAccept(t.text.length,{kind:2,acceptedLength:r},{characters:t.text.length,count:1,ratio:1})}extractReproSample(){return{documentValue:this.textModel.getValue(),inlineCompletion:(this.state.get()?.inlineCompletion)?.getSourceCompletion()}}jump(){let e=this.inlineEditState.get();e&&Ot(t=>{this._jumpedToId.set(e.inlineCompletion.semanticId,t),this.dontRefetchSignal.trigger(t);let n=e.inlineCompletion.targetRange,r=n.getStartPosition();if(this._editor.setPosition(r,`inlineCompletions.jump`),n.isSingleLine()&&(e.inlineCompletion.displayLocation||!e.inlineCompletion.insertText.includes(`
`)))this._editor.revealPosition(r);else{let e=new T(n.startLineNumber-1,1,n.endLineNumber+1,1);this._editor.revealRange(e,1)}this._editor.focus()})}async handleInlineSuggestionShown(e,t,n){await e.reportInlineEditShown(this._commandService,t,n)}},zN=LN([RN(7,U),RN(8,no),RN(9,yn),RN(10,qi),RN(11,V),RN(12,ec),RN(13,Un)],zN),(function(e){e[e.Undo=0]=`Undo`,e[e.Redo=1]=`Redo`,e[e.AcceptWord=2]=`AcceptWord`,e[e.Other=3]=`Other`})(BN||={}),VN=class extends z{constructor(e,t,n){super(),n&&this._register({dispose:()=>n()}),this._register(Qe(e).setDecorations(_l(t.map(e=>({range:e,options:{description:`animation`,className:`edits-fadeout-decoration`,zIndex:1}})))));let r=new xM(1,0,1e3,bM),i=new SM(r);this._register(Xl(t=>{let n=i.getValue(t);e.getContainerDomNode().style.setProperty(`--animation-opacity`,n.toString()),r.isFinished()&&this.dispose()}))}}})),UN,WN,GN,KN,qN,JN,YN,XN,ZN,QN=t((()=>{O(),q(),Gm(),Et(),Gr(),qp(),Zo(),F(),Zl(),UN=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},WN=function(e,t){return function(n,r){t(n,r,e)}},KN=class{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let r=n[0].score[0];for(let e=0;e<n.length;e++){let{score:t,completion:i}=n[e];if(t[0]!==r)break;if(i.preselect)return e}return 0}},qN=class extends KN{constructor(){super(`first`)}memorize(e,t,n){}toJSON(){}fromJSON(){}},JN=class extends KN{constructor(){super(`recentlyUsed`),this._cache=new sh(300,.66),this._seq=0}memorize(e,t,n){let r=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(r,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;let r=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(r))return super.select(e,t,n);let i=n[0].score[0],a=-1,o=-1,s=-1;for(let t=0;t<n.length&&n[t].score[0]===i;t++){let r=`${e.getLanguageId()}/${n[t].textLabel}`,i=this._cache.peek(r);if(i&&i.touch>s&&i.type===n[t].completion.kind&&i.insertText===n[t].completion.insertText&&(s=i.touch,o=t),n[t].completion.preselect&&a===-1)return a=t}return o===-1?a===-1?0:a:o}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();for(let[t,n]of e)n.touch=0,n.type=typeof n.type==`number`?n.type:fu.fromString(n.type),this._cache.set(t,n);this._seq=this._cache.size}},YN=class extends KN{constructor(){super(`recentlyUsedByPrefix`),this._trie=Ka.forStrings(),this._seq=0}memorize(e,t,n){let{word:r}=e.getWordUntilPosition(t),i=`${e.getLanguageId()}/${r}`;this._trie.set(i,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:r}=e.getWordUntilPosition(t);if(!r)return super.select(e,t,n);let i=`${e.getLanguageId()}/${r}`,a=this._trie.get(i);if(a||=this._trie.findSubstr(i),a)for(let e=0;e<n.length;e++){let{kind:t,insertText:r}=n[e].completion;if(t===a.type&&r===a.insertText)return e}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((e,t)=>-(e[1].touch-t[1].touch)).forEach((e,t)=>e[1].touch=t),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(let[t,n]of e)n.type=typeof n.type==`number`?n.type:fu.fromString(n.type),this._trie.set(t,n)}}},XN=class{static#e=GN=this;static#t=this._strategyCtors=new Map([[`recentlyUsedByPrefix`,YN],[`recentlyUsed`,JN],[`first`,qN]]);static#n=this._storagePrefix=`suggest/memories`;constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new I,this._persistSoon=new rn(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(e=>{e.reason===mu.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){let n=this._configService.getValue(`editor.suggestSelection`,{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(this._strategy?.name!==n){this._saveState(),this._strategy=new((GN._strategyCtors.get(n))||qN);try{let e=this._configService.getValue(`editor.suggest.shareSuggestSelections`)?0:1,t=this._storageService.get(`${GN._storagePrefix}/${n}`,e);t&&this._strategy.fromJSON(JSON.parse(t))}catch{}}return this._strategy}_saveState(){if(this._strategy){let e=this._configService.getValue(`editor.suggest.shareSuggestSelections`)?0:1,t=JSON.stringify(this._strategy);this._storageService.store(`${GN._storagePrefix}/${this._strategy.name}`,t,e,1)}}},XN=GN=UN([WN(0,Vd),WN(1,xl)],XN),ZN=Mc(`ISuggestMemories`),Ds(ZN,XN,1)})),$N,eP,tP,nP,rP=t((()=>{C(),P(),$N=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},eP=function(e,t){return function(n,r){t(n,r,e)}},nP=class{static#e=tP=this;static#t=this.AtEnd=new De(`atEndOfWord`,!1,{type:`boolean`,description:A(1476,`A context key that is true when at the end of a word. Note that this is only defined when tab-completions are enabled`)});constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=tP.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(e=>e.hasChanged(138)&&this._update()),this._update()}dispose(){this._configListener.dispose(),this._selectionListener?.dispose(),this._ckAtEnd.reset()}_update(){let e=this._editor.getOption(138)===`on`;if(this._enabled!==e)if(this._enabled=e,this._enabled){let e=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}let e=this._editor.getModel(),t=this._editor.getSelection(),n=e.getWordAtPosition(t.getStartPosition());if(!n){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(n.endColumn===t.getStartPosition().column&&t.getStartPosition().lineNumber===t.getEndPosition().lineNumber)};this._selectionListener=this._editor.onDidChangeCursorSelection(e),e()}else this._selectionListener&&=(this._ckAtEnd.reset(),this._selectionListener.dispose(),void 0)}},nP=tP=$N([eP(1,bh)],nP)})),iP,aP,oP,sP,cP=t((()=>{C(),iP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},aP=function(e,t){return function(n,r){t(n,r,e)}},sP=class{static#e=oP=this;static#t=this.OtherSuggestions=new De(`hasOtherSuggestions`,!1);constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=oP.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){this._ckOtherSuggestions.reset(),this._listener?.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(oP._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let r=n;for(let i=t.items.length;i>0&&(r=(r+t.items.length+(e?1:-1))%t.items.length,!(r===n||!t.items[r].completion.additionalTextEdits));i--);return r}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=oP._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},sP=oP=iP([aP(1,bh)],sP)})),lP,uP=t((()=>{sn(),q(),Vm(),lP=class{constructor(e,t,n,r){this._disposables=new I,this._disposables.add(n.onDidSuggest(e=>{e.completionModel.items.length===0&&this.reset()})),this._disposables.add(n.onDidCancel(e=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(i=>{if(this._active&&!t.isFrozen()&&n.state!==0){let t=i.charCodeAt(i.length-1);this._active.acceptCharacters.has(t)&&e.getOption(0)&&r(this._active.item)}}))}_onItem(e){if(!e||!Xf(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;let t=new tt;for(let n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}})),dP,fP=t((()=>{Ol(),Su(),_(),dP=class e{async provideSelectionRanges(t,n){let r=[];for(let i of n){let n=[];r.push(n);let a=new Map;await new Promise(n=>e._bracketsRightYield(n,0,t,i,a)),await new Promise(r=>e._bracketsLeftYield(r,0,t,i,a,n))}return r}static#e=this._maxDuration=30;static#t=this._maxRounds=2;static _bracketsRightYield(t,n,r,i,a){let o=new Map,s=Date.now();for(;;){if(n>=e._maxRounds){t();break}if(!i){t();break}let c=r.bracketPairs.findNextBracket(i);if(!c){t();break}if(Date.now()-s>e._maxDuration){setTimeout(()=>e._bracketsRightYield(t,n+1,r,i,a));break}if(c.bracketInfo.isOpeningBracket){let e=c.bracketInfo.bracketText,t=o.has(e)?o.get(e):0;o.set(e,t+1)}else{let e=c.bracketInfo.getOpeningBrackets()[0].bracketText,t=o.has(e)?o.get(e):0;if(--t,o.set(e,Math.max(0,t)),t<0){let t=a.get(e);t||(t=new Yc,a.set(e,t)),t.push(c.range)}}i=c.range.getEndPosition()}}static _bracketsLeftYield(t,n,r,i,a,o){let s=new Map,c=Date.now();for(;;){if(n>=e._maxRounds&&a.size===0){t();break}if(!i){t();break}let l=r.bracketPairs.findPrevBracket(i);if(!l){t();break}if(Date.now()-c>e._maxDuration){setTimeout(()=>e._bracketsLeftYield(t,n+1,r,i,a,o));break}if(l.bracketInfo.isOpeningBracket){let t=l.bracketInfo.bracketText,n=s.has(t)?s.get(t):0;if(--n,s.set(t,Math.max(0,n)),n<0){let n=a.get(t);if(n){let i=n.shift();n.size===0&&a.delete(t);let s=T.fromPositions(l.range.getEndPosition(),i.getStartPosition()),c=T.fromPositions(l.range.getStartPosition(),i.getEndPosition());o.push({range:s}),o.push({range:c}),e._addBracketLeading(r,c,o)}}}else{let e=l.bracketInfo.getOpeningBrackets()[0].bracketText,t=s.has(e)?s.get(e):0;s.set(e,t+1)}i=l.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;let r=t.startLineNumber,i=e.getLineFirstNonWhitespaceColumn(r);i!==0&&i!==t.startColumn&&(n.push({range:T.fromPositions(new H(r,i),t.getEndPosition())}),n.push({range:T.fromPositions(new H(r,1),t.getEndPosition())}));let a=r-1;if(a>0){let r=e.getLineFirstNonWhitespaceColumn(a);r===t.startColumn&&r!==e.getLineLastNonWhitespaceColumn(a)&&(n.push({range:T.fromPositions(new H(a,r),t.getEndPosition())}),n.push({range:T.fromPositions(new H(a,1),t.getEndPosition())}))}}}})),pP,mP=t((()=>{sn(),_(),fP(),pP=class e{static#e=this.None=new class extends e{distance(){return 0}};static async create(t,n){if(!n.getOption(133).localityBonus||!n.hasModel())return e.None;let r=n.getModel(),i=n.getPosition();if(!t.canComputeWordRanges(r.uri))return e.None;let[a]=await new dP().provideSelectionRanges(r,[i]);if(a.length===0)return e.None;let o=await t.computeWordRanges(r.uri,a[0].range);if(!o)return e.None;let s=r.getWordUntilPosition(i);return delete o[s.word],new class extends e{distance(e,t){if(!i.equals(n.getPosition()))return 0;if(t.kind===17)return 2<<20;let r=o[typeof t.label==`string`?t.label:t.label.label];if(hr(r))return 2<<20;let s=Rn(r,T.fromPositions(e),T.compareRangesUsingStarts),c=s>=0?r[s]:r[Math.max(0,~s-1)],l=a.length;for(let e of a){if(!T.containsRange(e.range,c))break;--l}return l}}}}})),hP,gP,_P=t((()=>{sn(),Ua(),Ga(),hP=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}},gP=class e{constructor(t,n,r,i,a,o,s=vc.default,c=void 0){this.clipboardText=c,this._snippetCompareFn=e._compareCompletionItems,this._items=t,this._column=n,this._wordDistance=i,this._options=a,this._refilterKind=1,this._lineContext=r,this._fuzzyScoreOptions=s,o===`top`?this._snippetCompareFn=e._compareCompletionItemsSnippetsUp:o===`bottom`&&(this._snippetCompareFn=e._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();let e=new Set;for(let[t,n]of this.getItemsByProvider())n.length>0&&n[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;let e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext,r=``,i=``,a=this._refilterKind===1?this._items:this._filteredItems,o=[],s=!this._options.filterGraceful||a.length>2e3?Ke:Mm;for(let c=0;c<a.length;c++){let l=a[c];if(l.isInvalid)continue;let u=this._itemsByProvider.get(l.provider);u?u.push(l):this._itemsByProvider.set(l.provider,[l]);let d=l.position.column-l.editStart.column,f=d+n-(l.position.column-this._column);if(r.length!==f&&(r=f===0?``:t.slice(-f),i=r.toLowerCase()),l.word=r,f===0)l.score=lh.Default;else{let e=0;for(;e<d;){let t=r.charCodeAt(e);if(t===32||t===9)e+=1;else break}if(e>=f)l.score=lh.Default;else if(typeof l.completion.filterText==`string`){let t=s(r,i,e,l.completion.filterText,l.filterTextLow,0,this._fuzzyScoreOptions);if(!t)continue;vm(l.completion.filterText,l.textLabel)===0?l.score=t:(l.score=Jm(r,i,e,l.textLabel,l.labelLow,0),l.score[0]=t[0])}else{let t=s(r,i,e,l.textLabel,l.labelLow,0,this._fuzzyScoreOptions);if(!t)continue;l.score=t}}l.idx=c,l.distance=this._wordDistance.distance(l.position,l.completion),o.push(l),e.push(l.textLabel.length)}this._filteredItems=o.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?gs(e.length-.85,e,(e,t)=>e-t):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(t,n){if(t.completion.kind!==n.completion.kind){if(t.completion.kind===28)return 1;if(n.completion.kind===28)return-1}return e._compareCompletionItems(t,n)}static _compareCompletionItemsSnippetsUp(t,n){if(t.completion.kind!==n.completion.kind){if(t.completion.kind===28)return-1;if(n.completion.kind===28)return 1}return e._compareCompletionItems(t,n)}}}));function vP(e,t,n){if(!t.getContextKeyValue(xj.inlineSuggestionVisible.key))return!0;let r=t.getContextKeyValue(xj.suppressSuggestions.key);return r===void 0?!e.getOption(71).suppressSuggestions:!r}function yP(e,t,n){if(!t.getContextKeyValue(`inlineSuggestionVisible`))return!0;let r=t.getContextKeyValue(xj.suppressSuggestions.key);return r===void 0?!e.getOption(71).suppressSuggestions:!r}var bP,xP,SP,CP,wP,TP=t((()=>{O(),wu(),M(),N(),q(),Ga(),ze(),va(),mP(),qr(),qp(),C(),$s(),Ue(),_P(),bj(),yu(),Ua(),lr(),Sj(),oM(),Ou(),bP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xP=function(e,t){return function(n,r){t(n,r,e)}},CP=class{static shouldAutoTrigger(e){if(!e.hasModel())return!1;let t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);let r=t.getWordAtPosition(n);return!(!r||r.endColumn!==n.column&&r.startColumn+1!==n.column||!isNaN(Number(r.word)))}constructor(e,t,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=n}},wP=SP=class{constructor(e,t,n,r,i,a,o,s,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=r,this._logService=i,this._contextKeyService=a,this._configurationService=o,this._languageFeaturesService=s,this._envService=c,this._toDispose=new I,this._triggerCharacterListener=new I,this._triggerQuickSuggest=new fr,this._triggerState=void 0,this._completionDisposables=new I,this._onDidCancel=new j,this._onDidTrigger=new j,this._onDidSuggest=new j,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._currentSelection=this._editor.getSelection()||new X(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(e=>{l||this._onCursorChange(e)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!l&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){hm(this._triggerCharacterListener),hm([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(103)||!this._editor.hasModel()||!this._editor.getOption(136))return;let e=new Map;for(let t of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(let n of t.triggerCharacters||[]){let r=e.get(n);if(!r){r=new Set;let t=oj();t&&r.add(t),e.set(n,r)}r.add(t)}let t=t=>{if(!yP(this._editor,this._contextKeyService,this._configurationService)||CP.shouldAutoTrigger(this._editor))return;if(!t){let e=this._editor.getPosition();t=this._editor.getModel().getLineContent(e.lineNumber).substr(0,e.column-1)}let n=``;ad(t.charCodeAt(t.length-1))?xi(t.charCodeAt(t.length-2))&&(n=t.substr(t.length-2)):n=t.charAt(t.length-1);let r=e.get(n);if(r){let e=new Map;if(this._completionModel)for(let[t,n]of this._completionModel.getItemsByProvider())r.has(t)||e.set(t,n);this.trigger({auto:!0,triggerKind:1,triggerCharacter:n,retrigger:!!this._completionModel,clipboardText:this._completionModel?.clipboardText,completionOptions:{providerFilter:r,providerItemsToReuse:e}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),this._requestToken?.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;let t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!==`keyboard`&&e.source!==`deleteLeft`){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){yj.isAllOff(this._editor.getOption(101))||this._editor.getOption(133).snippetsPreventQuickSuggestions&&iM.get(this._editor)?.isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!CP.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;let e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(101);if(!yj.isAllOff(n)){if(!yj.isAllOn(n)){e.tokenization.tokenizeIfCheap(t.lineNumber);let r=e.tokenization.getLineTokens(t.lineNumber),i=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(yj.valueFor(n,i)!==`on`)return}vP(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(e)&&this.trigger({auto:!0})}},this._editor.getOption(102)))}_refilterCompletionItems(){en(this._editor.hasModel()),en(this._triggerState!==void 0);let e=new CP(this._editor.getModel(),this._editor.getPosition(),{...this._triggerState,refilter:!0});this._onNewContext(e)}trigger(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),n=new CP(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=n;let r={triggerKind:e.triggerKind??0};e.triggerCharacter&&(r={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Zd;let i=this._editor.getOption(127),a=1;switch(i){case`top`:a=0;break;case`bottom`:a=2;break}let{itemKind:o,showDeprecated:s}=SP.createSuggestFilter(this._editor),c=new hj(a,e.completionOptions?.kindFilter??o,e.completionOptions?.providerFilter,e.completionOptions?.providerItemsToReuse,s),l=pP.create(this._editorWorkerService,this._editor),u=sj(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),c,r,this._requestToken.token);Promise.all([u,l]).then(async([t,n])=>{if(this._requestToken?.dispose(),!this._editor.hasModel()){t.disposable.dispose();return}let r=e?.clipboardText;if(!r&&t.needsClipboard&&(r=await this._clipboardService.readText()),this._triggerState===void 0){t.disposable.dispose();return}let i=new CP(this._editor.getModel(),this._editor.getPosition(),e),a={...vc.default,firstMatchCanBeWeak:!this._editor.getOption(133).matchOnWordStartOnly};if(this._completionModel=new gP(t.items,this._context.column,{leadingLineContent:i.leadingLineContent,characterCountDelta:i.column-this._context.column},n,this._editor.getOption(133),this._editor.getOption(127),a,r),this._completionDisposables.add(t.disposable),this._onNewContext(i),this._reportDurationsTelemetry(t.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(let e of t.items)e.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${e.provider._debugDisplayName}`,e.completion)}).catch($p)}_reportDurationsTelemetry(e){Math.random()>1e-4||setTimeout(()=>{this._telemetryService.publicLog2(`suggest.durations.json`,{data:JSON.stringify(e)}),this._logService.debug(`suggest.durations.json`,e)})}static createSuggestFilter(e){let t=new Set;e.getOption(127)===`none`&&t.add(28);let n=e.getOption(133);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(28),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Pm(e.leadingLineContent)!==Pm(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(CP.shouldAutoTrigger(this._editor)&&this._context){let e=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:e}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){let e=new Map,t=new Set;for(let[n,r]of this._completionModel.getItemsByProvider())r.length>0&&r[0].container.incomplete?t.add(n):e.set(n,r);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:t,providerItemsToReuse:e}})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){let r=CP.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(r&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:n})}}}}},wP=SP=bP([xP(1,jr),xP(2,qu),xP(3,Ta),xP(4,Fp),xP(5,bh),xP(6,xl),xP(7,V),xP(8,lp)],wP)})),EP,DP=t((()=>{q(),EP=class e{static#e=this._maxSelectionLength=51200;constructor(t,n){this._disposables=new I,this._lastOvertyped=[],this._locked=!1,this._disposables.add(t.onWillType(()=>{if(this._locked||!t.hasModel())return;let n=t.getSelections(),r=n.length,i=!1;for(let e=0;e<r;e++)if(!n[e].isEmpty()){i=!0;break}if(!i){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];let a=t.getModel();for(let t=0;t<r;t++){let r=n[t];if(a.getValueLengthInRange(r)>e._maxSelectionLength)return;this._lastOvertyped[t]={value:a.getValueInRange(r),multiline:r.startLineNumber!==r.endLineNumber}}})),this._disposables.add(n.onDidTrigger(e=>{this._locked=!0})),this._disposables.add(n.onDidCancel(e=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}})),OP=t((()=>{})),kP,AP,jP,MP=t((()=>{y(),ns(),q(),xf(),de(),C(),F(),kP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},AP=function(e,t){return function(n,r){t(n,r,e)}},jP=class{constructor(e,t,n,r,i){this._menuId=t,this._menuService=r,this._contextKeyService=i,this._menuDisposables=new I,this.element=x(e,R(`.suggest-status-bar`));let a=(e=>e instanceof at?n.createInstance(af,e,{useComma:!1}):void 0);this._leftActions=new _s(this.element,{actionViewItemProvider:a}),this._rightActions=new _s(this.element,{actionViewItemProvider:a}),this._leftActions.domNode.classList.add(`left`),this._rightActions.domNode.classList.add(`right`)}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){let e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{let t=[],n=[];for(let[r,i]of e.getActions())r===`left`?t.push(...i):n.push(...i);this._leftActions.clear(),this._leftActions.push(t),this._rightActions.clear(),this._rightActions.push(n)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}},jP=kP([AP(2,U),AP(3,Ba),AP(4,bh)],jP)}));function NP(e){return!!e&&!!(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}var PP,FP,IP,LP,RP=t((()=>{y(),Ed(),Kn(),sr(),N(),Fd(),q(),Si(),Px(),P(),F(),PP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},FP=function(e,t){return function(n,r){t(n,r,e)}},IP=class{constructor(e,t){this._editor=e,this._onDidClose=new j,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new j,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new I,this._renderDisposeable=new I,this._borderWidth=1,this._size=new Nd(330,0),this.domNode=R(`.suggest-details`),this.domNode.classList.add(`no-docs`),this._markdownRenderer=t.createInstance(dt,{editor:e}),this._body=R(`.body`),this._scrollbar=new kp(this._body,{alwaysConsumeMouseWheel:!0}),x(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=x(this._body,R(`.header`)),this._close=x(this._header,R(`span`+Qt.asCSSSelector(B.close))),this._close.title=A(1472,`Close`),this._close.role=`button`,this._close.tabIndex=-1,this._type=x(this._header,R(`p.type`)),this._docs=x(this._body,R(`p.docs`)),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(59)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let e=this._editor.getOptions(),t=e.get(59),n=t.getMassagedFontFamily(),r=e.get(134)||t.fontSize,i=e.get(135)||t.lineHeight,a=t.fontWeight,o=`${r}px`,s=`${i}px`;this.domNode.style.fontSize=o,this.domNode.style.lineHeight=`${i/r}`,this.domNode.style.fontWeight=a,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=s,this._close.style.width=s}getLayoutInfo(){let e=this._editor.getOption(135)||this._editor.getOption(59).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:t*2,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=A(1473,`Loading...`),this._docs.textContent=``,this.domNode.classList.remove(`no-docs`,`no-type`),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){this._renderDisposeable.clear();let{detail:n,documentation:r}=e.completion;if(t){let t=``;t+=`score: ${e.score[0]}\n`,t+=`prefix: ${e.word??`(no prefix)`}\n`,t+=`word: ${e.completion.filterText?e.completion.filterText+` (filterText)`:e.textLabel}\n`,t+=`distance: ${e.distance} (localityBonus-setting)\n`,t+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||`label`}\n`,t+=`commit_chars: ${e.completion.commitCharacters?.join(``)}\n`,r=new Af().appendCodeblock(`empty`,t),n=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!NP(e)){this.clearContents();return}if(this.domNode.classList.remove(`no-docs`,`no-type`),n){let e=n.length>1e5?`${n.substr(0,1e5)}`:n;this._type.textContent=e,this._type.title=e,cr(this._type),this._type.classList.toggle(`auto-wrap`,!/\r?\n^\s+/gim.test(e))}else We(this._type),this._type.title=``,jn(this._type),this.domNode.classList.add(`no-type`);if(We(this._docs),typeof r==`string`)this._docs.classList.remove(`markdown-docs`),this._docs.textContent=r;else if(r){this._docs.classList.add(`markdown-docs`),We(this._docs);let e=this._markdownRenderer.render(r,{asyncRenderCallback:()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}});this._docs.appendChild(e.element),this._renderDisposeable.add(e)}this.domNode.classList.toggle(`detail-and-doc`,!!n&&!!r),this.domNode.style.userSelect=`text`,this.domNode.tabIndex=-1,this._close.onmousedown=e=>{e.preventDefault(),e.stopPropagation()},this._close.onclick=e=>{e.preventDefault(),e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add(`no-docs`),this._type.textContent=``,this._docs.textContent=``}get isEmpty(){return this.domNode.classList.contains(`no-docs`)}get size(){return this._size}layout(e,t){let n=new Nd(e,t);Nd.equals(n,this._size)||(this._size=n,Uf(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}focus(){this.domNode.focus()}},IP=PP([FP(1,U)],IP),LP=class{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new I,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Nx,this._resizable.domNode.classList.add(`suggest-details-container`),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,r,i=0,a=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,r=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(e=>{if(n&&r){this.widget.layout(e.dimension.width,e.dimension.height);let t=!1;e.west&&(a=r.width-e.dimension.width,t=!0),e.north&&(i=r.height-e.dimension.height,t=!0),t&&this._applyTopLeft({top:n.top+i,left:n.left+a})}e.done&&(n=void 0,r=void 0,i=0,a=0,this._userSize=e.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return`suggest.details`}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||=(this._editor.addOverlayWidget(this),!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){this._anchorBox=e.getBoundingClientRect(),this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,n){let r=ot(this.getDomNode().ownerDocument.body),i=this.widget.getLayoutInfo(),a=new Nd(220,2*i.lineHeight),o=e.top,s=(function(){let n=r.width-(e.left+e.width+i.borderWidth+i.horizontalPadding),s=-i.borderWidth+e.left+e.width,c=new Nd(n,r.height-e.top-i.borderHeight-i.verticalPadding),l=c.with(void 0,e.top+e.height-i.borderHeight-i.verticalPadding);return{top:o,left:s,fit:n-t.width,maxSizeTop:c,maxSizeBottom:l,minSize:a.with(Math.min(n,a.width))}})(),c=[s,(function(){let n=e.left-i.borderWidth-i.horizontalPadding,s=Math.max(i.horizontalPadding,e.left-t.width-i.borderWidth),c=new Nd(n,r.height-e.top-i.borderHeight-i.verticalPadding),l=c.with(void 0,e.top+e.height-i.borderHeight-i.verticalPadding);return{top:o,left:s,fit:n-t.width,maxSizeTop:c,maxSizeBottom:l,minSize:a.with(Math.min(n,a.width))}})(),(function(){let n=e.left,o=-i.borderWidth+e.top+e.height,s=new Nd(e.width-i.borderHeight,r.height-e.top-e.height-i.verticalPadding);return{top:o,left:n,fit:s.height-t.height,maxSizeBottom:s,maxSizeTop:s,minSize:a.with(s.width)}})()],l=c.find(e=>e.fit>=0)??c.sort((e,t)=>t.fit-e.fit)[0],u=e.top+e.height-i.borderHeight,d,f=t.height,p=Math.max(l.maxSizeTop.height,l.maxSizeBottom.height);f>p&&(f=p);let m;n?f<=l.maxSizeTop.height?(d=!0,m=l.maxSizeTop):(d=!1,m=l.maxSizeBottom):f<=l.maxSizeBottom.height?(d=!1,m=l.maxSizeBottom):(d=!0,m=l.maxSizeTop);let{top:h,left:ee}=l;!d&&f>e.height&&(h=u-f);let te=this._editor.getDomNode();if(te){let e=te.getBoundingClientRect();h-=e.top,ee-=e.left}this._applyTopLeft({left:ee,top:h}),this._resizable.enableSashes(!d,l===s,d,l!==s),this._resizable.minSize=l.minSize,this._resizable.maxSize=m,this._resizable.layout(f,Math.min(m.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}})),zP,BP,VP=t((()=>{F(),zP=Mc(`fileService`),(function(e){e[e.FILE=0]=`FILE`,e[e.FOLDER=1]=`FOLDER`,e[e.ROOT_FOLDER=2]=`ROOT_FOLDER`})(BP||={})}));function HP(e,t,n,r,i){if(Qt.isThemeIcon(i))return[`codicon-${i.id}`,`predefined-file-icon`];if(Fc.isUri(i))return[];let a=r===BP.ROOT_FOLDER?[`rootfolder-icon`]:r===BP.FOLDER?[`folder-icon`]:[`file-icon`];if(n){let i;if(n.scheme===Du.data)i=df.parseMetaData(n).get(df.META_DATA_LABEL);else{let e=n.path.match(GP);e?(i=WP(e[2].toLowerCase()),e[1]&&a.push(`${WP(e[1].toLowerCase())}-name-dir-icon`)):i=WP(n.authority.toLowerCase())}if(r===BP.ROOT_FOLDER)a.push(`${i}-root-name-folder-icon`);else if(r===BP.FOLDER)a.push(`${i}-name-folder-icon`);else{if(i){if(a.push(`${i}-name-file-icon`),a.push(`name-file-icon`),i.length<=255){let e=i.split(`.`);for(let t=1;t<e.length;t++)a.push(`${e.slice(t).join(`.`)}-ext-file-icon`)}a.push(`ext-file-icon`)}let r=UP(e,t,n);r&&a.push(`${WP(r)}-lang-file-icon`)}}return a}function UP(e,t,n){if(!n)return null;let r=null;if(n.scheme===Du.data){let e=df.parseMetaData(n).get(df.META_DATA_MIME);e&&(r=t.getLanguageIdByMimeType(e))}else{let t=e.getModel(n);t&&(r=t.getLanguageId())}return r&&r!==`plaintext`?r:t.guessLanguageIdByFilepathOrFirstLine(n)}function WP(e){return e.replace(/[\s]/g,`/`)}var GP,KP=t((()=>{ic(),Tl(),xd(),nn(),VP(),sr(),GP=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/}));function qP(e){return e.replace(/\r\n|\r|\n/g,``)}var JP,YP,XP,ZP,QP,$P=t((()=>{y(),cm(),Kn(),sr(),N(),Ua(),q(),xd(),Gr(),KP(),Yd(),h(),P(),VP(),Ie(),Yf(),RP(),JP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},YP=function(e,t){return function(n,r){t(n,r,e)}},XP=To(`suggest-more-info`,B.chevronRight,A(1474,`Icon for more information in the suggest widget.`)),ZP=new class e{static#e=this._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/;static#t=this._regexStrict=RegExp(`^${e._regexRelaxed.source}$`,`i`);extract(t,n){if(t.textLabel.match(e._regexStrict))return n[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(e._regexStrict))return n[0]=t.completion.detail,!0;if(t.completion.documentation){let r=typeof t.completion.documentation==`string`?t.completion.documentation:t.completion.documentation.value,i=e._regexRelaxed.exec(r);if(i&&(i.index===0||i.index+i[0].length===r.length))return n[0]=i[0],!0}return!1}},QP=class{constructor(e,t,n,r){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=r,this._onDidToggleDetails=new j,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId=`suggestion`}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){let t=new I,n=e;n.classList.add(`show-file-icons`);let r=x(e,R(`.icon`)),i=x(r,R(`span.colorspan`)),a=x(x(e,R(`.contents`)),R(`.main`)),o=x(a,R(`.icon-label.codicon`)),s=x(a,R(`span.left`)),c=x(a,R(`span.right`)),l=new Dd(s,{supportHighlights:!0,supportIcons:!0});t.add(l);let u=x(s,R(`span.signature-label`)),d=x(s,R(`span.qualifier-label`)),f=x(c,R(`span.details-label`)),p=x(c,R(`span.readMore`+Qt.asCSSSelector(XP)));return p.title=A(1475,`Read More`),{root:n,left:s,right:c,icon:r,colorspan:i,iconLabel:l,iconContainer:o,parametersLabel:u,qualifierLabel:d,detailsLabel:f,readMore:p,disposables:t,configureFont:()=>{let e=this._editor.getOptions(),t=e.get(59),i=t.getMassagedFontFamily(),o=t.fontFeatureSettings,s=t.fontVariationSettings,c=e.get(134)||t.fontSize,l=e.get(135)||t.lineHeight,u=t.fontWeight,d=t.letterSpacing,f=`${c}px`,m=`${l}px`,h=`${d}px`;n.style.fontSize=f,n.style.fontWeight=u,n.style.letterSpacing=h,a.style.fontFamily=i,a.style.fontFeatureSettings=o,a.style.fontVariationSettings=s,a.style.lineHeight=m,r.style.height=m,r.style.width=m,p.style.height=m,p.style.width=m}}}renderElement(e,t,n){n.configureFont();let{completion:r}=e;n.colorspan.style.backgroundColor=``;let i={labelEscapeNewLines:!0,matches:Da(e.score)},a=[];if(r.kind===19&&ZP.extract(e,a))n.icon.className=`icon customcolor`,n.iconContainer.className=`icon hide`,n.colorspan.style.backgroundColor=a[0];else if(r.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className=`icon hide`,n.iconContainer.className=`icon hide`;let t=HP(this._modelService,this._languageService,Fc.from({scheme:`fake`,path:e.textLabel}),BP.FILE),a=HP(this._modelService,this._languageService,Fc.from({scheme:`fake`,path:r.detail}),BP.FILE);i.extraClasses=t.length>a.length?t:a}else r.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className=`icon hide`,n.iconContainer.className=`icon hide`,i.extraClasses=[HP(this._modelService,this._languageService,Fc.from({scheme:`fake`,path:e.textLabel}),BP.FOLDER),HP(this._modelService,this._languageService,Fc.from({scheme:`fake`,path:r.detail}),BP.FOLDER)].flat()):(n.icon.className=`icon hide`,n.iconContainer.className=``,n.iconContainer.classList.add(`suggest-icon`,...Qt.asClassNameArray(fu.toIcon(r.kind))));r.tags&&r.tags.indexOf(1)>=0&&(i.extraClasses=(i.extraClasses||[]).concat([`deprecated`]),i.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,i),typeof r.label==`string`?(n.parametersLabel.textContent=``,n.detailsLabel.textContent=qP(r.detail||``),n.root.classList.add(`string-label`)):(n.parametersLabel.textContent=qP(r.label.detail||``),n.detailsLabel.textContent=qP(r.label.description||``),n.root.classList.remove(`string-label`)),this._editor.getOption(133).showInlineDetails?cr(n.detailsLabel):jn(n.detailsLabel),NP(e)?(n.right.classList.add(`can-expand-details`),cr(n.readMore),n.readMore.onmousedown=e=>{e.stopPropagation(),e.preventDefault()},n.readMore.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove(`can-expand-details`),jn(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}},QP=JP([YP(1,Ip),YP(2,Qi),YP(3,mr)],QP)})),eF,tF,nF,rF,iF,aF,oF,sF,cF=t((()=>{y(),fy(),fl(),O(),M(),N(),q(),Qd(),Ga(),OP(),vC(),MP(),my(),P(),C(),F(),Zl(),Ei(),qs(),Yf(),Px(),bj(),RP(),$P(),If(),qc(),Gr(),Rt(),eF=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tF=function(e,t){return function(n,r){t(n,r,e)}},Y(`editorSuggestWidget.background`,wa,A(1455,`Background color of the suggest widget.`)),Y(`editorSuggestWidget.border`,He,A(1456,`Border color of the suggest widget.`)),rF=Y(`editorSuggestWidget.foreground`,uf,A(1457,`Foreground color of the suggest widget.`)),Y(`editorSuggestWidget.selectedForeground`,xe,A(1458,`Foreground color of the selected entry in the suggest widget.`)),Y(`editorSuggestWidget.selectedIconForeground`,Ju,A(1459,`Icon foreground color of the selected entry in the suggest widget.`)),iF=Y(`editorSuggestWidget.selectedBackground`,ud,A(1460,`Background color of the selected entry in the suggest widget.`)),Y(`editorSuggestWidget.highlightForeground`,Hi,A(1461,`Color of the match highlights in the suggest widget.`)),Y(`editorSuggestWidget.focusHighlightForeground`,ui,A(1462,`Color of the match highlights in the suggest widget when an item is focused.`)),Y(`editorSuggestWidgetStatus.foreground`,Ee(rF,.5),A(1463,`Foreground color of the suggest widget status.`)),aF=class{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof _C}`}restore(){let e=this._service.get(this._key,0)??``;try{let t=JSON.parse(e);if(Nd.is(t))return Nd.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}},oF=class{static#e=nF=this;static#t=this.LOADING_MESSAGE=A(1464,`Loading...`);static#n=this.NO_SUGGESTIONS_MESSAGE=A(1465,`No suggestions.`);constructor(e,t,n,r,i){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new su,this._pendingShowDetails=new su,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new fr,this._disposables=new I,this._onDidSelect=new xp,this._onDidFocus=new xp,this._onDidHide=new j,this._onDidShow=new j,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new j,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Nx,this.element.domNode.classList.add(`editor-widget`,`suggest-widget`),this._contentWidget=new sF(this,e),this._persistedSize=new aF(t,e);class a{constructor(e,t,n=!1,r=!1){this.persistedSize=e,this.currentSize=t,this.persistHeight=n,this.persistWidth=r}}let o;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),o=new a(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(e=>{if(this._resize(e.dimension.width,e.dimension.height),o&&(o.persistHeight=o.persistHeight||!!e.north||!!e.south,o.persistWidth=o.persistWidth||!!e.east||!!e.west),e.done){if(o){let{itemHeight:e,defaultSize:t}=this.getLayoutInfo(),n=Math.round(e/2),{width:r,height:i}=this.element.size;(!o.persistHeight||Math.abs(o.currentSize.height-i)<=n)&&(i=o.persistedSize?.height??t.height),(!o.persistWidth||Math.abs(o.currentSize.width-r)<=n)&&(r=o.persistedSize?.width??t.width),this._persistedSize.store(new Nd(r,i))}this._contentWidget.unlockPreference(),o=void 0}})),this._messageElement=x(this.element.domNode,R(`.message`)),this._listElement=x(this.element.domNode,R(`.tree`));let s=this._disposables.add(i.createInstance(IP,this.editor));s.onDidClose(()=>this.toggleDetails(),this,this._disposables),this._details=new LP(s,this.editor);let c=()=>this.element.domNode.classList.toggle(`no-icons`,!this.editor.getOption(133).showIcons);c();let l=i.createInstance(QP,this.editor);this._disposables.add(l),this._disposables.add(l.onDidToggleDetails(()=>this.toggleDetails())),this._list=new ie(`SuggestWidget`,this._listElement,{getHeight:e=>this.getLayoutInfo().itemHeight,getTemplateId:e=>`suggestion`},[l],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>_n?`listitem`:`option`,getWidgetAriaLabel:()=>A(1466,`Suggest`),getWidgetRole:()=>`listbox`,getAriaLabel:e=>{let t=e.textLabel,n=fu.toLabel(e.completion.kind);if(typeof e.completion.label!=`string`){let{detail:r,description:i}=e.completion.label;r&&i?t=A(1467,`{0} {1}, {2}, {3}`,t,r,i,n):r?t=A(1468,`{0} {1}, {2}`,t,r,n):i&&(t=A(1469,`{0}, {1}, {2}`,t,i,n))}else t=A(1470,`{0}, {1}`,t,n);if(!e.isResolved||!this._isDetailsVisible())return t;let{documentation:r,detail:i}=e.completion,a=Je(`{0}{1}`,i||``,r?typeof r==`string`?r:r.value:``);return A(1471,`{0}, docs: {1}`,t,a)}}}),this._list.style(Fl({listInactiveFocusBackground:iF,listInactiveFocusOutline:$u})),this._status=i.createInstance(jP,this.element.domNode,pj);let u=()=>this.element.domNode.classList.toggle(`with-status-bar`,this.editor.getOption(133).showStatusBar);u(),this._disposables.add(r.onDidColorThemeChange(e=>this._onThemeChange(e))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown(e=>this._onListMouseDownOrTap(e))),this._disposables.add(this._list.onTap(e=>this._onListMouseDownOrTap(e))),this._disposables.add(this._list.onDidChangeSelection(e=>this._onListSelection(e))),this._disposables.add(this._list.onDidChangeFocus(e=>this._onListFocus(e))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(e=>{e.hasChanged(133)&&(u(),c()),this._completionModel&&(e.hasChanged(59)||e.hasChanged(134)||e.hasChanged(135))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=Z.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Z.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Z.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=Z.HasFocusedSuggestion.bindTo(n),this._disposables.add(Km(this._details.widget.domNode,`keydown`,e=>{this._onDetailsKeydown.fire(e)})),this._disposables.add(this.editor.onMouseDown(e=>this._onEditorMouseDown(e)))}dispose(){this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),this._loadingTimeout?.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){e.element===void 0||e.index===void 0||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){let n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=hh(e.type)?2:1}_onListFocus(e){if(this._ignoreFocusEvents)return;if(this._state===5&&this._setState(3),!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);let t=e.elements[0],n=e.indexes[0];t!==this._focusedItem&&(this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(n),this._currentSuggestionDetails=Zn(async e=>{let n=ps(()=>{this._isDetailsVisible()&&this._showDetails(!0,!1)},250),r=e.onCancellationRequested(()=>n.dispose());try{return await t.resolve(e)}finally{n.dispose(),r.dispose()}}),this._currentSuggestionDetails.then(()=>{n>=this._list.length||t!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[t]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this._showDetails(!1,!1):this.element.domNode.classList.remove(`docs-side`),this.editor.setAriaOptions({activeDescendant:this._list.getElementID(n)}))}).catch($p)),this._onDidFocus.fire({item:t,index:n,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle(`frozen`,e===4),this.element.domNode.classList.remove(`message`),e){case 0:jn(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove(`visible`),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add(`message`),this._messageElement.textContent=nF.LOADING_MESSAGE,jn(this._listElement,this._status.element),cr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,El(nF.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add(`message`),this._messageElement.textContent=nF.NO_SUGGESTIONS_MESSAGE,jn(this._listElement,this._status.element),cr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,El(nF.NO_SUGGESTIONS_MESSAGE);break;case 3:jn(this._messageElement),cr(this._listElement,this._status.element),this._show();break;case 4:jn(this._messageElement),cr(this._listElement,this._status.element),this._show();break;case 5:jn(this._messageElement),cr(this._listElement,this._status.element),this._details.show(),this._show(),this._details.widget.focus();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add(`visible`),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=ps(()=>this._setState(1),t)))}showSuggestions(e,t,n,r,i){if(this._contentWidget.setPosition(this.editor.getPosition()),this._loadingTimeout?.dispose(),this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}let a=this._completionModel.items.length,o=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),o){this._setState(r?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0,t===0?0:this.getLayoutInfo().itemHeight*.33),this._list.setFocus(i?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=ro(Ni(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove(`focused`)})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._list.setFocus(this._list.getFocus()),this._setState(3)):this._state===3&&(this._setState(5),this._isDetailsVisible()?this._details.widget.focus():this.toggleDetails(!0))}toggleDetails(e=!1){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove(`shows-details`)):(NP(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this._showDetails(!1,e))}_showDetails(e,t){this._pendingShowDetails.value=ro(Ni(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show();let n=!1;e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add(`shows-details`),t&&(this._details.widget.focus(),n=!0)),n||this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this._showDetails(!1,!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){this._pendingLayout.clear(),this._pendingShowDetails.clear(),this._loadingTimeout?.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){if(!this.editor.hasModel()||!this.editor.getDomNode())return;let t=ot(this.element.domNode.ownerDocument.body),n=this.getLayoutInfo();e||=n.defaultSize;let r=e.height,i=e.width;if(this._status.element.style.height=`${n.itemHeight}px`,this._state===2||this._state===1)r=n.itemHeight+n.borderHeight,i=n.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Nd(i,r),this._contentWidget.setPreference(2);else{let a=t.width-n.borderHeight-2*n.horizontalPadding;i>a&&(i=a);let o=this._completionModel?this._completionModel.stats.pLabelLen*n.typicalHalfwidthCharacterWidth:i,s=n.statusBarHeight+this._list.contentHeight+n.borderHeight,c=n.itemHeight+n.statusBarHeight,l=td(this.editor.getDomNode()),u=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),d=l.top+u.top+u.height,f=Math.min(t.height-d-n.verticalPadding,s),p=l.top+u.top-n.verticalPadding,m=Math.min(p,s),h=Math.min(Math.max(m,f)+n.borderHeight,s);r===this._cappedHeight?.capped&&(r=this._cappedHeight.wanted),r<c&&(r=c),r>h&&(r=h),r>f||this._forceRenderingAbove&&p>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),h=m):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),h=f),this.element.preferredSize=new Nd(o,n.defaultSize.height),this.element.maxSize=new Nd(a,h),this.element.minSize=new Nd(220,c),this._cappedHeight=r===s?{wanted:this._cappedHeight?.wanted??e.height,capped:r}:void 0}this._resize(i,r)}_resize(e,t){let{width:n,height:r}=this.element.maxSize;e=Math.min(n,e),t=Math.min(r,t);let{statusBarHeight:i}=this.getLayoutInfo();this._list.layout(t-i,e),this._listElement.style.height=`${t-i}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,this._contentWidget.getPosition()?.preference[0]===2)}getLayoutInfo(){let e=this.editor.getOption(59),t=Rp(this.editor.getOption(135)||e.lineHeight,8,1e3),n=!this.editor.getOption(133).showStatusBar||this._state===2||this._state===1?0:t,r=this._details.widget.borderWidth;return{itemHeight:t,statusBarHeight:n,borderWidth:r,borderHeight:2*r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Nd(430,n+12*t)}}_isDetailsVisible(){return this._storageService.getBoolean(`expandSuggestionDocs`,0,!1)}_setDetailsVisible(e){this._storageService.store(`expandSuggestionDocs`,e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},oF=nF=eF([tF(1,Vd),tF(2,bh),tF(3,mr),tF(4,U)],oF),sF=class{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return`editor.widget.suggestWidget`}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){let{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:r}=this._widget.getLayoutInfo();return new Nd(t+2*n+r,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}})),lF,uF,dF,fF,pF,mF,hF,gF,_F,vF=t((()=>{qc(),sn(),wu(),M(),N(),Bu(),q(),Rt(),em(),lr(),Tr(),v(),vr(),Su(),_(),yc(),Gr(),oM(),k_(),QN(),rP(),P(),jo(),C(),F(),$s(),bj(),cP(),uP(),TP(),DP(),cF(),Ue(),Tl(),Bp(),y(),md(),ah(),lF=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},uF=function(e,t){return function(n,r){t(n,r,e)}},fF=class{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=L.register({description:`suggest-line-suffix`,stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){let n=e.getOffsetAt(t),r=e.getPositionAt(n+1);e.changeDecorations(e=>{this._marker&&e.removeDecoration(this._marker),this._marker=e.addDecoration(T.fromPositions(t,r),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){let t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}},pF=class{static#e=dF=this;static#t=this.ID=`editor.contrib.suggestController`;static get(e){return e.getContribution(dF.ID)}get onWillInsertSuggestItem(){return this._onWillInsertSuggestItem.event}constructor(e,t,n,r,i,a,o){this._memoryService=t,this._commandService=n,this._contextKeyService=r,this._instantiationService=i,this._logService=a,this._telemetryService=o,this._lineSuffix=new su,this._toDispose=new I,this._selectors=new mF(e=>e.priority),this._onWillInsertSuggestItem=new j,this._wantsForceRenderingAbove=!1,this.editor=e,this.model=i.createInstance(wP,this.editor),this._selectors.register({priority:0,select:(e,t,n)=>this._memoryService.select(e,t,n)});let s=Z.InsertMode.bindTo(r);s.set(e.getOption(133).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>s.set(e.getOption(133).insertMode))),this.widget=this._toDispose.add(new mm(Ni(e.getDomNode()),()=>{let e=this._instantiationService.createInstance(oF,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect(e=>this._insertSuggestion(e,0),this));let t=new lP(this.editor,e,this.model,e=>this._insertSuggestion(e,2));this._toDispose.add(t);let n=Z.MakesTextEdit.bindTo(this._contextKeyService),r=Z.HasInsertAndReplaceRange.bindTo(this._contextKeyService),i=Z.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(qm(()=>{n.reset(),r.reset(),i.reset()})),this._toDispose.add(e.onDidFocus(({item:e})=>{let t=this.editor.getPosition(),a=e.editStart.column,o=t.column,s=!0;this.editor.getOption(1)===`smart`&&this.model.state===2&&!e.completion.additionalTextEdits&&!(e.completion.insertTextRules&4)&&o-a===e.completion.insertText.length&&(s=this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:a,endLineNumber:t.lineNumber,endColumn:o})!==e.completion.insertText),n.set(s),r.set(!H.equals(e.editInsertEnd,e.editReplaceEnd)),i.set(!!e.provider.resolveCompletionItem||!!e.completion.documentation||e.completion.detail!==e.completion.label)})),this._toDispose.add(e.onDetailsKeyDown(e=>{if(e.toKeyCodeChord().equals(new pe(!0,!1,!1,!1,33))||Sh&&e.toKeyCodeChord().equals(new pe(!1,!1,!1,!0,33))){e.stopPropagation();return}e.toKeyCodeChord().isModifierKey()||this.editor.focus()})),this._wantsForceRenderingAbove&&e.forceRenderingAbove(),e})),this._overtypingCapturer=this._toDispose.add(new mm(Ni(e.getDomNode()),()=>this._toDispose.add(new EP(this.editor,this.model)))),this._alternatives=this._toDispose.add(new mm(Ni(e.getDomNode()),()=>this._toDispose.add(new sP(this.editor,this._contextKeyService)))),this._toDispose.add(i.createInstance(nP,e)),this._toDispose.add(this.model.onDidTrigger(e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new fF(this.editor.getModel(),e.position)})),this._toDispose.add(this.model.onDidSuggest(e=>{if(e.triggerOptions.shy)return;let t=-1;for(let n of this._selectors.itemsOrderedByPriorityDesc)if(t=n.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items),t!==-1)break;if(t===-1&&(t=0),this.model.state===0)return;let n=!1;if(e.triggerOptions.auto){let t=this.editor.getOption(133);t.selectionMode===`never`||t.selectionMode===`always`?n=t.selectionMode===`never`:t.selectionMode===`whenTriggerCharacter`?n=e.triggerOptions.triggerKind!==1:t.selectionMode===`whenQuickSuggestion`&&(n=e.triggerOptions.triggerKind===1&&!e.triggerOptions.refilter)}this.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.triggerOptions.auto,n)})),this._toDispose.add(this.model.onDidCancel(e=>{e.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let c=Z.AcceptSuggestionsOnEnter.bindTo(r),l=()=>{let e=this.editor.getOption(1);c.set(e===`on`||e===`smart`)};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>l())),l()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;let n=iM.get(this.editor);if(!n)return;this._onWillInsertSuggestItem.fire({item:e.item});let r=this.editor.getModel(),i=r.getAlternativeVersionId(),{item:a}=e,o=[],s=new Zd;t&1||this.editor.pushUndoStop();let c=this.getOverwriteInfo(a,!!(t&8));this._memoryService.memorize(r,this.editor.getPosition(),a);let l=a.isResolved,u=-1,d=-1;if(Array.isArray(a.completion.additionalTextEdits)){this.model.cancel();let e=Nn.capture(this.editor);this.editor.executeEdits(`suggestController.additionalTextEdits.sync`,a.completion.additionalTextEdits.map(e=>{let t=T.lift(e.range);if(t.startLineNumber===a.position.lineNumber&&t.startColumn>a.position.column){let e=this.editor.getPosition().column-a.position.column,n=e,r=T.spansMultipleLines(t)?0:e;t=new T(t.startLineNumber,t.startColumn+n,t.endLineNumber,t.endColumn+r)}return un.replaceMove(t,e.text)})),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!l){let e=new vd,n,i=r.onDidChangeContent(e=>{if(e.isFlush){s.cancel(),i.dispose();return}for(let t of e.changes){let e=T.getEndPosition(t.range);(!n||H.isBefore(e,n))&&(n=e)}}),c=t;t|=2;let l=!1,u=this.editor.onWillType(()=>{u.dispose(),l=!0,c&2||this.editor.pushUndoStop()});o.push(a.resolve(s.token).then(()=>{if(!a.completion.additionalTextEdits||s.token.isCancellationRequested)return;if(n&&a.completion.additionalTextEdits.some(e=>H.isBefore(n,T.getStartPosition(e.range))))return!1;l&&this.editor.pushUndoStop();let e=Nn.capture(this.editor);return this.editor.executeEdits(`suggestController.additionalTextEdits.async`,a.completion.additionalTextEdits.map(e=>un.replaceMove(T.lift(e.range),e.text))),e.restoreRelativeVerticalPositionOfCursor(this.editor),(l||!(c&2))&&this.editor.pushUndoStop(),!0}).then(t=>{this._logService.trace(`[suggest] async resolving of edits DONE (ms, applied?)`,e.elapsed(),t),d=t===!0?1:t===!1?0:-2}).finally(()=>{i.dispose(),u.dispose()}))}let{insertText:f}=a.completion;if(a.completion.insertTextRules&4||(f=O_.escape(f)),this.model.cancel(),n.insert(f,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(a.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value,reason:dm.suggest({providerId:Dt.fromExtensionId(a.extensionId?.value)})}),t&2||this.editor.pushUndoStop(),a.completion.command)if(a.completion.command.id===hF.id)this.model.trigger({auto:!0,retrigger:!0});else{let e=new vd;o.push(this._commandService.executeCommand(a.completion.command.id,...a.completion.command.arguments?[...a.completion.command.arguments]:[]).catch(e=>{a.completion.extensionId?Jc(e):$p(e)}).finally(()=>{u=e.elapsed()}))}t&4&&this._alternatives.value.set(e,e=>{for(s.cancel();r.canUndo();){i!==r.getAlternativeVersionId()&&r.undo(),this._insertSuggestion(e,3|(t&8?8:0));break}}),this._alertCompletionItem(a),Promise.all(o).finally(()=>{this._reportSuggestionAcceptedTelemetry(a,r,l,u,d,e.index,e.model.items),this.model.clear(),s.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n,r,i,a,o){if(Math.random()>1e-4)return;let s=new Map;for(let e=0;e<Math.min(30,o.length);e++){let t=o[e].textLabel;s.has(t)?s.get(t).push(e):s.set(t,[e])}let c=s.get(e.textLabel),l=c&&c.length>1?c[0]:-1;this._telemetryService.publicLog2(`suggest.acceptedSuggestion`,{extensionId:e.extensionId?.value??`unknown`,providerId:e.provider._debugDisplayName??`unknown`,kind:e.completion.kind,basenameHash:ml(yp(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:Kc(t.uri),resolveInfo:e.provider.resolveCompletionItem?n?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:r,additionalEditsAsync:i,index:a,firstIndex:l})}getOverwriteInfo(e,t){en(this.editor.hasModel());let n=this.editor.getOption(133).insertMode===`replace`;t&&(n=!n);let r=e.position.column-e.editStart.column,i=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,a=this.editor.getPosition().column-e.position.column,o=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:r+a,overwriteAfter:i+o}}_alertCompletionItem(e){Xf(e.completion.additionalTextEdits)&&Qp(A(1445,`Accepting '{0}' made {1} additional edits`,e.textLabel,e.completion.additionalTextEdits.length))}triggerSuggest(e,t,n){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:n?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;let t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},r=e=>{if(e.completion.insertTextRules&4||e.completion.additionalTextEdits)return!0;let t=this.editor.getPosition(),n=e.editStart.column,r=t.column;return r-n===e.completion.insertText.length?this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:n,endLineNumber:t.lineNumber,endColumn:r})!==e.completion.insertText:!0};mf.once(this.model.onDidTrigger)(e=>{let t=[];mf.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{hm(t),n()},void 0,t),this.model.onDidSuggest(({completionModel:e})=>{if(hm(t),e.items.length===0){n();return}let i=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.items),a=e.items[i];if(!r(a)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:i,item:a,model:e},7)},void 0,t)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){let n=this.widget.value.getFocusedItem(),r=0;e&&(r|=4),t&&(r|=8),this._insertSuggestion(n,r)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.isInitialized?this.widget.value.forceRenderingAbove():this._wantsForceRenderingAbove=!0}stopForceRenderingAbove(){this.widget.isInitialized?this.widget.value.stopForceRenderingAbove():this._wantsForceRenderingAbove=!1}registerSelector(e){return this._selectors.register(e)}},pF=dF=lF([uF(1,ZN),uF(2,no),uF(3,bh),uF(4,U),uF(5,Fp),uF(6,Ta)],pF),mF=class{constructor(e){this.prioritySelector=e,this._items=[]}register(e){if(this._items.indexOf(e)!==-1)throw Error(`Value is already registered`);return this._items.push(e),this._items.sort((e,t)=>this.prioritySelector(t)-this.prioritySelector(e)),{dispose:()=>{let t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}},hF=class e extends S{static#e=this.id=`editor.action.triggerSuggest`;constructor(){super({id:e.id,label:K(1453,`Trigger Suggest`),precondition:b.and(J.writable,J.hasCompletionItemProvider,Z.Visible.toNegated()),kbOpts:{kbExpr:J.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){let r=pF.get(t);if(!r)return;let i;n&&typeof n==`object`&&n.auto===!0&&(i=!0),r.triggerSuggest(void 0,i,void 0)}},k(pF.ID,pF,2),D(hF),gF=190,_F=dn.bindToContribution(pF.get),E(new _F({id:`acceptSelectedSuggestion`,precondition:b.and(Z.Visible,Z.HasFocusedSuggestion),handler(e){e.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:b.and(Z.Visible,J.textInputFocus),weight:gF},{primary:3,kbExpr:b.and(Z.Visible,J.textInputFocus,Z.AcceptSuggestionsOnEnter,Z.MakesTextEdit),weight:gF}],menuOpts:[{menuId:pj,title:A(1446,`Insert`),group:`left`,order:1,when:Z.HasInsertAndReplaceRange.toNegated()},{menuId:pj,title:A(1447,`Insert`),group:`left`,order:1,when:b.and(Z.HasInsertAndReplaceRange,Z.InsertMode.isEqualTo(`insert`))},{menuId:pj,title:A(1448,`Replace`),group:`left`,order:1,when:b.and(Z.HasInsertAndReplaceRange,Z.InsertMode.isEqualTo(`replace`))}]})),E(new _F({id:`acceptAlternativeSelectedSuggestion`,precondition:b.and(Z.Visible,J.textInputFocus,Z.HasFocusedSuggestion),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:pj,group:`left`,order:2,when:b.and(Z.HasInsertAndReplaceRange,Z.InsertMode.isEqualTo(`insert`)),title:A(1449,`Replace`)},{menuId:pj,group:`left`,order:2,when:b.and(Z.HasInsertAndReplaceRange,Z.InsertMode.isEqualTo(`replace`)),title:A(1450,`Insert`)}]})),hn.registerCommandAlias(`acceptSelectedSuggestionOnEnter`,`acceptSelectedSuggestion`),E(new _F({id:`hideSuggestWidget`,precondition:Z.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:9,secondary:[1033]}})),E(new _F({id:`selectNextSuggestion`,precondition:b.and(Z.Visible,b.or(Z.MultipleSuggestions,Z.HasFocusedSuggestion.negate())),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),E(new _F({id:`selectNextPageSuggestion`,precondition:b.and(Z.Visible,b.or(Z.MultipleSuggestions,Z.HasFocusedSuggestion.negate())),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:12,secondary:[2060]}})),E(new _F({id:`selectLastSuggestion`,precondition:b.and(Z.Visible,b.or(Z.MultipleSuggestions,Z.HasFocusedSuggestion.negate())),handler:e=>e.selectLastSuggestion()})),E(new _F({id:`selectPrevSuggestion`,precondition:b.and(Z.Visible,b.or(Z.MultipleSuggestions,Z.HasFocusedSuggestion.negate())),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),E(new _F({id:`selectPrevPageSuggestion`,precondition:b.and(Z.Visible,b.or(Z.MultipleSuggestions,Z.HasFocusedSuggestion.negate())),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:11,secondary:[2059]}})),E(new _F({id:`selectFirstSuggestion`,precondition:b.and(Z.Visible,b.or(Z.MultipleSuggestions,Z.HasFocusedSuggestion.negate())),handler:e=>e.selectFirstSuggestion()})),E(new _F({id:`focusSuggestion`,precondition:b.and(Z.Visible,Z.HasFocusedSuggestion.negate()),handler:e=>e.focusSuggestion(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),E(new _F({id:`focusAndAcceptSuggestion`,precondition:b.and(Z.Visible,Z.HasFocusedSuggestion.negate()),handler:e=>{e.focusSuggestion(),e.acceptSelectedSuggestion(!0,!1)}})),E(new _F({id:`toggleSuggestionDetails`,precondition:b.and(Z.Visible,Z.HasFocusedSuggestion),handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:pj,group:`right`,order:1,when:b.and(Z.DetailsVisible,Z.CanResolve),title:A(1451,`Show Less`)},{menuId:pj,group:`right`,order:1,when:b.and(Z.DetailsVisible.toNegated(),Z.CanResolve),title:A(1452,`Show More`)}]})),E(new _F({id:`toggleExplainMode`,precondition:Z.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2138}})),E(new _F({id:`toggleSuggestionFocus`,precondition:Z.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:2570,mac:{primary:778}}})),E(new _F({id:`insertBestCompletion`,precondition:b.and(J.textInputFocus,b.equals(`config.editor.tabCompletion`,`on`),nP.AtEnd,Z.Visible.toNegated(),sP.OtherSuggestions.toNegated(),iM.InSnippetMode.toNegated()),handler:(e,t)=>{e.triggerSuggestAndAcceptBest(Yo(t)?{fallback:`tab`,...t}:{fallback:`tab`})},kbOpts:{weight:gF,primary:2}})),E(new _F({id:`insertNextSuggestion`,precondition:b.and(J.textInputFocus,b.equals(`config.editor.tabCompletion`,`on`),sP.OtherSuggestions,Z.Visible.toNegated(),iM.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:2}})),E(new _F({id:`insertPrevSuggestion`,precondition:b.and(J.textInputFocus,b.equals(`config.editor.tabCompletion`,`on`),sP.OtherSuggestions,Z.Visible.toNegated(),iM.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:gF,kbExpr:J.textInputFocus,primary:1026}})),D(class extends S{constructor(){super({id:`editor.action.resetSuggestSize`,label:K(1454,`Reset Suggest Widget Size`),precondition:void 0})}run(e,t){pF.get(t)?.resetWidgetSize()}})}));function yF(e,t){return e===t?!0:!e||!t?!1:e.equals(t)}var bF,xF,SF,CF=t((()=>{sn(),Co(),N(),q(),Su(),_(),yh(),Gr(),PM(),k_(),$j(),vF(),ls(),bF=class extends z{get selectedItem(){return this._currentSuggestItemInfo}constructor(e,t,n){super(),this.editor=e,this.suggestControllerPreselector=t,this.onWillAccept=n,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new j),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(e.onKeyDown(e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));let r=pF.get(this.editor);if(r){this._register(r.registerSelector({priority:100,select:(e,t,n)=>{let i=this.editor.getModel();if(!i)return-1;let a=this.suggestControllerPreselector(),o=a?jM(a,i):void 0;if(!o)return-1;let s=H.lift(t),c=kr(n.map((e,t)=>{let n=jM(xF.fromSuggestion(r,i,s,e,this.isShiftKeyPressed).getSingleTextEdit(),i);return{index:t,valid:MM(o,n),prefixLength:n.text.length,suggestItem:e}}).filter(e=>e&&e.valid&&e.prefixLength>0),Fe(e=>e.prefixLength,er));return c?c.index:-1}}));let e=!1,t=()=>{e||(e=!0,this._register(r.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(r.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(r.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(mf.once(r.model.onDidTrigger)(e=>{t()})),this._register(r.onWillInsertSuggestItem(e=>{let t=this.editor.getPosition(),n=this.editor.getModel();if(!t||!n)return;let i=xF.fromSuggestion(r,n,t,e.item,this.isShiftKeyPressed);this.onWillAccept(i)}))}this.update(this._isActive)}update(e){let t=this.getSuggestItemInfo();(this._isActive!==e||!yF(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){let e=pF.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;let t=e.widget.value.getFocusedItem(),n=this.editor.getPosition(),r=this.editor.getModel();if(!(!t||!n||!r))return xF.fromSuggestion(e,r,n,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){pF.get(this.editor)?.stopForceRenderingAbove()}forceRenderingAbove(){pF.get(this.editor)?.forceRenderingAbove()}},xF=class e{static fromSuggestion(t,n,r,i,a){let{insertText:o}=i.completion,s=!1;if(i.completion.insertTextRules&4){let e=new O_().parse(o);e.children.length<100&&Qj.adjustWhitespace(n,r,!0,e),o=e.toString(),s=!0}let c=t.getOverwriteInfo(i,a);return new e(T.fromPositions(r.delta(0,-c.overwriteBefore),r.delta(0,Math.max(c.overwriteAfter,0))),o,i.completion.kind,s,i.container.incomplete??!1)}constructor(e,t,n,r,i){this.range=e,this.insertText=t,this.completionItemKind=n,this.isSnippetText=r,this.listIncomplete=i}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new ft(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}getSingleTextEdit(){return new ca(this.range,this.insertText)}},SF=class extends z{constructor(e,t,n){super(),this._editorObs=e,this._handleSuggestAccepted=t,this._suggestControllerPreselector=n,this._suggestWidgetAdaptor=this._register(new bF(this._editorObs.editor,()=>(this._editorObs.forceUpdate(),this._suggestControllerPreselector()),e=>this._editorObs.forceUpdate(t=>{this._handleSuggestAccepted(e)}))),this.selectedItem=Dp(this,e=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(t=>e(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem)}stopForceRenderingAbove(){this._suggestWidgetAdaptor.stopForceRenderingAbove()}forceRenderingAbove(){this._suggestWidgetAdaptor.forceRenderingAbove()}}})),wF,TF=t((()=>{wF=class{constructor(e,t){this.lineNumber=e,this.columnRange=t}}})),EF,DF=t((()=>{M(),wh(),_(),EF=class{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new tc(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new T(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}toZeroBasedOffsetRange(){return new pa(this.startColumn-1,this.endColumnExclusive-1)}}})),OF=t((()=>{})),kF,AF,jF=t((()=>{wh(),Er(),kF=class e{static fromLineTokens(t){let n=[];for(let e=0;e<t.getCount();e++)n.push(new AF(t.getTokenText(e),t.getMetadata(e)));return e.create(n)}static create(t){return new e(t)}constructor(e){this._tokenInfo=e}toLineTokens(e){return Ii.createFromTextAndMetadata(this.map((e,t)=>({text:t.text,metadata:t.metadata})),e)}map(e){let t=[],n=0;for(let r of this._tokenInfo){let i=new pa(n,n+r.text.length);t.push(e(i,r)),n+=r.text.length}return t}slice(t){let n=[],r=0;for(let e of this._tokenInfo){let i=r,a=i+e.text.length;if(a>t.start){if(i>=t.endExclusive)break;let r=Math.max(0,t.start-i),o=Math.max(0,a-t.endExclusive);n.push(new AF(e.text.slice(r,e.text.length-o),e.metadata))}r+=e.text.length}return e.create(n)}append(t){let n=this._tokenInfo.concat(t._tokenInfo);return e.create(n)}},AF=class{constructor(e,t){this.text=e,this.metadata=t}}}));function MF(e,t,n){let r=[],i=[];function a(e,t){if(i.length>0){let n=i[i.length-1];t&&n.decorations.push(new $e(n.content.length+1,n.content.length+1+e[0].line.length,t,0)),n.content+=e[0].line,e=e.slice(1)}for(let n of e)i.push({content:n.line,decorations:t?[new $e(1,n.line.length+1,t,0),...n.lineDecorations]:[...n.lineDecorations]})}let o=t.getLineContent(e.lineNumber),s,c=0;for(let t of e.parts){let e=t.lines;s===void 0?(r.push({column:t.column,text:e[0].line,preview:t.preview,lineDecorations:e[0].lineDecorations}),e=e.slice(1)):a([{line:o.substring(c,t.column-1),lineDecorations:[]}],void 0),e.length>0&&(a(e,n),s===void 0&&t.column<=o.length&&(s=t.column)),c=t.column-1}let l;return s!==void 0&&(l=new wF(e.lineNumber,new EF(c+1,o.length+1))),{inlineTexts:r,additionalLines:i,hiddenRange:s===void 0?void 0:new EF(s,o.length+1),additionalLinesOriginalSuffix:l}}function NF(e){return Oe(e)&&e.classList.contains(RF)}function PF(e,t,n,r,i){let a=r.get(40),o=r.get(132),s=r.get(107),c=r.get(60),l=r.get(59),u=r.get(75),d=`suggest-preview-text`;i&&(d+=` clickable`);let f=new cf(1e4);f.appendString(`<div class="${d}">`);for(let e=0,r=n.length;e<r;e++){let r=n[e],i=r.content;f.appendString(`<div class="view-line`),f.appendString(`" style="top:`),f.appendString(String(e*u)),f.appendString(`px;width:1000000px;">`);let d=i.getLineContent(),p=Tt(d),m=uh(d);Pa(new Tc(l.isMonospace&&!a,l.canUseHalfwidthRightwardsArrow,d,!1,p,m,0,i,r.decorations,t,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,o,`none`,s,c!==rc.OFF,null,null,0),f),f.appendString(`</div>`)}f.appendString(`</div>`),jf(e,l);let p=f.build();e.innerHTML=HF?HF.createHTML(p):p}var FF,IF,LF,RF,zF,BF,VF,HF,UF=t((()=>{ks(),Sp(),Kn(),N(),ds(),q(),ls(),Ga(),Id(),Na(),bd(),Go(),Su(),_(),hp(),h(),zf(),Er(),zm(),th(),AM(),TF(),DF(),y(),OF(),st(),ol(),jF(),sn(),FF=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},IF=function(e,t){return function(n,r){t(n,r,e)}},RF=`ghost-text`,zF=class extends z{static#e=LF=this;static#t=this.hot=Yn(LF);constructor(e,t,n,r,i,a){super(),this._editor=e,this._model=t,this._options=n,this._shouldKeepCursorStable=r,this._isClickable=i,this._languageService=a,this._isDisposed=Cc(this,!1),this._editorObs=Qe(this._editor),this._warningState=G(e=>{let t=this._model.ghostText.read(e);if(!t)return;let n=this._model.warning.read(e);if(n)return{lineNumber:t.lineNumber,position:new H(t.lineNumber,t.parts[0].column),icon:n.icon}}),this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._useSyntaxHighlighting=this._options.map(e=>e.syntaxHighlightingEnabled),this._extraClassNames=G(this,e=>{let t=[...this._options.read(e).extraClasses??[]];return this._useSyntaxHighlighting.read(e)&&t.push(`syntax-highlighted`),this._warningState.read(e)&&t.push(`warning`),t.map(e=>` ${e}`).join(``)}),this.uiState=G(this,e=>{if(this._isDisposed.read(e))return;let t=this._editorObs.model.read(e);if(t!==this._model.targetTextModel.read(e))return;let n=this._model.ghostText.read(e);if(!n)return;let r=n instanceof kM?n.columnRange:void 0,i=this._useSyntaxHighlighting.read(e),{inlineTexts:a,additionalLines:o,hiddenRange:s,additionalLinesOriginalSuffix:c}=MF(n,t,RF+this._extraClassNames.read(e)),l=t.getLineContent(n.lineNumber),u=new Vf(a.map(e=>Wn.insert(e.column-1,e.text))),d=i?t.tokenization.tokenizeLinesAt(n.lineNumber,[u.apply(l),...o.map(e=>e.content)]):void 0,f=u.getNewRanges(),p=a.map((e,t)=>({...e,tokens:d?.[0]?.getTokensInRange(f[t])})),m=o.map((e,n)=>{let r=d?.[n+1]??Ii.createEmpty(e.content,this._languageService.languageIdCodec);if(n===o.length-1&&c){let e=kF.fromLineTokens(t.tokenization.getLineTokens(c.lineNumber)).slice(c.columnRange.toZeroBasedOffsetRange());r=kF.fromLineTokens(r).append(e).toLineTokens(r.languageIdCodec)}return{content:r,decorations:e.decorations}}),h=this._editor.getSelection()?.getStartPosition().column,ee=p.filter(e=>e.text!==``),te=ee.length!==0,ne={cursorColumnDistance:(te?ee[0].column:1)-h,cursorLineDistance:te?0:o.findIndex(e=>e.content!==``)+1,lineCountOriginal:te?1:0,lineCountModified:o.length+(te?1:0),characterCountOriginal:0,characterCountModified:As(ee.map(e=>e.text.length))+As(m.map(e=>e.content.getTextLength())),disjointReplacements:ee.length+(o.length>0?1:0),sameShapeReplacements:ee.length>1&&m.length===0?ee.every(e=>e.text===ee[0].text):void 0};return this._model.handleInlineCompletionShown.read(e)?.(ne),{replacedRange:r,inlineTexts:p,additionalLines:m,hiddenRange:s,lineNumber:n.lineNumber,additionalReservedLineCount:this._model.minReservedLineCount.read(e),targetTextModel:t,syntaxHighlightingEnabled:i}}),this.decorations=G(this,e=>{let t=this.uiState.read(e);if(!t)return[];let n=[],r=this._extraClassNames.read(e);t.replacedRange&&n.push({range:t.replacedRange.toRange(t.lineNumber),options:{inlineClassName:`inline-completion-text-to-replace`+r,description:`GhostTextReplacement`}}),t.hiddenRange&&n.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:`ghost-text-hidden`,description:`ghost-text-hidden`}});for(let e of t.inlineTexts)n.push({range:T.fromPositions(new H(t.lineNumber,e.column)),options:{description:`ghost-text-decoration`,after:{content:e.text,tokens:e.tokens,inlineClassName:(e.preview?`ghost-text-decoration-preview`:`ghost-text-decoration`)+(this._isClickable?` clickable`:``)+r+e.lineDecorations.map(e=>` `+e.className).join(` `),cursorStops:al.Left,attachedData:new BF(this)},showIfCollapsed:!0}});return n}),this._additionalLinesWidget=this._register(new VF(this._editor,G(e=>{let t=this.uiState.read(e);return t?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0}),this._shouldKeepCursorStable,this._isClickable)),this._isInlineTextHovered=this._editorObs.isTargetHovered(e=>e.target.type===6&&e.target.detail.injectedText?.options.attachedData instanceof BF&&e.target.detail.injectedText.options.attachedData.owner===this,this._store),this.isHovered=G(this,e=>this._isDisposed.read(e)?!1:this._isInlineTextHovered.read(e)||this._additionalLinesWidget.isHovered.read(e)),this.height=G(this,e=>this._editorObs.getOption(75).read(e)+(this._additionalLinesWidget.viewZoneHeight.read(e)??0)),this._register(qm(()=>{this._isDisposed.set(!0,void 0)})),this._register(this._editorObs.setDecorations(this.decorations)),this._isClickable&&(this._register(this._additionalLinesWidget.onDidClick(e=>this._onDidClick.fire(e))),this._register(this._editor.onMouseUp(e=>{if(e.target.type!==6)return;let t=e.target.detail.injectedText?.options.attachedData;t instanceof BF&&t.owner===this&&this._onDidClick.fire(e.event)}))),this._register(xm((e,t)=>{}))}static getWarningWidgetContext(e){let t=e.ghostTextViewWarningWidgetData;if(t)return t;if(e.parentElement)return this.getWarningWidgetContext(e.parentElement)}ownsViewZone(e){return this._additionalLinesWidget.viewZoneId===e}},zF=LF=FF([IF(5,Qi)],zF),BF=class{constructor(e){this.owner=e}},VF=class extends z{get viewZoneId(){return this._viewZoneInfo?.viewZoneId}get viewZoneHeight(){return this._viewZoneHeight}constructor(e,t,n,r){super(),this._editor=e,this._lines=t,this._shouldKeepCursorStable=n,this._isClickable=r,this._viewZoneHeight=Cc(`viewZoneHeight`,void 0),this.editorOptionsChanged=f(`editorOptionChanged`,mf.filter(this._editor.onDidChangeConfiguration,e=>e.hasChanged(40)||e.hasChanged(132)||e.hasChanged(112)||e.hasChanged(107)||e.hasChanged(60)||e.hasChanged(59)||e.hasChanged(75))),this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._viewZoneListener=this._register(new su),this.isHovered=Qe(this._editor).isTargetHovered(e=>NF(e.target.element),this._store),this.hasBeenAccepted=!1,this._editor instanceof m&&this._shouldKeepCursorStable&&this._register(this._editor.onBeforeExecuteEdit(e=>this.hasBeenAccepted=e.source===`inlineSuggestion.accept`)),this._register(Xl(e=>{let t=this._lines.read(e);this.editorOptionsChanged.read(e),t?(this.hasBeenAccepted=!1,this.updateLines(t.lineNumber,t.additionalLines,t.minReservedLineCount)):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this._viewZoneListener.clear(),this._editor.changeViewZones(e=>{this.removeActiveViewZone(e)})}updateLines(e,t,n){let r=this._editor.getModel();if(!r)return;let{tabSize:i}=r.getOptions();this._editor.changeViewZones(r=>{let a=new I;this.removeActiveViewZone(r);let o=Math.max(t.length,n);if(o>0){let n=document.createElement(`div`);PF(n,i,t,this._editor.getOptions(),this._isClickable),this._isClickable&&(a.add(ch(n,`mousedown`,e=>{e.preventDefault()})),a.add(ch(n,`click`,e=>{NF(e.target)&&this._onDidClick.fire(new St(Ni(e),e))}))),this.addViewZone(r,e,o,n)}this._viewZoneListener.value=a})}addViewZone(e,t,n,r){let i=e.addZone({afterLineNumber:t,heightInLines:n,domNode:r,afterColumnAffinity:1,onComputedHeight:e=>{this._viewZoneHeight.set(e,void 0)}});this.keepCursorStable(t,n),this._viewZoneInfo={viewZoneId:i,heightInLines:n,lineNumber:t}}removeActiveViewZone(e){this._viewZoneInfo&&(e.removeZone(this._viewZoneInfo.viewZoneId),this.hasBeenAccepted||this.keepCursorStable(this._viewZoneInfo.lineNumber,-this._viewZoneInfo.heightInLines),this._viewZoneInfo=void 0,this._viewZoneHeight.set(void 0,void 0))}keepCursorStable(e,t){if(!this._shouldKeepCursorStable)return;let n=this._editor.getSelection()?.getStartPosition()?.lineNumber;n!==void 0&&e<n&&this._editor.setScrollTop(this._editor.getScrollTop()+t*this._editor.getOption(75))}},HF=es(`editorGhostText`,{createHTML:e=>e})})),WF,GF,KF=t((()=>{Cu(),Ga(),ar(),Su(),_(),WF=class e{static#e=this.empty=new e([]);constructor(e){this.replacements=e,ul(ip(e,(e,t)=>e.lineRange.endLineNumberExclusive<=t.lineRange.startLineNumber))}toString(){return this.replacements.map(e=>e.toString()).join(`,`)}getNewLineRanges(){let e=[],t=0;for(let n of this.replacements)e.push(Xt.ofLength(n.lineRange.startLineNumber+t,n.newLines.length)),t+=n.newLines.length-n.lineRange.length;return e}},GF=class e{static fromSingleTextEdit(t,n){let r=Li(t.text),i=t.range.startLineNumber,a=n.getValueOfRange(T.fromPositions(new H(t.range.startLineNumber,1),t.range.getStartPosition()));r[0]=a+r[0];let o=t.range.endLineNumber+1,s=n.getTransformer().getLineLength(t.range.endLineNumber)+1,c=n.getValueOfRange(T.fromPositions(t.range.getEndPosition(),new H(t.range.endLineNumber,s)));r[r.length-1]=r[r.length-1]+c;let l=t.range.startColumn===n.getTransformer().getLineLength(t.range.startLineNumber)+1,u=t.range.endColumn===1;return l&&r[0].length===a.length&&(i++,r.shift()),r.length>0&&i<o&&u&&r[r.length-1].length===c.length&&(o--,r.pop()),new e(new Xt(i,o),r)}constructor(e,t){this.lineRange=e,this.newLines=t}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}toLineEdit(){return new WF([this])}}})),qF,JF=t((()=>{KF(),ar(),qF=class{get lineEdit(){return GF.fromSingleTextEdit(this.edit.toReplacement(this.originalText),this.originalText)}get originalLineRange(){return this.lineEdit.lineRange}get modifiedLineRange(){return this.lineEdit.toLineEdit().getNewLineRanges()[0]}get displayRange(){return this.originalText.lineRange.intersect(this.originalLineRange.join(Xt.ofLength(this.originalLineRange.startLineNumber,this.lineEdit.newLines.length)))}constructor(e,t,n,r,i){this.originalText=e,this.edit=t,this.cursorPosition=n,this.commands=r,this.inlineCompletion=i}}})),YF,XF,ZF,QF=t((()=>{ls(),P(),Na(),yh(),go(),dN(),JF(),YF=class{constructor(e,t,n){this._model=e,this.inlineEdit=t,this.tabAction=n,this.action=this.inlineEdit.inlineCompletion.action,this.displayName=this.inlineEdit.inlineCompletion.source.provider.displayName??A(1206,`Inline Edit`),this.extensionCommands=this.inlineEdit.inlineCompletion.source.inlineSuggestions.commands??[],this.isInDiffEditor=this._model.isInDiffEditor,this.displayLocation=this.inlineEdit.inlineCompletion.displayLocation,this.showCollapsed=this._model.showCollapsed}accept(){this._model.accept()}jump(){this._model.jump()}abort(e){console.error(e),this.inlineEdit.inlineCompletion.reportInlineEditError(e),this._model.stop()}handleInlineEditShown(e,t){this._model.handleInlineSuggestionShown(this.inlineEdit.inlineCompletion,e,t)}},XF=class{constructor(e){this._model=e,this.onDidAccept=this._model.onDidAccept,this.inAcceptFlow=this._model.inAcceptFlow}},ZF=class{constructor(e,t,n,r){this.lineRange=n;let i=Qe(e),a=G(this,e=>i.isFocused.read(e)&&r.showInlineEditMenu?lN.Accept:lN.Inactive);this.model=new YF(t,new qF(new Te(``),new xr([r.getSingleTextEdit()]),t.primaryPosition.get(),r.source.inlineSuggestions.commands??[],r),a)}}})),$F,eI=t((()=>{M(),Ya(),$F=class e{static fromPoints(t,n){return new e(t.x,t.y,n.x,n.y)}static fromPointSize(t,n){return new e(t.x,t.y,t.x+n.x,t.y+n.y)}static fromLeftTopRightBottom(t,n,r,i){return new e(t,n,r,i)}static fromLeftTopWidthHeight(t,n,r,i){return new e(t,n,t+r,n+i)}static fromRanges(t,n){return new e(t.start,n.start,t.endExclusive,n.endExclusive)}static hull(t){let n=2**53-1,r=2**53-1,i=-(2**53-1),a=-(2**53-1);for(let e of t)n=Math.min(n,e.left),r=Math.min(r,e.top),i=Math.max(i,e.right),a=Math.max(a,e.bottom);return new e(n,r,i,a)}get width(){return this.right-this.left}get height(){return this.bottom-this.top}constructor(e,t,n,r){if(this.left=e,this.top=t,this.right=n,this.bottom=r,e>n)throw new tc(`Invalid arguments: Horizontally offset by `+(e-n));if(t>r)throw new tc(`Invalid arguments: Vertically offset by `+(t-r))}withMargin(t,n,r,i){let a,o,s,c;return n===void 0&&r===void 0&&i===void 0?a=o=s=c=t:r===void 0&&i===void 0?(a=o=n,s=c=t):(a=i,o=n,s=t,c=r),new e(this.left-a,this.top-s,this.right+o,this.bottom+c)}intersectVertical(t){let n=Math.max(this.top,t.start),r=Math.min(this.bottom,t.endExclusive);return new e(this.left,n,this.right,Math.max(n,r))}intersectHorizontal(t){let n=Math.max(this.left,t.start),r=Math.min(this.right,t.endExclusive);return new e(n,this.top,Math.max(n,r),this.bottom)}toString(){return`Rect{(${this.left},${this.top}), (${this.right},${this.bottom})}`}intersect(t){let n=Math.max(this.left,t.left),r=Math.min(this.right,t.right),i=Math.max(this.top,t.top),a=Math.min(this.bottom,t.bottom);if(!(n>r||i>a))return new e(n,i,r,a)}containsRect(e){return this.left<=e.left&&this.top<=e.top&&this.right>=e.right&&this.bottom>=e.bottom}containsPoint(e){return this.left<=e.x&&this.top<=e.y&&this.right>=e.x&&this.bottom>=e.y}moveToBeContainedIn(t){let n=this.width,r=this.height,i=this.left,a=this.top;return i<t.left?i=t.left:i+n>t.right&&(i=t.right-n),a<t.top?a=t.top:a+r>t.bottom&&(a=t.bottom-r),new e(i,a,i+n,a+r)}withWidth(t){return new e(this.left,this.top,this.left+t,this.bottom)}withHeight(t){return new e(this.left,this.top,this.right,this.top+t)}withTop(t){return new e(this.left,t,this.right,this.bottom)}withLeft(t){return new e(t,this.top,this.right,this.bottom)}translateX(t){return new e(this.left+t,this.top,this.right+t,this.bottom)}translateY(t){return new e(this.left,this.top+t,this.right,this.bottom+t)}getLeftBottom(){return new Rm(this.left,this.bottom)}getRightBottom(){return new Rm(this.right,this.bottom)}getRightTop(){return new Rm(this.right,this.top)}toStyles(){return{position:`absolute`,left:`${this.left}px`,top:`${this.top}px`,width:`${this.width}px`,height:`${this.height}px`}}}})),tI=t((()=>{})),nI,rI,iI,aI,oI,sI,cI,lI,uI,dI=t((()=>{y(),ks(),sn(),q(),sr(),tI(),Ql(),vC(),Su(),hp(),zm(),th(),Gk(),N(),nI=class e{constructor(e,t,n,r=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=n,this.showEndForLine=r}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&uo(this.startLineNumbers,e.startLineNumbers)&&uo(this.endLineNumbers,e.endLineNumbers)}static get Empty(){return new e([],[],0)}},rI=es(`stickyScrollViewLayer`,{createHTML:e=>e}),iI=`data-sticky-line-index`,aI=`data-sticky-is-line`,oI=`data-sticky-is-line-number`,sI=`data-sticky-is-folding-icon`,cI=class extends z{get height(){return this._height}constructor(e){super(),this._foldingIconStore=new I,this._rootDomNode=document.createElement(`div`),this._lineNumbersDomNode=document.createElement(`div`),this._linesDomNodeScrollable=document.createElement(`div`),this._linesDomNode=document.createElement(`div`),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._height=-1,this._onDidChangeStickyScrollHeight=this._register(new j),this.onDidChangeStickyScrollHeight=this._onDidChangeStickyScrollHeight.event,this._editor=e,this._lineHeight=e.getOption(75),this._lineNumbersDomNode.className=`sticky-widget-line-numbers`,this._lineNumbersDomNode.setAttribute(`role`,`none`),this._linesDomNode.className=`sticky-widget-lines`,this._linesDomNode.setAttribute(`role`,`list`),this._linesDomNodeScrollable.className=`sticky-widget-lines-scrollable`,this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className=`sticky-widget`,this._rootDomNode.classList.toggle(`peek`,e instanceof _C),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable),this._setHeight(0);let t=()=>{this._linesDomNode.style.left=this._editor.getOption(130).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:`0px`};this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(130)&&t(),e.hasChanged(75)&&(this._lineHeight=this._editor.getOption(75))})),this._register(this._editor.onDidScrollChange(e=>{e.scrollLeftChanged&&t(),e.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(e=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,n){let r=!this._state&&!e,i=this._state&&this._state.equals(e);if(n===void 0&&(r||i))return;let a=this._findRenderingData(e),o=this._lineNumbers;this._lineNumbers=a.lineNumbers,this._lastLineRelativePosition=a.lastLineRelativePosition;let s=this._findIndexToRebuildFrom(o,this._lineNumbers,n);this._renderRootNode(this._lineNumbers,this._lastLineRelativePosition,t,s),this._state=e}_findRenderingData(e){if(!e)return{lineNumbers:[],lastLineRelativePosition:0};let t=[...e.startLineNumbers];e.showEndForLine!==null&&(t[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]);let n=0;for(let e=0;e<t.length;e++)n+=this._editor.getLineHeightForPosition(new H(t[e],1));return n===0?{lineNumbers:[],lastLineRelativePosition:0}:{lineNumbers:t,lastLineRelativePosition:e.lastLineRelativePosition}}_findIndexToRebuildFrom(e,t,n){if(t.length===0)return 0;if(n!==void 0)return n;let r=t.findIndex(t=>!e.includes(t));return r===-1?0:r}_updateWidgetWidth(){let e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty(`--vscode-editorStickyScroll-scrollableWidth`,`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty(`--vscode-editorStickyScroll-foldingOpacityTransition`,`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(let t of this._renderedStickyLines){let n=t.foldingIcon;n&&n.setVisible(e?!0:n.isCollapsed)}}async _renderRootNode(e,t,n,r){let i=this._editor._getViewModel();if(!i){this._clearWidget();return}if(e.length===0){this._clearWidget();return}let a=[],o=e[e.length-1],s=0;for(let e=0;e<this._renderedStickyLines.length;e++)if(e<r){let t=this._renderedStickyLines[e];a.push(this._updatePosition(t,s,t.lineNumber===o)),s+=t.height}else{let t=this._renderedStickyLines[e];t.lineNumberDomNode.remove(),t.lineDomNode.remove()}let c=this._editor.getLayoutInfo();for(let t=r;t<e.length;t++){let r=this._renderChildNode(i,t,e[t],s,o===e[t],n,c);s+=r.height,this._linesDomNode.appendChild(r.lineDomNode),this._lineNumbersDomNode.appendChild(r.lineNumberDomNode),a.push(r)}n&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin)),this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(e=>e.scrollWidth))+c.verticalScrollbarWidth,this._renderedStickyLines=a,this._setHeight(s+t),this._editor.layoutOverlayWidget(this)}_clearWidget(){for(let e=0;e<this._renderedStickyLines.length;e++){let t=this._renderedStickyLines[e];t.lineNumberDomNode.remove(),t.lineDomNode.remove()}this._setHeight(0)}_setHeight(e){this._height!==e&&(this._height=e,this._height===0?this._rootDomNode.style.display=`none`:(this._rootDomNode.style.display=`block`,this._lineNumbersDomNode.style.height=`${this._height}px`,this._linesDomNodeScrollable.style.height=`${this._height}px`,this._rootDomNode.style.height=`${this._height}px`),this._onDidChangeStickyScrollHeight.fire({height:this._height}))}_setFoldingHoverListeners(){this._editor.getOption(125)===`mouseover`&&(this._foldingIconStore.add(ch(this._lineNumbersDomNode,Ul.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(ch(this._lineNumbersDomNode,Ul.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,n,r,i,a,o){let s=e.coordinatesConverter.convertModelPositionToViewPosition(new H(n,1)).lineNumber,c=e.getViewLineRenderingData(s),l=this._editor.getOption(76),u=this._editor.getOption(116).verticalScrollbarSize,d;try{d=$e.filter(c.inlineDecorations,s,c.minColumn,c.maxColumn)}catch{d=[]}let f=this._editor.getLineHeightForPosition(new H(n,1)),p=e.getTextDirection(n),m=new Tc(!0,!0,c.content,c.continuesWithWrappedLine,c.isBasicASCII,c.containsRTL,0,c.tokens,d,c.tabSize,c.startVisibleColumn,1,1,1,500,`none`,!0,!0,null,p,u),h=new cf(2e3),ee=Pa(m,h),te;te=rI?rI.createHTML(h.build()):h.build();let ne=document.createElement(`span`);ne.setAttribute(iI,String(t)),ne.setAttribute(aI,``),ne.setAttribute(`role`,`listitem`),ne.tabIndex=0,ne.className=`sticky-line-content`,ne.classList.add(`stickyLine${n}`),ne.style.lineHeight=`${f}px`,ne.innerHTML=te;let re=document.createElement(`span`);re.setAttribute(iI,String(t)),re.setAttribute(oI,``),re.className=`sticky-line-number`,re.style.lineHeight=`${f}px`;let ie=o.contentLeft;re.style.width=`${ie}px`;let ae=document.createElement(`span`);l.renderType===1||l.renderType===3&&n%10==0?ae.innerText=n.toString():l.renderType===2&&(ae.innerText=Math.abs(n-this._editor.getPosition().lineNumber).toString()),ae.className=`sticky-line-number-inner`,ae.style.width=`${o.lineNumbersWidth}px`,ae.style.paddingLeft=`${o.lineNumbersLeft}px`,re.appendChild(ae);let oe=this._renderFoldingIconForLine(a,n);oe&&(re.appendChild(oe.domNode),oe.domNode.style.left=`${o.lineNumbersWidth+o.lineNumbersLeft}px`,oe.domNode.style.lineHeight=`${f}px`),this._editor.applyFontInfo(ne),this._editor.applyFontInfo(re),re.style.lineHeight=`${f}px`,ne.style.lineHeight=`${f}px`,re.style.height=`${f}px`,ne.style.height=`${f}px`;let se=new lI(t,n,ne,re,oe,ee.characterMapping,ne.scrollWidth,f);return this._updatePosition(se,r,i)}_updatePosition(e,t,n){let r=e.lineDomNode,i=e.lineNumberDomNode;if(n){r.style.zIndex=`0`,i.style.zIndex=`0`;let n=`${t+this._lastLineRelativePosition+(e.foldingIcon?.isCollapsed?1:0)}px`;r.style.top=n,i.style.top=n}else r.style.zIndex=`1`,i.style.zIndex=`1`,r.style.top=`${t}px`,i.style.top=`${t}px`;return e}_renderFoldingIconForLine(e,t){let n=this._editor.getOption(125);if(!e||n===`never`)return;let r=e.regions,i=r.findRange(t),a=r.getStartLineNumber(i);if(t!==a)return;let o=r.isCollapsed(i),s=new uI(o,a,r.getEndLineNumber(i),this._lineHeight);return s.setVisible(this._isOnGlyphMargin?!0:o||n===`always`),s.domNode.setAttribute(sI,``),s}getId(){return`editor.contrib.stickyScrollWidget`}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;let t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;let n=hu(t.characterMapping,e,0);return new H(t.lineNumber,n)}getLineNumberFromChildDomNode(e){return this._getRenderedStickyLineFromChildDomNode(e)?.lineNumber??null}_getRenderedStickyLineFromChildDomNode(e){let t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){let t=this._getAttributeValue(e,iI);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,aI)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,sI)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){let n=e.getAttribute(t);if(n!==null)return n;e=e.parentElement}}},lI=class{constructor(e,t,n,r,i,a,o,s){this.index=e,this.lineNumber=t,this.lineDomNode=n,this.lineNumberDomNode=r,this.foldingIcon=i,this.characterMapping=a,this.scrollWidth=o,this.height=s}},uI=class{constructor(e,t,n,r){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=n,this.dimension=r,this.domNode=document.createElement(`div`),this.domNode.style.width=`26px`,this.domNode.style.height=`${r}px`,this.domNode.style.lineHeight=`${r}px`,this.domNode.className=Qt.asClassName(e?Rk:Lk)}setVisible(e){this.domNode.style.cursor=e?`pointer`:`default`,this.domNode.style.opacity=e?`1`:`0`}}})),fI,pI,mI,hI=t((()=>{fI=class{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}},pI=class{constructor(e,t,n){this.range=e,this.children=t,this.parent=n}},mI=class{constructor(e,t,n,r){this.uri=e,this.version=t,this.element=n,this.outlineProviderId=r}}})),gI,_I,vI,yI,bI,xI,SI,CI,wI,TI,EI=t((()=>{q(),yu(),JA(),O(),OA(),Qk(),Fk(),oo(),M(),hI(),Ge(),F(),gI=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_I=function(e,t){return function(n,r){t(n,r,e)}},(function(e){e.OUTLINE_MODEL=`outlineModel`,e.FOLDING_PROVIDER_MODEL=`foldingProviderModel`,e.INDENTATION_MODEL=`indentationModel`})(vI||={}),(function(e){e[e.VALID=0]=`VALID`,e[e.INVALID=1]=`INVALID`,e[e.CANCELED=2]=`CANCELED`})(yI||={}),bI=class extends z{constructor(e,t,n,r){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new Io(300)),this._updateOperation=this._register(new I),this._editor.getOption(130).defaultModel){case vI.OUTLINE_MODEL:this._modelProviders.push(new SI(this._editor,r));case vI.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new TI(this._editor,t,r));case vI.INDENTATION_MODEL:this._modelProviders.push(new wI(this._editor,n));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&=(this._modelPromise.cancel(),null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(let t of this._modelProviders){let{statusPromise:n,modelPromise:r}=t.computeStickyModel(e);this._modelPromise=r;let i=await n;if(this._modelPromise!==r)return null;switch(i){case yI.CANCELED:return this._updateOperation.clear(),null;case yI.VALID:return t.stickyModel}}return null}).catch(e=>($p(e),null))}},bI=gI([_I(2,U),_I(3,V)],bI),xI=class extends z{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,yI.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};let t=Zn(e=>this.createModelFromProvider(e));return{statusPromise:t.then(t=>this.isModelValid(t)?e.isCancellationRequested?yI.CANCELED:(this._stickyModel=this.createStickyModel(e,t),yI.VALID):this._invalid()).then(void 0,e=>($p(e),yI.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}},SI=class extends xI{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return GA.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){let{stickyOutlineElement:n,providerID:r}=this._stickyModelFromOutlineModel(t,this._stickyModel?.outlineProviderId),i=this._editor.getModel();return new mI(i.uri,i.getVersionId(),n,r)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let n;if(Ea.first(e.children.values())instanceof WA){let r=Ea.find(e.children.values(),e=>e.id===t);if(r)n=r.children;else{let r=``,i=-1,a;for(let[t,n]of e.children.entries()){let e=this._findSumOfRangesOfGroup(n);e>i&&(a=n,i=e,r=n.id)}t=r,n=a.children}}else n=e.children;let r=[],i=Array.from(n.values()).sort((e,t)=>{let n=new fI(e.symbol.range.startLineNumber,e.symbol.range.endLineNumber),r=new fI(t.symbol.range.startLineNumber,t.symbol.range.endLineNumber);return this._comparator(n,r)});for(let e of i)r.push(this._stickyModelFromOutlineElement(e,e.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new pI(void 0,r,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){let n=[];for(let r of e.children.values())if(r.symbol.selectionRange.startLineNumber!==r.symbol.range.endLineNumber)if(r.symbol.selectionRange.startLineNumber!==t)n.push(this._stickyModelFromOutlineElement(r,r.symbol.selectionRange.startLineNumber));else for(let e of r.children.values())n.push(this._stickyModelFromOutlineElement(e,r.symbol.selectionRange.startLineNumber));return n.sort((e,t)=>this._comparator(e.range,t.range)),new pI(new fI(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber),n,void 0)}_comparator(e,t){return e.startLineNumber===t.startLineNumber?t.endLineNumber-e.endLineNumber:e.startLineNumber-t.startLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(let n of e.children.values())t+=this._findSumOfRangesOfGroup(n);return e instanceof UA?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}},SI=gI([_I(1,V)],SI),CI=class extends xI{constructor(e){super(e),this._foldingLimitReporter=this._register(new oA(e))}createStickyModel(e,t){let n=this._fromFoldingRegions(t),r=this._editor.getModel();return new mI(r.uri,r.getVersionId(),n,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){let t=e.length,n=[],r=new pI(void 0,[],void 0);for(let i=0;i<t;i++){let t=e.getParentIndex(i),a;a=t===-1?r:n[t];let o=new pI(new fI(e.getStartLineNumber(i),e.getEndLineNumber(i)+1),[],a);a.children.push(o),n.push(o)}return r}},wI=class extends CI{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new Mk(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}},wI=gI([_I(1,yn)],wI),TI=class extends CI{constructor(e,t,n){super(e),this._languageFeaturesService=n,this.provider=this._register(new su),this._register(this._languageFeaturesService.foldingRangeProvider.onDidChange(()=>{this._updateProvider(e,t)})),this._updateProvider(e,t)}_updateProvider(e,t){let n=aA.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());n.length!==0&&(this.provider.value=new Xk(e.getModel(),n,t,this._foldingLimitReporter,void 0))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){return this.provider.value?.compute(e)??null}},TI=gI([_I(2,V)],TI)})),DI,OI,kI,AI,jI=t((()=>{q(),yu(),wu(),O(),sn(),N(),oo(),EI(),Su(),DI=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},OI=function(e,t){return function(n,r){t(n,r,e)}},kI=class{constructor(e,t,n,r){this.startLineNumber=e,this.endLineNumber=t,this.top=n,this.height=r}},AI=class extends z{constructor(e,t,n){super(),this._languageFeaturesService=t,this._languageConfigurationService=n,this._onDidChangeStickyScroll=this._register(new j),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new I),this._updateSoon=this._register(new rn(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(130)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(130).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(qm(()=>{this._stickyModelProvider?.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){return this._model?.version}updateStickyModelProvider(){this._stickyModelProvider?.dispose(),this._stickyModelProvider=null,this._editor.hasModel()&&(this._stickyModelProvider=new bI(this._editor,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){this._cts?.dispose(!0),this._cts=new Zd,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}let t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}getCandidateStickyLinesIntersecting(e){if(!this._model?.element)return[];let t=[];return this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,t,0,0,-1),this.filterHiddenRanges(t)}getCandidateStickyLinesIntersectingFromStickyModel(e,t,n,r,i,a){if(t.children.length===0)return;let o=a,s=[];for(let e=0;e<t.children.length;e++){let n=t.children[e];n.range&&s.push(n.range.startLineNumber)}let c=this.updateIndex(Rn(s,e.startLineNumber,(e,t)=>e-t)),l=this.updateIndex(Rn(s,e.endLineNumber,(e,t)=>e-t));for(let a=c;a<=l;a++){let s=t.children[a];if(!s||!s.range)continue;let{startLineNumber:c,endLineNumber:l}=s.range;if(e.startLineNumber<=l+1&&c-1<=e.endLineNumber&&c!==o){o=c;let t=this._editor.getLineHeightForPosition(new H(c,1));n.push(new kI(c,l-1,i,t)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,s,n,r+1,i+t,c)}}}filterHiddenRanges(e){let t=this._editor._getViewModel()?.getHiddenAreas();return t?e.filter(e=>!t.some(t=>e.startLineNumber>=t.startLineNumber&&e.endLineNumber<=t.endLineNumber+1)):e}updateIndex(e){return e===-1?0:e<0?-e-2:e}},AI=DI([OI(1,V),OI(2,yn)],AI)})),MI,NI,PI,FI,II=t((()=>{q(),yu(),dI(),jI(),F(),be(),de(),C(),yc(),cC(),_(),Rw(),Xw(),Su(),wu(),oo(),tf(),y(),hI(),st(),OA(),wk(),N(),Pd(),MI=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},NI=function(e,t){return function(n,r){t(n,r,e)}},FI=class extends z{static#e=PI=this;static#t=this.ID=`store.contrib.stickyScrollController`;constructor(e,t,n,r,i,a,o){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=n,this._instaService=r,this._contextKeyService=o,this._sessionStore=new I,this._maxStickyLines=2**53-1,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._mouseTarget=null,this._onDidChangeStickyScrollHeight=this._register(new j),this.onDidChangeStickyScrollHeight=this._onDidChangeStickyScrollHeight.event,this._stickyScrollWidget=new cI(this._editor),this._stickyLineCandidateProvider=new AI(this._editor,n,i),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=nI.Empty;let s=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeLineHeight(e=>{e.changes.forEach(e=>{let t=e.lineNumber;this._widgetState.startLineNumbers.includes(t)&&this._renderStickyScroll(t)})})),this._register(this._editor.onDidChangeFont(e=>{e.changes.forEach(e=>{let t=e.lineNumber;this._widgetState.startLineNumbers.includes(t)&&this._renderStickyScroll(t)})})),this._register(this._editor.onDidChangeConfiguration(e=>{this._readConfigurationChange(e)})),this._register(ch(s,Ul.CONTEXT_MENU,async e=>{this._onContextMenu(Ni(s),e)})),this._stickyScrollFocusedContextKey=J.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=J.stickyScrollVisible.bindTo(this._contextKeyService);let c=this._register(qn(s));this._register(c.onDidBlur(e=>{this._positionRevealed===!1&&s.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(e=>{this.focus()})),this._registerMouseListeners(),this._register(ch(s,Ul.MOUSE_DOWN,e=>{this._onMouseDown=!0})),this._register(this._stickyScrollWidget.onDidChangeStickyScrollHeight(e=>{this._onDidChangeStickyScrollHeight.fire(e)})),this._onDidResize(),this._readConfiguration()}get stickyScrollWidgetHeight(){return this._stickyScrollWidget.height}static get(e){return e.getContribution(PI.ID)}_disposeFocusStickyScrollStore(){this._stickyScrollFocusedContextKey.set(!1),this._focusDisposableStore?.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}isFocused(){return this._focused}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new I,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){let e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(T.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){let e=this._register(new I),t=this._register(new sC(this._editor,{extractLineNumberFromMouseEvent:e=>{let t=this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);return t?t.lineNumber:0}})),n=e=>{if(!this._editor.hasModel()||e.target.type!==12||e.target.detail!==this._stickyScrollWidget.getId())return null;let t=e.target.element;if(!t||t.innerText!==t.innerHTML)return null;let n=this._stickyScrollWidget.getEditorPositionFromNode(t);return n?{range:new T(n.lineNumber,n.column,n.lineNumber,n.column+t.innerText.length),textElement:t}:null},r=this._stickyScrollWidget.getDomNode();this._register(Km(r,Ul.CLICK,e=>{if(e.ctrlKey||e.altKey||e.metaKey||!e.leftButton)return;if(e.shiftKey){let t=this._stickyScrollWidget.getLineIndexFromChildDomNode(e.target);if(t===null)return;let n=new H(this._endLineNumbers[t],1);this._revealLineInCenterIfOutsideViewport(n);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(e.target)){let t=this._stickyScrollWidget.getLineNumberFromChildDomNode(e.target);this._toggleFoldingRegionForLine(t);return}if(!this._stickyScrollWidget.isInStickyLine(e.target))return;let t=this._stickyScrollWidget.getEditorPositionFromNode(e.target);if(!t){let n=this._stickyScrollWidget.getLineNumberFromChildDomNode(e.target);if(n===null)return;t=new H(n,1)}this._revealPosition(t)})),this._register(ch(ou,Ul.MOUSE_MOVE,e=>{this._mouseTarget=e.target,this._onMouseMoveOrKeyDown(e)})),this._register(ch(ou,Ul.KEY_DOWN,e=>{this._onMouseMoveOrKeyDown(e)})),this._register(ch(ou,Ul.KEY_UP,()=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([t,r])=>{let i=n(t);if(!i||!t.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}let{range:a,textElement:o}=i;if(!a.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=a,e.clear();else if(o.style.textDecoration===`underline`)return;let s=new Zd;e.add(qm(()=>s.dispose(!0)));let c;Mw(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new H(a.startLineNumber,a.startColumn+1),!1,s.token).then((t=>{if(!s.token.isCancellationRequested)if(t.length!==0){this._candidateDefinitionsLength=t.length;let n=o;c===n?c||(c=n,c.style.textDecoration=`underline`,e.add(qm(()=>{c.style.textDecoration=`none`}))):(e.clear(),c=n,c.style.textDecoration=`underline`,e.add(qm(()=>{c.style.textDecoration=`none`})))}else e.clear()}))})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async e=>{if(e.target.type!==12||e.target.detail!==this._stickyScrollWidget.getId())return;let t=this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);t&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:t.lineNumber,column:1})),this._instaService.invokeFunction(Yw,e,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){let n=new St(e,t);this._contextMenuService.showContextMenu({menuId:g.StickyScrollContext,getAnchor:()=>n})}_onMouseMoveOrKeyDown(e){if(!e.shiftKey||!this._mouseTarget||!Oe(this._mouseTarget))return;let t=this._stickyScrollWidget.getLineIndexFromChildDomNode(this._mouseTarget);t===null||this._showEndForLine===t||(this._showEndForLine=t,this._renderStickyScroll())}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;let t=this._stickyScrollWidget.getRenderedStickyLine(e),n=t?.foldingIcon;if(!n)return;fk(this._foldingModel,1,[e]),n.isCollapsed=!n.isCollapsed;let r=(n.isCollapsed?this._editor.getTopForLineNumber(n.foldingEndLine):this._editor.getTopForLineNumber(n.foldingStartLine))-this._editor.getOption(75)*t.index+1;this._editor.setScrollTop(r),this._renderStickyScroll(e)}_readConfiguration(){let e=this._editor.getOption(130);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._resetState(),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(e=>{e.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(e=>this._onTokensChange(e))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(76).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(130)||e.hasChanged(81)||e.hasChanged(75)||e.hasChanged(125)||e.hasChanged(76))&&this._readConfiguration(),(e.hasChanged(76)||e.hasChanged(52)||e.hasChanged(125))&&this._renderStickyScroll(0)}_needsUpdate(e){let t=this._stickyScrollWidget.getCurrentLines();for(let n of t)for(let t of e.ranges)if(n>=t.fromLineNumber&&n<=t.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){let e=this._editor.getLayoutInfo().height/this._editor.getOption(75);this._maxStickyLines=Math.round(e*.25),this._renderStickyScroll(0)}async _renderStickyScroll(e){let t=this._editor.getModel();if(!t||t.isTooLargeForTokenization()){this._resetState();return}let n=this._updateAndGetMinRebuildFromLine(e),r=this._stickyLineCandidateProvider.getVersionId();if(r===void 0||r===t.getVersionId())if(!this._focused)await this._updateState(n);else if(this._focusedStickyElementIndex===-1)await this._updateState(n),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{let e=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(n),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(e)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(e){if(e!==void 0){let t=this._minRebuildFromLine===void 0?1/0:this._minRebuildFromLine;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}async _updateState(e){this._minRebuildFromLine=void 0,this._foldingModel=await aA.get(this._editor)?.getFoldingModel()??void 0,this._widgetState=this.findScrollWidgetState();let t=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(t),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=nI.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){if(!this._editor.hasModel())return nI.Empty;let e=this._editor.getModel(),t=Math.min(this._maxStickyLines,this._editor.getOption(130).maxLineCount),n=this._editor.getScrollTop(),r=0,i=[],a=[],o=this._editor.getVisibleRanges();if(o.length!==0){let s=new fI(o[0].startLineNumber,o[o.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(s);for(let o of c){let s=o.startLineNumber,c=o.endLineNumber;if(e.isValidRange({startLineNumber:s,endLineNumber:c,startColumn:1,endColumn:1})&&c-s>0){let e=o.top,l=e+o.height,u=this._editor.getTopForLineNumber(s)-n,d=this._editor.getBottomForLineNumber(c)-n;if(e>u&&e<=d&&(i.push(s),a.push(c+1),l>d&&(r=d-l)),i.length===t)break}}}return this._endLineNumbers=a,new nI(i,a,r,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}},FI=PI=MI([NI(1,Ti),NI(2,V),NI(3,U),NI(4,yn),NI(5,Vp),NI(6,bh)],FI)}));function LI(e){return e.map(e=>e===lN.Accept?iL:rL)}function RI(e){return e.map(e=>e===lN.Accept?aL:nL)}function zI(e,t){let n;n=typeof e==`string`?BI(e,t):e.map((e,n)=>BI(e,t).read(n));let r=BI(ia,t);return n.map((e,t)=>e.makeOpaque(r.read(t)))}function BI(e,t){return Rc({owner:{observeColor:e},equalsFn:(e,t)=>e.equals(t)},t.onDidColorThemeChange,()=>{let n=t.getColorTheme().getColor(e);if(!n)throw new tc(`Missing color: ${e}`);return n})}var VI,HI,UI,WI,GI,KI,qI,JI,YI,XI,ZI,QI,$I,eL,tL,nL,rL,iL,aL,oL=t((()=>{M(),ls(),P(),Ei(),Sr(),dN(),VI=Y(`inlineEdit.originalBackground`,Ee(rs,.2),A(1207,`Background color for the original text in inline edits.`),!0),HI=Y(`inlineEdit.modifiedBackground`,Ee(nr,.3),A(1208,`Background color for the modified text in inline edits.`),!0),Y(`inlineEdit.originalChangedLineBackground`,Ee(rs,.8),A(1209,`Background color for the changed lines in the original text of inline edits.`),!0),UI=Y(`inlineEdit.originalChangedTextBackground`,Ee(rs,.8),A(1210,`Overlay color for the changed text in the original text of inline edits.`),!0),WI=Y(`inlineEdit.modifiedChangedLineBackground`,{light:Ee(vs,.7),dark:Ee(vs,.7),hcDark:vs,hcLight:vs},A(1211,`Background color for the changed lines in the modified text of inline edits.`),!0),GI=Y(`inlineEdit.modifiedChangedTextBackground`,Ee(nr,.7),A(1212,`Overlay color for the changed text in the modified text of inline edits.`),!0),KI=Y(`inlineEdit.gutterIndicator.primaryForeground`,Bn,A(1213,`Foreground color for the primary inline edit gutter indicator.`)),qI=Y(`inlineEdit.gutterIndicator.primaryBorder`,Kt,A(1214,`Border color for the primary inline edit gutter indicator.`)),JI=Y(`inlineEdit.gutterIndicator.primaryBackground`,{light:Ee(qI,.5),dark:Ee(qI,.4),hcDark:Ee(qI,.4),hcLight:Ee(qI,.5)},A(1215,`Background color for the primary inline edit gutter indicator.`)),YI=Y(`inlineEdit.gutterIndicator.secondaryForeground`,ya,A(1216,`Foreground color for the secondary inline edit gutter indicator.`)),XI=Y(`inlineEdit.gutterIndicator.secondaryBorder`,Mr,A(1217,`Border color for the secondary inline edit gutter indicator.`)),ZI=Y(`inlineEdit.gutterIndicator.secondaryBackground`,XI,A(1218,`Background color for the secondary inline edit gutter indicator.`)),QI=Y(`inlineEdit.gutterIndicator.successfulForeground`,Bn,A(1219,`Foreground color for the successful inline edit gutter indicator.`)),$I=Y(`inlineEdit.gutterIndicator.successfulBorder`,Kt,A(1220,`Border color for the successful inline edit gutter indicator.`)),eL=Y(`inlineEdit.gutterIndicator.successfulBackground`,$I,A(1221,`Background color for the successful inline edit gutter indicator.`)),tL=Y(`inlineEdit.gutterIndicator.background`,{hcDark:Ee(`tab.inactiveBackground`,.5),hcLight:Ee(`tab.inactiveBackground`,.5),dark:Ee(`tab.inactiveBackground`,.5),light:`#5f5f5f18`},A(1222,`Background color for the inline edit gutter indicator.`)),nL=Y(`inlineEdit.originalBorder`,{light:rs,dark:rs,hcDark:rs,hcLight:rs},A(1223,`Border color for the original text in inline edits.`)),rL=Y(`inlineEdit.modifiedBorder`,{light:kn(nr,.6),dark:nr,hcDark:nr,hcLight:nr},A(1224,`Border color for the modified text in inline edits.`)),iL=Y(`inlineEdit.tabWillAcceptModifiedBorder`,{light:kn(rL,0),dark:kn(rL,0),hcDark:kn(rL,0),hcLight:kn(rL,0)},A(1225,`Modified border color for the inline edits widget when tab will accept it.`)),aL=Y(`inlineEdit.tabWillAcceptOriginalBorder`,{light:kn(nL,0),dark:kn(nL,0),hcDark:kn(nL,0),hcLight:kn(nL,0)},A(1226,`Original border color for the inline edits widget over the original text when tab will accept it.`))}));function sL(e,t,n){e.layoutInfo.read(n),e.value.read(n);let r=e.model.read(n);if(!r)return 0;let i=0;e.scrollTop.read(n);for(let n=t.startLineNumber;n<t.endLineNumberExclusive;n++){let t=r.getLineMaxColumn(n),a=e.editor.getOffsetForColumn(n,t);a===-1&&(a=t*e.editor.getOption(59).typicalHalfwidthCharacterWidth),i=Math.max(i,a)}let a=t.mapToLineArray(e=>r.getLineContent(e));return i<5&&a.some(e=>e.length>0)&&r.uri.scheme!==`file`&&console.error(`unexpected width`),i}function cL(e,t,n){return e.layoutInfo.read(n),e.value.read(n),e.model.read(n)?(e.scrollTop.read(n),e.editor.getOffsetForColumn(t.lineNumber,t.column)):0}function lL(e,t,n,r){let i=r.getModel();if(!i)return{prefixTrim:0,prefixLeftOffset:0};let a=e.map(e=>e.isSingleLine()?e.startColumn-1:0),o=t.mapToLineArray(e=>kc(i.getLineContent(e))),s=n.filter(e=>e!==``).map(e=>kc(e)),c=Math.min(...a,...o,...s),l;if(i.getLineIndentColumn(t.startLineNumber)>=c+1)l=r.getOffsetForColumn(t.startLineNumber,c+1);else if(n.length>0)l=uL(n[0].slice(0,c),r,i);else return{prefixTrim:0,prefixLeftOffset:0};return{prefixTrim:c,prefixLeftOffset:l}}function uL(e,t,n){let r=t.getOption(59).typicalHalfwidthCharacterWidth,i=n.getOptions().tabSize*r,a=e.split(`	`).length-1;return(e.length-a)*r+a*i}function dL(e){let t=e.layoutInfoContentLeft,n=G({name:`editor.validOverlay.width`},n=>{let r=e.layoutInfoMinimap.read(n).minimapLeft!==0,i=e.layoutInfoWidth.read(n)-t.read(n);return r?i-(e.layoutInfoMinimap.read(n).minimapWidth+e.layoutInfoVerticalScrollbarWidth.read(n)):i}),r=G({name:`editor.validOverlay.height`},t=>e.layoutInfoHeight.read(t)+e.contentHeight.read(t));return G({name:`editor.validOverlay`},e=>$F.fromLeftTopWidthHeight(t.read(e),0,n.read(e),r.read(e)))}function fL(e,t){let n=[];for(let r of e){let e=t.mapRange(r.modifiedRange);n.push(new fo(r.originalRange,e))}return n}function pL(...e){return e.filter(e=>typeof e==`string`).join(` `)}function mL(e,t){return new T(t.lineNumber,t.column+e.start,t.lineNumber,t.column+e.endExclusive)}function hL(e,t){let n=0;loop:for(let r=0,i=e.length;r<i;r++)switch(e.charCodeAt(r)){case 9:n+=t;break;case 32:n++;break;default:break loop}return n-n%t}function gL(e,t,n){let r=t-t%n,i=0;for(;i<e.length&&r!==0;i++)switch(e.charCodeAt(i)){case 9:r-=n;break;case 32:r--;break;default:throw new tc(`Unexpected character found while calculating indent length`)}return i}function _L(e,t,n){let r=Li(e),i=[],a=ga(t.mapToLineArray(e=>hL(r[e-1],n)),er);return t.forEach(e=>{let t=gL(r[e-1],a,n);i.push(new ca(mL(new pa(0,t),new H(e,1)),``))}),new xr(i)}function vL(e){let t=dp(void 0,(t,n)=>e.read(t)||n);return Ff({debugName:()=>`${e.debugName}.mapOutFalsy`},n=>{if(t.read(n),e.read(n))return t})}function yL(e){return{left:G({name:`editor.validOverlay.left`},t=>e(t).left),top:G({name:`editor.validOverlay.top`},t=>e(t).top),width:G({name:`editor.validOverlay.width`},t=>e(t).right-e(t).left),height:G({name:`editor.validOverlay.height`},t=>e(t).bottom-e(t).top)}}var bL,xL=t((()=>{sn(),Co(),ls(),Ga(),eI(),wh(),Su(),_(),yh(),Bo(),md(),M(),bL=class{constructor(){this._data=``}moveTo(e){return this._data+=`M ${e.x} ${e.y} `,this}lineTo(e){return this._data+=`L ${e.x} ${e.y} `,this}build(){return this._data}}}));function SL(e){return w.div({class:`content`,style:{margin:4,minWidth:150}},e)}function CL(e){return w.div({class:`header`,style:{color:ji(Lu),fontSize:`12px`,fontWeight:`600`,padding:`0 10px`,lineHeight:26}},[e])}function wL(e){return G({name:`inlineEdits.option`},t=>w.div({class:[`monaco-menu-option`,e.isActive?.map(e=>e&&`active`)],onmouseenter:()=>e.onHoverChange?.(!0),onmouseleave:()=>e.onHoverChange?.(!1),onclick:e.onAction,onkeydown:t=>{t.key===`Enter`&&e.onAction?.()},tabIndex:0,style:{borderRadius:3}},[w.elem(`span`,{style:{fontSize:16,display:`flex`}},[Qt.isThemeIcon(e.icon)?Nc(e.icon):e.icon.map(e=>Nc(e))]),w.elem(`span`,{},[e.title]),w.div({style:{marginLeft:`auto`},ref:n=>{let r=t.store.add(new Nf(n,Pi,{disableTitle:!0,...Td,keybindingLabelShadow:void 0,keybindingLabelBackground:ji(ln),keybindingLabelBorder:`transparent`,keybindingLabelBottomBorder:void 0}));t.store.add(Xl(t=>{r.set(e.keybinding.read(t))}))}})]))}function TL(e,t){return G({name:`inlineEdits.actionBar`},n=>w.div({class:[`action-widget-action-bar`],style:{padding:`0 10px`}},[w.div({ref:r=>{n.store.add(new _s(r,t)).push(e,{icon:!1,label:!0})}})]))}function EL(){return w.div({id:`inline-edit-gutter-indicator-menu-separator`,class:`menu-separator`,style:{color:ji(Jr),padding:`4px 0`}},w.div({style:{borderBottom:`1px solid ${ji(Ac)}`}}))}var DL,OL,kL,AL=t((()=>{y(),ns(),Sp(),Rd(),Kn(),ls(),Rt(),sr(),P(),jo(),C(),Os(),Ki(),If(),Ei(),mx(),DL=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},OL=function(e,t){return function(n,r){t(n,r,e)}},kL=class{constructor(e,t,n,r,i,a){this._model=e,this._close=t,this._editorObs=n,this._contextKeyService=r,this._keybindingService=i,this._commandService=a,this._inlineEditsShowCollapsed=this._editorObs.getOption(71).map(e=>e.edits.showCollapsed)}toDisposableLiveElement(){return this._createHoverContent().toDisposableLiveElement()}_createHoverContent(){let e=Cc(`active`,void 0),t=t=>({title:t.title,icon:t.icon,keybinding:typeof t.commandId==`string`?this._getKeybinding(t.commandArgs?void 0:t.commandId):G(this,e=>typeof t.commandId==`string`?void 0:this._getKeybinding(t.commandArgs?void 0:t.commandId.read(e)).read(e)),isActive:e.map(e=>e===t.id),onHoverChange:n=>e.set(n?t.id:void 0,void 0),onAction:()=>(this._close(!0),this._commandService.executeCommand(typeof t.commandId==`string`?t.commandId:t.commandId.get(),...t.commandArgs??[]))}),n=CL(this._model.displayName),r=wL(t({id:`gotoAndAccept`,title:`${A(1200,`Go To`)} / ${A(1201,`Accept`)}`,icon:B.check,commandId:cx})),i=wL(t({id:`reject`,title:A(1202,`Reject`),icon:B.close,commandId:fx})),a=this._model.extensionCommands.map((e,n)=>wL(t({id:e.command.id+`_`+n,title:e.command.title,icon:e.icon??B.symbolEvent,commandId:e.command.id,commandArgs:e.command.arguments}))),o=this._inlineEditsShowCollapsed.map(e=>wL(t(e?{id:`showExpanded`,title:A(1203,`Show Expanded`),icon:B.expandAll,commandId:px}:{id:`showCollapsed`,title:A(1204,`Show Collapsed`),icon:B.collapseAll,commandId:px}))),s=wL(t({id:`settings`,title:A(1205,`Settings`),icon:B.gear,commandId:`workbench.action.openSettings`,commandArgs:[`@tag:nextEditSuggestions`]})),c=this._model.action?[this._model.action]:[],l=c.length>0?TL(c.map(e=>({id:e.id,label:e.title,enabled:!0,run:()=>this._commandService.executeCommand(e.id,...e.arguments??[]),class:void 0,tooltip:e.tooltip??e.title})),{hoverDelegate:ea}):void 0;return SL([n,r,i,o,s,a.length?EL():void 0,...a,l?EL():void 0,l])}_getKeybinding(e){return e?Dp(this._contextKeyService.onDidChangeContext,()=>this._keybindingService.lookupKeybinding(e)):_l(void 0)}},kL=DL([OL(3,bh),OL(4,xs),OL(5,no)],kL)}));function jL(e){switch(e){case`top`:return 90;case`bottom`:return-90;case`right`:return 0}}var ML,NL,PL,FL=t((()=>{y(),Sp(),Kn(),M(),q(),ls(),u(),Os(),F(),Sr(),Yf(),Ya(),eI(),wh(),II(),dN(),oL(),xL(),AL(),ML=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},NL=function(e,t){return function(n,r){t(n,r,e)}},PL=class extends z{get model(){let e=this._model.get();if(!e)throw new tc(`Inline Edit Model not available`);return e}constructor(e,t,n,r,i,a,o,s,c,l){super(),this._editorObs=e,this._originalRange=t,this._verticalOffset=n,this._model=r,this._isHoveringOverInlineEdit=i,this._focusIsInMenu=a,this._hoverService=o,this._instantiationService=s,this._accessibilityService=c,this._tabAction=G(this,e=>{let t=this._model.read(e);return t?t.tabAction.read(e):lN.Inactive}),this._hoverVisible=Cc(this,!1),this.isHoverVisible=this._hoverVisible,this._isHoveredOverIcon=Cc(this,!1),this._isHoveredOverIconDebounced=rf(this._isHoveredOverIcon,100),this.isHoveredOverIcon=this._isHoveredOverIconDebounced,this._isHoveredOverInlineEditDebounced=rf(this._isHoveringOverInlineEdit,100),this._gutterIndicatorStyles=this._tabAction.map((e,t)=>{switch(e){case lN.Inactive:return{background:zI(ZI,l).read(t).toString(),foreground:zI(YI,l).read(t).toString(),border:zI(XI,l).read(t).toString()};case lN.Jump:return{background:zI(JI,l).read(t).toString(),foreground:zI(KI,l).read(t).toString(),border:zI(qI,l).read(t).toString()};case lN.Accept:return{background:zI(eL,l).read(t).toString(),foreground:zI(QI,l).read(t).toString(),border:zI($I,l).read(t).toString()}}}),this._originalRangeObs=vL(this._originalRange),this._state=G(this,e=>{let t=this._originalRangeObs.read(e);if(t)return{range:t,lineOffsetRange:this._editorObs.observeLineOffsetRange(t,this._store)}}),this._stickyScrollController=FI.get(this._editorObs.editor),this._stickyScrollHeight=this._stickyScrollController?Dp(this._stickyScrollController.onDidChangeStickyScrollHeight,()=>this._stickyScrollController.stickyScrollWidgetHeight):_l(0),this._lineNumberToRender=G(this,e=>{if(this._verticalOffset.read(e)!==0)return``;let t=this._originalRange.read(e)?.startLineNumber,n=this._editorObs.getOption(76).read(e);if(t===void 0||n.renderType===0)return``;if(n.renderType===3){let n=this._editorObs.cursorPosition.read(e);return t%10==0||n&&n.lineNumber===t?t.toString():``}if(n.renderType===2){let n=this._editorObs.cursorPosition.read(e);if(!n)return``;let r=Math.abs(t-n.lineNumber);return r===0?t.toString():r.toString()}return n.renderType===4?n.renderFn?n.renderFn(t):``:t.toString()}),this._availableWidthForIcon=G(this,e=>{let t=this._editorObs.editor.getModel(),n=this._editorObs.editor,r=this._editorObs.layoutInfo.read(e),i=r.decorationsLeft+r.decorationsWidth-r.glyphMarginLeft;if(!t||i<=0)return()=>0;if(r.lineNumbersLeft===0)return()=>i;let a=this._editorObs.getOption(76).read(e);if(a.renderType===2||a.renderType===0)return()=>i;let o=n.getOption(59).typicalHalfwidthCharacterWidth,s=r.lineNumbersLeft+r.lineNumbersWidth,c=(t.getLineCount()+1).toString().length,l=[];for(let e=1;e<=c;e++){let t=10**(e-1),a=n.getTopForLineNumber(t),c=e*o,u=Math.min(i,Math.max(0,s-c-r.glyphMarginLeft));l.push({firstLineNumberWithDigitCount:t,topOfLineNumber:a,usableWidthLeftOfLineNumber:u})}return e=>{for(let t=l.length-1;t>=0;t--)if(e>=l[t].topOfLineNumber)return l[t].usableWidthLeftOfLineNumber;throw new tc(`Could not find avilable width for icon`)}}),this._layout=G(this,e=>{let t=this._state.read(e);if(!t)return;let n=this._editorObs.layoutInfo.read(e),r=this._editorObs.observeLineHeightForLine(t.range.map(e=>e.startLineNumber)).read(e),i=n.decorationsLeft+n.decorationsWidth-n.glyphMarginLeft-4,a=n.height-4,o=$F.fromLeftTopWidthHeight(2,2,i,a),s=o.withTop(this._stickyScrollHeight.read(e)),c=o.withTop(s.top+2),l=t.lineOffsetRange.read(e),u=$F.fromRanges(pa.fromTo(c.left,c.right),l),d=r,f=this._verticalOffset.read(e),p=u.withHeight(d).translateY(f),m=s.containsRect(p),h=this._tabAction.map(e=>e===lN.Accept?B.keyboardTab:B.arrowRight),ee=G(this,e=>this._isHoveredOverIconDebounced.read(e)||this._isHoveredOverInlineEditDebounced.read(e)?B.check:this._tabAction.read(e)===lN.Accept?B.keyboardTab:(this._editorObs.cursorLineNumber.read(e)??0)<=t.range.read(e).startLineNumber?B.keyboardTabAbove:B.keyboardTabBelow),te=e=>{let t=this._availableWidthForIcon.get()(e.bottom+this._editorObs.editor.getScrollTop())-2;return Math.max(Math.min(t,22),16)};if(m){let e=p,t;t=n.lineNumbersWidth===0?Math.min(Math.max(n.lineNumbersLeft-o.left,0),e.width-22):Math.max(n.lineNumbersLeft+n.lineNumbersWidth-o.left,0);let r=e.withWidth(t),i=Math.max(Math.min(n.decorationsWidth,22),16);return{gutterEditArea:u,icon:ee,iconDirection:`right`,iconRect:e.withWidth(i).translateX(t),pillRect:e,lineNumberRect:r}}let ne=o.intersect(u);if(ne&&ne.height>=d){let e=p.moveToBeContainedIn(c).moveToBeContainedIn(ne),t=e.withWidth(te(e));return{gutterEditArea:u,icon:ee,iconDirection:`right`,iconRect:t,pillRect:t}}let re=p.moveToBeContainedIn(o),ie=re.withWidth(te(re)),ae=ie;return{gutterEditArea:u,icon:h,iconDirection:ie.top<p.top?`top`:`bottom`,iconRect:ae,pillRect:ie}}),this._iconRef=w.ref(),this.isVisible=this._layout.map(e=>!!e),this._indicator=w.div({class:`inline-edits-view-gutter-indicator`,onclick:()=>{let e=this._layout.get()?.icon.get()===B.check;this._editorObs.editor.focus(),e?this.model.accept():this.model.jump()},tabIndex:0,style:{position:`absolute`,overflow:`visible`}},vL(this._layout).map(e=>e?[w.div({style:{position:`absolute`,background:ji(tL),borderRadius:`4px`,...yL(t=>e.read(t).gutterEditArea)}}),w.div({class:`icon`,ref:this._iconRef,onmouseenter:()=>{this._showHover()},style:{cursor:`pointer`,zIndex:`20`,position:`absolute`,backgroundColor:this._gutterIndicatorStyles.map(e=>e.background),"--vscodeIconForeground":this._gutterIndicatorStyles.map(e=>e.foreground),border:this._gutterIndicatorStyles.map(e=>`1px solid ${e.border}`),boxSizing:`border-box`,borderRadius:`4px`,display:`flex`,justifyContent:`flex-end`,transition:`background-color 0.2s ease-in-out, width 0.2s ease-in-out`,...yL(t=>e.read(t).pillRect)}},[w.div({className:`line-number`,style:{lineHeight:e.map(e=>e.lineNumberRect?e.lineNumberRect.height:0),display:e.map(e=>e.lineNumberRect?`flex`:`none`),alignItems:`center`,justifyContent:`flex-end`,width:e.map(e=>e.lineNumberRect?e.lineNumberRect.width:0),height:`100%`,color:this._gutterIndicatorStyles.map(e=>e.foreground)}},this._lineNumberToRender),w.div({style:{rotate:e.map(e=>`${jL(e.iconDirection)}deg`),transition:`rotate 0.2s ease-in-out`,display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100%`,marginRight:e.map(e=>e.pillRect.width-e.iconRect.width-(e.lineNumberRect?.width??0)),width:e.map(e=>e.iconRect.width)}},[e.map((e,t)=>Nc(e.icon.read(t)))])])]:[])).keepUpdated(this._store),this._register(this._editorObs.createOverlayWidget({domNode:this._indicator.element,position:_l(null),allowEditorOverflow:!1,minContentWidthInPx:_l(0)})),this._register(this._editorObs.editor.onMouseMove(e=>{if(this._state.get()===void 0)return;let t=this._iconRef.element.getBoundingClientRect(),n=$F.fromLeftTopWidthHeight(t.left,t.top,t.width,t.height),r=new Rm(e.event.posx,e.event.posy);this._isHoveredOverIcon.set(n.containsPoint(r),void 0)})),this._register(this._editorObs.editor.onDidScrollChange(()=>{this._isHoveredOverIcon.set(!1,void 0)})),this._register(Jo(this._isHoveredOverInlineEditDebounced,e=>{e&&this.triggerAnimation()})),this._register(Xl(e=>{this._indicator.readEffect(e),this._indicator.element&&this._editorObs.editor.applyFontInfo(this._indicator.element)}))}triggerAnimation(){return this._accessibilityService.isMotionReduced()?new Animation(null,null).finished:this._iconRef.element.animate([{outline:`2px solid ${this._gutterIndicatorStyles.map(e=>e.border).get()}`,outlineOffset:`-1px`,offset:0},{outline:`2px solid transparent`,outlineOffset:`10px`,offset:1}],{duration:500}).finished}_showHover(){if(this._hoverVisible.get())return;let e=new I,t=e.add(this._instantiationService.createInstance(kL,this.model,e=>{e&&this._editorObs.editor.focus(),r?.dispose()},this._editorObs).toDisposableLiveElement()),n=e.add(qn(t.element));e.add(n.onDidBlur(()=>this._focusIsInMenu.set(!1,void 0))),e.add(n.onDidFocus(()=>this._focusIsInMenu.set(!0,void 0))),e.add(qm(()=>this._focusIsInMenu.set(!1,void 0)));let r=this._hoverService.showInstantHover({target:this._iconRef.element,content:t.element});r?(this._hoverVisible.set(!0,void 0),e.add(this._editorObs.editor.onDidScrollChange(()=>r.dispose())),e.add(r.onDispose(()=>{this._hoverVisible.set(!1,void 0),e.dispose()}))):e.dispose()}},PL=ML([NL(6,ms),NL(7,U),NL(8,qi),NL(9,mr)],PL)})),IL,LL,RL,zL,BL=t((()=>{O(),M(),q(),ls(),qp(),Zl(),IL=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},LL=function(e,t){return function(n,r){t(n,r,e)}},(function(e){e.FirstTime=`firstTime`,e.SecondTime=`secondTime`,e.Active=`active`})(RL||={}),zL=class extends z{constructor(e,t,n,r,i,a){super(),this._host=e,this._model=t,this._indicator=n,this._collapsedView=r,this._storageService=i,this._configurationService=a,this._disposables=this._register(new su),this._setupDone=Cc({name:`setupDone`},!1),this._activeCompletionId=G(e=>{let t=this._model.read(e);if(!t||!this._setupDone.read(e))return;let n=this._indicator.read(e);if(!(!n||!n.isVisible.read(e)))return t.inlineEdit.inlineCompletion.identity.id}),this._register(this._initializeDebugSetting()),this._disposables.value=this.setupNewUserExperience(),this._setupDone.set(!0,void 0)}setupNewUserExperience(){if(this.getNewUserType()===RL.Active)return;let e=new I,t=!1,n=!1,r=0,i=0;return e.add(ws(this._activeCompletionId,async(e,a,o,s)=>{if(e===void 0)return;let c=this.getNewUserType();switch(c){case RL.FirstTime:(r++>=5||t)&&(c=RL.SecondTime,this.setNewUserType(c));break;case RL.SecondTime:i++>=3&&n&&(c=RL.Active,this.setNewUserType(c));break}switch(c){case RL.FirstTime:for(let e=0;e<3&&!s.isCancellationRequested;e++)await this._indicator.get()?.triggerAnimation(),await dl(500);break;case RL.SecondTime:this._indicator.get()?.triggerAnimation();break}})),e.add(Xl(e=>{this._collapsedView.isVisible.read(e)&&this.getNewUserType()!==RL.Active&&this._collapsedView.triggerAnimation()})),e.add(xm((e,n)=>{let r=this._indicator.read(e);r&&n.add(Jo(r.isHoveredOverIcon,async e=>{e&&(t=!0)}))})),e.add(xm((e,t)=>{let r=this._host.read(e);r&&t.add(r.onDidAccept(()=>{n=!0}))})),e}getNewUserType(){return this._storageService.get(`inlineEditsGutterIndicatorUserKind`,-1,RL.FirstTime)}setNewUserType(e){switch(e){case RL.FirstTime:throw new tc(`UserKind should not be set to first time`);case RL.SecondTime:break;case RL.Active:this._disposables.clear();break}this._storageService.store(`inlineEditsGutterIndicatorUserKind`,e,-1,0)}_initializeDebugSetting(){let e=`editor.inlineSuggest.edits.resetNewUserExperience`;return this._configurationService.getValue(e)&&this._storageService.remove(`inlineEditsGutterIndicatorUserKind`,-1),this._configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration(e)&&this._configurationService.getValue(e)&&(this._storageService.remove(`inlineEditsGutterIndicatorUserKind`,-1),this._disposables.value=this.setupNewUserExperience())})}},zL=IL([LL(4,Vd),LL(5,xl)],zL)})),VL,HL,UL,WL=t((()=>{y(),N(),q(),ls(),u(),Sr(),Na(),Ya(),PM(),oL(),xL(),VL=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},HL=function(e,t){return function(n,r){t(n,r,e)}},UL=class extends z{constructor(e,t,n){super(),this._editor=e,this._edit=t,this._accessibilityService=n,this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._iconRef=w.ref(),this.isHovered=_l(!1),this._editorObs=Qe(this._editor);let r=this._edit.map(e=>e?.edit.replacements[0]??null).map(e=>e?jM(e,this._editor.getModel()).range.getStartPosition():null),i=this._editorObs.observePosition(r,this._store),a=G(e=>{let t=i.read(e);if(!t)return null;let n=this._editorObs.layoutInfoContentLeft.read(e),r=this._editorObs.scrollLeft.read(e);return new Rm(n+t.x-r,t.y)}),o=w.div({class:`inline-edits-collapsed-view`,style:{position:`absolute`,overflow:`visible`,top:`0px`,left:`0px`,display:`block`}},[[this.getCollapsedIndicator(a)]]).keepUpdated(this._store).element;this._register(this._editorObs.createOverlayWidget({domNode:o,position:_l(null),allowEditorOverflow:!1,minContentWidthInPx:_l(0)})),this.isVisible=this._edit.map((e,t)=>!!e&&a.read(t)!==null)}triggerAnimation(){return this._accessibilityService.isMotionReduced()?new Animation(null,null).finished:this._iconRef.element.animate([{offset:0,transform:`translateY(-3px)`},{offset:.2,transform:`translateY(1px)`},{offset:.36,transform:`translateY(-1px)`},{offset:.52,transform:`translateY(1px)`},{offset:.68,transform:`translateY(-1px)`},{offset:.84,transform:`translateY(1px)`},{offset:1,transform:`translateY(0px)`}],{duration:2e3}).finished}getCollapsedIndicator(e){let t=this._editorObs.layoutInfoContentLeft,n=e.map((e,n)=>e?e.deltaX(-t.read(n)):null),r=this.createIconPath(n);return w.svg({class:`collapsedView`,ref:this._iconRef,style:{position:`absolute`,...yL(e=>dL(this._editorObs).read(e)),overflow:`hidden`,pointerEvents:`none`}},[w.svgElem(`path`,{class:`collapsedViewPath`,d:r,fill:ji(qI)})])}createIconPath(e){return e.map(e=>{if(!e)return new bL().build();let t=e.deltaX(-6/2).deltaY(-1),n=t.deltaX(6),r=t.deltaY(1),i=n.deltaY(1),a=r.deltaX(6/2).deltaY(3);return new bL().moveTo(t).lineTo(n).lineTo(i).lineTo(a).lineTo(r).lineTo(t).build()})}},UL=VL([HL(2,qi)],UL)})),GL,KL,qL,JL,YL,XL,ZL,QL,$L=t((()=>{y(),st(),N(),q(),ls(),Ei(),Sr(),Yf(),Na(),Gt(),eI(),ar(),Gr(),h(),Er(),dN(),oL(),xL(),GL=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},KL=function(e,t){return function(n,r){t(n,r,e)}},qL=14,JL=0,YL=4,XL=4,ZL=2,QL=class extends z{constructor(e,t,n,r,i){super(),this._editor=e,this._languageService=i,this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._isHovered=Cc(this,!1),this.isHovered=this._isHovered,this._viewRef=w.ref(),this._editorObs=Qe(this._editor);let a=n.map((e,t)=>{let n;switch(e){case lN.Inactive:n=ZI;break;case lN.Jump:n=JI;break;case lN.Accept:n=eL;break}return{border:zI(n,r).read(t).toString(),background:ji(ia)}}),o=t.map(e=>e?this.getState(e):void 0),s=o.map(e=>e?this.getRendering(e,a):void 0);this.minEditorScrollHeight=G(this,e=>{let t=o.read(e);return t?t.rect.read(e).bottom+this._editor.getScrollTop():0});let c=w.div({class:`inline-edits-custom-view`,style:{position:`absolute`,overflow:`visible`,top:`0px`,left:`0px`,display:`block`}},[s]).keepUpdated(this._store);this._register(this._editorObs.createOverlayWidget({domNode:c.element,position:_l(null),allowEditorOverflow:!1,minContentWidthInPx:dp(this,(e,t)=>{let n=o.read(e);if(!n)return t??0;let r=n.rect.map(e=>e.right).read(e)+this._editorObs.layoutInfoVerticalScrollbarWidth.read(e)+YL-this._editorObs.layoutInfoContentLeft.read(e);return Math.max(t??0,r)}).recomputeInitiallyAndOnChange(this._store)})),this._register(Xl(e=>{if(!s.read(e)){this._isHovered.set(!1,void 0);return}this._isHovered.set(c.isHovered.read(e),void 0)}))}fitsInsideViewport(e,t,n){let r=this._editorObs.layoutInfoWidth.read(n),i=this._editorObs.layoutInfoContentLeft.read(n),a=this._editor.getLayoutInfo().verticalScrollbarWidth,o=this._editorObs.layoutInfoMinimap.read(n).minimapLeft===0?0:this._editorObs.layoutInfoMinimap.read(n).minimapWidth,s=sL(this._editorObs,e,void 0),c=uL(t,this._editor,this._editor.getModel()),l=YL+qL;return s+c+l<r-i-a-o}getState(e){let t=G(this,t=>{let n=e.range.startLineNumber,r=e.range.endLineNumber,i=e.range.startColumn,a=e.range.endColumn,o=this._editor.getModel()?.getLineCount()??0;return{lineWidth:sL(this._editorObs,new Xt(n,n+1),t),lineWidthBelow:n+1<=o?sL(this._editorObs,new Xt(n+1,n+2),t):void 0,lineWidthAbove:n-1>=1?sL(this._editorObs,new Xt(n-1,n),t):void 0,startContentLeftOffset:this._editor.getOffsetForColumn(n,i),endContentLeftOffset:this._editor.getOffsetForColumn(r,a)}}),n=e.range.startLineNumber,r=e.range.endLineNumber,i=this.fitsInsideViewport(new Xt(n,r+1),e.label,void 0);return{rect:G(this,a=>{let o=this._editorObs.getOption(59).read(a).typicalHalfwidthCharacterWidth,{lineWidth:s,lineWidthBelow:c,lineWidthAbove:l,startContentLeftOffset:u,endContentLeftOffset:d}=t.read(a),f=this._editorObs.layoutInfoContentLeft.read(a),p=this._editorObs.observeLineHeightForLine(n).recomputeInitiallyAndOnChange(a.store).read(a),m=this._editorObs.scrollTop.read(a),h=this._editorObs.scrollLeft.read(a),ee;ee=n===r&&d+5*o>=s&&i?`end`:c!==void 0&&c+qL-XL-YL<u?`below`:l!==void 0&&l+qL-XL-YL<u?`above`:`end`;let te,ne,re=0,ie=0;switch(ee){case`end`:te=this._editorObs.editor.getTopForLineNumber(n),ne=s,re=YL+qL;break;case`below`:te=this._editorObs.editor.getTopForLineNumber(n+1),ne=u,re=YL+XL,ie=JL+ZL;break;case`above`:te=this._editorObs.editor.getTopForLineNumber(n-1),ne=u,re=YL+XL,ie=-JL+ZL;break}return $F.fromLeftTopWidthHeight(f+ne-h,te-m,o*e.label.length,p).withMargin(JL,YL).translateX(re).translateY(ie)}),label:e.label,kind:e.kind}}getRendering(e,t){let n=document.createElement(`div`),r=this._editor.getModel().tokenization.tokenizeLinesAt(1,[e.label])?.[0],i;i=r&&e.kind===Qm.Code?Bt.fromLineTokens(r).toLineTokens(e.label,this._languageService.languageIdCodec):Ii.createEmpty(e.label,this._languageService.languageIdCodec);let a=zn(new li([i]),Vi.fromEditor(this._editor).withSetWidth(!1).withScrollBeyondLastColumn(0),[],n,!0);n.style.width=`${a.minWidthInPx}px`;let o=e.rect.map(e=>e.withMargin(0,YL));return w.div({class:`collapsedView`,ref:this._viewRef,style:{position:`absolute`,...yL(e=>o.read(e)),overflow:`hidden`,boxSizing:`border-box`,cursor:`pointer`,border:t.map(e=>`1px solid ${e.border}`),borderRadius:`4px`,backgroundColor:t.map(e=>e.background),display:`flex`,alignItems:`center`,justifyContent:`center`,whiteSpace:`nowrap`},onmousedown:e=>{e.preventDefault()},onclick:e=>{this._onDidClick.fire(new St(Ni(e),e))}},[n])}},QL=GL([KL(3,mr),KL(4,Qi)],QL)})),eR,tR,nR,rR,iR,aR,oR,sR=t((()=>{y(),N(),q(),ls(),Ei(),Sr(),Na(),eI(),wh(),Su(),oL(),xL(),eR=0,tR=0,nR=1,rR=1,iR=3,aR=4,oR=class extends z{constructor(e,t,n,r){super(),this._editor=e,this._edit=t,this._uiState=n,this._tabAction=r,this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._display=G(this,e=>this._uiState.read(e)?`block`:`none`),this._editorMaxContentWidthInRange=G(this,e=>{let t=this._originalDisplayRange.read(e);return t?(this._editorObs.versionId.read(e),dp(this,(e,n)=>{let r=sL(this._editorObs,t,e);return Math.max(r,n??0)})):_l(0)}).map((e,t)=>e.read(t)),this._maxPrefixTrim=G(this,e=>{let t=this._uiState.read(e);return t?lL(t.deletions,t.originalRange,[],this._editor):{prefixTrim:0,prefixLeftOffset:0}}),this._editorLayoutInfo=G(this,e=>{let t=this._edit.read(e);if(!t||!this._uiState.read(e))return null;let n=this._editorObs.layoutInfo.read(e),r=this._editorObs.scrollLeft.read(e),i=this._editorObs.getOption(59).map(e=>e.typicalHalfwidthCharacterWidth).read(e),a=n.contentLeft+Math.max(this._editorMaxContentWidthInRange.read(e),i)-r,o=t.originalLineRange,s=this._originalVerticalStartPosition.read(e)??this._editor.getTopForLineNumber(o.startLineNumber)-this._editorObs.scrollTop.read(e),c=this._originalVerticalEndPosition.read(e)??this._editor.getTopForLineNumber(o.endLineNumberExclusive)-this._editorObs.scrollTop.read(e),l=n.contentLeft+this._maxPrefixTrim.read(e).prefixLeftOffset-r;return a<=l?null:{codeRect:$F.fromLeftTopRightBottom(l,s,a,c).withMargin(tR,eR),contentLeft:n.contentLeft}}).recomputeInitiallyAndOnChange(this._store),this._originalOverlay=w.div({style:{pointerEvents:`none`}},G(this,e=>{let t=vL(this._editorLayoutInfo).read(e);if(!t)return;let n=t.map(e=>$F.fromLeftTopRightBottom(e.contentLeft-aR-nR,e.codeRect.top,e.contentLeft,e.codeRect.bottom)),r=G(this,e=>{let r=t.read(e).codeRect,i=n.read(e);return r.intersectHorizontal(new pa(i.left,2**53-1))}),i=this._uiState.map(e=>e?.inDiffEditor?iR:rR).read(e),a=r.map(e=>e.withMargin(i,i));return[w.div({class:`originalSeparatorDeletion`,style:{...a.read(e).toStyles(),borderRadius:`${aR}px`,border:`${nR+i}px solid ${ji(ia)}`,boxSizing:`border-box`}}),w.div({class:`originalOverlayDeletion`,style:{...r.read(e).toStyles(),borderRadius:`${aR}px`,border:RI(this._tabAction).map(e=>`${nR}px solid ${ji(e)}`),boxSizing:`border-box`,backgroundColor:ji(VI)}}),w.div({class:`originalOverlayHiderDeletion`,style:{...n.read(e).toStyles(),backgroundColor:ji(ia)}})]})).keepUpdated(this._store),this._nonOverflowView=w.div({class:`inline-edits-view`,style:{position:`absolute`,overflow:`visible`,top:`0px`,left:`0px`,display:this._display}},[[this._originalOverlay]]).keepUpdated(this._store),this.isHovered=_l(!1),this._editorObs=Qe(this._editor);let i=G(this,e=>{let t=this._edit.read(e);return t?new H(t.originalLineRange.startLineNumber,1):null}),a=G(this,e=>{let t=this._edit.read(e);return t?new H(t.originalLineRange.endLineNumberExclusive,1):null});this._originalDisplayRange=this._uiState.map(e=>e?.originalRange),this._originalVerticalStartPosition=this._editorObs.observePosition(i,this._store).map(e=>e?.y),this._originalVerticalEndPosition=this._editorObs.observePosition(a,this._store).map(e=>e?.y),this._register(this._editorObs.createOverlayWidget({domNode:this._nonOverflowView.element,position:_l(null),allowEditorOverflow:!1,minContentWidthInPx:G(this,e=>{let t=this._editorLayoutInfo.read(e);return t===null?0:t.codeRect.width})}))}}})),cR,lR,uR,dR,fR,pR,mR,hR=t((()=>{y(),N(),q(),ls(),F(),Ei(),Sr(),Na(),Gt(),eI(),Su(),_(),ar(),wh(),h(),Er(),Kd(),AM(),UF(),oL(),xL(),cR=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},lR=function(e,t){return function(n,r){t(n,r,e)}},uR=1,dR=1,fR=3,pR=4,mR=class extends z{constructor(e,t,n,r,i){super(),this._editor=e,this._input=t,this._tabAction=n,this._languageService=i,this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._state=G(this,e=>{let t=this._input.read(e);if(!t)return;let n=this._editor.getModel(),r=n.getEOL();if(t.startColumn===1&&t.lineNumber>1&&n.getLineLength(t.lineNumber)!==0&&t.text.endsWith(r)&&!t.text.startsWith(r)){let e=n.getLineLength(t.lineNumber-1)+1;return{lineNumber:t.lineNumber-1,column:e,text:r+t.text.slice(0,-r.length)}}return{lineNumber:t.lineNumber,column:t.startColumn,text:t.text}}),this._trimVertically=G(this,e=>{let t=this._state.read(e),n=t?.text;if(!n||n.trim()===``)return{topOffset:0,bottomOffset:0,linesTop:0,linesBottom:0};let r=this._editor.getLineHeightForPosition(new H(t.lineNumber,1)),i=this._editor.getModel().getEOL(),a=0,o=0,s=0;for(;s<n.length&&n.startsWith(i,s);s+=i.length)a+=1;for(let e=n.length;e>s&&n.endsWith(i,e);e-=i.length)o+=1;return{topOffset:a*r,bottomOffset:o*r,linesTop:a,linesBottom:o}}),this._maxPrefixTrim=G(this,e=>{let t=this._state.read(e);if(!t)return{prefixLeftOffset:0,prefixTrim:0};let n=this._editor.getModel(),r=n.getEOL(),i=this._trimVertically.read(e),a=t.text.split(r),o=a.slice(i.linesTop,a.length-i.linesBottom);return i.linesTop===0&&(o[0]=n.getLineContent(t.lineNumber)+o[0]),lL([],new Xt(t.lineNumber,t.lineNumber+(i.linesTop>0?0:1)),o,this._editor)}),this._ghostText=G(e=>{let t=this._state.read(e),n=this._maxPrefixTrim.read(e);if(!t)return;let r=this._editor.getModel().getEOL(),i=t.text.split(r).map((e,t)=>new Np(new T(t+1,t===0?1:n.prefixTrim+1,t+1,e.length+1),`modified-background`,0));return new DM(t.lineNumber,[new OM(t.column,t.text,!1,i)])}),this._display=G(this,e=>this._state.read(e)?`block`:`none`),this._editorMaxContentWidthInRange=G(this,e=>{let t=this._state.read(e);if(!t)return 0;this._editorObs.versionId.read(e);let n=this._editor.getModel(),r=n.getEOL(),i=t.text.startsWith(r)?``:n.getValueInRange(new T(t.lineNumber,1,t.lineNumber,t.column)),a=n.getValueInRange(new T(t.lineNumber,t.column,t.lineNumber,n.getLineLength(t.lineNumber)+1)),o=(i+t.text+a).split(r),s=Vi.fromEditor(this._editor).withSetWidth(!1).withScrollBeyondLastColumn(0),c=o.map(e=>{let r=n.tokenization.tokenizeLinesAt(t.lineNumber,[e])?.[0],i;return i=r?Bt.fromLineTokens(r).toLineTokens(e,this._languageService.languageIdCodec):Ii.createEmpty(e,this._languageService.languageIdCodec),zn(new li([i]),s,[],R(`div`),!0).minWidthInPx});return Math.max(...c)}),this.startLineOffset=this._trimVertically.map(e=>e.topOffset),this.originalLines=this._state.map(e=>e?new Xt(e.lineNumber,Math.min(e.lineNumber+2,this._editor.getModel().getLineCount()+1)):void 0),this._overlayLayout=G(this,e=>{this._ghostText.read(e);let t=this._state.read(e);if(!t)return null;this._editorObs.observePosition(Cc(this,new H(t.lineNumber,t.column)),e.store).read(e);let n=this._editorObs.layoutInfo.read(e),r=this._editorObs.scrollLeft.read(e),i=this._editorObs.layoutInfoVerticalScrollbarWidth.read(e),a=n.contentLeft+this._editorMaxContentWidthInRange.read(e)-r,o=this._maxPrefixTrim.read(e).prefixLeftOffset??0,s=n.contentLeft+o-r;if(a<=s)return null;let{topOffset:c,bottomOffset:l}=this._trimVertically.read(e),u=this._editorObs.scrollTop.read(e),d=this._ghostTextView.height.read(e)-c-l,f=this._editor.getTopForLineNumber(t.lineNumber)-u+c,p=new $F(s,f,a,f+d);return{overlay:p,startsAtContentLeft:o===0,contentLeft:n.contentLeft,minContentWidthRequired:o+p.width+i}}).recomputeInitiallyAndOnChange(this._store),this._modifiedOverlay=w.div({style:{pointerEvents:`none`}},G(this,e=>{let t=vL(this._overlayLayout).read(e);if(!t)return;let n=t.map(e=>$F.fromLeftTopRightBottom(e.contentLeft-pR-uR,e.overlay.top,e.contentLeft,e.overlay.bottom)).read(e),r=this._input.map(e=>e?.inDiffEditor?fR:dR).read(e),i=t.map(e=>e.overlay.withMargin(0,uR,0,e.startsAtContentLeft?0:uR).intersectHorizontal(new pa(n.left,2**53-1))),a=i.map(e=>e.withMargin(r,r));return[w.div({class:`originalUnderlayInsertion`,style:{...a.read(e).toStyles(),borderRadius:pR,border:`${uR+r}px solid ${ji(ia)}`,boxSizing:`border-box`}}),w.div({class:`originalOverlayInsertion`,style:{...i.read(e).toStyles(),borderRadius:pR,border:LI(this._tabAction).map(e=>`${uR}px solid ${ji(e)}`),boxSizing:`border-box`,backgroundColor:ji(HI)}}),w.div({class:`originalOverlayHiderInsertion`,style:{...n.toStyles(),backgroundColor:ji(ia)}})]})).keepUpdated(this._store),this._view=w.div({class:`inline-edits-view`,style:{position:`absolute`,overflow:`visible`,top:`0px`,left:`0px`,display:this._display}},[[this._modifiedOverlay]]).keepUpdated(this._store),this._editorObs=Qe(this._editor),this._ghostTextView=this._register(r.createInstance(zF,this._editor,{ghostText:this._ghostText,minReservedLineCount:_l(0),targetTextModel:this._editorObs.model.map(e=>e??void 0),warning:_l(void 0),handleInlineCompletionShown:_l(()=>{})},Cc(this,{syntaxHighlightingEnabled:!0,extraClasses:[`inline-edit`]}),!0,!0)),this.isHovered=this._ghostTextView.isHovered,this._register(this._ghostTextView.onDidClick(e=>{this._onDidClick.fire(e)})),this._register(this._editorObs.createOverlayWidget({domNode:this._view.element,position:_l(null),allowEditorOverflow:!1,minContentWidthInPx:G(this,e=>{let t=this._overlayLayout.read(e);return t===null?0:t.minContentWidthRequired})}))}},mR=cR([lR(3,U),lR(4,Qi)],mR)}));function gR(e){let t=[];for(;e.length;){let n=e.shift();n.startLineNumber!==n.endLineNumber&&(e.push(new T(n.startLineNumber+1,1,n.endLineNumber,n.endColumn)),n=new T(n.startLineNumber,n.startColumn,n.startLineNumber,2**53-1)),t.push(n)}return t}var _R,vR,yR,bR=t((()=>{y(),st(),N(),q(),ls(),Ei(),Sr(),Yf(),ht(),Gt(),Ya(),eI(),_(),wh(),h(),Er(),Kd(),oL(),xL(),_R=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vR=function(e,t){return function(n,r){t(n,r,e)}},yR=class extends z{constructor(e,t,n,r,i,a){super(),this._editor=e,this._edit=t,this._isInDiffEditor=n,this._tabAction=r,this._languageService=i,this._themeService=a,this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._maxPrefixTrim=this._edit.map(e=>e?lL(e.replacements.flatMap(e=>[e.originalRange,e.modifiedRange]),e.originalRange,e.modifiedLines,this._editor.editor):void 0),this._modifiedLineElements=G(this,e=>{let t=[],n=0,r=this._maxPrefixTrim.read(e),i=this._edit.read(e);if(!i||!r)return;let a=r.prefixTrim,o=gR(i.replacements.map(e=>e.modifiedRange)).map(e=>new T(e.startLineNumber,e.startColumn-a,e.endLineNumber,e.endColumn-a)),s=this._editor.model.get(),c=i.modifiedRange.startLineNumber;for(let r=0;r<i.modifiedRange.length;r++){let l=document.createElement(`div`),u=c+r,d=i.modifiedLines[r].slice(a),f=s.tokenization.tokenizeLinesAt(u,[d])?.[0],p;p=f?Bt.fromLineTokens(f).toLineTokens(d,this._languageService.languageIdCodec):Ii.createEmpty(d,this._languageService.languageIdCodec);let m=[];for(let e of o.filter(e=>e.startLineNumber===u)){let t=Math.min(e.endColumn,d.length+1);m.push(new Np(new T(1,e.startColumn,1,t),`inlineCompletions-modified-bubble`,0))}let h=zn(new li([p]),Vi.fromEditor(this._editor.editor).withSetWidth(!1).withScrollBeyondLastColumn(0),m,l,!0);this._editor.getOption(59).read(e),n=Math.max(n,h.minWidthInPx),t.push(l)}return{lines:t,requiredWidth:n}}),this._layout=G(this,e=>{let t=this._modifiedLineElements.read(e),n=this._maxPrefixTrim.read(e),r=this._edit.read(e);if(!t||!n||!r)return;let{prefixLeftOffset:i}=n,{requiredWidth:a}=t,o=this._editor.observeLineHeightsForLineRange(r.originalRange).read(e),s=(()=>{let e=o.slice(0,r.modifiedRange.length);for(;e.length<r.modifiedRange.length;)e.push(o[o.length-1]);return e})(),c=this._editor.layoutInfoContentLeft.read(e),l=this._editor.layoutInfoVerticalScrollbarWidth.read(e),u=this._editor.scrollLeft.read(e),d=this._editor.scrollTop.read(e),f=c-u,p=this._editor.editor.getModel(),m=r.originalRange.mapToLineArray(e=>this._editor.editor.getOffsetForColumn(e,p.getLineMaxColumn(e))-i),h=Math.max(...m,a),ee=r.originalRange.startLineNumber,te=r.originalRange.endLineNumberExclusive-1,ne=this._editor.editor.getTopForLineNumber(ee)-d,re=this._editor.editor.getBottomForLineNumber(te)-d,ie=$F.fromLeftTopWidthHeight(f+i,ne,h,re-ne),ae=$F.fromLeftTopWidthHeight(ie.left,ie.bottom,ie.width,s.reduce((e,t)=>e+t,0)),oe=$F.hull([ie,ae]),se=oe.intersectVertical(new pa(ie.bottom,2**53-1));return{originalLinesOverlay:ie,modifiedLinesOverlay:ae,background:oe,lowerBackground:se,lowerText:new $F(se.left,se.top,se.right,se.bottom),modifiedLineHeights:s,minContentWidthRequired:i+h+l}}),this._viewZoneInfo=G(e=>{if(!this._editor.getOption(71).map(e=>e.edits.allowCodeShifting===`always`).read(e))return;let t=this._layout.read(e),n=this._edit.read(e);if(!(!t||!n))return{height:t.lowerBackground.height,lineNumber:n.originalRange.endLineNumberExclusive}}),this.minEditorScrollHeight=G(this,e=>{let t=vL(this._layout).read(e);return!t||this._viewZoneInfo.read(e)!==void 0?0:t.read(e).lowerText.bottom+this._editor.editor.getScrollTop()}),this._div=w.div({class:`line-replacement`},[G(this,e=>{let t=vL(this._layout).read(e),n=this._modifiedLineElements.read(e);if(!t||!n)return[];let r=t.read(e),i=this._editor.layoutInfoContentLeft.read(e),a=this._isInDiffEditor.read(e)?3:1;n.lines.forEach((e,t)=>{e.style.width=`${r.lowerText.width}px`,e.style.height=`${r.modifiedLineHeights[t]}px`,e.style.position=`relative`});let o=LI(this._tabAction).read(e),s=RI(this._tabAction).read(e);return[w.div({style:{position:`absolute`,...yL(e=>dL(this._editor).read(e)),overflow:`hidden`,pointerEvents:`none`}},[w.div({class:`borderAroundLineReplacement`,style:{position:`absolute`,...yL(e=>t.read(e).background.translateX(-i).withMargin(a)),borderRadius:`4px`,border:`${a+1}px solid ${ji(ia)}`,boxSizing:`border-box`,pointerEvents:`none`}}),w.div({class:`originalOverlayLineReplacement`,style:{position:`absolute`,...yL(e=>t.read(e).background.translateX(-i)),borderRadius:`4px`,border:zI(s,this._themeService).map(e=>`1px solid ${e.toString()}`),pointerEvents:`none`,boxSizing:`border-box`,background:ji(VI)}}),w.div({class:`modifiedOverlayLineReplacement`,style:{position:`absolute`,...yL(e=>t.read(e).lowerBackground.translateX(-i)),borderRadius:`0 0 4px 4px`,background:ji(ia),boxShadow:`${ji(hi)} 0 6px 6px -6px`,border:`1px solid ${ji(o)}`,boxSizing:`border-box`,overflow:`hidden`,cursor:`pointer`,pointerEvents:`auto`},onmousedown:e=>{e.preventDefault()},onclick:e=>this._onDidClick.fire(new St(Ni(e),e))},[w.div({style:{position:`absolute`,top:0,left:0,width:`100%`,height:`100%`,background:ji(WI)}})]),w.div({class:`modifiedLinesLineReplacement`,style:{position:`absolute`,boxSizing:`border-box`,...yL(e=>t.read(e).lowerText.translateX(-i)),fontFamily:this._editor.getOption(58),fontSize:this._editor.getOption(61),fontWeight:this._editor.getOption(62),pointerEvents:`none`,whiteSpace:`nowrap`,borderRadius:`0 0 4px 4px`,overflow:`hidden`}},[...n.lines])])]})]).keepUpdated(this._store),this.isHovered=this._editor.isTargetHovered(e=>this._isMouseOverWidget(e),this._store),this._previousViewZoneInfo=void 0,this._register(qm(()=>this._editor.editor.changeViewZones(e=>this.removePreviousViewZone(e)))),this._register(Gs(this._viewZoneInfo,({lastValue:e,newValue:t})=>{e===t||e?.height===t?.height&&e?.lineNumber===t?.lineNumber||this._editor.editor.changeViewZones(e=>{this.removePreviousViewZone(e),t&&this.addViewZone(t,e)})})),this._register(this._editor.createOverlayWidget({domNode:this._div.element,minContentWidthInPx:G(this,e=>this._layout.read(e)?.minContentWidthRequired??0),position:_l({preference:{top:0,left:0}}),allowEditorOverflow:!1}))}_isMouseOverWidget(e){let t=this._layout.get();return!t||!(e.event instanceof At)?!1:t.lowerBackground.containsPoint(new Rm(e.event.relativePos.x,e.event.relativePos.y))}removePreviousViewZone(e){if(!this._previousViewZoneInfo)return;e.removeZone(this._previousViewZoneInfo.id);let t=this._editor.cursorLineNumber.get();t!==null&&t>=this._previousViewZoneInfo.lineNumber&&this._editor.editor.setScrollTop(this._editor.scrollTop.get()-this._previousViewZoneInfo.height),this._previousViewZoneInfo=void 0}addViewZone(e,t){let n=t.addZone({afterLineNumber:e.lineNumber-1,heightInPx:e.height,domNode:R(`div`)});this._previousViewZoneInfo={height:e.height,lineNumber:e.lineNumber,id:n};let r=this._editor.cursorLineNumber.get();r!==null&&r>=e.lineNumber&&this._editor.editor.setScrollTop(this._editor.scrollTop.get()+e.height)}},yR=_R([vR(4,Qi),vR(5,mr)],yR)})),xR,SR,CR,wR,TR,ER,DR,OR,kR,AR,jR,MR=t((()=>{y(),st(),Ao(),N(),q(),ls(),F(),Ei(),Sr(),Yf(),Na(),eI(),vC(),wh(),Su(),_(),II(),Sj(),oL(),xL(),xR=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},SR=function(e,t){return function(n,r){t(n,r,e)}},CR=0,wR=0,TR=1,ER=1,DR=3,OR=4,kR=20,AR=12,jR=class extends z{static fitsInsideViewport(e,t,n,r){let i=Qe(e),a=i.layoutInfoWidth.read(r),o=i.layoutInfoContentLeft.read(r),s=e.getLayoutInfo().verticalScrollbarWidth,c=i.layoutInfoMinimap.read(r).minimapLeft===0?0:i.layoutInfoMinimap.read(r).minimapWidth,l=sL(i,n.displayRange,void 0),u=n.lineEdit.newLines.reduce((n,r)=>Math.max(n,uL(r,e,t)),0),d=kR,f=AR+2*TR;return l+u+d+f<a-o-s-c}constructor(e,t,n,r,i,a,o){super(),this._editor=e,this._edit=t,this._previewTextModel=n,this._uiState=r,this._tabAction=i,this._instantiationService=a,this._themeService=o,this._editorObs=Qe(this._editor),this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._display=G(this,e=>this._uiState.read(e)?`block`:`none`),this.previewRef=w.ref();let s=this._uiState.map(e=>e?.isInDiffEditor?DR:ER);this._editorContainer=w.div({class:[`editorContainer`],style:{position:`absolute`,overflow:`hidden`,cursor:`pointer`},onmousedown:e=>{e.preventDefault()},onclick:e=>{this._onDidClick.fire(new St(Ni(e),e))}},[w.div({class:`preview`,style:{pointerEvents:`none`},ref:this.previewRef})]).keepUpdated(this._store),this.isHovered=this._editorContainer.didMouseMoveDuringHover,this.previewEditor=this._register(this._instantiationService.createInstance(_C,this.previewRef.element,{glyphMargin:!1,lineNumbers:`off`,minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},rulers:[],padding:{top:0,bottom:0},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,revealHorizontalRightPadding:0,bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!1},scrollBeyondLastLine:!1,scrollbar:{vertical:`hidden`,horizontal:`hidden`,handleMouseWheel:!1},readOnly:!0,wordWrap:`off`,wordWrapOverride1:`off`,wordWrapOverride2:`off`},{contextKeyValues:{[xj.inInlineEditsPreviewEditor.key]:!0},contributions:[]},this._editor)),this._previewEditorObs=Qe(this.previewEditor),this._activeViewZones=[],this._updatePreviewEditor=G(this,e=>{this._editorContainer.readEffect(e),this._previewEditorObs.model.read(e),this._display.read(e),this._nonOverflowView&&(this._nonOverflowView.element.style.display=this._display.read(e));let t=this._uiState.read(e),n=this._edit.read(e);if(!t||!n)return;let r=n.originalLineRange,i=[];r.startLineNumber>1&&i.push(new T(1,1,r.startLineNumber-1,1)),r.startLineNumber+t.newTextLineCount<this._previewTextModel.getLineCount()+1&&i.push(new T(r.startLineNumber+t.newTextLineCount,1,this._previewTextModel.getLineCount()+1,1)),this.previewEditor.setHiddenAreas(i,void 0,!0);let a=[...this._activeViewZones];this._activeViewZones=[];let o=r.endLineNumberExclusive-r.startLineNumber-t.newTextLineCount;this.previewEditor.changeViewZones(e=>{a.forEach(t=>e.removeZone(t)),o>0&&this._activeViewZones.push(e.addZone({afterLineNumber:r.startLineNumber+t.newTextLineCount-1,heightInLines:o,showInHiddenAreas:!0,domNode:R(`div.diagonal-fill.inline-edits-view-zone`)}))})}),this._previewEditorWidth=G(this,e=>{let t=this._edit.read(e);return t?(this._updatePreviewEditor.read(e),sL(this._previewEditorObs,t.modifiedLineRange,e)):0}),this._cursorPosIfTouchesEdit=G(this,e=>{let t=this._editorObs.cursorPosition.read(e),n=this._edit.read(e);if(!(!n||!t))return n.modifiedLineRange.contains(t.lineNumber)?t:void 0}),this._originalStartPosition=G(this,e=>{let t=this._edit.read(e);return t?new H(t.originalLineRange.startLineNumber,1):null}),this._originalEndPosition=G(this,e=>{let t=this._edit.read(e);return t?new H(t.originalLineRange.endLineNumberExclusive,1):null}),this._originalVerticalStartPosition=this._editorObs.observePosition(this._originalStartPosition,this._store).map(e=>e?.y),this._originalVerticalEndPosition=this._editorObs.observePosition(this._originalEndPosition,this._store).map(e=>e?.y),this._originalDisplayRange=this._edit.map(e=>e?.displayRange),this._editorMaxContentWidthInRange=G(this,e=>{let t=this._originalDisplayRange.read(e);return t?(this._editorObs.versionId.read(e),dp(this,(e,n)=>{let r=sL(this._editorObs,t,e);return Math.max(r,n??0)})):_l(0)}).map((e,t)=>e.read(t)),this._previewEditorLayoutInfo=G(this,e=>{let t=this._edit.read(e);if(!t||!this._uiState.read(e))return null;let n=t.originalLineRange,r=this._editorObs.scrollLeft.read(e),i=this._editorMaxContentWidthInRange.read(e),a=this._editorObs.layoutInfo.read(e),o=this._previewEditorWidth.read(e),s=a.contentWidth-a.verticalScrollbarWidth,c=this._editor.getContainerDomNode().getBoundingClientRect(),l=a.contentLeft+a.contentWidth+c.left,u=Ni(this._editor.getContainerDomNode()).innerWidth-l,d=Ni(this._editor.getContainerDomNode()).innerWidth-c.right,f=Math.min(a.contentWidth*.3,o,100),p=0+u,m=this._cursorPosIfTouchesEdit.read(e),h=Math.max(s+r-0-Math.max(0,f-p),Math.min(m?cL(this._editorObs,m,e)+50:0,s+r)),ee=Math.min(i+kR,h),te=i+kR+o+70,ne=h-ee,re,ie;ee>r?(re=0,ie=a.contentLeft+ee-r):(re=r-ee,ie=a.contentLeft);let ae=this._originalVerticalStartPosition.read(e)??this._editor.getTopForLineNumber(n.startLineNumber)-this._editorObs.scrollTop.read(e),oe=this._originalVerticalEndPosition.read(e)??this._editor.getBottomForLineNumber(n.endLineNumberExclusive-1)-this._editorObs.scrollTop.read(e),se=a.contentLeft-r,ce=$F.fromLeftTopRightBottom(se,ae,ie,oe),le=ce.height===0;le||(ce=ce.withMargin(wR,CR));let ue=this._previewEditorObs.observeLineHeightsForLineRange(t.modifiedLineRange).read(e).reduce((e,t)=>e+t,0),de=oe-ae,fe=Math.max(de,ue),pe=ne===0,me=Math.min(o+AR,d+a.width-a.contentLeft-0),he=$F.fromLeftTopWidthHeight(ce.right+0,ae,me,fe);return he=le?he.withMargin(wR,CR).translateY(wR):he.withMargin(wR,CR).translateX(CR+TR),{codeRect:ce,editRect:he,codeScrollLeft:r,contentLeft:a.contentLeft,isInsertion:le,maxContentWidth:te,shouldShowShadow:pe,desiredPreviewEditorScrollLeft:re,previewEditorWidth:me}}),this._stickyScrollController=FI.get(this._editorObs.editor),this._stickyScrollHeight=this._stickyScrollController?Dp(this._stickyScrollController.onDidChangeStickyScrollHeight,()=>this._stickyScrollController.stickyScrollWidgetHeight):_l(0),this._shouldOverflow=G(this,e=>!1),this._originalBackgroundColor=Dp(this,this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme().getColor(VI)??_o.transparent),this._backgroundSvg=w.svg({transform:`translate(-0.5 -0.5)`,style:{overflow:`visible`,pointerEvents:`none`,position:`absolute`}},[w.svgElem(`path`,{class:`rightOfModifiedBackgroundCoverUp`,d:G(this,e=>{let t=this._previewEditorLayoutInfo.read(e);if(t&&!this._originalBackgroundColor.read(e).isTransparent())return new bL().moveTo(t.codeRect.getRightTop()).lineTo(t.codeRect.getRightTop().deltaX(1e3)).lineTo(t.codeRect.getRightBottom().deltaX(1e3)).lineTo(t.codeRect.getRightBottom()).build()}),style:{fill:Ft(ia,`transparent`)}})]).keepUpdated(this._store),this._originalOverlay=w.div({style:{pointerEvents:`none`,display:this._previewEditorLayoutInfo.map(e=>e?.isInsertion?`none`:`block`)}},G(this,e=>{let t=vL(this._previewEditorLayoutInfo).read(e);if(!t)return;let n=s.read(e),r=RI(this._tabAction).map(e=>`${TR}px solid ${ji(e)}`),i=`${TR+n}px solid ${ji(ia)}`,a=t.read(e).codeScrollLeft!==0,o=t.map(e=>e.codeRect.bottom<e.editRect.bottom),c=OR*2+TR*2,l=t.map(e=>$F.fromLeftTopRightBottom(e.contentLeft-OR-TR,e.codeRect.top,e.contentLeft,e.codeRect.bottom+c)).read(e),u=new pa(l.left,2**53-1),d=t.map(e=>e.codeRect.intersectHorizontal(u)),f=d.map(e=>e.withMargin(n,0,n,n).intersectHorizontal(u)),p=d.map(e=>$F.fromLeftTopWidthHeight(e.right-c+TR,e.bottom-TR,c,c).intersectHorizontal(u));return[w.div({class:`originalSeparatorSideBySide`,style:{...f.read(e).toStyles(),boxSizing:`border-box`,borderRadius:`${OR}px 0 0 ${OR}px`,borderTop:i,borderBottom:i,borderLeft:a?`none`:i}}),w.div({class:`originalOverlaySideBySide`,style:{...d.read(e).toStyles(),boxSizing:`border-box`,borderRadius:`${OR}px 0 0 ${OR}px`,borderTop:r,borderBottom:r,borderLeft:a?`none`:r,backgroundColor:ji(VI)}}),w.div({class:`originalCornerCutoutSideBySide`,style:{pointerEvents:`none`,display:o.map(e=>e?`block`:`none`),...p.read(e).toStyles()}},[w.div({class:`originalCornerCutoutBackground`,style:{position:`absolute`,top:`0px`,left:`0px`,width:`100%`,height:`100%`,backgroundColor:zI(VI,this._themeService).map(e=>e.toString())}}),w.div({class:`originalCornerCutoutBorder`,style:{position:`absolute`,top:`0px`,left:`0px`,width:`100%`,height:`100%`,boxSizing:`border-box`,borderTop:r,borderRight:r,borderRadius:`0 100% 0 0`,backgroundColor:ji(ia)}})]),w.div({class:`originalOverlaySideBySideHider`,style:{...l.toStyles(),backgroundColor:ji(ia)}})]})).keepUpdated(this._store),this._modifiedOverlay=w.div({style:{pointerEvents:`none`}},G(this,e=>{let t=vL(this._previewEditorLayoutInfo).read(e);if(!t)return;let n=t.map(e=>e.codeRect.bottom<e.editRect.bottom),r=s.read(e),i=n.map(e=>`0 ${OR}px ${OR}px ${e?OR:0}px`),a=zI(LI(this._tabAction),this._themeService).map(e=>`1px solid ${e.toString()}`),o=`${TR+r}px solid ${ji(ia)}`,c=t.map(e=>e.editRect.withMargin(0,TR)),l=c.map(e=>e.withMargin(r,r,r,0)),u=G(this,e=>{let n=c.read(e),r=t.read(e);return!r.isInsertion||r.contentLeft>=n.left?$F.fromLeftTopWidthHeight(n.left,n.top,0,0):new $F(r.contentLeft,n.top,n.left,n.top+TR*2)});return[w.div({class:`modifiedInsertionSideBySide`,style:{...u.read(e).toStyles(),backgroundColor:LI(this._tabAction).map(e=>ji(e))}}),w.div({class:`modifiedSeparatorSideBySide`,style:{...l.read(e).toStyles(),borderRadius:i,borderTop:o,borderBottom:o,borderRight:o,boxSizing:`border-box`}}),w.div({class:`modifiedOverlaySideBySide`,style:{...c.read(e).toStyles(),borderRadius:i,border:a,boxSizing:`border-box`,backgroundColor:ji(HI)}})]})).keepUpdated(this._store),this._nonOverflowView=w.div({class:`inline-edits-view`,style:{position:`absolute`,overflow:`visible`,top:`0px`,left:`0px`,display:this._display}},[this._backgroundSvg,G(this,e=>this._shouldOverflow.read(e)?[]:[this._editorContainer,this._originalOverlay,this._modifiedOverlay])]).keepUpdated(this._store),this._register(this._editorObs.createOverlayWidget({domNode:this._nonOverflowView.element,position:_l(null),allowEditorOverflow:!1,minContentWidthInPx:G(this,e=>{let t=this._previewEditorLayoutInfo.read(e)?.maxContentWidth;return t===void 0?0:t})})),this.previewEditor.setModel(this._previewTextModel),this._register(Xl(e=>{let t=this._previewEditorLayoutInfo.read(e);if(!t)return;let n=t.editRect.withMargin(-wR,-CR);this.previewEditor.layout({height:n.height,width:t.previewEditorWidth+15}),this._editorContainer.element.style.top=`${n.top}px`,this._editorContainer.element.style.left=`${n.left}px`,this._editorContainer.element.style.width=`${t.previewEditorWidth+CR}px`})),this._register(Xl(e=>{let t=this._previewEditorLayoutInfo.read(e);t&&this._previewEditorObs.editor.setScrollLeft(t.desiredPreviewEditorScrollLeft)})),this._updatePreviewEditor.recomputeInitiallyAndOnChange(this._store)}},jR=xR([SR(5,U),SR(6,mr)],jR)})),NR,PR,FR,IR,LR=t((()=>{y(),st(),N(),q(),ls(),Ei(),Sr(),Gt(),Ya(),eI(),Go(),wh(),h(),Er(),oL(),xL(),NR=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},PR=function(e,t){return function(n,r){t(n,r,e)}},FR=1,IR=class extends z{static#e=this.MAX_LENGTH=100;constructor(e,t,n,r){super(),this._editor=e,this._edit=t,this._tabAction=n,this._languageService=r,this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this._start=this._editor.observePosition(_l(this._edit.range.getStartPosition()),this._store),this._end=this._editor.observePosition(_l(this._edit.range.getEndPosition()),this._store),this._line=document.createElement(`div`),this._hoverableElement=Cc(this,null),this.isHovered=this._hoverableElement.map((e,t)=>e?.didMouseMoveDuringHover.read(t)??!1),this._renderTextEffect=G(this,e=>{let t=this._editor.model.get(),n=t.getLineContent(this._edit.range.startLineNumber),r=Wn.replace(new pa(this._edit.range.startColumn-1,this._edit.range.endColumn-1),this._edit.text),i=r.replace(n),a=t.tokenization.tokenizeLinesAt(this._edit.range.startLineNumber,[i])?.[0],o;o=a?Bt.fromLineTokens(a).slice(r.getRangeAfterReplace()).toLineTokens(this._edit.text,this._languageService.languageIdCodec):Ii.createEmpty(this._edit.text,this._languageService.languageIdCodec);let s=zn(new li([o]),Vi.fromEditor(this._editor.editor).withSetWidth(!1).withScrollBeyondLastColumn(0),[],this._line,!0);this._line.style.width=`${s.minWidthInPx}px`});let i=this._editor.observeLineHeightForPosition(this._edit.range.getStartPosition());this._layout=G(this,e=>{this._renderTextEffect.read(e);let t=this._start.read(e),n=this._end.read(e);if(!t||!n||t.x>n.x||t.y>n.y)return;let r=i.read(e),a=this._editor.scrollLeft.read(e),o=this._editor.getOption(59).read(e).typicalHalfwidthCharacterWidth,s=new Rm(3*o,4),c=$F.fromPoints(t,n).withHeight(r).translateX(-a),l=$F.fromPointSize(c.getLeftBottom().add(s),new Rm(this._edit.text.length*o,c.height));return{originalLine:c,modifiedLine:l,lowerBackground:l.withLeft(c.left),lineHeight:r}}),this.minEditorScrollHeight=G(this,e=>{let t=vL(this._layout).read(e);return t?t.read(e).modifiedLine.bottom+FR+this._editor.editor.getScrollTop():0}),this._root=w.div({class:`word-replacement`},[G(this,e=>{let t=vL(this._layout).read(e);if(!t)return[];let n=RI(this._tabAction).map(e=>ji(e)).read(e),r=LI(this._tabAction).map(e=>ji(e)).read(e);return[w.div({style:{position:`absolute`,...yL(e=>dL(this._editor).read(e)),overflow:`hidden`,pointerEvents:`none`}},[w.div({style:{position:`absolute`,...yL(e=>t.read(e).lowerBackground.withMargin(FR,2*FR,FR,0)),background:ji(ia),cursor:`pointer`,pointerEvents:`auto`},onmousedown:e=>{e.preventDefault()},onmouseup:e=>this._onDidClick.fire(new St(Ni(e),e)),obsRef:e=>{this._hoverableElement.set(e,void 0)}}),w.div({style:{position:`absolute`,...yL(e=>t.read(e).modifiedLine.withMargin(FR,2*FR)),fontFamily:this._editor.getOption(58),fontSize:this._editor.getOption(61),fontWeight:this._editor.getOption(62),pointerEvents:`none`,boxSizing:`border-box`,borderRadius:`4px`,border:`${FR}px solid ${r}`,background:ji(GI),display:`flex`,justifyContent:`center`,alignItems:`center`,outline:`2px solid ${ji(ia)}`}},[this._line]),w.div({style:{position:`absolute`,...yL(e=>t.read(e).originalLine.withMargin(FR)),boxSizing:`border-box`,borderRadius:`4px`,border:`${FR}px solid ${n}`,background:ji(UI),pointerEvents:`none`}},[]),w.svg({width:11,height:14,viewBox:`0 0 11 14`,fill:`none`,style:{position:`absolute`,left:t.map(e=>e.modifiedLine.left-16),top:t.map(e=>e.modifiedLine.top+Math.round((e.lineHeight-14-5)/2))}},[w.svgElem(`path`,{d:`M1 0C1 2.98966 1 5.92087 1 8.49952C1 9.60409 1.89543 10.5 3 10.5H10.5`,stroke:ji(hd)}),w.svgElem(`path`,{d:`M6 7.5L9.99999 10.49998L6 13.5`,stroke:ji(hd)})])])]})]).keepUpdated(this._store),this._register(this._editor.createOverlayWidget({domNode:this._root.element,minContentWidthInPx:_l(0),position:_l({preference:{top:0,left:0}}),allowEditorOverflow:!1}))}},IR=NR([PR(3,Qi)],IR)}));function RR(e){return e.innerChanges?e.innerChanges.every(e=>mt(e.modifiedRange)&&mt(e.originalRange)):!1}function zR(e){return Dp(e.onDidChangeTokens,()=>HR++)}var BR,VR,HR,UR=t((()=>{N(),q(),ls(),Na(),kt(),wh(),_(),zf(),md(),xL(),BR=class extends z{constructor(e,t,n){super(),this._originalEditor=e,this._state=t,this._modifiedTextModel=n,this._onDidClick=this._register(new j),this.onDidClick=this._onDidClick.event,this.isHovered=Qe(this._originalEditor).isTargetHovered(e=>e.target.type===6&&e.target.detail.injectedText?.options.attachedData instanceof VR&&e.target.detail.injectedText.options.attachedData.owner===this,this._store),this._tokenizationFinished=zR(this._modifiedTextModel),this._decorations=G(this,e=>{let t=this._state.read(e);if(!t)return;let n=t.modifiedText,r=t.mode===`insertionInline`,i=t.diff.length===1&&t.diff[0].innerChanges?.length===1,a=[],o=[],s=L.register({className:`inlineCompletions-line-insert`,description:`line-insert`,isWholeLine:!0,marginClassName:`gutter-insert`}),c=L.register({className:`inlineCompletions-line-delete`,description:`line-delete`,isWholeLine:!0,marginClassName:`gutter-delete`}),l=L.register({className:`inlineCompletions-char-delete`,description:`char-delete`,isWholeLine:!1,zIndex:1}),u=L.register({className:`inlineCompletions-char-insert`,description:`char-insert`,isWholeLine:!0}),d=L.register({className:`inlineCompletions-char-insert`,description:`char-insert`,shouldFillLineOnLineBreak:!0}),f=L.register({className:`inlineCompletions-char-insert diff-range-empty`,description:`char-insert diff-range-empty`}),p=L.register({className:`inlineCompletions-original-lines`,description:`inlineCompletions-original-lines`,isWholeLine:!1,shouldFillLineOnLineBreak:!0}),m=t.mode!==`sideBySide`&&t.mode!==`deletion`&&t.mode!==`insertionInline`&&t.mode!==`lineReplacement`,h=t.mode===`lineReplacement`;for(let p of t.diff)if(m&&(p.original.isEmpty||a.push({range:p.original.toInclusiveRange(),options:c}),p.modified.isEmpty||o.push({range:p.modified.toInclusiveRange(),options:s})),p.modified.isEmpty||p.original.isEmpty)p.original.isEmpty||a.push({range:p.original.toInclusiveRange(),options:l}),p.modified.isEmpty||o.push({range:p.modified.toInclusiveRange(),options:u});else{let s=r&&RR(p);for(let r of p.innerChanges||[]){if(p.original.contains(r.originalRange.startLineNumber)&&!(h&&r.originalRange.isEmpty())){let e=this._originalEditor.getModel()?.getValueInRange(r.originalRange,1);a.push({range:r.originalRange,options:{description:`char-delete`,shouldFillLineOnLineBreak:!1,className:pL(`inlineCompletions-char-delete`,r.originalRange.isSingleLine()&&t.mode===`insertionInline`&&`single-line-inline`,r.originalRange.isEmpty()&&`empty`,(r.originalRange.isEmpty()&&i||t.mode===`deletion`&&e===`
`)&&!s&&`diff-range-empty`),inlineClassName:s?pL(`strike-through`,`inlineCompletions`):null,zIndex:1}})}if(p.modified.contains(r.modifiedRange.startLineNumber)&&o.push({range:r.modifiedRange,options:r.modifiedRange.isEmpty()&&!s&&i?f:d}),s){let i=n.getValueOfRange(r.modifiedRange),o=i.length>3?[{text:i.slice(0,1),extraClasses:[`start`],offsetRange:new pa(r.modifiedRange.startColumn-1,r.modifiedRange.startColumn)},{text:i.slice(1,-1),extraClasses:[],offsetRange:new pa(r.modifiedRange.startColumn,r.modifiedRange.endColumn-2)},{text:i.slice(-1),extraClasses:[`end`],offsetRange:new pa(r.modifiedRange.endColumn-2,r.modifiedRange.endColumn-1)}]:[{text:i,extraClasses:[`start`,`end`],offsetRange:new pa(r.modifiedRange.startColumn-1,r.modifiedRange.endColumn)}];this._tokenizationFinished.read(e);let s=this._modifiedTextModel.tokenization.getLineTokens(r.modifiedRange.startLineNumber);for(let{text:e,extraClasses:n,offsetRange:i}of o)a.push({range:T.fromPositions(r.originalRange.getEndPosition()),options:{description:`inserted-text`,before:{tokens:s.getTokensInRange(i),content:e,inlineClassName:pL(`inlineCompletions-char-insert`,r.modifiedRange.isSingleLine()&&t.mode===`insertionInline`&&`single-line-inline`,...n),cursorStops:al.None,attachedData:new VR(this)},zIndex:2,showIfCollapsed:!0}})}}}if(t.isInDiffEditor)for(let e of t.diff)e.original.isEmpty||a.push({range:e.original.toExclusiveRange(),options:p});return{originalDecorations:a,modifiedDecorations:o}}),this._register(Qe(this._originalEditor).setDecorations(this._decorations.map(e=>e?.originalDecorations??[])));let r=this._state.map(e=>e?.modifiedCodeEditor);this._register(xm((e,t)=>{let n=r.read(e);n&&t.add(Qe(n).setDecorations(this._decorations.map(e=>e?.modifiedDecorations??[])))})),this._register(this._originalEditor.onMouseUp(e=>{if(e.target.type!==6)return;let t=e.target.detail.injectedText?.options.attachedData;t instanceof VR&&t.owner===this&&this._onDidClick.fire(e.event)}))}},VR=class{constructor(e){this.owner=e}},HR=0})),WR=t((()=>{}));function GR(e){return e.every(e=>e.innerChanges.every(e=>t(e)));function t(e){return!(!e.originalRange.isEmpty()||e.modifiedRange.startLineNumber!==e.modifiedRange.endLineNumber)}}function KR(e,t){if(!t||!GR(e))return!1;let n=t;return e.every(e=>e.innerChanges.every(e=>r(e)));function r(e){let t=e.originalRange.getStartPosition();return!!(n.isBeforeOrEqual(t)||t.lineNumber<n.lineNumber)}}function qR(e){let t=e.flatMap(e=>e.innerChanges??[]);if(t.length!==1)return!1;let n=t[0];return!(!n.originalRange.isEmpty()||n.modifiedRange.startLineNumber===n.modifiedRange.endLineNumber)}function JR(e,t,n){return e.map(e=>({original:t.originalText.getValueOfRange(e.originalRange),modified:n.getValueOfRange(e.modifiedRange)})).every(({original:e,modified:t})=>t.trim()===``&&e.length>0&&(e.length>t.length||e.trim()!==``))}function YR(e,t){return ZR(e,t,e=>/^[a-zA-Z]$/.test(e))}function XR(e,t){return ZR(e,t,e=>!/^\s$/.test(e))}function ZR(e,t,n){let r=[];e.sort((e,t)=>T.compareRangesUsingStarts(e.range,t.range));for(let n of e){let e=n.range.startColumn-1,a=n.range.endColumn-2,o=``,s=``,c=t.getLineAt(n.range.startLineNumber),l=t.getLineAt(n.range.endLineNumber);if(i(c[e]))for(;i(c[e-1]);)o=c[e-1]+o,e--;if(i(l[a])||a<e)for(;i(l[a+1]);)s+=l[a+1],a++;let u=new ca(new T(n.range.startLineNumber,e+1,n.range.endLineNumber,a+2),o+n.text+s);r.length>0&&T.areIntersectingOrTouching(r[r.length-1].range,u.range)&&(u=ca.joinReplacements([r.pop(),u],t)),r.push(u)}function i(e){return e===void 0?!1:n(e)}return r}function QR(e,t){let n=e.model.inlineEdit.edit.replacements;if(n.length!==1)return 0;let r=t.getModel();if(!r)return 0;let i=r.getEOL(),a=n[0];if(a.range.isEmpty()&&a.text.startsWith(i)){let e=t.getLineHeightForPosition(a.range.getStartPosition());return $R(a.text,i)*e}return 0}function $R(e,t){if(!t.length)return 0;let n=0,r=0;for(;e.startsWith(t,r);)n++,r+=t.length;return n}var ez,tz,nz,rz=t((()=>{cd(),M(),N(),q(),ls(),F(),Na(),ar(),_(),yh(),go(),ko(),Bo(),md(),FL(),BL(),dN(),WL(),$L(),sR(),hR(),bR(),MR(),LR(),UR(),xL(),WR(),y(),ez=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tz=function(e,t){return function(n,r){t(n,r,e)}},nz=class extends z{constructor(e,t,n,r,i,a){super(),this._editor=e,this._host=t,this._model=n,this._ghostTextIndicator=r,this._focusIsInMenu=i,this._instantiationService=a,this._editorObs=Qe(this._editor),this._tabAction=G(e=>this._model.read(e)?.tabAction.read(e)??lN.Inactive),this._constructorDone=Cc(this,!1),this._uiState=G(this,e=>{let t=this._model.read(e);if(!t||!this._constructorDone.read(e))return;let n=t.inlineEdit,r=fo.fromEdit(n.edit),i=n.edit.apply(n.originalText),a=cn(r,n.originalText,new Te(i)),o=this.determineRenderState(t,e,a,new Te(i));if(!o){t.abort(`unable to determine view: tried to render ${this._previousView?.view}`);return}if(o.kind===uN.SideBySide){let e=_L(i,n.modifiedLineRange,s.getOptions().tabSize);i=e.applyToString(i),r=fL(r,e),a=cn(r,n.originalText,new Te(i))}return this._previewTextModel.setLanguage(this._editor.getModel().getLanguageId()),this._previewTextModel.getValue()!==i&&this._previewTextModel.setValue(i),t.showCollapsed.read(e)&&!this._indicator.read(e)?.isHoverVisible.read(e)&&(o={kind:uN.Collapsed,viewData:o.viewData}),t.handleInlineEditShown(o.kind,o.viewData),{state:o,diff:a,edit:n,newText:i,newTextLineCount:n.modifiedLineRange.length,isInDiffEditor:t.isInDiffEditor}}),this._previewTextModel=this._register(this._instantiationService.createInstance(_p,``,this._editor.getModel().getLanguageId(),{..._p.DEFAULT_CREATION_OPTIONS,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},null)),this._indicatorCyclicDependencyCircuitBreaker=Cc(this,!1),this._indicator=G(this,e=>{if(!this._indicatorCyclicDependencyCircuitBreaker.read(e))return;let t=Ff({owner:this,equalsFn:wi(ye())},e=>{let t=this._ghostTextIndicator.read(e);if(t)return t.lineRange;let n=this._uiState.read(e);if(n){if(n.state?.kind===`custom`){let e=n.state.displayLocation?.range;if(!e)throw new tc(`custom view should have a range`);return new Xt(e.startLineNumber,e.endLineNumber)}return n.state?.kind===`insertionMultiLine`?this._insertion.originalLines.read(e):n.edit.displayRange}}),n=G(this,e=>{let t=this._model.read(e);if(t)return t;let n=this._ghostTextIndicator.read(e);return n?n.model:t});return e.store.add(this._instantiationService.createInstance(PL,this._editorObs,t,this._gutterIndicatorOffset,n,this._inlineEditsIsHovered,this._focusIsInMenu))}),this._inlineEditsIsHovered=G(this,e=>this._sideBySide.isHovered.read(e)||this._wordReplacementViews.read(e).some(t=>t.isHovered.read(e))||this._deletion.isHovered.read(e)||this._inlineDiffView.isHovered.read(e)||this._lineReplacementView.isHovered.read(e)||this._insertion.isHovered.read(e)||this._customView.isHovered.read(e)),this._gutterIndicatorOffset=G(this,e=>{if(this._uiState.read(e)?.state?.kind===`insertionMultiLine`)return this._insertion.startLineOffset.read(e);let t=this._ghostTextIndicator.read(e);return t?QR(t,this._editor):0}),this._sideBySide=this._register(this._instantiationService.createInstance(jR,this._editor,this._model.map(e=>e?.inlineEdit),this._previewTextModel,this._uiState.map(e=>e&&e.state?.kind===uN.SideBySide?{newTextLineCount:e.newTextLineCount,isInDiffEditor:e.isInDiffEditor}:void 0),this._tabAction)),this._deletion=this._register(this._instantiationService.createInstance(oR,this._editor,this._model.map(e=>e?.inlineEdit),this._uiState.map(e=>e&&e.state?.kind===uN.Deletion?{originalRange:e.state.originalRange,deletions:e.state.deletions,inDiffEditor:e.isInDiffEditor}:void 0),this._tabAction)),this._insertion=this._register(this._instantiationService.createInstance(mR,this._editor,this._uiState.map(e=>e&&e.state?.kind===uN.InsertionMultiLine?{lineNumber:e.state.lineNumber,startColumn:e.state.column,text:e.state.text,inDiffEditor:e.isInDiffEditor}:void 0),this._tabAction)),this._inlineDiffViewState=G(this,e=>{let t=this._uiState.read(e);if(!(!t||!t.state)&&!(t.state.kind===`wordReplacements`||t.state.kind===`insertionMultiLine`||t.state.kind===`collapsed`||t.state.kind===`custom`))return{modifiedText:new Te(t.newText),diff:t.diff,mode:t.state.kind,modifiedCodeEditor:this._sideBySide.previewEditor,isInDiffEditor:t.isInDiffEditor}}),this._inlineCollapsedView=this._register(this._instantiationService.createInstance(UL,this._editor,this._model.map((e,t)=>this._uiState.read(t)?.state?.kind===`collapsed`?e?.inlineEdit:void 0))),this._customView=this._register(this._instantiationService.createInstance(QL,this._editor,this._model.map((e,t)=>this._uiState.read(t)?.state?.kind===`custom`?e?.displayLocation:void 0),this._tabAction)),this._inlineDiffView=this._register(new BR(this._editor,this._inlineDiffViewState,this._previewTextModel)),this._wordReplacementViews=Au(this,this._uiState.map(e=>e?.state?.kind===`wordReplacements`?e.state.replacements:[]),(e,t)=>t.add(this._instantiationService.createInstance(IR,this._editorObs,e,this._tabAction))),this._lineReplacementView=this._register(this._instantiationService.createInstance(yR,this._editorObs,this._uiState.map(e=>e?.state?.kind===uN.LineReplacement?{originalRange:e.state.originalRange,modifiedRange:e.state.modifiedRange,modifiedLines:e.state.modifiedLines,replacements:e.state.replacements}:void 0),this._uiState.map(e=>e?.isInDiffEditor??!1),this._tabAction)),this._useCodeShifting=this._editorObs.getOption(71).map(e=>e.edits.allowCodeShifting),this._renderSideBySide=this._editorObs.getOption(71).map(e=>e.edits.renderSideBySide),this._register(xm((e,t)=>{let n=this._model.read(e);n&&t.add(mf.any(this._sideBySide.onDidClick,this._deletion.onDidClick,this._lineReplacementView.onDidClick,this._insertion.onDidClick,...this._wordReplacementViews.read(e).map(e=>e.onDidClick),this._inlineDiffView.onDidClick,this._customView.onDidClick)(e=>{this._viewHasBeenShownLongerThan(350)&&(e.preventDefault(),n.accept())}))})),this._indicator.recomputeInitiallyAndOnChange(this._store),this._wordReplacementViews.recomputeInitiallyAndOnChange(this._store),this._indicatorCyclicDependencyCircuitBreaker.set(!0,void 0),this._register(this._instantiationService.createInstance(zL,this._host,this._model,this._indicator,this._inlineCollapsedView));let o=G(this,e=>Math.max(...this._wordReplacementViews.read(e).map(t=>t.minEditorScrollHeight.read(e)),this._lineReplacementView.minEditorScrollHeight.read(e),this._customView.minEditorScrollHeight.read(e))).recomputeInitiallyAndOnChange(this._store),s=this._editor.getModel(),c;this._register(Xl(e=>{let t=o.read(e);this._editor.changeViewZones(e=>{let n=t-this._editor.getScrollHeight()+1;n!==0&&c&&(e.removeZone(c),c=void 0),!(n<=0)&&(c=e.addZone({afterLineNumber:s.getLineCount(),heightInPx:n,domNode:R(`div.minScrollHeightViewZone`)}))})})),this._constructorDone.set(!0,void 0)}getCacheId(e){return e.inlineEdit.inlineCompletion.identity.id}determineView(e,t,n,r){let i=e.inlineEdit,a=this._previousView?.id===this.getCacheId(e),o=this._previousView?.editorWidth!==this._editorObs.layoutInfoWidth.read(t)&&(this._previousView?.view===uN.SideBySide||this._previousView?.view===uN.LineReplacement);if(a&&!o)return this._previousView.view;if(e.displayLocation)return uN.Custom;let s=i.originalLineRange.length,c=i.modifiedLineRange.length,l=n.flatMap(e=>e.innerChanges??[]),u=l.length===1;if(!e.isInDiffEditor){if(u&&this._useCodeShifting.read(t)!==`never`&&GR(n))return KR(n,i.cursorPosition)?uN.InsertionInline:uN.LineReplacement;if(JR(l,i,r))return uN.Deletion;if(qR(n)&&this._useCodeShifting.read(t)===`always`)return uN.InsertionMultiLine;if(l.every(e=>eo.ofRange(e.originalRange).columnCount<IR.MAX_LENGTH&&eo.ofRange(e.modifiedRange).columnCount<IR.MAX_LENGTH)&&u&&s===1&&c===1){let t=l.map(e=>r.getValueOfRange(e.modifiedRange)),n=l.map(t=>e.inlineEdit.originalText.getValueOfRange(t.originalRange));if(!t.some(e=>e.includes(`	`))&&!n.some(e=>e.includes(`	`))&&(!l.some(e=>e.originalRange.isEmpty())||!XR(l.map(e=>new ca(e.originalRange,``)),i.originalText).some(e=>e.range.isEmpty()&&eo.ofRange(e.range).columnCount<IR.MAX_LENGTH)))return uN.WordReplacements}}if(s>0&&c>0)return s===1&&c===1&&!e.isInDiffEditor?uN.LineReplacement:this._renderSideBySide.read(t)!==`never`&&jR.fitsInsideViewport(this._editor,this._previewTextModel,i,t)?uN.SideBySide:uN.LineReplacement;if(e.isInDiffEditor){if(JR(l,i,r))return uN.Deletion;if(qR(n)&&this._useCodeShifting.read(t)===`always`)return uN.InsertionMultiLine}return uN.SideBySide}determineRenderState(e,t,n,r){let i=e.inlineEdit,a=this.determineView(e,t,n,r);this._previousView={id:this.getCacheId(e),view:a,editorWidth:this._editor.getLayoutInfo().width,timestamp:Date.now()};let o=n.flatMap(e=>e.innerChanges??[]),s=this._editor.getModel(),c=o.map(e=>({originalRange:e.originalRange,modifiedRange:e.modifiedRange,original:s.getValueInRange(e.originalRange),modified:r.getValueOfRange(e.modifiedRange)})),l=i.cursorPosition,u=c[0].modified.startsWith(s.getEOL()),d={cursorColumnDistance:i.edit.replacements[0].range.getStartPosition().column-l.column,cursorLineDistance:i.lineEdit.lineRange.startLineNumber-l.lineNumber+(u&&i.lineEdit.lineRange.startLineNumber>=l.lineNumber?1:0),lineCountOriginal:i.lineEdit.lineRange.length,lineCountModified:i.lineEdit.newLines.length,characterCountOriginal:c.reduce((e,t)=>e+t.original.length,0),characterCountModified:c.reduce((e,t)=>e+t.modified.length,0),disjointReplacements:c.length,sameShapeReplacements:c.every(e=>e.original===c[0].original&&e.modified===c[0].modified)};switch(a){case uN.InsertionInline:return{kind:uN.InsertionInline,viewData:d};case uN.SideBySide:return{kind:uN.SideBySide,viewData:d};case uN.Collapsed:return{kind:uN.Collapsed,viewData:d};case uN.Custom:return{kind:uN.Custom,displayLocation:e.displayLocation,viewData:d}}if(a===uN.Deletion)return{kind:uN.Deletion,originalRange:i.originalLineRange,deletions:o.map(e=>e.originalRange),viewData:d};if(a===uN.InsertionMultiLine){let e=o[0];return{kind:uN.InsertionMultiLine,lineNumber:e.originalRange.startLineNumber,column:e.originalRange.startColumn,text:r.getValueOfRange(e.modifiedRange),viewData:d}}let f=c.map(e=>new ca(e.originalRange,e.modified));if(f.length!==0){if(a===uN.WordReplacements){let e=YR(f,i.originalText);return e.some(e=>e.range.isEmpty())&&(e=XR(f,i.originalText)),{kind:uN.WordReplacements,replacements:e,viewData:d}}if(a===uN.LineReplacement)return{kind:uN.LineReplacement,originalRange:i.originalLineRange,modifiedRange:i.modifiedLineRange,modifiedLines:i.modifiedLineRange.mapToLineArray(e=>r.getLineAt(e)),replacements:o.map(e=>({originalRange:e.originalRange,modifiedRange:e.modifiedRange})),viewData:d}}}_viewHasBeenShownLongerThan(e){let t=this._previousView?.timestamp;if(!t)throw new tc(`viewHasBeenShownLongThan called before a view has been shown`);return Date.now()-t>=e}},nz=ez([tz(5,U)],nz)})),iz,az,oz,sz,cz=t((()=>{ds(),q(),ls(),F(),Na(),ar(),_(),yh(),Qn(),JF(),QF(),rz(),dN(),iz=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},az=function(e,t){return function(n,r){t(n,r,e)}},sz=class extends z{static#e=oz=this;static#t=this.hot=Yn(oz);constructor(e,t,n,r,i){super(),this._editor=e,this._edit=t,this._model=n,this._focusIsInMenu=r,this._inlineEdit=G(this,e=>{let t=this._model.read(e);if(!t)return;let n=this._edit.read(e);if(!n)return;let r=this._editor.getModel();if(!r)return;let i=t.inlineEditState.get()?.inlineCompletion.updatedEdit;if(!i)return;let a=new xr(i.replacements.map(e=>new ca(T.fromPositions(r.getPositionAt(e.replaceRange.start),r.getPositionAt(e.replaceRange.endExclusive)),e.newText)));return new qF(new Jf(r),a,t.primaryPosition.get(),n.commands,n.inlineCompletion)}),this._inlineEditModel=G(this,e=>{let t=this._model.read(e);if(!t)return;let n=this._inlineEdit.read(e);if(n)return new YF(t,n,G(this,e=>{if(this._editorObs.isFocused.read(e)){if(t.tabShouldJumpToInlineEdit.read(e))return lN.Jump;if(t.tabShouldAcceptInlineEdit.read(e))return lN.Accept}return lN.Inactive}))}),this._inlineEditHost=G(this,e=>{let t=this._model.read(e);if(t)return new XF(t)}),this._ghostTextIndicator=G(this,e=>{let t=this._model.read(e);if(!t)return;let n=t.inlineCompletionState.read(e);if(!n)return;let r=n.inlineCompletion;if(!r||!r.showInlineEditMenu)return;let i=Xt.ofLength(n.primaryGhostText.lineNumber,1);return new ZF(this._editor,t,i,r)}),this._editorObs=Qe(this._editor),this._register(i.createInstance(nz,this._editor,this._inlineEditHost,this._inlineEditModel,this._ghostTextIndicator,this._focusIsInMenu))}},sz=oz=iz([az(4,U)],sz)})),lz,uz,dz,fz=t((()=>{ss(),q(),ls(),F(),Na(),Ex(),vM(),UF(),dN(),cz(),lz=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},uz=function(e,t){return function(n,r){t(n,r,e)}},dz=class extends z{constructor(e,t,n,r){super(),this._editor=e,this._model=t,this._focusIsInMenu=n,this._instantiationService=r,this._ghostTexts=G(this,e=>this._model.read(e)?.ghostTexts.read(e)??[]),this._stablizedGhostTexts=mM(this._ghostTexts,this._store),this._editorObs=Qe(this._editor),this._ghostTextWidgets=Au(this,this._stablizedGhostTexts,(e,t)=>tl(t=>this._instantiationService.createInstance(zF.hot.read(t),this._editor,{ghostText:e,warning:this._model.map((e,t)=>{let n=e?.warning?.read(t);return n?{icon:n.icon}:void 0}),minReservedLineCount:_l(0),targetTextModel:this._model.map(e=>e?.textModel),handleInlineCompletionShown:this._model.map((e,t)=>{let n=e?.inlineCompletionState.read(t)?.inlineCompletion;return n?t=>e.handleInlineSuggestionShown(n,uN.GhostText,t):()=>{}})},this._editorObs.getOption(71).map(e=>({syntaxHighlightingEnabled:e.syntaxHighlightingEnabled})),!1,!1)).recomputeInitiallyAndOnChange(t)).recomputeInitiallyAndOnChange(this._store),this._inlineEdit=G(this,e=>this._model.read(e)?.inlineEditState.read(e)?.inlineEdit),this._everHadInlineEdit=dp(this,(e,t)=>t||!!this._inlineEdit.read(e)||!!this._model.read(e)?.inlineCompletionState.read(e)?.inlineCompletion?.showInlineEditMenu),this._inlineEditWidget=tl(e=>{if(this._everHadInlineEdit.read(e))return this._instantiationService.createInstance(sz.hot.read(e),this._editor,this._inlineEdit,this._model,this._focusIsInMenu)}).recomputeInitiallyAndOnChange(this._store),this._fontFamily=this._editorObs.getOption(71).map(e=>e.fontFamily),this._register(Gn(G(e=>`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${this._fontFamily.read(e)};
}`))),this._register(new yx(this._editor,this._model,this._instantiationService))}shouldShowHoverAtViewZone(e){return this._ghostTextWidgets.get()[0]?.get().ownsViewZone(e)??!1}},dz=lz([uz(3,U)],dz)})),pz,mz,hz,gz,_z=t((()=>{qc(),O(),wu(),ds(),q(),ls(),Tl(),lr(),P(),u(),Gf(),jo(),qp(),C(),F(),Ki(),aj(),_m(),Na(),vC(),Su(),tf(),yu(),Ex(),Mj(),HN(),CF(),vM(),fz(),mx(),Sj(),pz=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},mz=function(e,t){return function(n,r){t(n,r,e)}},gz=class extends z{static#e=hz=this;static#t=this._instances=new Set;static#n=this.hot=Yn(hz);static#r=this.ID=`editor.contrib.inlineCompletionsController`;static getInFocusedEditorOrParent(e){let t=mC(e);return t?hz.get(t):null}static get(e){return QA(e.getContribution(hz.ID))}constructor(e,t,n,r,i,a,o,s,c,l){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=n,this._configurationService=r,this._commandService=i,this._debounceService=a,this._languageFeaturesService=o,this._accessibilitySignalService=s,this._keybindingService=c,this._accessibilityService=l,this._editorObs=Qe(this.editor),this._positions=G(this,e=>this._editorObs.selections.read(e)?.map(e=>e.getEndPosition())??[new H(1,1)]),this._suggestWidgetAdapter=this._register(new SF(this._editorObs,e=>this.model.get()?.handleSuggestAccepted(e),()=>this.model.get()?.selectedInlineCompletion.get()?.getSingleTextEdit())),this._enabledInConfig=Dp(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(71).enabled),this._isScreenReaderEnabled=Dp(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=Dp(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue(`editorDictation.inProgress`)===!0),this._enabled=G(this,e=>this._enabledInConfig.read(e)&&(!this._isScreenReaderEnabled.read(e)||!this._editorDictationInProgress.read(e))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,`InlineCompletionsDebounce`,{min:50,max:50}),this._focusIsInMenu=Cc(this,!1),this._focusIsInEditorOrMenu=G(this,e=>{let t=this._editorObs.isFocused.read(e),n=this._focusIsInMenu.read(e);return t||n}),this._cursorIsInIndentation=G(this,e=>{let t=this._editorObs.cursorPosition.read(e);if(t===null)return!1;let n=this._editorObs.model.read(e);if(!n)return!1;this._editorObs.versionId.read(e);let r=n.getLineIndentColumn(t.lineNumber);return t.column<=r}),this.model=tl(this,e=>{if(this._editorObs.isReadonly.read(e))return;let t=this._editorObs.model.read(e);if(t)return this._instantiationService.createInstance(zN,t,this._suggestWidgetAdapter.selectedItem,this._editorObs.versionId,this._positions,this._debounceValue,this._enabled,this.editor)}).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=bf(this),this._hideInlineEditOnSelectionChange=this._editorObs.getOption(71).map(e=>!0),this._view=this._register(this._instantiationService.createInstance(dz,this.editor,this.model,this._focusIsInMenu)),hz._instances.add(this),this._register(qm(()=>hz._instances.delete(this))),this._register(Xl(e=>{let t=this.model.read(e);if(!t)return;let n=t.state.read(e);if(!n||!this._focusIsInEditorOrMenu.get())return;let r=n.kind===`inlineEdit`?n.nextEditUri:void 0;for(let e of hz._instances)if(e===this)continue;else r&&Of(r,e.editor.getModel()?.uri)?e.model.get()?.trigger():e.reject()})),this._register(Xl(e=>{let t=this.model.read(e),n=this.editor.getModel()?.uri;!t||!n||e.store.add(t.onDidAccept(()=>{for(let e of hz._instances){if(e===this)continue;let t=e.model.get()?.state.get();t?.kind===`inlineEdit`&&Of(t.nextEditUri,n)&&e.model.get()?.stop(`automatic`)}}))})),this._register(Jo(this._editorObs.onDidType,(e,t)=>{this._enabled.get()&&this.model.get()?.trigger()})),this._register(Jo(this._editorObs.onDidPaste,(e,t)=>{this._enabled.get()&&this.model.get()?.trigger()})),this._register(this._commandService.onDidExecuteCommand(t=>{if(new Set([Vs.Tab.id,Vs.DeleteLeft.id,Vs.DeleteRight.id,`editor.action.inlineSuggest.commit`,`acceptSelectedSuggestion`]).has(t.commandId)&&e.hasTextFocus()&&this._enabled.get()){let e=!1;t.commandId===`editor.action.inlineSuggest.commit`&&(e=!0),this._editorObs.forceUpdate(t=>{this.model.get()?.trigger(t,{noDelay:e})})}})),this._register(Jo(this._editorObs.selections,(e,t,n)=>{if(n.some(e=>e.reason===3||e.source===`api`)){if(!this._hideInlineEditOnSelectionChange.get()&&this.model.get()?.state.get()?.kind===`inlineEdit`)return;let e=this.model.get();if(!e)return;e.state.get()?.kind===`ghostText`&&this.model.get()?.stop()}})),this._register(Xl(t=>{let n=this._focusIsInEditorOrMenu.read(t),r=this.model.get();if(n){let e=r?.state?.get();(!e||e.kind!==`inlineEdit`||!e.nextEditUri)&&Ot(e=>{for(let t of hz._instances)t!==this&&t.model.get()?.stop(`automatic`,e)});return}this._contextKeyService.getContextKeyValue(`accessibleViewIsShown`)||this._configurationService.getValue(`editor.inlineSuggest.keepOnBlur`)||e.getOption(71).keepOnBlur||Sx.dropDownVisible||r&&(r.state.get()?.inlineCompletion?.isFromExplicitRequest&&r.inlineEditAvailable.get()||Ot(e=>{r.stop(`automatic`,e)}))})),this._register(Xl(e=>{let t=this.model.read(e)?.inlineCompletionState.read(e);t?.suggestItem?t.primaryGhostText.lineCount>=2&&this._suggestWidgetAdapter.forceRenderingAbove():this._suggestWidgetAdapter.stopForceRenderingAbove()})),this._register(qm(()=>{this._suggestWidgetAdapter.stopForceRenderingAbove()}));let u=dp(this,(e,t)=>{let n=this.model.read(e)?.state.read(e);return this._suggestWidgetAdapter.selectedItem.get()?t:n?.inlineCompletion?.semanticId});this._register(Yi(G(e=>(this._playAccessibilitySignal.read(e),u.read(e),{})),async(e,t,n,r)=>{let i=this.model.get(),a=i?.state.get();if(!a||!i)return;let o=a.kind===`ghostText`?i.textModel.getLineContent(a.primaryGhostText.lineNumber):``;await dl(50,ap(r)),await wd(this._suggestWidgetAdapter.selectedItem,Xi,()=>!1,ap(r)),await this._accessibilitySignalService.playSignal(a.kind===`ghostText`?tn.inlineSuggestion:tn.nextEditSuggestion),this.editor.getOption(12)&&(a.kind===`ghostText`?this._provideScreenReaderUpdate(a.primaryGhostText.renderForScreenReader(o)):this._provideScreenReaderUpdate(``))})),this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`accessibility.verbosity.inlineCompletions`)&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue(`accessibility.verbosity.inlineCompletions`)})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue(`accessibility.verbosity.inlineCompletions`)});let d=new _M(this._contextKeyService);this._register(d.bind(xj.cursorInIndentation,this._cursorIsInIndentation)),this._register(d.bind(xj.hasSelection,e=>!this._editorObs.cursorSelection.read(e)?.isEmpty())),this._register(d.bind(xj.cursorAtInlineEdit,this.model.map((e,t)=>e?.inlineEditState?.read(t)?.cursorAtInlineEdit.read(t)))),this._register(d.bind(xj.tabShouldAcceptInlineEdit,this.model.map((e,t)=>!!e?.tabShouldAcceptInlineEdit.read(t)))),this._register(d.bind(xj.tabShouldJumpToInlineEdit,this.model.map((e,t)=>!!e?.tabShouldJumpToInlineEdit.read(t)))),this._register(d.bind(xj.inlineEditVisible,e=>this.model.read(e)?.inlineEditState.read(e)!==void 0)),this._register(d.bind(xj.inlineSuggestionHasIndentation,e=>this.model.read(e)?.getIndentationInfo(e)?.startsWithIndentation)),this._register(d.bind(xj.inlineSuggestionHasIndentationLessThanTabSize,e=>this.model.read(e)?.getIndentationInfo(e)?.startsWithIndentationLessThanTabSize)),this._register(d.bind(xj.suppressSuggestions,e=>{let t=this.model.read(e)?.inlineCompletionState.read(e);return t?.primaryGhostText&&t?.inlineCompletion?t.inlineCompletion.source.inlineSuggestions.suppressSuggestions:void 0})),this._register(d.bind(xj.inlineSuggestionVisible,e=>{let t=this.model.read(e)?.inlineCompletionState.read(e);return!!t?.inlineCompletion&&t?.primaryGhostText!==void 0&&!t?.primaryGhostText.isEmpty()}));let f=G(this,e=>{let t=this.model.read(e)?.inlineCompletionState.read(e)?.primaryGhostText;if(!(!t||t.isEmpty()))return new H(t.lineNumber,t.parts[0].column)});this._register(d.bind(xj.cursorBeforeGhostText,e=>{let t=f.read(e);if(!t)return!1;let n=this._editorObs.cursorPosition.read(e);return n?t.equals(n):!1})),this._register(this._instantiationService.createInstance(jj,this.editor))}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}_provideScreenReaderUpdate(e){let t=this._contextKeyService.getContextKeyValue(`accessibleViewIsShown`),n=this._keybindingService.lookupKeybinding(`editor.action.accessibleView`),r;!t&&n&&this.editor.getOption(168)&&(r=A(1193,`Inspect this in the accessible view ({0})`,n.getAriaLabel())),Qp(r?e+`, `+r:e)}shouldShowHoverAt(e){let t=this.model.get()?.primaryGhostText.get();return t?t.parts.some(n=>e.containsPosition(new H(t.lineNumber,n.column))):!1}shouldShowHoverAtViewZone(e){return this._view.shouldShowHoverAtViewZone(e)}reject(){Ot(e=>{let t=this.model.get();if(t&&(t.stop(`explicitCancel`,e),this._focusIsInEditorOrMenu.get()))for(let t of hz._instances)t!==this&&t.model.get()?.stop(`automatic`,e)})}jump(){let e=this.model.get();e&&e.jump()}},gz=hz=pz([mz(1,U),mz(2,bh),mz(3,xl),mz(4,no),mz(5,Vp),mz(6,V),mz(7,ur),mz(8,xs),mz(9,qi)],gz)})),vz,yz,bz,xz,Sz,Cz,wz,Tz,Ez,Dz,Oz,kz,Az,jz=t((()=>{ls(),Ga(),P(),u(),de(),qr(),qp(),C(),Mi(),up(),v(),yc(),bj(),mx(),Sj(),_z(),vz=class e extends S{static#e=this.ID=ux;constructor(){super({id:e.ID,label:K(1171,`Show Next Inline Suggestion`),precondition:b.and(J.writable,xj.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){gz.get(t)?.model.get()?.next()}},yz=class e extends S{static#e=this.ID=lx;constructor(){super({id:e.ID,label:K(1172,`Show Previous Inline Suggestion`),precondition:b.and(J.writable,xj.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){gz.get(t)?.model.get()?.previous()}},bz=class extends S{constructor(){super({id:`editor.action.inlineSuggest.trigger`,label:K(1173,`Trigger Inline Suggestion`),precondition:J.writable})}async run(e,t){let n=gz.get(t);await Ze(async e=>{await n?.model.get()?.triggerExplicitly(e),n?.playAccessibilitySignal(e)})}},xz=class extends S{constructor(){super({id:`editor.action.inlineSuggest.triggerInlineEditExplicit`,label:K(1174,`Trigger Next Edit Suggestion`),precondition:J.writable})}async run(e,t){let n=e.get(Hp),r=gz.get(t);await r?.model.get()?.triggerExplicitly(void 0,!0),r?.model.get()?.inlineEditAvailable.get()||n.notify({severity:nf.Info,message:A(1162,`No inline edit is available.`)})}},Sz=class extends dn{constructor(){super({id:`editor.action.inlineSuggest.triggerInlineEdit`,precondition:J.writable})}async runEditorCommand(e,t,n){await gz.get(t)?.model.get()?.trigger(void 0,{onlyFetchInlineEdits:!0})}},Cz=class extends S{constructor(){super({id:`editor.action.inlineSuggest.acceptNextWord`,label:K(1175,`Accept Next Word Of Inline Suggestion`),precondition:b.and(J.writable,xj.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:b.and(J.writable,xj.inlineSuggestionVisible,xj.cursorBeforeGhostText,Ss.negate())},menuOpts:[{menuId:g.InlineSuggestionToolbar,title:A(1163,`Accept Word`),group:`primary`,order:2}]})}async run(e,t){await gz.get(t)?.model.get()?.acceptNextWord()}},wz=class extends S{constructor(){super({id:`editor.action.inlineSuggest.acceptNextLine`,label:K(1176,`Accept Next Line Of Inline Suggestion`),precondition:b.and(J.writable,xj.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:g.InlineSuggestionToolbar,title:A(1164,`Accept Line`),group:`secondary`,order:2}]})}async run(e,t){await gz.get(t)?.model.get()?.acceptNextLine()}},Tz=class extends S{constructor(){super({id:cx,label:K(1177,`Accept Inline Suggestion`),precondition:b.or(xj.inlineSuggestionVisible,xj.inlineEditVisible),menuOpts:[{menuId:g.InlineSuggestionToolbar,title:A(1165,`Accept`),group:`primary`,order:2},{menuId:g.InlineEditsActions,title:A(1166,`Accept`),group:`primary`,order:2}],kbOpts:[{primary:2,weight:200,kbExpr:b.or(b.and(xj.inlineSuggestionVisible,J.tabMovesFocus.toNegated(),Z.Visible.toNegated(),J.hoverFocused.toNegated(),xj.hasSelection.toNegated(),xj.inlineSuggestionHasIndentationLessThanTabSize),b.and(xj.inlineEditVisible,J.tabMovesFocus.toNegated(),Z.Visible.toNegated(),J.hoverFocused.toNegated(),xj.tabShouldAcceptInlineEdit))}]})}async run(e,t){let n=gz.getInFocusedEditorOrParent(e);n&&(n.model.get()?.accept(n.editor),n.editor.focus())}},ei.registerKeybindingRule({id:cx,weight:202,primary:2,when:b.and(xj.inInlineEditsPreviewEditor)}),Ez=class extends S{constructor(){super({id:dx,label:K(1178,`Jump to next inline edit`),precondition:xj.inlineEditVisible,menuOpts:[{menuId:g.InlineEditsActions,title:A(1167,`Jump`),group:`primary`,order:1,when:xj.cursorAtInlineEdit.toNegated()}],kbOpts:{primary:2,weight:201,kbExpr:b.and(xj.inlineEditVisible,J.tabMovesFocus.toNegated(),Z.Visible.toNegated(),J.hoverFocused.toNegated(),xj.tabShouldJumpToInlineEdit)}})}async run(e,t){let n=gz.get(t);n&&n.jump()}},Dz=class e extends S{static#e=this.ID=fx;constructor(){super({id:e.ID,label:K(1179,`Hide Inline Suggestion`),precondition:b.or(xj.inlineSuggestionVisible,xj.inlineEditVisible),kbOpts:{weight:190,primary:9},menuOpts:[{menuId:g.InlineEditsActions,title:A(1168,`Reject`),group:`primary`,order:3}]})}async run(e,t){let n=gz.getInFocusedEditorOrParent(e);Ot(e=>{n?.model.get()?.stop(`explicitCancel`,e)}),n?.editor.focus()}},Oz=class e extends S{static#e=this.ID=px;constructor(){super({id:e.ID,label:K(1180,`Toggle Inline Suggestions Show Collapsed`),precondition:b.true()})}async run(e,t){let n=e.get(xl),r=n.getValue(`editor.inlineSuggest.edits.showCollapsed`);n.updateValue(`editor.inlineSuggest.edits.showCollapsed`,!r)}},ei.registerKeybindingRule({id:Dz.ID,weight:-1,primary:9,secondary:[1033],when:b.and(xj.inInlineEditsPreviewEditor)}),kz=class e extends km{static#e=this.ID=`editor.action.inlineSuggest.toggleAlwaysShowToolbar`;constructor(){super({id:e.ID,title:A(1169,`Always Show Toolbar`),f1:!1,precondition:void 0,menu:[{id:g.InlineSuggestionToolbar,group:`secondary`,order:10}],toggled:b.equals(`config.editor.inlineSuggest.showToolbar`,`always`)})}async run(e){let t=e.get(xl),n=t.getValue(`editor.inlineSuggest.showToolbar`)===`always`?`onHover`:`always`;t.updateValue(`editor.inlineSuggest.showToolbar`,n)}},Az=class extends S{constructor(){super({id:`editor.action.inlineSuggest.dev.extractRepro`,label:A(1170,`Developer: Extract Inline Suggest State`),alias:`Developer: Inline Suggest Extract Repro`,precondition:b.or(xj.inlineEditVisible,xj.inlineSuggestionVisible)})}async run(e,t){let n=e.get(qu),r=gz.get(t)?.model.get();if(!r)return;let i=r.extractReproSample(),a=Li(JSON.stringify({inlineCompletion:i.inlineCompletion},null,4)).map(e=>`// `+e).join(`
`),o=`${i.documentValue}\n\n// <json>\n${a}\n// </json>\n`;return await n.writeText(o),{reproCase:o}}}})),Mz,Nz,Pz,Fz,Iz=t((()=>{y(),Fd(),q(),ls(),_(),h(),Tb(),_z(),Ex(),Si(),P(),u(),F(),Wu(),Ue(),UF(),Mz=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Nz=function(e,t){return function(n,r){t(n,r,e)}},Pz=class{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},Fz=class{constructor(e,t,n,r,i,a){this._editor=e,this._languageService=t,this._openerService=n,this.accessibilityService=r,this._instantiationService=i,this._telemetryService=a,this.hoverOrdinal=4}suggestHoverAnchor(e){let t=gz.get(this._editor);if(!t)return null;let n=e.target;if(n.type===8){let r=n.detail;if(t.shouldShowHoverAtViewZone(r.viewZoneId))return new Sb(1e3,this,T.fromPositions(this._editor.getModel().validatePosition(r.positionBefore||r.position)),e.event.posx,e.event.posy,!1)}if(n.type===7&&t.shouldShowHoverAt(n.range)||n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range))return new Sb(1e3,this,n.range,e.event.posx,e.event.posy,!1);if(n.type===9&&n.element){let r=zF.getWarningWidgetContext(n.element);if(r&&t.shouldShowHoverAt(r.range))return new Sb(1e3,this,r.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if(this._editor.getOption(71).showToolbar!==`onHover`)return[];let n=gz.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new Pz(this,e.range,n)]:[]}renderHoverParts(e,t){let n=new I,r=t[0];this._telemetryService.publicLog2(`inlineCompletionHover.shown`),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(12)&&n.add(this.renderScreenReaderText(e,r));let i=r.controller.model.get(),a=document.createElement(`div`);return e.fragment.appendChild(a),n.add(xm((t,n)=>{let r=n.add(this._instantiationService.createInstance(Sx.hot.read(t),this._editor,!1,_l(null),i.selectedInlineCompletionIndex,i.inlineCompletionsCount,i.activeCommands,i.warning,()=>{e.onContentsChanged()}));a.replaceChildren(r.getDomNode())})),i.triggerExplicitly(),new Cb([{hoverPart:r,hoverElement:a,dispose(){n.dispose()}}])}renderScreenReaderText(e,t){let n=new I,r=R,i=r(`div.hover-row.markdown-hover`),a=x(i,r(`div.hover-contents`,{"aria-live":`assertive`})),o=new dt({editor:this._editor},this._languageService,this._openerService),s=t=>{let r=A(1194,`Suggestion:`),i=n.add(o.render(new Af().appendText(r).appendCodeblock(`text`,t),{asyncRenderCallback:()=>{a.className=`hover-contents code-hover-contents`,e.onContentsChanged()}}));a.replaceChildren(i.element)};return n.add(Xl(e=>{let n=t.controller.model.read(e)?.primaryGhostText.read(e);if(n){let e=this._editor.getModel().getLineContent(n.lineNumber);s(n.renderForScreenReader(e))}else gn(a)})),e.fragment.appendChild(i),n}},Fz=Mz([Nz(1,Qi),Nz(2,_e),Nz(3,qi),Nz(4,U),Nz(5,Ta)],Fz)})),Lz,Rz=t((()=>{Lz=class{}})),zz=t((()=>{ZA(),de(),aj(),v(),Tb(),jz(),_z(),Iz(),Rz(),Wo(),k(gz.ID,ej(gz.hot),3),D(bz),D(xz),E(new Sz),D(vz),D(yz),D(Cz),D(wz),D(Tz),D(Oz),D(Dz),D(Ez),Rr(kz),D(Az),Rr(as),Rr(Bf),wb.register(Fz),XA.register(new Lz)})),Bz=t((()=>{})),Vz,Hz,Uz,Wz,Gz=t((()=>{O(),M(),Fd(),q(),Bz(),In(),v(),_(),h(),ll(),cC(),HC(),P(),C(),qw(),Rw(),yu(),md(),Vz=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Hz=function(e,t){return function(n,r){t(n,r,e)}},Wz=class{static#e=Uz=this;static#t=this.ID=`editor.contrib.gotodefinitionatposition`;static#n=this.MAX_SOURCE_PREVIEW_LINES=8;constructor(e,t,n,r){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=r,this.toUnhook=new I,this.toUnhookForKeyboard=new I,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();let i=new sC(e);this.toUnhook.add(i),this.toUnhook.add(i.onMouseMoveOrRelevantKeyDown(([e,t])=>{this.startFindDefinitionFromMouse(e,t??void 0)})),this.toUnhook.add(i.onExecute(e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).catch(e=>{$p(e)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(i.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Uz.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}let n=e.target.position;this.startFindDefinition(n)}async startFindDefinition(e){this.toUnhookForKeyboard.clear();let t=e?this.editor.getModel()?.getWordAtPosition(e):null;if(!t){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===t.startColumn&&this.currentWordAtPosition.endColumn===t.endColumn&&this.currentWordAtPosition.word===t.word)return;this.currentWordAtPosition=t;let n=new oi(this.editor,15);this.previousPromise&&=(this.previousPromise.cancel(),null),this.previousPromise=Zn(t=>this.findDefinition(e,t));let r;try{r=await this.previousPromise}catch(e){$p(e);return}if(!r||!r.length||!n.validate(this.editor)){this.removeLinkDecorations();return}let i=r[0].originSelectionRange?T.lift(r[0].originSelectionRange):new T(e.lineNumber,t.startColumn,e.lineNumber,t.endColumn);if(r.length>1){let e=i;for(let{originSelectionRange:t}of r)t&&(e=T.plusRange(e,t));this.addDecoration(e,new Af().appendText(A(1069,`Click to show {0} definitions.`,r.length)))}else{let e=r[0];return e.uri?this.textModelResolverService.createModelReference(e.uri).then(t=>{if(!t.object||!t.object.textEditorModel){t.dispose();return}let{object:{textEditorModel:n}}=t,{startLineNumber:r}=e.range;if(r<1||r>n.getLineCount()){t.dispose();return}let a=this.getPreviewValue(n,r,e),o=this.languageService.guessLanguageIdByFilepathOrFirstLine(n.uri);this.addDecoration(i,a?new Af().appendCodeblock(o||``,a):void 0),t.dispose()}):void 0}}getPreviewValue(e,t,n){let r=n.range;return r.endLineNumber-r.startLineNumber>=Uz.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(e,t)),r=e.validateRange(r),this.stripIndentationFromPreviewRange(e,t,r)}stripIndentationFromPreviewRange(e,t,n){let r=e.getLineFirstNonWhitespaceColumn(t);for(let i=t+1;i<n.endLineNumber;i++){let t=e.getLineFirstNonWhitespaceColumn(i);r=Math.min(r,t)}return e.getValueInRange(n).replace(RegExp(`^\\s{${r-1}}`,`gm`),``).trim()}getPreviewRangeBasedOnIndentation(e,t){let n=e.getLineFirstNonWhitespaceColumn(t),r=Math.min(e.getLineCount(),t+Uz.MAX_SOURCE_PREVIEW_LINES),i=t+1;for(;i<r&&n!==e.getLineFirstNonWhitespaceColumn(i);i++);return new T(t,1,i+1,1)}addDecoration(e,t){let n={range:e,options:{description:`goto-definition-link`,inlineClassName:`goto-definition-link`,hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(e.target.detail.injectedText?.options instanceof Zs)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){let n=this.editor.getModel();return n?Mw(this.languageFeaturesService.definitionProvider,n,e,!1,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(e=>new Vw({openToSide:t,openInPeek:!t&&this.editor.getOption(100)&&!this.isInPeekEditor(e),muteMessage:!0},{title:{value:``,original:``},id:``,precondition:void 0}).run(e))}isInPeekEditor(e){let t=e.get(bh);return MC.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},Wz=Uz=Vz([Hz(1,d),Hz(2,Qi),Hz(3,V)],Wz),k(Wz.ID,Wz,2)})),Kz,qz,Jz,Yz,Xz,Zz,Qz=t((()=>{sn(),N(),q(),Ol(),Ga(),xd(),_(),Zo(),F(),Ic(),qp(),Tl(),Kz=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},qz=function(e,t){return function(n,r){t(n,r,e)}},Jz=class{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}},Yz=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._dispoables=new I,this._markers=[],this._nextIdx=-1,Fc.isUri(e)?this._resourceFilter=t=>t.toString()===e.toString():e&&(this._resourceFilter=e);let r=this._configService.getValue(`problems.sortOrder`),i=(e,t)=>{let n=Hs(e.resource.toString(),t.resource.toString());return n===0&&(n=r===`position`?T.compareRangesUsingStarts(e,t)||Tp.compare(e.severity,t.severity):Tp.compare(e.severity,t.severity)||T.compareRangesUsingStarts(e,t)),n},a=()=>{let t=this._markerService.read({resource:Fc.isUri(e)?e:void 0,severities:Tp.Error|Tp.Warning|Tp.Info});return typeof e==`function`&&(t=t.filter(e=>this._resourceFilter(e.resource))),t.sort(i),uo(t,this._markers,(e,t)=>e.resource.toString()===t.resource.toString()&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn&&e.severity===t.severity&&e.message===t.message)?!1:(this._markers=t,!0)};a(),this._dispoables.add(t.onMarkerChanged(e=>{(!this._resourceFilter||e.some(e=>this._resourceFilter(e)))&&a()&&(this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){let e=this._markers[this._nextIdx];return e&&new Jz(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let r=this._markers.findIndex(t=>Of(t.resource,e.uri));if(r<0)r=Ar(this._markers.length,t=>Hs(this._markers[t].resource.toString(),e.uri.toString())),r<0&&(r=~r),n?this._nextIdx=r:this._nextIdx=(this._markers.length+r-1)%this._markers.length;else{let i=!1,a=!1;for(let n=r;n<this._markers.length;n++){let r=T.lift(this._markers[n]);if(r.isEmpty()){let t=e.getWordAtPosition(r.getStartPosition());t&&(r=new T(r.startLineNumber,t.startColumn,r.startLineNumber,t.endColumn))}if(t&&(r.containsPosition(t)||t.isBeforeOrEqual(r.getStartPosition()))){this._nextIdx=n,i=!0,a=!r.containsPosition(t);break}if(this._markers[n].resource.toString()!==e.uri.toString())break}i?a&&!n&&--this._nextIdx:this._nextIdx=n?0:this._markers.length-1}this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let r=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx}find(e,t){let n=this._markers.findIndex(t=>t.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(T.containsPosition(this._markers[n],t))return new Jz(this._markers[n],n+1,this._markers.length)}}},Yz=Kz([qz(1,vf),qz(2,xl)],Yz),Xz=Mc(`IMarkerNavigationService`),Zz=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new Yc}getMarkerList(e){for(let t of this._provider){let n=t.getMarkerList(e);if(n)return n}return new Yz(e,this._markerService,this._configService)}},Zz=Kz([qz(0,vf),qz(1,xl)],Zz),Ds(Xz,Zz,1)})),$z=t((()=>{})),eB=t((()=>{})),tB,nB=t((()=>{eB(),Kn(),sr(),ku(),(function(e){function t(e){switch(e){case oc.Ignore:return`severity-ignore `+Qt.asClassName(B.info);case oc.Info:return Qt.asClassName(B.info);case oc.Warning:return Qt.asClassName(B.warning);case oc.Error:return Qt.asClassName(B.error);default:return``}}e.className=t})(tB||={})})),rB,iB,aB,oB,sB,cB,lB,uB,dB,fB,pB,mB,hB,gB,_B,vB=t((()=>{y(),Ed(),sn(),Ao(),N(),q(),Tl(),Ga(),$z(),_(),HC(),P(),xf(),de(),C(),F(),Vc(),Ic(),Wu(),nB(),Ei(),Yf(),rB=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},iB=function(e,t){return function(n,r){t(n,r,e)}},oB=class{constructor(e,t,n,r,i){this._openerService=r,this._labelService=i,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new I,this._editor=t;let a=document.createElement(`div`);a.className=`descriptioncontainer`,this._messageBlock=document.createElement(`div`),this._messageBlock.classList.add(`message`),this._messageBlock.setAttribute(`aria-live`,`assertive`),this._messageBlock.setAttribute(`role`,`alert`),a.appendChild(this._messageBlock),this._relatedBlock=document.createElement(`div`),a.appendChild(this._relatedBlock),this._disposables.add(Km(this._relatedBlock,`click`,e=>{e.preventDefault();let t=this._relatedDiagnostics.get(e.target);t&&n(t)})),this._scrollable=new Bc(a,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(e=>{a.style.left=`-${e.scrollLeft}px`,a.style.top=`-${e.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){hm(this._disposables)}update(e){let{source:t,message:n,relatedInformation:r,code:i}=e,a=(t?.length||0)+2;i&&(typeof i==`string`?a+=i.length:a+=i.value.length);let o=Li(n);this._lines=o.length,this._longestLineLength=0;for(let e of o)this._longestLineLength=Math.max(e.length+a,this._longestLineLength);We(this._messageBlock),this._messageBlock.setAttribute(`aria-label`,this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let s=this._messageBlock;for(let e of o)s=document.createElement(`div`),s.innerText=e,e===``&&(s.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(s);if(t||i){let e=document.createElement(`span`);if(e.classList.add(`details`),s.appendChild(e),t){let n=document.createElement(`span`);n.innerText=t,n.classList.add(`source`),e.appendChild(n)}if(i)if(typeof i==`string`){let t=document.createElement(`span`);t.innerText=`(${i})`,t.classList.add(`code`),e.appendChild(t)}else{this._codeLink=R(`a.code-link`),this._codeLink.setAttribute(`href`,`${i.target.toString()}`),this._codeLink.onclick=e=>{this._openerService.open(i.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};let t=x(this._codeLink,R(`span`));t.innerText=i.value,e.appendChild(this._codeLink)}}if(We(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Xf(r)){let e=this._relatedBlock.appendChild(document.createElement(`div`));e.style.paddingTop=`${Math.floor(this._editor.getOption(75)*.66)}px`,this._lines+=1;for(let t of r){let n=document.createElement(`div`),r=document.createElement(`a`);r.classList.add(`filename`),r.innerText=`${this._labelService.getUriBasenameLabel(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,r.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(r,t);let i=document.createElement(`span`);i.innerText=t.message,n.appendChild(r),n.appendChild(i),this._lines+=1,e.appendChild(n)}}let c=this._editor.getOption(59),l=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:l,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t=``;switch(e.severity){case Tp.Error:t=A(1016,`Error`);break;case Tp.Warning:t=A(1017,`Warning`);break;case Tp.Info:t=A(1018,`Info`);break;case Tp.Hint:t=A(1019,`Hint`);break}let n=A(1020,`{0} at {1}. `,t,e.startLineNumber+`:`+e.startColumn),r=this._editor.getModel();return r&&e.startLineNumber<=r.getLineCount()&&e.startLineNumber>=1&&(n=`${r.getLineContent(e.startLineNumber)}, ${n}`),n}},sB=class extends FC{static#e=aB=this;static#t=this.TitleMenu=new g(`gotoErrorTitleMenu`);constructor(e,t,n,r,i,a,o){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},i),this._themeService=t,this._openerService=n,this._menuService=r,this._contextKeyService=a,this._labelService=o,this._callOnDispose=new I,this._onDidSelectRelatedInformation=new j,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Tp.Warning,this._backgroundColor=_o.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(_B);let t=dB,n=fB;this._severity===Tp.Warning?(t=pB,n=mB):this._severity===Tp.Info&&(t=hB,n=gB);let r=e.getColor(t),i=e.getColor(n);this.style({arrowColor:r,frameColor:r,headerBackgroundColor:i,primaryHeadingColor:e.getColor(LC),secondaryHeadingColor:e.getColor(RC)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():``),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e=>this.editor.focus()));let t=cc(this._menuService.getMenuActions(aB.TitleMenu,this._contextKeyService));this._actionbarWidget.push(t,{label:!1,icon:!0,index:0})}_fillTitleIcon(e){this._icon=x(e,R(``))}_fillBody(e){this._parentContainer=e,e.classList.add(`marker-widget`),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute(`role`,`tooltip`),this._container=document.createElement(`div`),e.appendChild(this._container),this._message=new oB(this._container,this.editor,e=>this._onDidSelectRelatedInformation.fire(e),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw Error(`call showAtMarker`)}showAtMarker(e,t,n){this._container.classList.remove(`stale`),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let r=T.lift(e),i=this.editor.getPosition(),a=i&&r.containsPosition(i)?i:r.getStartPosition();super.show(a,this.computeRequiredHeight());let o=this.editor.getModel();if(o){let e=n>1?A(1021,`{0} of {1} problems`,t,n):A(1022,`{0} of {1} problem`,t,n);this.setTitle(yp(o.uri),e)}this._icon.className=`codicon ${tB.className(Tp.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(a,0),this.editor.focus()}updateMarker(e){this._container.classList.remove(`stale`),this._message.update(e)}showStale(){this._container.classList.add(`stale`),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},sB=aB=rB([iB(1,mr),iB(2,_e),iB(3,Ba),iB(4,U),iB(5,bh),iB(6,Ap)],sB),cB=la(sl,ae),lB=la(Wm,mc),uB=la(Gc,Xp),dB=Y(`editorMarkerNavigationError.background`,{dark:cB,light:cB,hcDark:ue,hcLight:ue},A(1023,`Editor marker navigation widget error color.`)),fB=Y(`editorMarkerNavigationError.headerBackground`,{dark:Ee(dB,.1),light:Ee(dB,.1),hcDark:null,hcLight:null},A(1024,`Editor marker navigation widget error heading background.`)),pB=Y(`editorMarkerNavigationWarning.background`,{dark:lB,light:lB,hcDark:ue,hcLight:ue},A(1025,`Editor marker navigation widget warning color.`)),mB=Y(`editorMarkerNavigationWarning.headerBackground`,{dark:Ee(pB,.1),light:Ee(pB,.1),hcDark:`#0C141F`,hcLight:Ee(pB,.2)},A(1026,`Editor marker navigation widget warning heading background.`)),hB=Y(`editorMarkerNavigationInfo.background`,{dark:uB,light:uB,hcDark:ue,hcLight:ue},A(1027,`Editor marker navigation widget info color.`)),gB=Y(`editorMarkerNavigationInfo.headerBackground`,{dark:Ee(hB,.1),light:Ee(hB,.1),hcDark:null,hcLight:null},A(1028,`Editor marker navigation widget info heading background.`)),_B=Y(`editorMarkerNavigation.background`,ia,A(1029,`Editor marker navigation widget background.`))})),yB,bB,xB,SB,CB,wB,TB,EB,DB,OB,kB=t((()=>{Kn(),q(),v(),ff(),Su(),_(),yc(),Qz(),P(),de(),C(),F(),Ie(),vB(),yB=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},bB=function(e,t){return function(n,r){t(n,r,e)}},SB=class{static#e=xB=this;static#t=this.ID=`editor.contrib.markerController`;static get(e){return e.getContribution(xB.ID)}constructor(e,t,n,r,i){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=r,this._instantiationService=i,this._sessionDispoables=new I,this._editor=e,this._widgetVisible=OB.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(sB,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e=>{(!this._model?.selected||!T.containsPosition(this._model?.selected.marker,e.position))&&this._model?.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;let e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:T.lift(e).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),n=this._getOrCreateModel(t.uri);n.resetIndex(),n.move(!0,t,new H(e.startLineNumber,e.startColumn)),n.selected&&this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}async navigate(e,t){if(!this._editor.hasModel())return;let n=this._editor.getModel(),r=this._getOrCreateModel(t?void 0:n.uri);if(r.move(e,n,this._editor.getPosition()),r.selected)if(r.selected.marker.resource.toString()!==n.uri.toString()){this._cleanUp();let n=await this._editorService.openCodeEditor({resource:r.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:r.selected.marker}},this._editor);n&&(xB.get(n)?.close(),xB.get(n)?.navigate(e,t))}else this._widget.showAtMarker(r.selected.marker,r.selected.index,r.selected.total)}},SB=xB=yB([bB(1,Xz),bB(2,bh),bB(3,ec),bB(4,U)],SB),CB=class extends S{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}async run(e,t){t.hasModel()&&await SB.get(t)?.navigate(this._next,this._multiFile)}},wB=class e extends CB{static#e=this.ID=`editor.action.marker.next`;static#t=this.LABEL=K(1012,`Go to Next Problem (Error, Warning, Info)`);constructor(){super(!0,!1,{id:e.ID,label:e.LABEL,precondition:void 0,kbOpts:{kbExpr:J.focus,primary:578,weight:100},menuOpts:{menuId:sB.TitleMenu,title:e.LABEL.value,icon:To(`marker-navigation-next`,B.arrowDown,A(1008,`Icon for goto next marker.`)),group:`navigation`,order:1}})}},TB=class e extends CB{static#e=this.ID=`editor.action.marker.prev`;static#t=this.LABEL=K(1013,`Go to Previous Problem (Error, Warning, Info)`);constructor(){super(!1,!1,{id:e.ID,label:e.LABEL,precondition:void 0,kbOpts:{kbExpr:J.focus,primary:1602,weight:100},menuOpts:{menuId:sB.TitleMenu,title:e.LABEL.value,icon:To(`marker-navigation-previous`,B.arrowUp,A(1009,`Icon for goto previous marker.`)),group:`navigation`,order:2}})}},EB=class extends CB{constructor(){super(!0,!0,{id:`editor.action.marker.nextInFiles`,label:K(1014,`Go to Next Problem in Files (Error, Warning, Info)`),precondition:void 0,kbOpts:{kbExpr:J.focus,primary:66,weight:100},menuOpts:{menuId:g.MenubarGoMenu,title:A(1010,`Next &&Problem`),group:`6_problem_nav`,order:1}})}},DB=class extends CB{constructor(){super(!1,!0,{id:`editor.action.marker.prevInFiles`,label:K(1015,`Go to Previous Problem in Files (Error, Warning, Info)`),precondition:void 0,kbOpts:{kbExpr:J.focus,primary:1090,weight:100},menuOpts:{menuId:g.MenubarGoMenu,title:A(1011,`Previous &&Problem`),group:`6_problem_nav`,order:2}})}},k(SB.ID,SB,4),D(wB),D(TB),D(EB),D(DB),OB=new De(`markersNavigationVisible`,!1),E(new(dn.bindToContribution(SB.get))({id:`closeMarkersNavigation`,precondition:OB,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:J.focus,primary:9,secondary:[1033]}}))})),AB,jB=t((()=>{y(),cp(),xd(),P(),qp(),C(),VP(),F(),$s(),xn(),xc(),v(),Cd(),Ep(),gl(),AB=class extends S{constructor(){super({id:`editor.action.debugEditorGpuRenderer`,label:K(1093,`Developer: Debug Editor GPU Renderer`),precondition:b.true()})}async run(e,t){let n=e.get(U),r=await e.get(Ne).pick([{label:A(1090,`Log Texture Atlas Stats`),id:`logTextureAtlasStats`},{label:A(1091,`Save Texture Atlas`),id:`saveTextureAtlas`},{label:A(1092,`Draw Glyph`),id:`drawGlyph`}],{canPickMany:!1});if(r)switch(r.id){case`logTextureAtlasStats`:n.invokeFunction(e=>{let t=e.get(Fp),n=l.atlas;if(!l.atlas){t.error(`No texture atlas found`);return}let r=n.getStats();t.info([`Texture atlas stats`,...r].join(`

`))});break;case`saveTextureAtlas`:n.invokeFunction(async e=>{let t=e.get(ym),n=e.get(zP),r=t.getWorkspace().folders;if(r.length>0){let e=l.atlas,t=[];for(let[i,a]of e.pages.entries())t.push(n.writeFile(Fc.joinPath(r[0].uri,`textureAtlasPage${i}_actual.png`),ef.wrap(new Uint8Array(await(await a.source.convertToBlob()).arrayBuffer()))),n.writeFile(Fc.joinPath(r[0].uri,`textureAtlasPage${i}_usage.png`),ef.wrap(new Uint8Array(await(await a.getUsagePreview()).arrayBuffer()))));await Promise.all(t)}});break;case`drawGlyph`:n.invokeFunction(async e=>{let t=e.get(xl),n=e.get(zP),r=e.get(Ne),i=e.get(ym).getWorkspace().folders;if(i.length===0)return;let a=l.atlas,o=t.getValue(`editor.fontFamily`),s=t.getValue(`editor.fontSize`),c=new yf(s,o,xt().devicePixelRatio,l.decorationStyleCache),u=await r.input({prompt:`Enter a character to draw (prefix with 0x for code point))`});if(!u)return;let d=u.match(/0x(?<codePoint>[0-9a-f]+)/i)?.groups?.codePoint;d!==void 0&&(u=String.fromCodePoint(parseInt(d,16)));let f=a.getGlyph(c,u,0,0,0);if(!f)return;let p=a.pages[f.pageIndex].source.getContext(`2d`)?.getImageData(f.x,f.y,f.w,f.h);if(!p)return;let m=new OffscreenCanvas(p.width,p.height);Lc(m.getContext(`2d`)).putImageData(p,0,0);let h=await m.convertToBlob({type:`image/png`}),ee=Fc.joinPath(i[0].uri,`glyph_${u}_0_${s}px_${o.replaceAll(/[,\\\/\.'\s]/g,`_`)}.png`);await n.writeFile(ee,ef.wrap(new Uint8Array(await h.arrayBuffer())))});break}}},D(AB)})),MB,NB,PB,FB,IB,LB,RB,zB,BB,VB,HB,UB,WB,GB,KB=t((()=>{sx(),ni(),v(),_(),yc(),Gz(),jT(),Gr(),P(),wT(),(function(e){e.NoAutoFocus=`noAutoFocus`,e.FocusIfVisible=`focusIfVisible`,e.AutoFocusImmediately=`autoFocusImmediately`})(MB||={}),NB=class extends S{constructor(){super({id:Kb,label:K(1099,`Show or Focus Hover`),metadata:{description:K(1100,`Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position.`),args:[{name:`args`,schema:{type:`object`,properties:{focus:{description:`Controls if and when the hover should take focus upon being triggered by this action.`,enum:[MB.NoAutoFocus,MB.FocusIfVisible,MB.AutoFocusImmediately],enumDescriptions:[A(1096,`The hover will not automatically take focus.`),A(1097,`The hover will take focus only if it is already visible.`),A(1098,`The hover will automatically take focus when it appears.`)],default:MB.FocusIfVisible}}}}]},precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2087),weight:100}})}run(e,t,n){if(!t.hasModel())return;let r=AT.get(t);if(!r)return;let i=n?.focus,a=MB.FocusIfVisible;Object.values(MB).includes(i)?a=i:typeof i==`boolean`&&i&&(a=MB.AutoFocusImmediately);let o=e=>{let n=t.getPosition(),i=new T(n.lineNumber,n.column,n.lineNumber,n.column);r.showContentHover(i,1,2,e)},s=t.getOption(2)===2;r.isHoverVisible?a===MB.NoAutoFocus?o(s):r.focus():o(s||a===MB.AutoFocusImmediately)}},PB=class extends S{constructor(){super({id:qb,label:K(1101,`Show Definition Preview Hover`),precondition:void 0,metadata:{description:K(1102,`Show the definition preview hover in the editor.`)}})}run(e,t){let n=AT.get(t);if(!n)return;let r=t.getPosition();if(!r)return;let i=new T(r.lineNumber,r.column,r.lineNumber,r.column),a=Wz.get(t);a&&a.startFindDefinitionFromCursor(r).then(()=>{n.showContentHover(i,1,2,!0)})}},FB=class extends S{constructor(){super({id:Jb,label:K(1103,`Hide Hover`),alias:`Hide Content Hover`,precondition:void 0})}run(e,t){AT.get(t)?.hideContentHover()}},IB=class extends S{constructor(){super({id:Yb,label:K(1104,`Scroll Up Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:16,weight:100},metadata:{description:K(1105,`Scroll up the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.scrollUp()}},LB=class extends S{constructor(){super({id:Xb,label:K(1106,`Scroll Down Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:18,weight:100},metadata:{description:K(1107,`Scroll down the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.scrollDown()}},RB=class extends S{constructor(){super({id:Zb,label:K(1108,`Scroll Left Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:15,weight:100},metadata:{description:K(1109,`Scroll left the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.scrollLeft()}},zB=class extends S{constructor(){super({id:Qb,label:K(1110,`Scroll Right Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:17,weight:100},metadata:{description:K(1111,`Scroll right the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.scrollRight()}},BB=class extends S{constructor(){super({id:$b,label:K(1112,`Page Up Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:K(1113,`Page up the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.pageUp()}},VB=class extends S{constructor(){super({id:ex,label:K(1114,`Page Down Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:K(1115,`Page down the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.pageDown()}},HB=class extends S{constructor(){super({id:tx,label:K(1116,`Go To Top Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:K(1117,`Go to the top of the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.goToTop()}},UB=class extends S{constructor(){super({id:nx,label:K(1118,`Go To Bottom Hover`),precondition:J.hoverFocused,kbOpts:{kbExpr:J.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:K(1119,`Go to the bottom of the editor hover.`)}})}run(e,t){let n=AT.get(t);n&&n.goToBottom()}},WB=class extends S{constructor(){super({id:rx,label:ix,alias:`Increase Hover Verbosity Level`,precondition:J.hoverVisible})}run(e,t,n){let r=AT.get(t);if(!r)return;let i=n?.index===void 0?r.focusedHoverPartIndex():n.index;r.updateHoverVerbosityLevel(fh.Increase,i,n?.focus)}},GB=class extends S{constructor(){super({id:ax,label:ox,alias:`Decrease Hover Verbosity Level`,precondition:J.hoverVisible})}run(e,t,n){let r=AT.get(t);if(!r)return;let i=n?.index===void 0?r.focusedHoverPartIndex():n.index;AT.get(t)?.updateHoverVerbosityLevel(fh.Decrease,i,n?.focus)}}})),qB,JB,YB,XB,ZB,QB,$B=t((()=>{y(),sn(),O(),M(),q(),Tl(),_(),yu(),Kl(),iy(),Hy(),Bv(),kB(),Tb(),P(),Ic(),Wu(),yo(),sr(),Kn(),qB=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},JB=function(e,t){return function(n,r){t(n,r,e)}},YB=R,XB=class{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},ZB={type:1,filter:{include:Iv.QuickFix},triggerAction:Lv.QuickFixHover},QB=class{constructor(e,t,n,r){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=r,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];let n=this._editor.getModel(),r=e.range;if(!n.isValidRange(e.range))return[];let i=r.startLineNumber,a=n.getLineMaxColumn(i),o=[];for(let r of t){let t=r.range.startLineNumber===i?r.range.startColumn:1,s=r.range.endLineNumber===i?r.range.endColumn:a,c=this._markerDecorationsService.getMarker(n.uri,r);if(!c)continue;let l=new T(e.range.startLineNumber,t,e.range.startLineNumber,s);o.push(new XB(this,l,c))}return o}renderHoverParts(e,t){if(!t.length)return new Cb([]);let n=[];t.forEach(t=>{let r=this._renderMarkerHover(t);e.fragment.appendChild(r.hoverElement),n.push(r)});let r=t.length===1?t[0]:t.sort((e,t)=>Tp.compare(e.marker.severity,t.marker.severity))[0];return new Cb(n,this._renderMarkerStatusbar(e,r))}_renderMarkerHover(e){let t=new I,n=YB(`div.hover-row`),r=x(n,YB(`div.marker.hover-contents`)),{source:i,message:a,code:o,relatedInformation:s}=e.marker;this._editor.applyFontInfo(r);let c=x(r,YB(`span`));if(c.style.whiteSpace=`pre-wrap`,c.innerText=a,i||o)if(o&&typeof o!=`string`){let e=YB(`span`);if(i){let t=x(e,YB(`span`));t.innerText=i}let n=x(e,YB(`a.code-link`));n.setAttribute(`href`,o.target.toString(!0)),t.add(ch(n,`click`,e=>{this._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}));let a=x(n,YB(`span`));a.innerText=o.value;let s=x(r,e);s.style.opacity=`0.6`,s.style.paddingLeft=`6px`}else{let e=x(r,YB(`span`));e.style.opacity=`0.6`,e.style.paddingLeft=`6px`,e.innerText=i&&o?`${i}(${o})`:i||`(${o})`}if(Xf(s))for(let{message:e,resource:n,startLineNumber:i,startColumn:a}of s){let o=x(r,YB(`div`));o.style.marginTop=`8px`;let s=x(o,YB(`a`));s.innerText=`${yp(n)}(${i}, ${a}): `,s.style.cursor=`pointer`,t.add(ch(s,`click`,e=>{if(e.stopPropagation(),e.preventDefault(),this._openerService){let e={selection:{startLineNumber:i,startColumn:a}};this._openerService.open(n,{fromUserGesture:!0,editorOptions:e}).catch($p)}}));let c=x(o,YB(`span`));c.innerText=e,this._editor.applyFontInfo(c)}return{hoverPart:e,hoverElement:n,dispose:()=>t.dispose()}}_renderMarkerStatusbar(e,t){let n=new I;if(t.marker.severity===Tp.Error||t.marker.severity===Tp.Warning||t.marker.severity===Tp.Info){let n=SB.get(this._editor);n&&e.statusBar.addAction({label:A(1129,`View Problem`),commandId:wB.ID,run:()=>{e.hide(),n.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(103)){let r=e.statusBar.append(YB(`div`));this.recentMarkerCodeActionsInfo&&(ac.makeKey(this.recentMarkerCodeActionsInfo.marker)===ac.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=A(1130,`No quick fixes available`)):this.recentMarkerCodeActionsInfo=void 0);let i=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?z.None:ps(()=>r.textContent=A(1131,`Checking for quick fixes...`),200,n);r.textContent||=`\xA0`;let a=this.getCodeActions(t.marker);n.add(qm(()=>a.cancel())),a.then(a=>{if(i.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),r.textContent=A(1132,`No quick fixes available`);return}r.style.display=`none`;let o=!1;n.add(qm(()=>{o||a.dispose()})),e.statusBar.addAction({label:A(1133,`Quick Fix...`),commandId:Jv,run:t=>{o=!0;let n=Vy.get(this._editor),r=td(t);e.hide(),n?.showCodeActions(ZB,a,{x:r.left,y:r.top,width:r.width,height:r.height})}});let s=a.validActions.find(e=>e.action.isAI);s&&e.statusBar.addAction({label:s.action.title,commandId:s.action.command?.id??``,iconClass:Qt.asClassName(B.sparkle),run:()=>{Vy.get(this._editor)?.applyCodeAction(s,!1,!1,ry.FromProblemsHover)}}),e.onContentsChanged()},$p)}return n}getCodeActions(e){return Zn(t=>Vv(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),ZB,Ae.None,t))}},QB=qB([JB(1,lu),JB(2,_e),JB(3,V)],QB)})),eV,tV=t((()=>{sn(),Fd(),zf(),eV=class{constructor(e){this._editor=e}computeSync(e){let t=e=>({value:e}),n=this._editor.getLineDecorations(e.lineNumber),r=[],i=e.laneOrLine===`lineNo`;if(!n)return r;for(let a of n){let n=a.options.glyphMargin?.position??lm.Center;if(!i&&n!==e.laneOrLine)continue;let o=i?a.options.lineNumberHoverMessage:a.options.glyphMarginHoverMessage;!o||cu(o)||r.push(...Wt(o).map(t))}return r}}})),nV,rV,iV,aV,oV,sV=t((()=>{y(),q(),Si(),h(),Mx(),Wu(),aa(),tV(),Ox(),nV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},rV=function(e,t){return function(n,r){t(n,r,e)}},aV=R,oV=class extends z{static#e=iV=this;static#t=this.ID=`editor.contrib.modesGlyphHoverWidget`;constructor(e,t,n){super(),this._renderDisposeables=this._register(new I),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new ys(!0)),this._hover.containerDomNode.classList.toggle(`hidden`,!this._isVisible),this._markdownRenderer=new dt({editor:this._editor},t,n),this._hoverOperation=this._register(new Ax(this._editor,new eV(this._editor))),this._register(this._hoverOperation.onResult(e=>this._withResult(e))),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(59)&&this._updateFont()})),this._register(Km(this._hover.containerDomNode,`mouseleave`,e=>{this._onMouseLeave(e)})),this._editor.addOverlayWidget(this)}dispose(){this._hoverComputerOptions=void 0,this._editor.removeOverlayWidget(this),super.dispose()}getId(){return iV.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName(`code`)).forEach(e=>this._editor.applyFontInfo(e))}_onModelDecorationsChanged(){this._isVisible&&this._hoverComputerOptions&&(this._hoverOperation.cancel(),this._hoverOperation.start(0,this._hoverComputerOptions))}showsOrWillShow(e){let t=e.target;return t.type===2&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):t.type===3?(this._startShowingAt(t.position.lineNumber,`lineNo`),!0):!1}_startShowingAt(e,t){this._hoverComputerOptions&&this._hoverComputerOptions.lineNumber===e&&this._hoverComputerOptions.laneOrLine===t||(this._hoverOperation.cancel(),this.hide(),this._hoverComputerOptions={lineNumber:e,laneOrLine:t},this._hoverOperation.start(0,this._hoverComputerOptions))}hide(){this._hoverComputerOptions=void 0,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle(`hidden`,!this._isVisible))}_withResult(e){this._messages=e.value,this._messages.length>0?this._renderMessages(e.options.lineNumber,e.options.laneOrLine,this._messages):this.hide()}_renderMessages(e,t,n){this._renderDisposeables.clear();let r=document.createDocumentFragment();for(let e of n){let t=aV(`div.hover-row.markdown-hover`),n=x(t,aV(`div.hover-contents`)),i=this._renderDisposeables.add(this._markdownRenderer.render(e.value));n.appendChild(i.element),r.appendChild(t)}this._updateContents(r),this._showAt(e,t)}_updateContents(e){this._hover.contentsDomNode.textContent=``,this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e,t){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle(`hidden`,!this._isVisible));let n=this._editor.getLayoutInfo(),r=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),a=this._editor.getOption(75),o=this._hover.containerDomNode.clientHeight,s=r-i-(o-a)/2,c=n.glyphMarginLeft+n.glyphMarginWidth+(t===`lineNo`?n.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${c}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(s),0)}px`,this._hover.containerDomNode.style.zIndex=`11`}_onMouseLeave(e){let t=this._editor.getDomNode();(!t||!Dx(t,e.x,e.y))&&this.hide()}},oV=iV=nV([rV(1,Qi),rV(2,_e)],oV)})),cV,lV,uV,dV=t((()=>{q(),F(),O(),Ox(),wT(),sV(),cV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},lV=function(e,t){return function(n,r){t(n,r,e)}},uV=class extends z{static#e=this.ID=`editor.contrib.marginHover`;constructor(e,t){super(),this._editor=e,this._instantiationService=t,this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new I,this._hoverState={mouseDown:!1},this._reactToEditorMouseMoveRunner=this._register(new rn(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(69)&&(this._unhookListeners(),this._hookListeners())}))}_hookListeners(){let e=this._editor.getOption(69);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._listenersStore.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))):(this._listenersStore.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._listenersStore.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))),this._listenersStore.add(this._editor.onMouseLeave(e=>this._onEditorMouseLeave(e))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this.hideGlyphHover()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(e=>this._onEditorScrollChanged(e)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this.hideGlyphHover()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._isMouseOnGlyphHoverWidget(e)&&this.hideGlyphHover()}_isMouseOnGlyphHoverWidget(e){let t=this._glyphWidget?.getDomNode();return t?Dx(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),!this._isMouseOnGlyphHoverWidget(e)&&this.hideGlyphHover())}_shouldNotRecomputeCurrentHoverWidget(e){let t=this._hoverSettings.sticky,n=this._isMouseOnGlyphHoverWidget(e);return t&&n}_onEditorMouseMove(e){if(!this.shouldKeepOpenOnEditorMouseMoveOrLeave){if(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}this._reactToEditorMouseMove(e)}}_reactToEditorMouseMove(e){e&&(this._tryShowHoverWidget(e)||this.hideGlyphHover())}_tryShowHoverWidget(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}_onKeyDown(e){this._editor.hasModel()&&(e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||this.hideGlyphHover())}hideGlyphHover(){this._glyphWidget?.hide()}_getOrCreateGlyphWidget(){return this._glyphWidget||=this._instantiationService.createInstance(oV,this._editor),this._glyphWidget}dispose(){super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),this._glyphWidget?.dispose()}},uV=cV([lV(1,U)],uV)})),fV,pV,mV,hV=t((()=>{fV=class{},pV=class{},mV=class{}})),gV=t((()=>{KB(),v(),Ei(),Yf(),Tb(),xS(),$B(),jT(),dV(),wT(),ZA(),hV(),k(AT.ID,AT,2),k(uV.ID,uV,2),D(NB),D(PB),D(FB),D(IB),D(LB),D(RB),D(zB),D(BB),D(VB),D(HB),D(UB),D(WB),D(GB),wb.register(vS),wb.register(QB),$n((e,t)=>{let n=e.getColor(Ac);n&&(t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${n.transparent(.5)}; }`))}),XA.register(new fV),XA.register(new pV),XA.register(new mV)}));function _V(e,t){let n=0;for(let r=0;r<e.length;r++)e.charAt(r)===`	`?n+=t:n++;return n}function vV(e,t,n){e=e<0?0:e;let r=``;if(!n){let n=Math.floor(e/t);e%=t;for(let e=0;e<n;e++)r+=`	`}for(let t=0;t<e;t++)r+=` `;return r}var yV=t((()=>{}));function bV(e,t,n,r){if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return[];let i=t.getLanguageConfiguration(e.getLanguageId()).indentRulesSupport;if(!i)return[];let a=new Hr(e,i,t);for(r=Math.min(r,e.getLineCount());n<=r&&a.shouldIgnore(n);)n++;if(n>r-1)return[];let{tabSize:o,indentSize:s,insertSpaces:c}=e.getOptions(),l=(e,t)=>(t||=1,bi.shiftIndent(e,e.length+t,o,s,c)),u=(e,t)=>(t||=1,bi.unshiftIndent(e,e.length+t,o,s,c)),d=[],f=Pm(e.getLineContent(n)),p=f;a.shouldIncrease(n)?(p=l(p),f=l(f)):a.shouldIndentNextLine(n)&&(p=l(p)),n++;for(let t=n;t<=r;t++){if(xV(e,t))continue;let n=Pm(e.getLineContent(t)),r=p;a.shouldDecrease(t,r)&&(p=u(p),f=u(f)),n!==p&&d.push(un.replaceMove(new X(t,1,t,n.length+1),Hn(p,s,c))),!a.shouldIgnore(t)&&(a.shouldIncrease(t,r)?(f=l(f),p=f):p=a.shouldIndentNextLine(t,r)?l(p):f)}return d}function xV(e,t){return e.tokenization.isCheapToTokenize(t)?e.tokenization.getLineTokens(t).getStandardTokenType(0)===2:!1}var SV=t((()=>{Ga(),id(),vr(),Jt(),ze(),ii()}));function CV(e,t){let n=t=>Pn(e,t)===2;return n(t.getStartPosition())||n(t.getEndPosition())}function wV(e,t,n,r){if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return;let i=``;for(let e=0;e<n;e++)i+=` `;let a=new RegExp(i,`gi`);for(let n=1,o=e.getLineCount();n<=o;n++){let o=e.getLineFirstNonWhitespaceColumn(n);if(o===0&&(o=e.getLineMaxColumn(n)),o===1)continue;let s=new T(n,1,n,o),c=e.getValueInRange(s),l=r?c.replace(/\t/gi,i):c.replace(a,`	`);t.addEditOperation(s,l)}}var TV,EV,DV,OV,kV,AV,jV,MV,NV,PV,FV,IV,LV,RV,zV,BV=t((()=>{q(),Ga(),v(),id(),_(),yc(),oo(),Yd(),yV(),P(),xn(),lt(),SV(),Er(),TV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},EV=function(e,t){return function(n,r){t(n,r,e)}},DV=class e extends S{static#e=this.ID=`editor.action.indentationToSpaces`;constructor(){super({id:e.ID,label:K(1138,`Convert Indentation to Spaces`),precondition:J.writable,metadata:{description:K(1139,`Convert the tab indentation to spaces.`)}})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),i=t.getSelection();if(!i)return;let a=new RV(i,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[a]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}},OV=class e extends S{static#e=this.ID=`editor.action.indentationToTabs`;constructor(){super({id:e.ID,label:K(1140,`Convert Indentation to Tabs`),precondition:J.writable,metadata:{description:K(1141,`Convert the spaces indentation to tabs.`)}})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),i=t.getSelection();if(!i)return;let a=new zV(i,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[a]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}},kV=class extends S{constructor(e,t,n){super(n),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){let n=e.get(Ne),r=e.get(Ip),i=t.getModel();if(!i)return;let a=r.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget),o=i.getOptions(),s=[1,2,3,4,5,6,7,8].map(e=>({id:e.toString(),label:e.toString(),description:e===a.tabSize&&e===o.tabSize?A(1134,`Configured Tab Size`):e===a.tabSize?A(1135,`Default Tab Size`):e===o.tabSize?A(1136,`Current Tab Size`):void 0})),c=Math.min(i.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(s,{placeHolder:A(1137,`Select Tab Size for Current File`),activeItem:s[c]}).then(e=>{if(e&&i&&!i.isDisposed()){let t=parseInt(e.label,10);this.displaySizeOnly?i.updateOptions({tabSize:t}):i.updateOptions({tabSize:t,indentSize:t,insertSpaces:this.insertSpaces})}})},50)}},AV=class e extends kV{static#e=this.ID=`editor.action.indentUsingTabs`;constructor(){super(!1,!1,{id:e.ID,label:K(1142,`Indent Using Tabs`),precondition:void 0,metadata:{description:K(1143,`Use indentation with tabs.`)}})}},jV=class e extends kV{static#e=this.ID=`editor.action.indentUsingSpaces`;constructor(){super(!0,!1,{id:e.ID,label:K(1144,`Indent Using Spaces`),precondition:void 0,metadata:{description:K(1145,`Use indentation with spaces.`)}})}},MV=class e extends kV{static#e=this.ID=`editor.action.changeTabDisplaySize`;constructor(){super(!0,!0,{id:e.ID,label:K(1146,`Change Tab Display Size`),precondition:void 0,metadata:{description:K(1147,`Change the space size equivalent of the tab.`)}})}},NV=class e extends S{static#e=this.ID=`editor.action.detectIndentation`;constructor(){super({id:e.ID,label:K(1148,`Detect Indentation from Content`),precondition:void 0,metadata:{description:K(1149,`Detect the indentation from content.`)}})}run(e,t){let n=e.get(Ip),r=t.getModel();if(!r)return;let i=n.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget);r.detectIndentation(i.insertSpaces,i.tabSize)}},PV=class extends S{constructor(){super({id:`editor.action.reindentlines`,label:K(1150,`Reindent Lines`),precondition:J.writable,metadata:{description:K(1151,`Reindent the lines of the editor.`)}})}run(e,t){let n=e.get(yn),r=t.getModel();if(!r)return;let i=bV(r,n,1,r.getLineCount());i.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,i),t.pushUndoStop())}},FV=class extends S{constructor(){super({id:`editor.action.reindentselectedlines`,label:K(1152,`Reindent Selected Lines`),precondition:J.writable,metadata:{description:K(1153,`Reindent the selected lines of the editor.`)}})}run(e,t){let n=e.get(yn),r=t.getModel();if(!r)return;let i=t.getSelections();if(i===null)return;let a=[];for(let e of i){let t=e.startLineNumber,i=e.endLineNumber;if(t!==i&&e.endColumn===1&&i--,t===1){if(t===i)continue}else t--;let o=bV(r,n,t,i);a.push(...o)}a.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,a),t.pushUndoStop())}},IV=class{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let t of e)t.range&&typeof t.text==`string`&&this._edits.push(t)}getEditOperations(e,t){for(let e of this._edits)t.addEditOperation(T.lift(e.range),e.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}},LV=class{static#e=this.ID=`editor.contrib.autoIndentOnPaste`;constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new I,this.callOnModel=new I,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(!this.editor.getOption(17)||this.editor.getOption(16)<4)&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;let n=this.editor.getModel();if(!n||this.rangeContainsOnlyWhitespaceCharacters(n,e)||!this.editor.getOption(18)&&CV(n,e)||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;let r=this.editor.getOption(16),{tabSize:i,indentSize:a,insertSpaces:o}=n.getOptions(),s=[],c={shiftIndent:e=>bi.shiftIndent(e,e.length+1,i,a,o),unshiftIndent:e=>bi.unshiftIndent(e,e.length+1,i,a,o)},l=e.startLineNumber,u=n.getLineContent(l);if(!/\S/.test(u.substring(0,e.startColumn-1))){let e=Wa(r,n,n.getLanguageId(),l,c,this._languageConfigurationService);if(e!==null){let t=Pm(u),r=_V(e,i);if(r!==_V(t,i)){let e=vV(r,i,o);s.push({range:new T(l,1,l,t.length+1),text:e}),u=e+u.substring(t.length)}else{let e=wt(n,l,this._languageConfigurationService);if(e===0||e===8)return}}}let d=l;for(;l<e.endLineNumber;){if(!/\S/.test(n.getLineContent(l+1))){l++;continue}break}if(l!==e.endLineNumber){let t=Wa(r,{tokenization:{getLineTokens:e=>n.tokenization.getLineTokens(e),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(e,t)=>n.getLanguageIdAtPosition(e,t)},getLineContent:e=>e===d?u:n.getLineContent(e)},n.getLanguageId(),l+1,c,this._languageConfigurationService);if(t!==null){let r=_V(t,i),a=_V(Pm(n.getLineContent(l+1)),i);if(r!==a){let t=r-a;for(let r=l+1;r<=e.endLineNumber;r++){let e=Pm(n.getLineContent(r)),a=vV(_V(e,i)+t,i,o);a!==e&&s.push({range:new T(r,1,r,e.length+1),text:a})}}}}if(s.length>0){this.editor.pushUndoStop();let e=new IV(s,this.editor.getSelection());this.editor.executeCommand(`autoIndentOnPaste`,e),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){let n=e=>e.trim().length===0,r=!0;if(t.startLineNumber===t.endLineNumber)r=n(e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1));else for(let i=t.startLineNumber;i<=t.endLineNumber;i++){let a=e.getLineContent(i);if(r=i===t.startLineNumber?n(a.substring(t.startColumn-1)):i===t.endLineNumber?n(a.substring(0,t.endColumn-1)):e.getLineFirstNonWhitespaceColumn(i)===0,!r)break}return r}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},LV=TV([EV(1,yn)],LV),RV=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),wV(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}},zV=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),wV(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}},k(LV.ID,LV,2),D(DV),D(OV),D(AV),D(jV),D(MV),D(NV),D(PV),D(FV)})),VV=t((()=>{v(),Tb(),oT(),dT(),k(aT.ID,aT,1),wb.register(uT)})),HV,UV=t((()=>{ze(),HV=class{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new X(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new X(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}})),WV=t((()=>{})),GV,KV,qV,JV,YV,XV,ZV=t((()=>{O(),M(),In(),v(),_(),ze(),yc(),md(),va(),P(),UV(),WV(),GV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},KV=function(e,t){return function(n,r){t(n,r,e)}},JV=class{static#e=qV=this;static#t=this.ID=`editor.contrib.inPlaceReplaceController`;static get(e){return e.getContribution(qV.ID)}static#n=this.DECORATION=L.register({description:`in-place-replace`,className:`valueSetReplacement`});constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){this.currentRequest?.cancel();let n=this.editor.getSelection(),r=this.editor.getModel();if(!r||!n)return;let i=n;if(i.startLineNumber!==i.endLineNumber)return;let a=new oi(this.editor,5),o=r.uri;return this.editorWorkerService.canNavigateValueSet(o)?(this.currentRequest=Zn(e=>this.editorWorkerService.navigateValueSet(o,i,t)),this.currentRequest.then(t=>{if(!t||!t.range||!t.value||!a.validate(this.editor))return;let n=T.lift(t.range),r=t.range,o=t.value.length-(i.endColumn-i.startColumn);r={startLineNumber:r.startLineNumber,startColumn:r.startColumn,endLineNumber:r.endLineNumber,endColumn:r.startColumn+t.value.length},o>1&&(i=new X(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn+o-1));let s=new HV(n,i,t.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,s),this.editor.pushUndoStop(),this.decorations.set([{range:r,options:qV.DECORATION}]),this.decorationRemover?.cancel(),this.decorationRemover=dl(350),this.decorationRemover.then(()=>this.decorations.clear()).catch($p)}).catch($p)):Promise.resolve(void 0)}},JV=qV=GV([KV(1,jr)],JV),YV=class extends S{constructor(){super({id:`editor.action.inPlaceReplace.up`,label:K(1227,`Replace with Previous Value`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:3159,weight:100}})}run(e,t){let n=JV.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}},XV=class extends S{constructor(){super({id:`editor.action.inPlaceReplace.down`,label:K(1228,`Replace with Next Value`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:3161,weight:100}})}run(e,t){let n=JV.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}},k(JV.ID,JV,4),D(YV),D(XV)}));function QV(e){let t=e.getLineCount(),n=Ur(e.getLineContent(t))===-1;if(!(!t||n))return un.insert(new H(t,e.getLineMaxColumn(t)),e.getEOL())}var $V,eH=t((()=>{Ga(),vr(),Su(),$V=class{constructor(e){this._selection=e,this._selectionId=null}getEditOperations(e,t){let n=QV(e);n&&t.addEditOperation(n.range,n.text),this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}})),tH,nH=t((()=>{v(),eH(),yc(),P(),tH=class e extends S{static#e=this.ID=`editor.action.insertFinalNewLine`;constructor(){super({id:e.ID,label:K(1229,`Insert Final New Line`),precondition:J.writable})}run(e,t,n){let r=t.getSelection();if(r===null)return;let i=new $V(r);t.pushUndoStop(),t.executeCommands(this.id,[i]),t.pushUndoStop()}},D(tH)})),rH,iH=t((()=>{v(),Od(),yc(),P(),rH=class extends S{constructor(){super({id:`expandLineSelection`,label:K(1230,`Expand Line Selection`),precondition:void 0,kbOpts:{weight:0,kbExpr:J.textInputFocus,primary:2090}})}run(e,t,n){if(n||={},!t.hasModel())return;let r=t._getViewModel();r.model.pushStackElement(),r.setCursorStates(n.source,3,Hc.expandLineSelection(r,r.getCursorStates())),r.revealAllCursors(n.source,!0)}},D(rH)}));function aH(e,t,n){t.sort((e,t)=>e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber);for(let e=t.length-2;e>=0;e--)t[e].lineNumber===t[e+1].lineNumber&&t.splice(e,1);let r=[],i=0,a=0,o=t.length;for(let s=1,c=e.getLineCount();s<=c;s++){let c=e.getLineContent(s),l=c.length+1,u=0;if(a<o&&t[a].lineNumber===s&&(u=t[a].column,a++,u===l)||c.length===0)continue;let d=Ur(c),f=0;if(d===-1)f=1;else if(d!==c.length-1)f=d+2;else continue;if(!n){if(!e.tokenization.hasAccurateTokensForLine(s))continue;let t=e.tokenization.getLineTokens(s),n=t.getStandardTokenType(t.findTokenIndexAtOffset(f));if(n===2||n===3)continue}f=Math.max(u,f),r[i++]=un.delete(new T(s,f,s,l))}return r}var oH,sH=t((()=>{Ga(),vr(),_(),oH=class{constructor(e,t,n){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=n}getEditOperations(e,t){let n=aH(e,this._cursors,this._trimInRegexesAndStrings);for(let e=0,r=n.length;e<r;e++){let r=n[e];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}})),cH,lH=t((()=>{_(),ze(),cH=class{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let r=[];for(let t=n.startLineNumber;t<=n.endLineNumber;t++)r.push(e.getLineContent(t));let i=r.join(`
`);i===``&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new T(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?``:`
`):this._isCopyingDown?t.addEditOperation(new T(n.startLineNumber,1,n.startLineNumber,1),i+`
`):t.addEditOperation(new T(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+i),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let e=n.startLineNumber,t=n.startColumn,r=n.endLineNumber,i=n.endColumn;this._startLineNumberDelta!==0&&(e+=this._startLineNumberDelta,t=1),this._endLineNumberDelta!==0&&(r+=this._endLineNumberDelta,i=1),n=X.createWithDirection(e,t,r,i,this._selectionDirection)}return n}}})),uH,dH,fH,pH=t((()=>{Ga(),id(),_(),ze(),jp(),oo(),yV(),lt(),Hu(),uH=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},dH=function(e,t){return function(n,r){t(n,r,e)}},fH=class{constructor(e,t,n,r){this._languageConfigurationService=r,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let n=()=>e.getLanguageId(),r=(t,n)=>e.getLanguageIdAtPosition(t,n),i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let a=this._selection;a.startLineNumber<a.endLineNumber&&a.endColumn===1&&(this._moveEndPositionDown=!0,a=a.setEndPosition(a.endLineNumber-1,e.getLineMaxColumn(a.endLineNumber-1)));let{tabSize:o,indentSize:s,insertSpaces:c}=e.getOptions(),l=this.buildIndentConverter(o,s,c);if(a.startLineNumber===a.endLineNumber&&e.getLineMaxColumn(a.startLineNumber)===1){let n=a.startLineNumber,r=this._isMovingDown?n+1:n-1;e.getLineMaxColumn(r)===1?t.addEditOperation(new T(1,1,1,1),null):(t.addEditOperation(new T(n,1,n,1),e.getLineContent(r)),t.addEditOperation(new T(r,1,r,e.getLineMaxColumn(r)),null)),a=new X(r,1,r,1)}else{let i,s;if(this._isMovingDown){i=a.endLineNumber+1,s=e.getLineContent(i),t.addEditOperation(new T(i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let u=s;if(this.shouldAutoIndent(e,a)){let d=this.matchEnterRule(e,l,o,i,a.startLineNumber-1);if(d!==null)u=vV(d+_V(Pm(e.getLineContent(i)),o),o,c)+this.trimStart(s);else{let t={tokenization:{getLineTokens:t=>t===a.startLineNumber?e.tokenization.getLineTokens(i):e.tokenization.getLineTokens(t),getLanguageId:n,getLanguageIdAtPosition:r},getLineContent:t=>t===a.startLineNumber?e.getLineContent(i):e.getLineContent(t)},d=Wa(this._autoIndent,t,e.getLanguageIdAtPosition(i,1),a.startLineNumber,l,this._languageConfigurationService);if(d!==null){let t=Pm(e.getLineContent(i)),n=_V(d,o);n!==_V(t,o)&&(u=vV(n,o,c)+this.trimStart(s))}}t.addEditOperation(new T(a.startLineNumber,1,a.startLineNumber,1),u+`
`);let f=this.matchEnterRuleMovingDown(e,l,o,a.startLineNumber,i,u);if(f!==null)f!==0&&this.getIndentEditsOfMovingBlock(e,t,a,o,c,f);else{let s={tokenization:{getLineTokens:t=>t===a.startLineNumber?e.tokenization.getLineTokens(i):t>=a.startLineNumber+1&&t<=a.endLineNumber+1?e.tokenization.getLineTokens(t-1):e.tokenization.getLineTokens(t),getLanguageId:n,getLanguageIdAtPosition:r},getLineContent:t=>t===a.startLineNumber?u:t>=a.startLineNumber+1&&t<=a.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t)},d=Wa(this._autoIndent,s,e.getLanguageIdAtPosition(i,1),a.startLineNumber+1,l,this._languageConfigurationService);if(d!==null){let n=Pm(e.getLineContent(a.startLineNumber)),r=_V(d,o),i=_V(n,o);if(r!==i){let n=r-i;this.getIndentEditsOfMovingBlock(e,t,a,o,c,n)}}}}else t.addEditOperation(new T(a.startLineNumber,1,a.startLineNumber,1),u+`
`)}else if(i=a.startLineNumber-1,s=e.getLineContent(i),t.addEditOperation(new T(i,1,i+1,1),null),t.addEditOperation(new T(a.endLineNumber,e.getLineMaxColumn(a.endLineNumber),a.endLineNumber,e.getLineMaxColumn(a.endLineNumber)),`
`+s),this.shouldAutoIndent(e,a)){let s={tokenization:{getLineTokens:t=>t===i?e.tokenization.getLineTokens(a.startLineNumber):e.tokenization.getLineTokens(t),getLanguageId:n,getLanguageIdAtPosition:r},getLineContent:t=>t===i?e.getLineContent(a.startLineNumber):e.getLineContent(t)},u=this.matchEnterRule(e,l,o,a.startLineNumber,a.startLineNumber-2);if(u!==null)u!==0&&this.getIndentEditsOfMovingBlock(e,t,a,o,c,u);else{let n=Wa(this._autoIndent,s,e.getLanguageIdAtPosition(a.startLineNumber,1),i,l,this._languageConfigurationService);if(n!==null){let r=Pm(e.getLineContent(a.startLineNumber)),i=_V(n,o),s=_V(r,o);if(i!==s){let n=i-s;this.getIndentEditsOfMovingBlock(e,t,a,o,c,n)}}}}}this._selectionId=t.trackSelection(a)}buildIndentConverter(e,t,n){return{shiftIndent:r=>bi.shiftIndent(r,r.length+1,e,t,n),unshiftIndent:r=>bi.unshiftIndent(r,r.length+1,e,t,n)}}parseEnterResult(e,t,n,r,i){if(i){let a=i.indentation;i.indentAction===wf.None||i.indentAction===wf.Indent?a=i.indentation+i.appendText:i.indentAction===wf.IndentOutdent?a=i.indentation:i.indentAction===wf.Outdent&&(a=t.unshiftIndent(i.indentation)+i.appendText);let o=e.getLineContent(r);if(this.trimStart(o).indexOf(this.trimStart(a))>=0){let i=Pm(e.getLineContent(r)),o=Pm(a),s=wt(e,r,this._languageConfigurationService);return s!==null&&s&2&&(o=t.unshiftIndent(o)),_V(o,n)-_V(i,n)}}return null}matchEnterRuleMovingDown(e,t,n,r,i,a){if(Ur(a)>=0){let a=e.getLineMaxColumn(i),o=he(this._autoIndent,e,new T(i,a,i,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,r,o)}else{let i=r-1;for(;i>=1&&!(Ur(e.getLineContent(i))>=0);)i--;if(i<1||r>e.getLineCount())return null;let a=e.getLineMaxColumn(i),o=he(this._autoIndent,e,new T(i,a,i,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,r,o)}}matchEnterRule(e,t,n,r,i,a){let o=i;for(;o>=1;){let t;if(t=o===i&&a!==void 0?a:e.getLineContent(o),Ur(t)>=0)break;o--}if(o<1||r>e.getLineCount())return null;let s=e.getLineMaxColumn(o),c=he(this._autoIndent,e,new T(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(e,t,n,r,c)}trimStart(e){return e.replace(/^\s+/,``)}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1);return!(n!==e.getLanguageIdAtPosition(t.endLineNumber,1)||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,r,i,a){for(let o=n.startLineNumber;o<=n.endLineNumber;o++){let s=Pm(e.getLineContent(o)),c=vV(_V(s,r)+a,r,i);c!==s&&(t.addEditOperation(new T(o,1,o,s.length+1),c),o===n.endLineNumber&&n.endColumn<=s.length+1&&c===``&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}},fH=uH([dH(3,yn)],fH)}));function mH(e,t,n){let r=t.startLineNumber,i=t.endLineNumber;if(t.endColumn===1&&i--,r>=i)return null;let a=[];for(let t=r;t<=i;t++)a.push(e.getLineContent(t));let o=a.slice(0);return o.sort(gH._COLLATOR.value.compare),n===!0&&(o=o.reverse()),{startLineNumber:r,endLineNumber:i,before:a,after:o}}function hH(e,t,n){let r=mH(e,t,n);return r?un.replace(new T(r.startLineNumber,1,r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),r.after.join(`
`)):null}var gH,_H=t((()=>{Qa(),vr(),_(),gH=class{static#e=this._COLLATOR=Mt.Collator();constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){let n=hH(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let r=mH(e,t,n);if(!r)return!1;for(let e=0,t=r.before.length;e<t;e++)if(r.before[e]!==r.after[e])return!0;return!1}}})),vH,yH,bH,xH,SH,CH,wH,TH,EH,DH,OH,kH,AH,jH,MH,NH,PH,FH,IH,LH,RH,zH,BH,VH,HH,UH,WH,GH,KH,qH,JH,YH,XH=t((()=>{ni(),_m(),v(),Xr(),sH(),Oa(),Nm(),vr(),Su(),_(),ze(),yc(),lH(),pH(),_H(),P(),de(),oo(),qp(),vH=class extends S{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;let n=t.getSelections().map((e,t)=>({selection:e,index:t,ignore:!1}));n.sort((e,t)=>T.compareRangesUsingStarts(e.selection,t.selection));let r=n[0];for(let e=1;e<n.length;e++){let t=n[e];r.selection.endLineNumber===t.selection.startLineNumber&&(r.index<t.index?t.ignore=!0:(r.ignore=!0,r=t))}let i=[];for(let e of n)i.push(new cH(e.selection,this.down,e.ignore));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},yH=class extends vH{constructor(){super(!1,{id:`editor.action.copyLinesUpAction`,label:K(1236,`Copy Line Up`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`2_line`,title:A(1231,`&&Copy Line Up`),order:1}})}},bH=class extends vH{constructor(){super(!0,{id:`editor.action.copyLinesDownAction`,label:K(1237,`Copy Line Down`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`2_line`,title:A(1232,`Co&&py Line Down`),order:2}})}},xH=class extends S{constructor(){super({id:`editor.action.duplicateSelection`,label:K(1238,`Duplicate Selection`),precondition:J.writable,menuOpts:{menuId:g.MenubarSelectionMenu,group:`2_line`,title:A(1233,`&&Duplicate Selection`),order:5}})}run(e,t,n){if(!t.hasModel())return;let r=[],i=t.getSelections(),a=t.getModel();for(let e of i)if(e.isEmpty())r.push(new cH(e,!0));else{let t=new X(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn);r.push(new Xu(t,a.getValueInRange(e)))}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},SH=class extends S{constructor(e,t){super(t),this.down=e}run(e,t){let n=e.get(yn),r=[],i=t.getSelections()||[],a=t.getOption(16);for(let e of i)r.push(new fH(e,this.down,a,n));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},CH=class extends SH{constructor(){super(!1,{id:`editor.action.moveLinesUpAction`,label:K(1239,`Move Line Up`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`2_line`,title:A(1234,`Mo&&ve Line Up`),order:3}})}},wH=class extends SH{constructor(){super(!0,{id:`editor.action.moveLinesDownAction`,label:K(1240,`Move Line Down`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`2_line`,title:A(1235,`Move &&Line Down`),order:4}})}},TH=class extends S{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;let n=t.getModel(),r=t.getSelections();r.length===1&&r[0].isEmpty()&&(r=[new X(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))]);for(let e of r)if(!gH.canRun(t.getModel(),e,this.descending))return;let i=[];for(let e=0,t=r.length;e<t;e++)i[e]=new gH(r[e],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},EH=class extends TH{constructor(){super(!1,{id:`editor.action.sortLinesAscending`,label:K(1241,`Sort Lines Ascending`),precondition:J.writable})}},DH=class extends TH{constructor(){super(!0,{id:`editor.action.sortLinesDescending`,label:K(1242,`Sort Lines Descending`),precondition:J.writable})}},OH=class extends S{constructor(){super({id:`editor.action.removeDuplicateLines`,label:K(1243,`Delete Duplicate Lines`),precondition:J.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let r=[],i=[],a=0,o=!0,s=t.getSelections();s.length===1&&s[0].isEmpty()&&(s=[new X(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))],o=!1);for(let e of s){let t=new Set,o=[];for(let r=e.startLineNumber;r<=e.endLineNumber;r++){let e=n.getLineContent(r);t.has(e)||(o.push(e),t.add(e))}let s=new X(e.startLineNumber,1,e.endLineNumber,n.getLineMaxColumn(e.endLineNumber)),c=e.startLineNumber-a,l=new X(c,1,c+o.length-1,o[o.length-1].length);r.push(un.replace(s,o.join(`
`))),i.push(l),a+=e.endLineNumber-e.startLineNumber+1-o.length}t.pushUndoStop(),t.executeEdits(this.id,r,o?i:void 0),t.pushUndoStop()}},kH=class extends S{constructor(){super({id:`editor.action.reverseLines`,label:K(1244,`Reverse lines`),precondition:J.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),r=t.getSelections(),i=r;i.length===1&&i[0].isEmpty()&&(i=[new X(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))]);let a=[],o=[];for(let e=0;e<i.length;e++){let t=i[e],s=r[e],c=t.endLineNumber;t.startLineNumber<t.endLineNumber&&t.endColumn===1&&c--;let l=new T(t.startLineNumber,1,c,n.getLineMaxColumn(c));c===n.getLineCount()&&n.getLineContent(l.endLineNumber)===``&&(l=l.setEndPosition(l.endLineNumber-1,n.getLineMaxColumn(l.endLineNumber-1)));let u=[];for(let e=l.endLineNumber;e>=l.startLineNumber;e--)u.push(n.getLineContent(e));let d=un.replace(l,u.join(`
`));a.push(d);let f=function(e){return e<=l.endLineNumber?l.endLineNumber-e+l.startLineNumber:e};o.push(function(e){if(e.isEmpty())return new X(f(e.positionLineNumber),e.positionColumn,f(e.positionLineNumber),e.positionColumn);{let t=f(e.selectionStartLineNumber),n=f(e.positionLineNumber),r=e.selectionStartColumn,i=e.positionColumn;return new X(t,r,n,i)}}(s))}t.pushUndoStop(),t.executeEdits(this.id,a,o),t.pushUndoStop()}},AH=class e extends S{static#e=this.ID=`editor.action.trimTrailingWhitespace`;constructor(){super({id:e.ID,label:K(1245,`Trim Trailing Whitespace`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:Br(2089,2102),weight:100}})}run(e,t,n){let r=[];n.reason===`auto-save`&&(r=(t.getSelections()||[]).map(e=>new H(e.positionLineNumber,e.positionColumn)));let i=t.getSelection();if(i===null)return;let a=e.get(xl),o=t.getModel(),s=a.getValue(`files.trimTrailingWhitespaceInRegexAndStrings`,{overrideIdentifier:o?.getLanguageId(),resource:o?.uri}),c=new oH(i,r,s);t.pushUndoStop(),t.executeCommands(this.id,[c]),t.pushUndoStop()}},jH=class extends S{constructor(){super({id:`editor.action.deleteLines`,label:K(1246,`Delete Line`),precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),r=t.getModel();if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let i=0,a=[],o=[];for(let e=0,t=n.length;e<t;e++){let t=n[e],s=t.startLineNumber,c=t.endLineNumber,l=1,u=r.getLineMaxColumn(c);c<r.getLineCount()?(c+=1,u=1):s>1&&(--s,l=r.getLineMaxColumn(s)),a.push(un.replace(new X(s,l,c,u),``)),o.push(new X(s-i,t.positionColumn,s-i,t.positionColumn)),i+=t.endLineNumber-t.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,a,o),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&e.endColumn===1&&--t,{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}});t.sort((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber);let n=[],r=t[0];for(let e=1;e<t.length;e++)r.endLineNumber+1>=t[e].startLineNumber?r.endLineNumber=t[e].endLineNumber:(n.push(r),r=t[e]);return n.push(r),n}},MH=class extends S{constructor(){super({id:`editor.action.indentLines`,label:K(1247,`Indent Line`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:2142,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Ym.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}},NH=class extends S{constructor(){super({id:`editor.action.outdentLines`,label:K(1248,`Outdent Line`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:2140,weight:100}})}run(e,t){Vs.Outdent.runEditorCommand(e,t,null)}},PH=class extends S{constructor(){super({id:`editor.action.insertLineBefore`,label:K(1249,`Insert Line Above`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:3075,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,qe.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}},FH=class extends S{constructor(){super({id:`editor.action.insertLineAfter`,label:K(1250,`Insert Line Below`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:2051,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,qe.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}},IH=class extends S{run(e,t){if(!t.hasModel())return;let n=t.getSelection(),r=this._getRangesToDelete(t),i=[];for(let e=0,t=r.length-1;e<t;e++){let t=r[e],n=r[e+1];T.intersectRanges(t,n)===null?i.push(t):r[e+1]=T.plusRange(t,n)}i.push(r[r.length-1]);let a=this._getEndCursorState(n,i),o=i.map(e=>un.replace(e,``));t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}},LH=class extends IH{constructor(){super({id:`deleteAllLeft`,label:K(1251,`Delete All Left`),precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,r=[],i=0;return t.forEach(t=>{let a;if(t.endColumn===1&&i>0){let e=t.startLineNumber-i;a=new X(e,t.startColumn,e,t.startColumn)}else a=new X(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);i+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?n=a:r.push(a)}),n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,r=e.getModel();return r===null?[]:(n.sort(T.compareRangesUsingStarts),n=n.map(e=>{if(e.isEmpty())if(e.startColumn===1){let t=Math.max(1,e.startLineNumber-1);return new T(t,e.startLineNumber===1?1:r.getLineLength(t)+1,e.startLineNumber,1)}else return new T(e.startLineNumber,1,e.startLineNumber,e.startColumn);else return new T(e.startLineNumber,1,e.endLineNumber,e.endColumn)}),n)}},RH=class extends IH{constructor(){super({id:`deleteAllRight`,label:K(1252,`Delete All Right`),precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=new X(a.startLineNumber-0,a.startColumn,a.startLineNumber-0,a.startColumn);a.intersectRanges(e)?n=o:r.push(o)}return n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let r=n.map(e=>{if(e.isEmpty()){let n=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===n?new T(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new T(e.startLineNumber,e.startColumn,e.startLineNumber,n)}return e});return r.sort(T.compareRangesUsingStarts),r}},zH=class extends S{constructor(){super({id:`editor.action.joinLines`,label:K(1253,`Join Lines`),precondition:J.writable,kbOpts:{kbExpr:J.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getSelection();if(r===null)return;n.sort(T.compareRangesUsingStarts);let i=[],a=n.reduce((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(r.equalsSelection(e)&&(r=t),t):t.startLineNumber>e.endLineNumber+1?(i.push(e),t):new X(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(i.push(e),t):new X(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn));i.push(a);let o=t.getModel();if(o===null)return;let s=[],c=[],l=r,u=0;for(let e=0,t=i.length;e<t;e++){let t=i[e],n=t.startLineNumber,a=0,d,f,p=o.getLineLength(t.endLineNumber)-t.endColumn;if(t.isEmpty()||t.startLineNumber===t.endLineNumber){let e=t.getStartPosition();e.lineNumber<o.getLineCount()?(d=n+1,f=o.getLineMaxColumn(d)):(d=e.lineNumber,f=o.getLineMaxColumn(e.lineNumber))}else d=t.endLineNumber,f=o.getLineMaxColumn(d);let m=o.getLineContent(n);for(let e=n+1;e<=d;e++){let t=o.getLineContent(e),n=o.getLineFirstNonWhitespaceColumn(e);if(n>=1){let e=!0;m===``&&(e=!1),e&&(m.charAt(m.length-1)===` `||m.charAt(m.length-1)===`	`)&&(e=!1,m=m.replace(/[\s\uFEFF\xA0]+$/g,` `));let r=t.substr(n-1);m+=(e?` `:``)+r,a=e?r.length+1:r.length}else a=0}let h=new T(n,1,d,f);if(!h.isEmpty()){let e;t.isEmpty()?(s.push(un.replace(h,m)),e=new X(h.startLineNumber-u,m.length-a+1,n-u,m.length-a+1)):t.startLineNumber===t.endLineNumber?(s.push(un.replace(h,m)),e=new X(t.startLineNumber-u,t.startColumn,t.endLineNumber-u,t.endColumn)):(s.push(un.replace(h,m)),e=new X(t.startLineNumber-u,t.startColumn,t.startLineNumber-u,m.length-p)),T.intersectRanges(h,r)===null?c.push(e):l=e}u+=h.endLineNumber-h.startLineNumber}c.unshift(l),t.pushUndoStop(),t.executeEdits(this.id,s,c),t.pushUndoStop()}},BH=class extends S{constructor(){super({id:`editor.action.transpose`,label:K(1254,`Transpose Characters around the Cursor`),precondition:J.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getModel();if(r===null)return;let i=[];for(let e=0,t=n.length;e<t;e++){let t=n[e];if(!t.isEmpty())continue;let a=t.getStartPosition(),o=r.getLineMaxColumn(a.lineNumber);if(a.column>=o){if(a.lineNumber===r.getLineCount())continue;let e=new T(a.lineNumber,Math.max(1,a.column-1),a.lineNumber+1,1),t=r.getValueInRange(e).split(``).reverse().join(``);i.push(new fd(new X(a.lineNumber,Math.max(1,a.column-1),a.lineNumber+1,1),t))}else{let e=new T(a.lineNumber,Math.max(1,a.column-1),a.lineNumber,a.column+1),t=r.getValueInRange(e).split(``).reverse().join(``);i.push(new Ce(e,t,new X(a.lineNumber,a.column+1,a.lineNumber,a.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},VH=class extends S{run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getModel();if(r===null)return;let i=t.getOption(147),a=[];for(let e of n)if(e.isEmpty()){let n=e.getStartPosition(),o=t.getConfiguredWordAtPosition(n);if(!o)continue;let s=new T(n.lineNumber,o.startColumn,n.lineNumber,o.endColumn),c=r.getValueInRange(s);a.push(un.replace(s,this._modifyText(c,i)))}else{let t=r.getValueInRange(e);a.push(un.replace(e,this._modifyText(t,i)))}t.pushUndoStop(),t.executeEdits(this.id,a),t.pushUndoStop()}},HH=class extends VH{constructor(){super({id:`editor.action.transformToUppercase`,label:K(1255,`Transform to Uppercase`),precondition:J.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}},UH=class extends VH{constructor(){super({id:`editor.action.transformToLowercase`,label:K(1256,`Transform to Lowercase`),precondition:J.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}},WH=class{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}},GH=class e extends VH{static#e=this.titleBoundary=new WH(`(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}`,`gmu`);constructor(){super({id:`editor.action.transformToTitlecase`,label:K(1257,`Transform to Title Case`),precondition:J.writable})}_modifyText(t,n){let r=e.titleBoundary.get();return r?t.toLocaleLowerCase().replace(r,e=>e.toLocaleUpperCase()):t}},KH=class e extends VH{static#e=this.caseBoundary=new WH(`(\\p{Ll})(\\p{Lu})`,`gmu`);static#t=this.singleLetters=new WH(`(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})`,`gmu`);constructor(){super({id:`editor.action.transformToSnakecase`,label:K(1258,`Transform to Snake Case`),precondition:J.writable})}_modifyText(t,n){let r=e.caseBoundary.get(),i=e.singleLetters.get();return!r||!i?t:t.replace(r,`$1_$2`).replace(i,`$1_$2$3`).toLocaleLowerCase()}},qH=class e extends VH{static#e=this.wordBoundary=new WH(`[_\\s-]`,`gm`);static#t=this.validWordStart=new WH(`^(\\p{Lu}[^\\p{Lu}])`,`gmu`);constructor(){super({id:`editor.action.transformToCamelcase`,label:K(1259,`Transform to Camel Case`),precondition:J.writable})}_modifyText(t,n){let r=e.wordBoundary.get(),i=e.validWordStart.get();if(!r||!i)return t;let a=t.split(r);return a.shift()?.replace(i,e=>e.toLocaleLowerCase())+a.map(e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1)).join(``)}},JH=class e extends VH{static#e=this.wordBoundary=new WH(`[_\\s-]`,`gm`);static#t=this.wordBoundaryToMaintain=new WH(`(?<=\\.)`,`gm`);constructor(){super({id:`editor.action.transformToPascalcase`,label:K(1260,`Transform to Pascal Case`),precondition:J.writable})}_modifyText(t,n){let r=e.wordBoundary.get(),i=e.wordBoundaryToMaintain.get();return!r||!i?t:t.split(i).map(e=>e.split(r)).flat().map(e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1)).join(``)}},YH=class e extends VH{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(e=>e.isSupported())}static#e=this.caseBoundary=new WH(`(\\p{Ll})(\\p{Lu})`,`gmu`);static#t=this.singleLetters=new WH(`(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})`,`gmu`);static#n=this.underscoreBoundary=new WH(`(\\S)(_)(\\S)`,`gm`);constructor(){super({id:`editor.action.transformToKebabcase`,label:K(1261,`Transform to Kebab Case`),precondition:J.writable})}_modifyText(t,n){let r=e.caseBoundary.get(),i=e.singleLetters.get(),a=e.underscoreBoundary.get();return!r||!i||!a?t:t.replace(a,`$1-$3`).replace(r,`$1-$2`).replace(i,`$1-$2`).toLocaleLowerCase()}},D(yH),D(bH),D(xH),D(CH),D(wH),D(EH),D(DH),D(OH),D(AH),D(jH),D(MH),D(NH),D(PH),D(FH),D(LH),D(RH),D(zH),D(BH),D(HH),D(UH),D(kH),KH.caseBoundary.isSupported()&&KH.singleLetters.isSupported()&&D(KH),qH.wordBoundary.isSupported()&&D(qH),JH.wordBoundary.isSupported()&&D(JH),GH.titleBoundary.isSupported()&&D(GH),YH.isSupported()&&D(YH)})),ZH=t((()=>{}));function QH(e,t,n,r){return Qo(e.ordered(t).map(e=>async()=>{try{return await e.provideLinkedEditingRanges(t,n,r)}catch(e){Jc(e);return}}),e=>!!e&&Xf(e?.ranges))}var $H,eU,tU,nU,rU,iU,aU,oU=t((()=>{sn(),O(),wu(),Ao(),M(),N(),q(),Ga(),xd(),v(),ff(),Su(),_(),yc(),md(),oo(),P(),C(),yu(),Ei(),tf(),em(),ZH(),$H=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},eU=function(e,t){return function(n,r){t(n,r,e)}},nU=new De(`LinkedEditingInputVisible`,!1),rU=`linked-editing-decoration`,iU=class extends z{static#e=tU=this;static#t=this.ID=`editor.contrib.linkedEditing`;static#n=this.DECORATION=L.register({description:`linked-editing`,stickiness:0,className:rU});static get(e){return e.getContribution(tU.ID)}constructor(e,t,n,r,i){super(),this.languageConfigurationService=r,this._syncRangesToken=0,this._localToDispose=this._register(new I),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=nU.bindTo(t),this._debounceInformation=i.for(this._providers,`Linked Editing`,{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new I),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(78)||e.hasChanged(105))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){let t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(78)||this._editor.getOption(105))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(mf.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));let r=new Io(this._debounceInformation.get(t)),i=()=>{this._rangeUpdateTriggerPromise=r.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(t))},a=new Io(0),o=e=>{this._rangeSyncTriggerPromise=a.trigger(()=>this._syncRanges(e))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{i()})),this._localToDispose.add(this._editor.onDidChangeModelContent(e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){let t=this._currentDecorations.getRange(0);if(t&&e.changes.every(e=>t.intersectRanges(e.range))){o(this._syncRangesToken);return}}i()})),this._localToDispose.add({dispose:()=>{r.dispose(),a.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;let t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();let r=t.getValueInRange(n);if(this._currentWordPattern){let e=r.match(this._currentWordPattern);if((e?e[0].length:0)!==r.length)return this.clearRanges()}let i=[];for(let e=1,n=this._currentDecorations.length;e<n;e++){let n=this._currentDecorations.getRange(e);if(n)if(n.startLineNumber!==n.endLineNumber)i.push({range:n,text:r});else{let e=t.getValueInRange(n),a=r,o=n.startColumn,s=n.endColumn,c=uu(e,a);o+=c,e=e.substr(c),a=a.substr(c);let l=ql(e,a);s-=l,e=e.substr(0,e.length-l),a=a.substr(0,a.length-l),(o!==s||a.length!==0)&&i.push({range:new T(n.startLineNumber,o,n.endLineNumber,s),text:a})}}if(i.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;let e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits(`linkedEditing`,i),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}let t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}let n=this._editor.getModel(),r=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){let e=this._currentDecorations.getRange(0);if(e&&e.containsPosition(t))return}}this._currentRequestPosition?.equals(t)||this._currentDecorations.getRange(0)?.containsPosition(t)||this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=r;let i=this._currentRequestCts=new Zd;try{let e=new vd(!1),a=await QH(this._providers,n,t,i.token);if(this._debounceInformation.update(n,e.elapsed()),i!==this._currentRequestCts||(this._currentRequestCts=null,r!==n.getVersionId()))return;let o=[];a?.ranges&&(o=a.ranges),this._currentWordPattern=a?.wordPattern||this._languageWordPattern;let s=!1;for(let e=0,n=o.length;e<n;e++)if(T.containsPosition(o[e],t)){if(s=!0,e!==0){let t=o[e];o.splice(e,1),o.unshift(t)}break}if(!s){this.clearRanges();return}let c=o.map(e=>({range:e,options:tU.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(c),this._syncRangesToken++}catch(e){_d(e)||$p(e),(this._currentRequestCts===i||!this._currentRequestCts)&&this.clearRanges()}}},iU=tU=$H([eU(1,bh),eU(2,V),eU(3,yn),eU(4,Vp)],iU),aU=class extends S{constructor(){super({id:`editor.action.linkedEditing`,label:K(1263,`Start Linked Editing`),precondition:b.and(J.writable,J.hasRenameProvider),kbOpts:{kbExpr:J.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){let n=e.get(ec),[r,i]=Array.isArray(t)&&t||[void 0,void 0];return Fc.isUri(r)&&H.isIPosition(i)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(e=>{e&&(e.setPosition(i),e.invokeWithinContext(t=>(this.reportTelemetry(t,e),this.run(t,e))))},$p):super.runCommand(e,t)}run(e,t){let n=iU.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}},E(new(dn.bindToContribution(iU.get))({id:`cancelLinkedEditingInput`,precondition:nU,handler:e=>e.clearRanges(),kbOpts:{kbExpr:J.editorTextFocus,weight:199,primary:9,secondary:[1033]}})),Y(`editor.linkedEditingBackground`,{dark:_o.fromHex(`#f00`).transparent(.3),light:_o.fromHex(`#f00`).transparent(.3),hcDark:_o.fromHex(`#f00`).transparent(.3),hcLight:_o.white},A(1262,`Background color when the editor auto renames on type.`)),se(`_executeLinkedEditingProvider`,(e,t,n)=>{let{linkedEditingRangeProvider:r}=e.get(V);return QH(r,t,n,W.None)}),k(iU.ID,iU,1),D(aU)})),sU=t((()=>{}));async function cU(e,t,n){let r=[],i=e.ordered(t).reverse().map(async(e,i)=>{try{let a=await e.provideLinks(t,n);a&&(r[i]=[a,e])}catch(e){Jc(e)}});await Promise.all(i);let a=new uU(Oh(r));return n.isCancellationRequested&&(a.dispose(),a=uU.Empty),a}var lU,uU,dU=t((()=>{sn(),wu(),M(),q(),lr(),xd(),_(),Yd(),jo(),yu(),lU=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink==`function`?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(Error(`missing`)))):Promise.reject(Error(`missing`))}},uU=class e{static#e=this.Empty=new e([]);constructor(t){this._disposables=new I;let n=[];for(let[r,i]of t){let t=r.links.map(e=>new lU(e,i));n=e._union(n,t),_c(r)&&(this._disposables??=new I,this._disposables.add(r))}this.links=n}dispose(){this._disposables?.dispose(),this.links.length=0}static _union(e,t){let n=[],r,i,a,o;for(r=0,a=0,i=e.length,o=t.length;r<i&&a<o;){let i=e[r],o=t[a];if(T.areIntersectingOrTouching(i.range,o.range)){r++;continue}T.compareRangesUsingStarts(i.range,o.range)<0?(n.push(i),r++):(n.push(o),a++)}for(;r<i;r++)n.push(e[r]);for(;a<o;a++)n.push(t[a]);return n}},hn.registerCommand(`_executeLinkProvider`,async(e,...t)=>{let[n,r]=t;en(n instanceof Fc),typeof r!=`number`&&(r=0);let{linkProvider:i}=e.get(V),a=e.get(Ip).getModel(n);if(!a)return[];let o=await cU(i,a,W.None);if(!o)return[];for(let e=0;e<Math.min(r,o.links.length);e++)await o.links[e].resolve(W.None);let s=o.links.slice(0);return o.dispose(),s})}));function fU(e,t){let n=e.url&&/^command:/i.test(e.url.toString()),r=e.tooltip?e.tooltip:n?A(1266,`Execute command`):A(1267,`Follow link`),i=t?Sh?A(1268,`cmd + click`):A(1269,`ctrl + click`):Sh?A(1270,`option + click`):A(1271,`alt + click`);if(e.url){let t=``;if(/^command:/i.test(e.url.toString())){let n=e.url.toString().match(/^command:([^?#]+)/);if(n){let e=n[1];t=A(1272,`Execute command {0}`,e)}}return new Af(``,!0).appendLink(e.url.toString(!0).replace(/ /g,`%20`),r,t).appendMarkdown(` (${i})`)}else return new Af().appendText(`${r} (${i})`)}var pU,mU,hU,gU,_U,vU,yU,bU=t((()=>{O(),wu(),M(),Fd(),q(),ic(),Rt(),Tl(),em(),xd(),sU(),v(),md(),tf(),yu(),cC(),dU(),P(),up(),Wu(),pU=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},mU=function(e,t){return function(n,r){t(n,r,e)}},gU=class extends z{static#e=hU=this;static#t=this.ID=`editor.linkDetector`;static get(e){return e.getContribution(hU.ID)}constructor(e,t,n,r,i){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=r,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=i.for(this.providers,`Links`,{min:1e3,max:4e3}),this.computeLinks=this._register(new rn(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;let a=this._register(new sC(e));this._register(a.onMouseMoveOrRelevantKeyDown(([e,t])=>{this._onEditorMouseMove(e,t)})),this._register(a.onExecute(e=>{this.onEditorMouseUp(e)})),this._register(a.onCancel(e=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(e=>{e.hasChanged(79)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(e=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(e=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(e=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(e=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(79))return;let e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&=(this.activeLinksList.dispose(),null),this.computePromise=Zn(t=>cU(this.providers,e,t));try{let t=new vd(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(e){$p(e)}finally{this.computePromise=null}}}updateDecorations(e){let t=this.editor.getOption(86)===`altKey`,n=[],r=Object.keys(this.currentOccurrences);for(let e of r){let t=this.currentOccurrences[e];n.push(t.decorationId)}let i=[];if(e)for(let n of e)i.push(vU.decoration(n,t));this.editor.changeDecorations(t=>{let r=t.deltaDecorations(n,i);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let t=0,n=r.length;t<n;t++){let n=new vU(e[t],r[t]);this.currentOccurrences[n.decorationId]=n}})}_onEditorMouseMove(e,t){let n=this.editor.getOption(86)===`altKey`;if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();let t=this.getLinkOccurrence(e.target.position);t&&this.editor.changeDecorations(e=>{t.activate(e,n),this.activeLinkDecorationId=t.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){let e=this.editor.getOption(86)===`altKey`;if(this.activeLinkDecorationId){let t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;let t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;let{link:r}=e;r.resolve(W.None).then(e=>{if(typeof e==`string`&&this.editor.hasModel()){let t=this.editor.getModel().uri;if(t.scheme===Du.file&&e.startsWith(`${Du.file}:`)){let n=Fc.parse(e);if(n.scheme===Du.file){let r=iu(n),i=null;r.startsWith(`/./`)||r.startsWith(`\\.\\`)?i=`.${r.substr(1)}`:(r.startsWith(`//./`)||r.startsWith(`\\\\.\\`))&&(i=`.${r.substr(2)}`),i&&(e=Md(t,i))}}}return this.openerService.open(e,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},e=>{let t=e instanceof Error?e.message:e;t===`invalid`?this.notificationService.warn(A(1264,`Failed to open this link because it is not well-formed: {0}`,r.url.toString())):t===`missing`?this.notificationService.warn(A(1265,`Failed to open this link because its target is missing.`)):$p(e)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;let t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(let e of t){let t=this.currentOccurrences[e.id];if(t)return t}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){this.computeLinks.cancel(),this.activeLinksList&&=(this.activeLinksList?.dispose(),null),this.computePromise&&=(this.computePromise.cancel(),null)}dispose(){super.dispose(),this.stop()}},gU=hU=pU([mU(1,_e),mU(2,Hp),mU(3,V),mU(4,Vp)],gU),_U={general:L.register({description:`detected-link`,stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:`detected-link`}),active:L.register({description:`detected-link-active`,stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:`detected-link-active`})},vU=class e{static decoration(t,n){return{range:t.range,options:e._getOptions(t,n,!1)}}static _getOptions(e,t,n){let r={...n?_U.active:_U.general};return r.hoverMessage=fU(e,t),r}constructor(e,t){this.link=e,this.decorationId=t}activate(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!0))}deactivate(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!1))}},yU=class extends S{constructor(){super({id:`editor.action.openLink`,label:K(1273,`Open Link`),precondition:void 0})}run(e,t){let n=gU.get(t);if(!n||!t.hasModel())return;let r=t.getSelections();for(let e of r){let t=n.getLinkOccurrence(e.getEndPosition());t&&n.openLinkOccurrence(t,!1)}}},k(gU.ID,gU,1),D(yU)})),xU,SU=t((()=>{q(),v(),xU=class extends z{static#e=this.ID=`editor.contrib.longLinesHelper`;constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(e=>{let t=this._editor.getOption(132);t>=0&&e.target.type===6&&e.target.position.column>=t&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}},k(xU.ID,xU,2)})),CU=t((()=>{}));function wU(e,t,n){let r=Cc(`pos`,t);return n.add(ch(e,`mousemove`,e=>{r.set(new Rm(e.pageX,e.pageY),void 0)})),r}function TU(e){return{scrollLeft:e.x,scrollTop:e.y}}var EU,DU=t((()=>{y(),q(),ls(),Na(),Ya(),wM(),tr(),CU(),EU=class extends z{static#e=this.ID=`editor.contrib.middleScroll`;constructor(e){super(),this._editor=e;let t=Qe(this._editor),n=t.getOption(170);this._register(Xl(e=>{if(!n.read(e))return;let r=t.domNode.read(e);if(!r)return;let i=e.store.add(ph(`scrollingSession`,void 0));e.store.add(this._editor.onMouseDown(e=>{if(i.get()){i.set(void 0,void 0);return}if(!e.event.middleButton)return;e.event.stopPropagation(),e.event.preventDefault();let t=new I,n=new Rm(e.event.posx,e.event.posy),a=wU(Ni(r),n,t).map(e=>e.subtract(n).withThreshold(5)),o=r.getBoundingClientRect(),s=new Rm(n.x-o.left,n.y-o.top);i.set({mouseDeltaAfterThreshold:a,initialMousePosInEditor:s,didScroll:!1,dispose:()=>t.dispose()},void 0),t.add(this._editor.onMouseUp(e=>{let t=i.get();t&&t.didScroll&&i.set(void 0,void 0)})),t.add(this._editor.onKeyDown(e=>{i.set(void 0,void 0)}))})),e.store.add(Xl(e=>{let t=i.read(e);if(!t)return;let n=Date.now();e.store.add(Xl(e=>{CM.instance.invalidateOnNextAnimationFrame(e);let r=Date.now(),i=r-n;n=r;let a=t.mouseDeltaAfterThreshold.get(),o=i/32,s=a.scale(o),c=new Rm(this._editor.getScrollLeft(),this._editor.getScrollTop());this._editor.setScrollPosition(TU(c.add(s))),s.isZero()||(t.didScroll=!0)}));let a=G(e=>{let n=t.mouseDeltaAfterThreshold.read(e),r=``;return r+=n.y<0?`n`:n.y>0?`s`:``,r+=n.x<0?`w`:n.x>0?`e`:``,r});e.store.add(Xl(e=>{r.setAttribute(`data-scroll-direction`,a.read(e))}))}));let a=e.store.add(w.div({class:[`scroll-editor-on-middle-click-dot`,i.map(e=>e?``:`hidden`)],style:{left:i.map(e=>e?e.initialMousePosInEditor.x:0),top:i.map(e=>e?e.initialMousePosInEditor.y:0)}}).toDisposableLiveElement());e.store.add(Zf(r,a.element)),e.store.add(Xl(e=>{let t=i.read(e);r.classList.toggle(`scroll-editor-on-middle-click-editor`,!!t)}))}))}}})),OU=t((()=>{v(),DU(),k(EU.ID,EU,2)})),kU=t((()=>{}));function AU(e){return e===Yl.Write?LU:e===Yl.Text?RU:VU}function jU(e){return e?BU:zU}var MU,NU,PU,FU,IU,LU,RU,zU,BU,VU,HU=t((()=>{kU(),zf(),md(),Gr(),P(),Ei(),Yf(),MU=Y(`editor.wordHighlightBackground`,{dark:`#575757B8`,light:`#57575740`,hcDark:null,hcLight:null},A(1545,`Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.`),!0),Y(`editor.wordHighlightStrongBackground`,{dark:`#004972B8`,light:`#0e639c40`,hcDark:null,hcLight:null},A(1546,`Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.`),!0),Y(`editor.wordHighlightTextBackground`,MU,A(1547,`Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.`),!0),NU=Y(`editor.wordHighlightBorder`,{light:null,dark:null,hcDark:$u,hcLight:$u},A(1548,`Border color of a symbol during read-access, like reading a variable.`)),Y(`editor.wordHighlightStrongBorder`,{light:null,dark:null,hcDark:$u,hcLight:$u},A(1549,`Border color of a symbol during write-access, like writing to a variable.`)),Y(`editor.wordHighlightTextBorder`,NU,A(1550,`Border color of a textual occurrence for a symbol.`)),PU=Y(`editorOverviewRuler.wordHighlightForeground`,`#A0A0A0CC`,A(1551,`Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.`),!0),FU=Y(`editorOverviewRuler.wordHighlightStrongForeground`,`#C0A0C0CC`,A(1552,`Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.`),!0),IU=Y(`editorOverviewRuler.wordHighlightTextForeground`,za,A(1553,`Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.`),!0),LU=L.register({description:`word-highlight-strong`,stickiness:1,className:`wordHighlightStrong`,overviewRuler:{color:hs(FU),position:Rl.Center},minimap:{color:hs(Qf),position:1}}),RU=L.register({description:`word-highlight-text`,stickiness:1,className:`wordHighlightText`,overviewRuler:{color:hs(IU),position:Rl.Center},minimap:{color:hs(Qf),position:1}}),zU=L.register({description:`selection-highlight-overview`,stickiness:1,className:`selectionHighlight`,overviewRuler:{color:hs(za),position:Rl.Center},minimap:{color:hs(Qf),position:1}}),BU=L.register({description:`selection-highlight`,stickiness:1,className:`selectionHighlight`}),VU=L.register({description:`word-highlight`,stickiness:1,className:`wordHighlight`,overviewRuler:{color:hs(PU),position:Rl.Center},minimap:{color:hs(Qf),position:1}}),$n((e,t)=>{let n=e.getColor(oh);n&&t.addRule(`.monaco-editor .selectionHighlight { background-color: ${n.transparent(.5)}; }`)})}));function UU(e,t){let n=t.filter(t=>!e.find(e=>e.equals(t)));if(n.length>=1){let e=n.map(e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`).join(`, `);El(n.length===1?A(1275,`Cursor added: {0}`,e):A(1276,`Cursors added: {0}`,e))}}function WU(e,t,n){let r=GU(e,t[0],!n);for(let i=1,a=t.length;i<a;i++){let a=t[i];if(a.isEmpty()||r!==GU(e,a,!n))return!1}return!0}function GU(e,t,n){let r=e.getValueInRange(t);return n?r.toLowerCase():r}var KU,qU,JU,YU,XU,ZU,QU,$U,eW,tW,nW,rW,iW,aW,oW,sW,cW,lW,uW,dW,fW,pW,mW=t((()=>{qc(),O(),ni(),q(),v(),Od(),_(),ze(),yc(),rk(),P(),de(),C(),yu(),HU(),F(),KU=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},qU=function(e,t){return function(n,r){t(n,r,e)}},YU=class extends S{constructor(){super({id:`editor.action.insertCursorAbove`,label:K(1285,`Add Cursor Above`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`3_multi`,title:A(1277,`&&Add Cursor Above`),order:2}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);let i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();let a=i.getCursorStates();i.setCursorStates(n.source,3,Hc.addCursorUp(i,a,r)),i.revealTopMostCursor(n.source),UU(a,i.getCursorStates())}},XU=class extends S{constructor(){super({id:`editor.action.insertCursorBelow`,label:K(1286,`Add Cursor Below`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`3_multi`,title:A(1278,`A&&dd Cursor Below`),order:3}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);let i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();let a=i.getCursorStates();i.setCursorStates(n.source,3,Hc.addCursorDown(i,a,r)),i.revealBottomMostCursor(n.source),UU(a,i.getCursorStates())}},ZU=class extends S{constructor(){super({id:`editor.action.insertCursorAtEndOfEachLineSelected`,label:K(1287,`Add Cursors to Line Ends`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`3_multi`,title:A(1279,`Add C&&ursors to Line Ends`),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let r=e.startLineNumber;r<e.endLineNumber;r++){let e=t.getLineMaxColumn(r);n.push(new X(r,e,r,e))}e.endColumn>1&&n.push(new X(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;let n=t.getModel(),r=t.getSelections(),i=t._getViewModel(),a=i.getCursorStates(),o=[];r.forEach(e=>this.getCursorsForSelection(e,n,o)),o.length>0&&t.setSelections(o),UU(a,i.getCursorStates())}},QU=class extends S{constructor(){super({id:`editor.action.addCursorsToBottom`,label:K(1288,`Add Cursors to Bottom`),precondition:void 0})}run(e,t){if(!t.hasModel())return;let n=t.getSelections(),r=t.getModel().getLineCount(),i=[];for(let e=n[0].startLineNumber;e<=r;e++)i.push(new X(e,n[0].startColumn,e,n[0].endColumn));let a=t._getViewModel(),o=a.getCursorStates();i.length>0&&t.setSelections(i),UU(o,a.getCursorStates())}},$U=class extends S{constructor(){super({id:`editor.action.addCursorsToTop`,label:K(1289,`Add Cursors to Top`),precondition:void 0})}run(e,t){if(!t.hasModel())return;let n=t.getSelections(),r=[];for(let e=n[0].startLineNumber;e>=1;e--)r.push(new X(e,n[0].startColumn,e,n[0].endColumn));let i=t._getViewModel(),a=i.getCursorStates();r.length>0&&t.setSelections(r),UU(a,i.getCursorStates())}},eW=class{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}},tW=class e{static create(t,n){if(!t.hasModel())return null;let r=n.getState();if(!t.hasTextFocus()&&r.isRevealed&&r.searchString.length>0)return new e(t,n,!1,r.searchString,r.wholeWord,r.matchCase,null);let i=!1,a,o,s=t.getSelections();s.length===1&&s[0].isEmpty()?(i=!0,a=!0,o=!0):(a=r.wholeWord,o=r.matchCase);let c=t.getSelection(),l,u=null;if(c.isEmpty()){let e=t.getConfiguredWordAtPosition(c.getStartPosition());if(!e)return null;l=e.word,u=new X(c.startLineNumber,e.startColumn,c.startLineNumber,e.endColumn)}else l=t.getModel().getValueInRange(c).replace(/\r\n/g,`
`);return new e(t,n,i,l,a,o,u)}constructor(e,t,n,r,i,a,o){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=r,this.wholeWord=i,this.matchCase=a,this.currentMatch=o}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();return e?new eW(this._editor.getSelections().concat(e),e,0):null}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new eW(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(147):null,!1);return n?new X(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();return e?new eW(this._editor.getSelections().concat(e),e,0):null}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new eW(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(147):null,!1);return n?new X(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();let t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(147):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(147):null,!1,1073741824)}},nW=class e extends z{static#e=this.ID=`editor.contrib.multiCursorController`;static get(t){return t.getContribution(e.ID)}constructor(e){super(),this._sessionDispose=this._register(new I),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){let t=tW.create(this._editor,e);if(!t)return;this._session=t;let n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(e=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(e=>{(e.matchCase||e.wholeWord)&&this._endSession()}))}}_endSession(){this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController&&this._session.findController.getState().change({wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0},!1),this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;let n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new X(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){let t=this._editor.getSelections();if(t.length>1){let n=e.getState().matchCase;if(!WU(this._editor.getModel(),t,n)){let e=this._editor.getModel(),n=[];for(let r=0,i=t.length;r<i;r++)n[r]=this._expandEmptyToWord(e,t[r]);this._editor.setSelections(n);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null,n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){let e=this._editor.getModel();t=n.searchScope?e.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(147):null,!1,1073741824):e.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(147):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){let e=this._editor.getSelection();for(let n=0,r=t.length;n<r;n++){let r=t[n];if(r.range.intersectRanges(e)){t[n]=t[0],t[0]=r;break}}this._setSelections(t.map(e=>new X(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)))}}},rW=class extends S{run(e,t){let n=nW.get(t);if(!n)return;let r=t._getViewModel();if(r){let i=r.getCursorStates(),a=HO.get(t);if(a)this._run(n,a);else{let r=e.get(U).createInstance(HO,t);this._run(n,r),r.dispose()}UU(i,r.getCursorStates())}}},iW=class extends rW{constructor(){super({id:`editor.action.addSelectionToNextFindMatch`,label:K(1290,`Add Selection to Next Find Match`),precondition:void 0,kbOpts:{kbExpr:J.focus,primary:2082,weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`3_multi`,title:A(1280,`Add &&Next Occurrence`),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}},aW=class extends rW{constructor(){super({id:`editor.action.addSelectionToPreviousFindMatch`,label:K(1291,`Add Selection to Previous Find Match`),precondition:void 0,menuOpts:{menuId:g.MenubarSelectionMenu,group:`3_multi`,title:A(1281,`Add P&&revious Occurrence`),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}},oW=class extends rW{constructor(){super({id:`editor.action.moveSelectionToNextFindMatch`,label:K(1292,`Move Last Selection to Next Find Match`),precondition:void 0,kbOpts:{kbExpr:J.focus,primary:Br(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}},sW=class extends rW{constructor(){super({id:`editor.action.moveSelectionToPreviousFindMatch`,label:K(1293,`Move Last Selection to Previous Find Match`),precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}},cW=class extends rW{constructor(){super({id:`editor.action.selectHighlights`,label:K(1294,`Select All Occurrences of Find Match`),precondition:void 0,kbOpts:{kbExpr:J.focus,primary:3114,weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`3_multi`,title:A(1282,`Select All &&Occurrences`),order:7}})}_run(e,t){e.selectAll(t)}},lW=class extends rW{constructor(){super({id:`editor.action.changeAll`,label:K(1295,`Change All Occurrences`),precondition:b.and(J.writable,J.editorTextFocus),kbOpts:{kbExpr:J.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:`1_modification`,order:1.2}})}_run(e,t){e.selectAll(t)}},uW=class{constructor(e,t,n,r,i){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=r,this._cachedFindMatches=null,this._modelVersionId=this._model.getVersionId(),i&&this._model===i._model&&this._searchText===i._searchText&&this._matchCase===i._matchCase&&this._wordSeparators===i._wordSeparators&&this._modelVersionId===i._modelVersionId&&(this._cachedFindMatches=i._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(T.compareRangesUsingStarts)),this._cachedFindMatches}},dW=class extends z{static#e=JU=this;static#t=this.ID=`editor.contrib.selectionHighlighter`;constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(121),this._isEnabledMultiline=e.getOption(123),this._maxLength=e.getOption(122),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new rn(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(121),this._isEnabledMultiline=e.getOption(123),this._maxLength=e.getOption(122)})),this._register(e.onDidChangeCursorSelection(e=>{this._isEnabled&&(e.selection.isEmpty()?e.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(e=>{this._setState(null)})),this._register(e.onDidChangeModelContent(e=>{this._isEnabled&&this.updateSoon.schedule()}));let n=HO.get(e);n&&this._register(n.getState().onFindReplaceStateChange(e=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(JU._createState(this.state,this._isEnabled,this._isEnabledMultiline,this._maxLength,this.editor))}static _createState(e,t,n,r,i){if(!t||!i.hasModel())return null;if(!n){let e=i.getSelection();if(e.startLineNumber!==e.endLineNumber)return null}let a=nW.get(i);if(!a)return null;let o=HO.get(i);if(!o)return null;let s=a.getSession(o);if(!s){let e=i.getSelections();if(e.length>1){let t=o.getState().matchCase;if(!WU(i.getModel(),e,t))return null}s=tW.create(i,o)}if(!s||s.currentMatch||/^[ \t]+$/.test(s.searchText)||r>0&&s.searchText.length>r)return null;let c=o.getState(),l=c.matchCase;if(c.isRevealed){let e=c.searchString;l||(e=e.toLowerCase());let t=s.searchText;if(l||(t=t.toLowerCase()),e===t&&s.matchCase===c.matchCase&&s.wholeWord===c.wholeWord&&!c.isRegex)return null}return new uW(i.getModel(),s.searchText,s.matchCase,s.wholeWord?i.getOption(147):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;let t=this.editor.getModel();if(t.isTooLargeForTokenization())return;let n=this.state.findMatches(),r=this.editor.getSelections();r.sort(T.compareRangesUsingStarts);let i=[];for(let e=0,t=0,a=n.length,o=r.length;e<a;){let a=n[e];if(t>=o)i.push(a),e++;else{let n=T.compareRangesUsingStarts(a,r[t]);n<0?((r[t].isEmpty()||!T.areIntersecting(a,r[t]))&&i.push(a),e++):(n>0||e++,t++)}}let a=this.editor.getOption(89)!==`off`,o=this._languageFeaturesService.documentHighlightProvider.has(t)&&a,s=i.map(e=>({range:e,options:jU(o)}));this._decorations.set(s)}dispose(){this._setState(null),super.dispose()}},dW=JU=KU([qU(1,V)],dW),fW=class extends S{constructor(){super({id:`editor.action.focusNextCursor`,label:K(1296,`Focus Next Cursor`),metadata:{description:A(1283,`Focuses the next cursor`),args:[]},precondition:void 0})}run(e,t,n){if(!t.hasModel())return;let r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();let i=Array.from(r.getCursorStates()),a=i.shift();a&&(i.push(a),r.setCursorStates(n.source,3,i),r.revealPrimaryCursor(n.source,!0),UU(i,r.getCursorStates()))}},pW=class extends S{constructor(){super({id:`editor.action.focusPreviousCursor`,label:K(1297,`Focus Previous Cursor`),metadata:{description:A(1284,`Focuses the previous cursor`),args:[]},precondition:void 0})}run(e,t,n){if(!t.hasModel())return;let r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();let i=Array.from(r.getCursorStates()),a=i.pop();a&&(i.unshift(a),r.setCursorStates(n.source,3,i),r.revealPrimaryCursor(n.source,!0),UU(i,r.getCursorStates()))}},k(nW.ID,nW,4),k(dW.ID,dW,1),D(YU),D(XU),D(ZU),D(iW),D(aW),D(oW),D(sW),D(cW),D(lW),D(QU),D($U),D(fW),D(pW)}));async function hW(e,t,n,r,i){let a=e.ordered(t);for(let e of a)try{let a=await e.provideSignatureHelp(t,n,i,r);if(a)return a}catch(e){Jc(e)}}var gW,_W=t((()=>{wu(),M(),lr(),xd(),Su(),Gr(),yu(),ll(),jo(),C(),gW={Visible:new De(`parameterHintsVisible`,!1),MultipleSignatures:new De(`parameterHintsMultipleSignatures`,!1)},hn.registerCommand(`_executeSignatureHelpProvider`,async(e,...t)=>{let[n,r,i]=t;en(Fc.isUri(n)),en(H.isIPosition(r)),en(typeof i==`string`||!i);let a=e.get(V),o=await e.get(d).createModelReference(n);try{let e=await hW(a.signatureHelpProvider,o.object.textEditorModel,H.lift(r),{triggerKind:Ci.Invoke,isRetrigger:!1,triggerCharacter:i},W.None);return e?(setTimeout(()=>e.dispose(),0),e.value):void 0}finally{o.dispose()}})}));function vW(e,t){switch(t.triggerKind){case Ci.Invoke:return t;case Ci.ContentChange:return e;case Ci.TriggerCharacter:default:return t}}var yW,bW,xW=t((()=>{O(),M(),N(),q(),Vm(),Gr(),_W(),(function(e){e.Default={type:0};class t{constructor(e,t){this.request=e,this.previouslyActiveHints=t,this.type=2}}e.Pending=t;class n{constructor(e){this.hints=e,this.type=1}}e.Active=n})(yW||={}),bW=class e extends z{static#e=this.DEFAULT_DELAY=120;constructor(t,n,r=e.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new j),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=yW.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new su),this.triggerChars=new tt,this.retriggerChars=new tt,this.triggerId=0,this.editor=t,this.providers=n,this.throttledDelayer=new Io(r),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(e=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(e=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(e=>this.onCursorChange(e))),this._register(this.editor.onDidChangeModelContent(e=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(e=>this.onDidType(e))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=yW.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){let n=this.editor.getModel();if(!n||!this.providers.has(n))return;let r=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(r),t).catch($p)}next(){if(this.state.type!==1)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,r=this.editor.getOption(97).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?0:t+1)}previous(){if(this.state.type!==1)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,r=this.editor.getOption(97).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new yW.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){let t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;let r=this._pendingTriggers.reduce(vW);this._pendingTriggers=[];let i={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;let a=this.editor.getModel(),o=this.editor.getPosition();this.state=new yW.Pending(Zn(e=>hW(this.providers,a,o,i,e)),n);try{let t=await this.state.request;return e===this.triggerId?!t||!t.value.signatures||t.value.signatures.length===0?(t?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new yW.Active(t.value),this._lastSignatureHelpResult.value=t,this._onChangedHints.fire(this.state.hints),!0):(t?.dispose(),!1)}catch(t){return e===this.triggerId&&(this.state=yW.Default),$p(t),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();let e=this.editor.getModel();if(e)for(let t of this.providers.ordered(e)){for(let e of t.signatureHelpTriggerCharacters||[])if(e.length){let t=e.charCodeAt(0);this.triggerChars.add(t),this.retriggerChars.add(t)}for(let e of t.signatureHelpRetriggerCharacters||[])e.length&&this.retriggerChars.add(e.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;let t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Ci.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source===`mouse`?this.cancel():this.isTriggered&&this.trigger({triggerKind:Ci.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Ci.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(97).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}})),SW=t((()=>{})),CW,wW,TW,EW,DW,OW,kW,AW=t((()=>{y(),qc(),Ed(),Kn(),N(),q(),Ga(),lr(),SW(),bd(),h(),Si(),_W(),P(),C(),Wu(),Ei(),Ie(),sr(),CW=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},wW=function(e,t){return function(n,r){t(n,r,e)}},EW=R,DW=To(`parameter-hints-next`,B.chevronDown,A(1299,`Icon for show next parameter hint.`)),OW=To(`parameter-hints-previous`,B.chevronUp,A(1300,`Icon for show previous parameter hint.`)),kW=class extends z{static#e=TW=this;static#t=this.ID=`editor.widget.parameterHintsWidget`;constructor(e,t,n,r,i){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new I),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=new dt({editor:e},i,r),this.keyVisible=gW.Visible.bindTo(n),this.keyMultipleSignatures=gW.MultipleSignatures.bindTo(n)}createParameterHintDOMNodes(){let e=EW(`.editor-widget.parameter-hints-widget`),t=x(e,EW(`.phwrapper`));t.tabIndex=-1;let n=x(t,EW(`.controls`)),r=x(n,EW(`.button`+Qt.asCSSSelector(OW))),i=x(n,EW(`.overloads`)),a=x(n,EW(`.button`+Qt.asCSSSelector(DW)));this._register(ch(r,`click`,e=>{au.stop(e),this.previous()})),this._register(ch(a,`click`,e=>{au.stop(e),this.next()}));let o=EW(`.body`),s=new kp(o,{alwaysConsumeMouseWheel:!0});this._register(s),t.appendChild(s.getDomNode());let c=x(o,EW(`.signature`)),l=x(o,EW(`.docs`));e.style.userSelect=`text`,this.domNodes={element:e,signature:c,overloads:i,docs:l,scrollbar:s},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(e=>{this.visible&&this.editor.layoutContentWidget(this)}));let u=()=>{if(!this.domNodes)return;let e=this.editor.getOption(59),t=this.domNodes.element;t.style.fontSize=`${e.fontSize}px`,t.style.lineHeight=`${e.lineHeight/e.fontSize}`,t.style.setProperty(`--vscode-parameterHintsWidget-editorFontFamily`,e.fontFamily),t.style.setProperty(`--vscode-parameterHintsWidget-editorFontFamilyDefault`,Eu.fontFamily)};u(),this._register(mf.chain(this.editor.onDidChangeConfiguration.bind(this.editor),e=>e.filter(e=>e.hasChanged(59)))(u)),this._register(this.editor.onDidLayoutChange(e=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes?.element.classList.add(`visible`)},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes?.element.classList.remove(`visible`),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){if(this.renderDisposeables.clear(),!this.domNodes)return;let t=e.signatures.length>1;this.domNodes.element.classList.toggle(`multiple`,t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText=``,this.domNodes.docs.innerText=``;let n=e.signatures[e.activeSignature];if(!n)return;let r=x(this.domNodes.signature,EW(`.code`)),i=n.parameters.length>0,a=n.activeParameter??e.activeParameter;if(i)this.renderParameters(r,n,a);else{let e=x(r,EW(`span`));e.textContent=n.label}let o=n.parameters[a];if(o?.documentation){let e=EW(`span.documentation`);if(typeof o.documentation==`string`)e.textContent=o.documentation;else{let t=this.renderMarkdownDocs(o.documentation);e.appendChild(t.element)}x(this.domNodes.docs,EW(`p`,{},e))}if(n.documentation!==void 0)if(typeof n.documentation==`string`)x(this.domNodes.docs,EW(`p`,{},n.documentation));else{let e=this.renderMarkdownDocs(n.documentation);x(this.domNodes.docs,e.element)}let s=this.hasDocs(n,o);if(this.domNodes.signature.classList.toggle(`has-docs`,s),this.domNodes.docs.classList.toggle(`empty`,!s),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,`0`)+`/`+e.signatures.length,o){let e=``,t=n.parameters[a];e=Array.isArray(t.label)?n.label.substring(t.label[0],t.label[1]):t.label,t.documentation&&(e+=typeof t.documentation==`string`?`, ${t.documentation}`:`, ${t.documentation.value}`),n.documentation&&(e+=typeof n.documentation==`string`?`, ${n.documentation}`:`, ${n.documentation.value}`),this.announcedLabel!==e&&(Qp(A(1301,`{0}, hint`,e)),this.announcedLabel=e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){let t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{this.domNodes?.scrollbar.scanDomNode()}}));return t.element.classList.add(`markdown-docs`),t}hasDocs(e,t){return!!(t&&typeof t.documentation==`string`&&No(t.documentation).length>0||t&&typeof t.documentation==`object`&&No(t.documentation).value.length>0||e.documentation&&typeof e.documentation==`string`&&No(e.documentation).length>0||e.documentation&&typeof e.documentation==`object`&&No(e.documentation.value).length>0)}renderParameters(e,t,n){let[r,i]=this.getParameterLabelOffsets(t,n),a=document.createElement(`span`);a.textContent=t.label.substring(0,r);let o=document.createElement(`span`);o.textContent=t.label.substring(r,i),o.className=`parameter active`;let s=document.createElement(`span`);s.textContent=t.label.substring(i),x(e,a,o,s)}getParameterLabelOffsets(e,t){let n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){let t=RegExp(`(\\W|^)${Xm(n.label)}(?=\\W|$)`,`g`);t.test(e.label);let r=t.lastIndex-n.label.length;return r>=0?[r,t.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return TW.ID}updateMaxHeight(){if(!this.domNodes)return;let e=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=e;let t=this.domNodes.element.getElementsByClassName(`phwrapper`);t.length&&(t[0].style.maxHeight=e)}},kW=TW=CW([wW(2,bh),wW(3,_e),wW(4,Qi)],kW),Y(`editorHoverWidget.highlightForeground`,Hi,A(1302,`Foreground color of the active item in the parameter hint.`))})),jW,MW,NW,PW,FW,IW,LW,RW=t((()=>{ma(),q(),v(),yc(),Gr(),yu(),xW(),_W(),P(),C(),F(),AW(),jW=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},MW=function(e,t){return function(n,r){t(n,r,e)}},PW=class extends z{static#e=NW=this;static#t=this.ID=`editor.controller.parameterHints`;static get(e){return e.getContribution(NW.ID)}constructor(e,t,n){super(),this.editor=e,this.model=this._register(new bW(e,n.signatureHelpProvider)),this._register(this.model.onChangedHints(e=>{e?(this.widget.value.show(),this.widget.value.render(e)):this.widget.rawValue?.hide()})),this.widget=new Dr(()=>this._register(t.createInstance(kW,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){this.widget.rawValue?.previous()}next(){this.widget.rawValue?.next()}trigger(e){this.model.trigger(e,0)}},PW=NW=jW([MW(1,U),MW(2,V)],PW),FW=class extends S{constructor(){super({id:`editor.action.triggerParameterHints`,label:K(1298,`Trigger Parameter Hints`),precondition:J.hasSignatureHelpProvider,kbOpts:{kbExpr:J.editorTextFocus,primary:3082,weight:100}})}run(e,t){PW.get(t)?.trigger({triggerKind:Ci.Invoke})}},k(PW.ID,PW,2),D(FW),IW=175,LW=dn.bindToContribution(PW.get),E(new LW({id:`closeParameterHints`,precondition:gW.Visible,handler:e=>e.cancel(),kbOpts:{weight:IW,kbExpr:J.focus,primary:9,secondary:[1033]}})),E(new LW({id:`showPrevParameterHint`,precondition:b.and(gW.Visible,gW.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:IW,kbExpr:J.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),E(new LW({id:`showNextParameterHint`,precondition:b.and(gW.Visible,gW.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:IW,kbExpr:J.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))})),zW=t((()=>{}));function BW(e,t){return dp(e,(e,n)=>n===!0?!0:t(e))}var VW,HW=t((()=>{y(),cd(),q(),ls(),Na(),VW=class extends z{static#e=this.ID=`editor.contrib.placeholderText`;constructor(e){super(),this._editor=e,this._editorObs=Qe(this._editor),this._placeholderText=this._editorObs.getOption(99),this._state=Ff({owner:this,equalsFn:ci},e=>{let t=this._placeholderText.read(e);if(t&&this._editorObs.valueIsEmpty.read(e))return{placeholder:t}}),this._shouldViewBeAlive=BW(this,e=>this._state.read(e)?.placeholder!==void 0),this._view=G(e=>{if(!this._shouldViewBeAlive.read(e))return;let t=Lt(`div.editorPlaceholder`);e.store.add(Xl(e=>{let n=this._state.read(e),r=n?.placeholder!==void 0;t.root.style.display=r?`block`:`none`,t.root.innerText=n?.placeholder??``})),e.store.add(Xl(e=>{let n=this._editorObs.layoutInfo.read(e);t.root.style.left=`${n.contentLeft}px`,t.root.style.width=n.contentWidth-n.verticalScrollbarWidth+`px`,t.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),e.store.add(Xl(e=>{t.root.style.fontFamily=this._editorObs.getOption(58).read(e),t.root.style.fontSize=this._editorObs.getOption(61).read(e)+`px`,t.root.style.lineHeight=this._editorObs.getOption(75).read(e)+`px`})),e.store.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:_l(0),position:_l(null),domNode:t.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}}}));function UW(e,t){return class extends t{constructor(){super(...arguments),this._autorun=void 0}init(...t){this._autorun=xm((n,r)=>{let i=Xo(e(),n);r.add(this.instantiationService.createInstance(i,...t))})}dispose(){this._autorun?.dispose()}}}function WW(e){return Zi()?UW(e,JW):e()}var GW,KW,qW,JW,YW=t((()=>{Es(),ds(),ls(),F(),GW=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},KW=function(e,t){return function(n,r){t(n,r,e)}},qW=class{constructor(e){this.instantiationService=e}init(...e){}},JW=class extends qW{constructor(e,t){super(t),this.init(e)}},JW=GW([KW(1,U)],JW)})),XW=t((()=>{zW(),v(),Ro(),P(),Sr(),HW(),YW(),k(VW.ID,WW(()=>VW),0),Y(`editor.placeholder.foreground`,lo,A(1321,`Foreground color of the placeholder text in the editor.`))})),ZW=t((()=>{})),QW,$W,eG,tG,nG,rG,iG,aG=t((()=>{y(),nd(),qc(),Tu(),Sp(),fl(),sn(),O(),wu(),Kn(),N(),q(),em(),lr(),ZW(),Id(),Su(),_(),Gr(),P(),C(),Ki(),$s(),If(),Ei(),Yf(),QW=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$W=function(e,t){return function(n,r){t(n,r,e)}},eG=new De(`renameInputVisible`,!1,A(1373,`Whether the rename input widget is visible`)),new De(`renameInputFocused`,!1,A(1374,`Whether the rename input widget is focused`)),tG=class{constructor(e,t,n,r,i,a){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=r,this._logService=a,this.allowEditorOverflow=!0,this._disposables=new I,this._visibleContextKey=eG.bindTo(i),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new vd,this._inputWithButton=new rG,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(59)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return`__renameInputWidget`}getDomNode(){return this._domNode||(this._domNode=document.createElement(`div`),this._domNode.className=`monaco-editor rename-box`,this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new nG(this._domNode,{fontInfo:this._editor.getOption(59),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{this._renameCandidateListView?.focusedCandidate!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??=this._beforeFirstInputFieldEditSW.elapsed(),this._renameCandidateProvidersCts?.token.isCancellationRequested===!1&&this._renameCandidateProvidersCts.cancel(),this._renameCandidateListView?.clearFocus()})),this._label=document.createElement(`div`),this._label.className=`rename-label`,this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){if(!this._domNode)return;let t=e.getColor(it),n=e.getColor(bt);this._domNode.style.backgroundColor=String(e.getColor(wa)??``),this._domNode.style.boxShadow=t?` 0 0 8px 2px ${t}`:``,this._domNode.style.border=n?`1px solid ${n}`:``,this._domNode.style.color=String(e.getColor(Vo)??``);let r=e.getColor(po);this._inputWithButton.domNode.style.backgroundColor=String(e.getColor(Tn)??``),this._inputWithButton.input.style.backgroundColor=String(e.getColor(Tn)??``),this._inputWithButton.domNode.style.borderWidth=r?`1px`:`0px`,this._inputWithButton.domNode.style.borderStyle=r?`solid`:`none`,this._inputWithButton.domNode.style.borderColor=r?.toString()??`none`}_updateFont(){if(this._domNode===void 0)return;en(this._label!==void 0,`RenameWidget#_updateFont: _label must not be undefined given _domNode is defined`),this._editor.applyFontInfo(this._inputWithButton.input);let e=this._editor.getOption(59);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;let e=ot(this.getDomNode().ownerDocument.body),t=td(this._editor.getDomNode());this._nPxAvailableAbove=this._getTopForPosition()+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;let n=this._editor.getOption(75),{totalHeight:r}=iG.getLayoutInfo({lineHeight:n}),i=this._nPxAvailableBelow>r*6?[2,1]:[1,2];return{position:this._position,preference:i}}beforeRender(){let[e,t]=this._acceptKeybindings;return this._label.innerText=A(1375,`{0} to Rename, {1} to Preview`,this._keybindingService.lookupKeybinding(e)?.getLabel(),this._keybindingService.lookupKeybinding(t)?.getLabel()),this._domNode.style.minWidth=`200px`,null}afterRender(e){if(e===null){this.cancelInput(!0,`afterRender (because position is null)`);return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;en(this._renameCandidateListView),en(this._nPxAvailableAbove!==void 0),en(this._nPxAvailableBelow!==void 0);let t=zr(this._inputWithButton.domNode),n=zr(this._label),r;r=e===2?this._nPxAvailableBelow:this._nPxAvailableAbove,this._renameCandidateListView.layout({height:r-n-t,width:ti(this._inputWithButton.domNode)})}acceptInput(e){this._trace(`invoking acceptInput`),this._currentAcceptInput?.(e)}cancelInput(e,t){this._currentCancelInput?.(e)}focusNextRenameSuggestion(){this._renameCandidateListView?.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){this._renameCandidateListView?.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,n,r,i){let{start:a,end:o}=this._getSelection(e,t);this._renameCts=i;let s=new I;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,r===void 0?this._inputWithButton.button.style.display=`none`:(this._inputWithButton.button.style.display=`flex`,this._requestRenameCandidatesOnce=r,this._requestRenameCandidates(t,!1),s.add(ch(this._inputWithButton.button,`click`,()=>this._requestRenameCandidates(t,!0))),s.add(ch(this._inputWithButton.button,Ul.KEY_DOWN,e=>{let n=new vi(e);(n.equals(3)||n.equals(10))&&(n.stopPropagation(),n.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle(`preview`,n),this._position=new H(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute(`selectionStart`,a.toString()),this._inputWithButton.input.setAttribute(`selectionEnd`,o.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),s.add(qm(()=>{this._renameCts=void 0,i.dispose(!0)})),s.add(qm(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),s.add(qm(()=>this._candidates.clear()));let c=new so;return c.p.finally(()=>{s.dispose(),this._hide()}),this._currentCancelInput=e=>(this._trace(`invoking _currentCancelInput`),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView?.clearCandidates(),c.complete(e),!0),this._currentAcceptInput=e=>{this._trace(`invoking _currentAcceptInput`),en(this._renameCandidateListView!==void 0);let r=this._renameCandidateListView.nCandidates,i,a,o=this._renameCandidateListView.focusedCandidate;if(o===void 0?(this._trace(`using new name from inputField`),i=this._inputWithButton.input.value,a=this._isEditingRenameCandidate?{k:`userEditedRenameSuggestion`}:{k:`inputField`}):(this._trace(`using new name from renameSuggestion`),i=o,a={k:`renameSuggestion`}),i===t||i.trim().length===0){this.cancelInput(!0,`_currentAcceptInput (because newName === value || newName.trim().length === 0)`);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),c.complete({newName:i,wantsPreview:n&&e,stats:{source:a,nRenameSuggestions:r,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},s.add(i.token.onCancellationRequested(()=>this.cancelInput(!0,`cts.token.onCancellationRequested`))),s.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!this._domNode?.ownerDocument.hasFocus(),`editor.onDidBlurEditorWidget`))),this._show(),c.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),en(this._renameCts),this._inputWithButton.buttonState!==`stop`)){this._renameCandidateProvidersCts=new Zd;let n=t?qa.Invoke:qa.Automatic,r=this._requestRenameCandidatesOnce(n,this._renameCandidateProvidersCts.token);if(r.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(r,e,this._renameCts.token)}}_getSelection(e,t){en(this._editor.hasModel());let n=this._editor.getSelection(),r=0,i=t.length;return!T.isEmpty(n)&&!T.spansMultipleLines(n)&&T.containsRange(e,n)&&(r=Math.max(0,n.startColumn-e.startColumn),i=Math.min(e.endColumn,n.endColumn)-e.startColumn),{start:r,end:i}}_show(){this._trace(`invoking _show`),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute(`selectionStart`)),parseInt(this._inputWithButton.input.getAttribute(`selectionEnd`)))},100)}async _updateRenameCandidates(e,t,n){let r=(...e)=>this._trace(`_updateRenameCandidates`,...e);r(`start`);let i=await $i(Promise.allSettled(e),n);if(this._inputWithButton.setSparkleButton(),i===void 0){r(`returning early - received updateRenameCandidates results - undefined`);return}let a=i.flatMap(e=>e.status===`fulfilled`&&Wf(e.value)?e.value:[]);r(`received updateRenameCandidates results - total (unfiltered) ${a.length} candidates.`);let o=Cn(a,e=>e.newSymbolName);r(`distinct candidates - ${o.length} candidates.`);let s=o.filter(({newSymbolName:e})=>e.trim().length>0&&e!==this._inputWithButton.input.value&&e!==t&&!this._candidates.has(e));if(r(`valid distinct candidates - ${a.length} candidates.`),s.forEach(e=>this._candidates.add(e.newSymbolName)),s.length<1){r(`returning early - no valid distinct candidates`);return}r(`setting candidates`),this._renameCandidateListView.setCandidates(s),r(`asking editor to re-layout`),this._editor.layoutContentWidget(this)}_hide(){this._trace(`invoked _hide`),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){let e=this._editor.getVisibleRanges(),t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn(`RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty`),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace(`RenameWidget`,...e)}},tG=QW([$W(2,mr),$W(3,xs),$W(4,bh),$W(5,Fp)],tG),nG=class e{constructor(t,n){this._disposables=new I,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=n.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=n.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement(`div`),this._listContainer.className=`rename-box rename-candidate-list-container`,t.appendChild(this._listContainer),this._listWidget=e._createListWidget(this._listContainer,this._candidateViewHeight,n.fontInfo),this._disposables.add(this._listWidget.onDidChangeFocus(e=>{e.elements.length===1&&n.onFocusChange(e.elements[0].newSymbolName)},this._disposables)),this._disposables.add(this._listWidget.onDidChangeSelection(e=>{e.elements.length===1&&n.onSelectionChange()},this._disposables)),this._disposables.add(this._listWidget.onDidBlur(e=>{this._listWidget.setFocus([])})),this._listWidget.style(Fl({listInactiveFocusForeground:xe,listInactiveFocusBackground:ud}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);let t=this._pickListHeight(this._listWidget.length),n=this._pickListWidth(e);this._listWidget.layout(t,n),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${n}px`,El(A(1376,`Received {0} rename suggestions`,e.length))}clearCandidates(){this._listContainer.style.height=`0px`,this._listContainer.style.width=`0px`,this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;let e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;let t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;let e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();let e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;let e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();let e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}else if(e[0]===0)return this._listWidget.setFocus([]),!1;else{this._listWidget.focusPrevious();let e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){let{totalHeight:e}=iG.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){let t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){let t=Math.ceil(Math.max(...e.map(e=>e.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,n){return new ie(`NewSymbolNameCandidates`,e,new class{getTemplateId(e){return`candidate`}getHeight(e){return t}},[new class{constructor(){this.templateId=`candidate`}renderTemplate(e){return new iG(e,n)}renderElement(e,t,n){n.populate(e)}disposeTemplate(e){e.dispose()}}],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}},rG=class{constructor(){this._buttonHoverContent=``,this._onDidInputChange=new j,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new I}get domNode(){return this._domNode||(this._domNode=document.createElement(`div`),this._domNode.className=`rename-input-with-button`,this._domNode.style.display=`flex`,this._domNode.style.flexDirection=`row`,this._domNode.style.alignItems=`center`,this._inputNode=document.createElement(`input`),this._inputNode.className=`rename-input`,this._inputNode.type=`text`,this._inputNode.style.border=`none`,this._inputNode.setAttribute(`aria-label`,A(1377,`Rename input. Type new name and press Enter to commit.`)),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement(`div`),this._buttonNode.className=`rename-suggestions-button`,this._buttonNode.setAttribute(`tabindex`,`0`),this._buttonGenHoverText=A(1378,`Generate new name suggestions`),this._buttonCancelHoverText=A(1379,`Cancel`),this._buttonHoverContent=this._buttonGenHoverText,this._disposables.add(op().setupDelayedHover(this._buttonNode,()=>({content:this._buttonHoverContent,appearance:{showPointer:!0,compact:!0}}))),this._domNode.appendChild(this._buttonNode),this._disposables.add(ch(this.input,Ul.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(ch(this.input,Ul.KEY_DOWN,e=>{let t=new vi(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(ch(this.input,Ul.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(ch(this.input,Ul.FOCUS,()=>{this.domNode.style.outlineWidth=`1px`,this.domNode.style.outlineStyle=`solid`,this.domNode.style.outlineOffset=`-1px`,this.domNode.style.outlineColor=`var(--vscode-focusBorder)`})),this._disposables.add(ch(this.input,Ul.BLUR,()=>{this.domNode.style.outline=`none`}))),this._domNode}get input(){return en(this._inputNode),this._inputNode}get button(){return en(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){this._buttonState=`sparkle`,this._sparkleIcon??=Nc(B.sparkle),We(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute(`aria-label`,`Generating new name suggestions`),this._buttonHoverContent=this._buttonGenHoverText,this.input.focus()}setStopButton(){this._buttonState=`stop`,this._stopIcon??=Nc(B.stopCircle),We(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute(`aria-label`,`Cancel generating new name suggestions`),this._buttonHoverContent=this._buttonCancelHoverText,this.input.focus()}dispose(){this._disposables.dispose()}},iG=class e{static#e=this._PADDING=2;constructor(t,n){this._domNode=document.createElement(`div`),this._domNode.className=`rename-box rename-candidate`,this._domNode.style.display=`flex`,this._domNode.style.columnGap=`5px`,this._domNode.style.alignItems=`center`,this._domNode.style.height=`${n.lineHeight}px`,this._domNode.style.padding=`${e._PADDING}px`;let r=document.createElement(`div`);r.style.display=`flex`,r.style.alignItems=`center`,r.style.width=r.style.height=`${n.lineHeight*.8}px`,this._domNode.appendChild(r),this._icon=Nc(B.sparkle),this._icon.style.display=`none`,r.appendChild(this._icon),this._label=document.createElement(`div`),jf(this._label,n),this._domNode.appendChild(this._label),t.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){let t=!!e.tags?.includes(Im.AIGenerated);this._icon.style.display=t?`inherit`:`none`}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:t}){return{totalHeight:t+e._PADDING*2}}dispose(){}}}));async function oG(e,t,n,r){let i=new uG(t,n,e),a=await i.resolveRenameLocation(W.None);return a?.rejectReason?{edits:[],rejectReason:a.rejectReason}:i.provideRenameEdits(r,W.None)}var sG,cG,lG,uG,dG,fG,pG,mG=t((()=>{qc(),O(),wu(),M(),Fd(),q(),lr(),xd(),P(),de(),Kf(),C(),F(),$s(),up(),yo(),An(),v(),Eh(),ff(),Su(),_(),yc(),Gr(),yu(),ir(),ah(),In(),i_(),aG(),sG=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},cG=function(e,t){return function(n,r){t(n,r,e)}},uG=class{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){let t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){let n=this._providers[this._providerRenameIdx];if(!n.resolveRenameLocation)break;let r=await n.resolveRenameLocation(this.model,this.position,e);if(r){if(r.rejectReason){t.push(r.rejectReason);continue}return r}}this._providerRenameIdx=0;let n=this.model.getWordAtPosition(this.position);return n?{range:new T(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:T.fromPositions(this.position),text:``,rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,n,r){let i=this._providers[t];if(!i)return{edits:[],rejectReason:n.join(`
`)};let a=await i.provideRenameEdits(this.model,this.position,e,r);if(a){if(a.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(a.rejectReason),r)}else return this._provideRenameEdits(e,t+1,n.concat(A(1362,`No result.`)),r);return a}},dG=class{static#e=lG=this;static#t=this.ID=`editor.contrib.renameController`;static get(e){return e.getContribution(lG.ID)}constructor(e,t,n,r,i,a,o,s){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=r,this._progressService=i,this._logService=a,this._configService=o,this._languageFeaturesService=s,this._disposableStore=new I,this._cts=new Zd,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(tG,this.editor,[`acceptRenameInput`,`acceptRenameInputWithPreview`]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){let e=this._logService.trace.bind(this._logService,`[rename]`);if(this._cts.dispose(!0),this._cts=new Zd,!this.editor.hasModel()){e(`editor has no model`);return}let t=this.editor.getPosition(),n=new uG(this.editor.getModel(),t,this._languageFeaturesService.renameProvider);if(!n.hasProvider()){e(`skeleton has no provider`);return}let r=new Ri(this.editor,5,void 0,this._cts.token),i;try{e(`resolving rename location`);let t=n.resolveRenameLocation(r.token);this._progressService.showWhile(t,250),i=await t,e(`resolved rename location`)}catch(n){n instanceof pf?e(`resolve rename location cancelled`,JSON.stringify(n,null,`	`)):(e(`resolve rename location failed`,n instanceof Error?n:JSON.stringify(n,null,`	`)),(typeof n==`string`||Gl(n))&&n_.get(this.editor)?.showMessage(n||A(1363,`An unknown error occurred while resolving rename location`),t));return}finally{r.dispose()}if(!i){e(`returning early - no loc`);return}if(i.rejectReason){e(`returning early - rejected with reason: ${i.rejectReason}`,i.rejectReason),n_.get(this.editor)?.showMessage(i.rejectReason,t);return}if(r.token.isCancellationRequested){e(`returning early - cts1 cancelled`);return}let a=new Ri(this.editor,5,i.range,this._cts.token),o=this.editor.getModel(),s=this._languageFeaturesService.newSymbolNamesProvider.all(o),c=await Promise.all(s.map(async e=>[e,await e.supportsAutomaticNewSymbolNamesTriggerKind??!1])),l=(e,t)=>{let n=c.slice();return e===qa.Automatic&&(n=n.filter(([e,t])=>t)),n.map(([n])=>n.provideNewSymbolNames(o,i.range,e,t))};e(`creating rename input field and awaiting its result`);let u=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,`editor.rename.enablePreview`),d=await this._renameWidget.getInput(i.range,i.text,u,s.length>0?l:void 0,a);if(e(`received response from rename input field`),typeof d==`boolean`){e(`returning early - rename input field response - ${d}`),d&&this.editor.focus(),a.dispose();return}this.editor.focus(),e(`requesting rename edits`);let f=$i(n.provideRenameEdits(d.newName,a.token),a.token).then(async t=>{if(!t){e(`returning early - no rename edits result`);return}if(!this.editor.hasModel()){e(`returning early - no model after rename edits are provided`);return}if(t.rejectReason){e(`returning early - rejected with reason: ${t.rejectReason}`),this._notificationService.info(t.rejectReason);return}this.editor.setSelection(T.fromPositions(this.editor.getSelection().getPosition())),e(`applying edits`),this._bulkEditService.apply(t,{editor:this.editor,showPreview:d.wantsPreview,label:A(1364,`Renaming '{0}' to '{1}'`,i?.text,d.newName),code:`undoredo.rename`,quotableLabel:A(1365,`Renaming {0} to {1}`,i?.text,d.newName),respectAutoSaveConfig:!0,reason:dm.rename()}).then(t=>{e(`edits applied`),t.ariaSummary&&Qp(A(1366,`Successfully renamed '{0}' to '{1}'. Summary: {2}`,i.text,d.newName,t.ariaSummary))}).catch(t=>{e(`error when applying edits ${JSON.stringify(t,null,`	`)}`),this._notificationService.error(A(1367,`Rename failed to apply edits`)),this._logService.error(t)})},t=>{e(`error when providing rename edits`,JSON.stringify(t,null,`	`)),this._notificationService.error(A(1368,`Rename failed to compute edits`)),this._logService.error(t)}).finally(()=>{a.dispose()});return e(`returning rename operation`),this._progressService.showWhile(f,250),f}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,`cancelRenameInput command`)}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}},dG=lG=sG([cG(1,U),cG(2,Hp),cG(3,Or),cG(4,fa),cG(5,Fp),cG(6,Yt),cG(7,V)],dG),fG=class extends S{constructor(){super({id:`editor.action.rename`,label:K(1370,`Rename Symbol`),precondition:b.and(J.writable,J.hasRenameProvider),kbOpts:{kbExpr:J.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:`1_modification`,order:1.1}})}runCommand(e,t){let n=e.get(ec),[r,i]=Array.isArray(t)&&t||[void 0,void 0];return Fc.isUri(r)&&H.isIPosition(i)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(e=>{e&&(e.setPosition(i),e.invokeWithinContext(t=>(this.reportTelemetry(t,e),this.run(t,e))))},$p):super.runCommand(e,t)}run(e,t){let n=e.get(Fp),r=dG.get(t);return r?(n.trace(`[RenameAction] got controller, running...`),r.run()):(n.trace(`[RenameAction] returning early - controller missing`),Promise.resolve())}},k(dG.ID,dG,4),D(fG),pG=dn.bindToContribution(dG.get),E(new pG({id:`acceptRenameInput`,precondition:eG,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:b.and(J.focus,b.not(`isComposing`)),primary:3}})),E(new pG({id:`acceptRenameInputWithPreview`,precondition:b.and(eG,b.has(`config.editor.rename.enablePreview`)),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:b.and(J.focus,b.not(`isComposing`)),primary:2051}})),E(new pG({id:`cancelRenameInput`,precondition:eG,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:J.focus,primary:9,secondary:[1033]}})),Rr(class extends km{constructor(){super({id:`focusNextRenameSuggestion`,title:{...K(1371,`Focus Next Rename Suggestion`)},precondition:eG,keybinding:[{primary:18,weight:199}]})}run(e){let t=e.get(ec).getFocusedCodeEditor();if(!t)return;let n=dG.get(t);n&&n.focusNextRenameSuggestion()}}),Rr(class extends km{constructor(){super({id:`focusPreviousRenameSuggestion`,title:{...K(1372,`Focus Previous Rename Suggestion`)},precondition:eG,keybinding:[{primary:16,weight:199}]})}run(e){let t=e.get(ec).getFocusedCodeEditor();if(!t)return;let n=dG.get(t);n&&n.focusPreviousRenameSuggestion()}}),se(`_executeDocumentRenameProvider`,function(e,t,n,...r){let[i]=r;en(typeof i==`string`);let{renameProvider:a}=e.get(V);return oG(a,t,n,i)}),se(`_executePrepareRename`,async function(e,t,n){let{renameProvider:r}=e.get(V),i=await new uG(t,n,r).resolveRenameLocation(W.None);if(i?.rejectReason)throw Error(i.rejectReason);return i}),It.as(dr.Configuration).registerConfiguration({id:`editor`,properties:{"editor.rename.enablePreview":{scope:6,description:A(1369,`Enable/disable the ability to preview changes before renaming`),default:!0,type:`boolean`}}})}));function hG(e){return{range:e.range,options:L.createDynamic({description:`section-header`,stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:e.hasSeparatorLine?2:1,sectionHeaderText:e.text}})}}var gG,_G,vG,yG=t((()=>{O(),q(),v(),oo(),md(),va(),gG=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_G=function(e,t){return function(n,r){t(n,r,e)}},vG=class extends z{static#e=this.ID=`editor.sectionHeaderDetector`;constructor(e,t,n){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=n,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(81)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(t=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(81)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(t=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(81)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(t=>{let n=this.editor.getModel()?.getLanguageId();n&&t.affects(n)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(81)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(t=>{this.options&&!t.hasChanged(81)||(this.options=this.createOptions(e.getOption(81)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(e=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(e=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new rn(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;let t=this.editor.getModel().getLanguageId();if(!t)return;let n=this.languageConfigurationService.getLanguageConfiguration(t).comments,r=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!n&&!r?.markers))return{foldingRules:r,markSectionHeaderRegex:e.markSectionHeaderRegex,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){if(!this.editor.hasModel()||!this.options?.findMarkSectionHeaders&&!this.options?.findRegionSectionHeaders)return;let e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;let t=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then(n=>{e.isDisposed()||e.getVersionId()!==t||this.updateDecorations(n)})}updateDecorations(e){let t=this.editor.getModel();t&&(e=e.filter(e=>{if(!e.shouldBeInComments)return!0;let n=t.validateRange(e.range),r=t.tokenization.getLineTokens(n.startLineNumber),i=r.findTokenIndexAtOffset(n.startColumn-1),a=r.getStandardTokenType(i);return r.getLanguageId(i)===t.getLanguageId()&&a===1}));let n=Object.values(this.currentOccurrences).map(e=>e.decorationId),r=e.map(e=>hG(e));this.editor.changeDecorations(t=>{let i=t.deltaDecorations(n,r);this.currentOccurrences={};for(let t=0,n=i.length;t<n;t++){let n={sectionHeader:e[t],decorationId:i[t]};this.currentOccurrences[n.decorationId]=n}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&=(this.computePromise.cancel(),null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}},vG=gG([_G(1,yn),_G(2,jr)],vG),k(vG.ID,vG,1)}));function bG(e){for(let t=0,n=e.length;t<n;t+=4){let n=e[t+0],r=e[t+1],i=e[t+2],a=e[t+3];e[t+0]=a,e[t+1]=i,e[t+2]=r,e[t+3]=n}}function xG(e){let t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return da()||bG(t),ef.wrap(t)}function SG(e){let t=new Uint32Array(CG(e)),n=0;if(t[n++]=e.id,e.type===`full`)t[n++]=1,t[n++]=e.data.length,t.set(e.data,n),n+=e.data.length;else{t[n++]=2,t[n++]=e.deltas.length;for(let r of e.deltas)t[n++]=r.start,t[n++]=r.deleteCount,r.data?(t[n++]=r.data.length,t.set(r.data,n),n+=r.data.length):t[n++]=0}return xG(t)}function CG(e){let t=0;if(t+=2,e.type===`full`)t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(let n of e.deltas)n.data&&(t+=n.data.length)}return t}var wG=t((()=>{cp(),Rt()}));function TG(e){return e&&!!e.data}function EG(e){return e&&Array.isArray(e.edits)}function DG(e,t){return e.has(t)}function OG(e,t){let n=e.orderedGroups(t);return n.length>0?n[0]:[]}async function kG(e,t,n,r,i){let a=OG(e,t),o=await Promise.all(a.map(async e=>{let a,o=null;try{a=await e.provideDocumentSemanticTokens(t,e===n?r:null,i)}catch(e){o=e,a=null}return(!a||!TG(a)&&!EG(a))&&(a=null),new PG(e,a,o)}));for(let e of o){if(e.error)throw e.error;if(e.tokens)return e}return o.length>0?o[0]:null}function AG(e,t){let n=e.orderedGroups(t);return n.length>0?n[0]:null}function jG(e,t){return e.has(t)}function MG(e,t){let n=e.orderedGroups(t);return n.length>0?n[0]:[]}async function NG(e,t,n,r){let i=MG(e,t),a=await Promise.all(i.map(async e=>{let i;try{i=await e.provideDocumentRangeSemanticTokens(t,n,r)}catch(e){Jc(e),i=null}return(!i||!TG(i))&&(i=null),new FG(e,i)}));for(let e of a)if(e.tokens)return e;return a.length>0?a[0]:null}var PG,FG,IG=t((()=>{wu(),M(),xd(),Yd(),jo(),lr(),wG(),_(),yu(),PG=class{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}},FG=class{constructor(e,t){this.provider=e,this.tokens=t}},hn.registerCommand(`_provideDocumentSemanticTokensLegend`,async(e,...t)=>{let[n]=t;en(n instanceof Fc);let r=e.get(Ip).getModel(n);if(!r)return;let{documentSemanticTokensProvider:i}=e.get(V),a=AG(i,r);return a?a[0].getLegend():e.get(no).executeCommand(`_provideDocumentRangeSemanticTokensLegend`,n)}),hn.registerCommand(`_provideDocumentSemanticTokens`,async(e,...t)=>{let[n]=t;en(n instanceof Fc);let r=e.get(Ip).getModel(n);if(!r)return;let{documentSemanticTokensProvider:i}=e.get(V);if(!DG(i,r))return e.get(no).executeCommand(`_provideDocumentRangeSemanticTokens`,n,r.getFullModelRange());let a=await kG(i,r,null,null,W.None);if(!a)return;let{provider:o,tokens:s}=a;if(!s||!TG(s))return;let c=SG({id:0,type:`full`,data:s.data});return s.resultId&&o.releaseDocumentSemanticTokens(s.resultId),c}),hn.registerCommand(`_provideDocumentRangeSemanticTokensLegend`,async(e,...t)=>{let[n,r]=t;en(n instanceof Fc);let i=e.get(Ip).getModel(n);if(!i)return;let{documentRangeSemanticTokensProvider:a}=e.get(V),o=MG(a,i);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!r||!T.isIRange(r))return console.warn(`provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in`),o[0].getLegend();let s=await NG(a,i,T.lift(r),W.None);if(s)return s.provider.getLegend()}),hn.registerCommand(`_provideDocumentRangeSemanticTokens`,async(e,...t)=>{let[n,r]=t;en(n instanceof Fc),en(T.isIRange(r));let i=e.get(Ip).getModel(n);if(!i)return;let{documentRangeSemanticTokensProvider:a}=e.get(V),o=await NG(a,i,T.lift(r),W.None);if(!(!o||!o.tokens))return SG({id:0,type:`full`,data:o.tokens.data})})}));function LG(e,t,n){let r=n.getValue(RG,{overrideIdentifier:e.getLanguageId(),resource:e.uri})?.enabled;return typeof r==`boolean`?r:t.getColorTheme().semanticHighlighting}var RG,zG=t((()=>{RG=`editor.semanticHighlighting`})),BG,VG,HG,UG,WG,GG,KG=t((()=>{O(),wu(),M(),q(),Gm(),em(),qp(),Yf(),oe(),tf(),yu(),Yd(),$a(),fn(),IG(),zG(),BG=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},VG=function(e,t){return function(n,r){t(n,r,e)}},UG=class extends z{constructor(e,t,n,r,i,a){super(),this._watchers=new hc;let o=t=>{this._watchers.get(t.uri)?.dispose(),this._watchers.set(t.uri,new WG(t,e,n,i,a))},s=(e,t)=>{t.dispose(),this._watchers.delete(e.uri)},c=()=>{for(let e of t.getModels()){let t=this._watchers.get(e.uri);LG(e,n,r)?t||o(e):t&&s(e,t)}};t.getModels().forEach(e=>{LG(e,n,r)&&o(e)}),this._register(t.onModelAdded(e=>{LG(e,n,r)&&o(e)})),this._register(t.onModelRemoved(e=>{let t=this._watchers.get(e.uri);t&&s(e,t)})),this._register(r.onDidChangeConfiguration(e=>{e.affectsConfiguration(`editor.semanticHighlighting`)&&c()})),this._register(n.onDidColorThemeChange(c))}dispose(){hm(this._watchers.values()),this._watchers.clear(),super.dispose()}},UG=BG([VG(0,ho),VG(1,Ip),VG(2,mr),VG(3,xl),VG(4,Vp),VG(5,V)],UG),WG=class extends z{static#e=HG=this;static#t=this.REQUEST_MIN_DELAY=300;static#n=this.REQUEST_MAX_DELAY=2e3;constructor(e,t,n,r,i){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=i.documentSemanticTokensProvider,this._debounceInformation=r.for(this._provider,`DocumentSemanticTokens`,{min:HG.REQUEST_MIN_DELAY,max:HG.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new rn(()=>this._fetchDocumentSemanticTokensNow(),HG.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&=(this._currentDocumentResponse.dispose(),null),this._currentDocumentRequestCancellationTokenSource&&=(this._currentDocumentRequestCancellationTokenSource.cancel(),null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));let a=()=>{hm(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(let t of this._provider.all(e))typeof t.onDidChange==`function`&&this._documentProvidersChangeListeners.push(t.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};a(),this._register(this._provider.onDidChange(()=>{a(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(e=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&=(this._currentDocumentResponse.dispose(),null),this._currentDocumentRequestCancellationTokenSource&&=(this._currentDocumentRequestCancellationTokenSource.cancel(),null),hm(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!DG(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;let e=new Zd,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=kG(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;let i=[],a=this._model.onDidChangeContent(e=>{i.push(e)}),o=new vd(!1);r.then(e=>{if(this._debounceInformation.update(this._model,o.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,a.dispose(),!e)this._setDocumentSemanticTokens(null,null,null,i);else{let{provider:t,tokens:n}=e,r=this._semanticTokensStylingService.getStyling(t);this._setDocumentSemanticTokens(t,n||null,r,i)}},e=>{e&&(_d(e)||typeof e.message==`string`&&e.message.indexOf(`busy`)!==-1)||$p(e),this._currentDocumentRequestCancellationTokenSource=null,a.dispose(),(i.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,r,i){i=Math.min(i,n.length-r,e.length-t);for(let a=0;a<i;a++)n[r+a]=e[t+a]}_setDocumentSemanticTokens(e,t,n,r){let i=this._currentDocumentResponse,a=()=>{(r.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&=(this._currentDocumentResponse.dispose(),null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),a();return}if(EG(t)){if(!i){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:i.data};else{let e=0;for(let n of t.edits)e+=(n.data?n.data.length:0)-n.deleteCount;let r=i.data,a=new Uint32Array(r.length+e),o=r.length,s=a.length;for(let e=t.edits.length-1;e>=0;e--){let c=t.edits[e];if(c.start>r.length){n.warnInvalidEditStart(i.resultId,t.resultId,e,c.start,r.length),this._model.tokenization.setSemanticTokens(null,!0);return}let l=o-(c.start+c.deleteCount);l>0&&(HG._copy(r,o-l,a,s-l,l),s-=l),c.data&&(HG._copy(c.data,0,a,s-c.data.length,c.data.length),s-=c.data.length),o=c.start}o>0&&HG._copy(r,0,a,0,o),t={resultId:t.resultId,data:a}}}if(TG(t)){this._currentDocumentResponse=new GG(e,t.resultId,t.data);let i=Oo(t,n,this._model.getLanguageId());if(r.length>0)for(let e of r)for(let t of i)for(let n of e.changes)t.applyEdit(n.range,n.text);this._model.tokenization.setSemanticTokens(i,!0)}else this._model.tokenization.setSemanticTokens(null,!0);a()}},WG=HG=BG([VG(1,ho),VG(2,mr),VG(3,Vp),VG(4,V)],WG),GG=class{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}},hl(UG)})),qG,JG,YG,XG=t((()=>{O(),q(),v(),IG(),zG(),$a(),qp(),Yf(),tf(),em(),yu(),fn(),qG=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},JG=function(e,t){return function(n,r){t(n,r,e)}},YG=class extends z{static#e=this.ID=`editor.contrib.viewportSemanticTokens`;constructor(e,t,n,r,i,a){super(),this._semanticTokensStylingService=t,this._themeService=n,this._configurationService=r,this._editor=e,this._provider=a.documentRangeSemanticTokensProvider,this._debounceInformation=i.for(this._provider,`DocumentRangeSemanticTokens`,{min:100,max:500}),this._tokenizeViewport=this._register(new rn(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];let o=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{o()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),o()})),this._register(this._editor.onDidChangeModelContent(e=>{this._cancelAll(),o()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),o()})),this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`editor.semanticHighlighting`)&&(this._cancelAll(),o())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),o()})),o()}_cancelAll(){for(let e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;let e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!LG(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!jG(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}let t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(t=>this._requestRange(e,t)))}_requestRange(e,t){let n=e.getVersionId(),r=Zn(n=>Promise.resolve(NG(this._provider,e,t,n))),i=new vd(!1);return r.then(r=>{if(this._debounceInformation.update(e,i.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==n)return;let{provider:a,tokens:o}=r,s=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,Oo(o,s,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(r),()=>this._removeOutstandingRequest(r)),r}},YG=qG([JG(1,ho),JG(2,mr),JG(3,xl),JG(4,Vp),JG(5,V)],YG),k(YG.ID,YG,1)})),ZG,QG=t((()=>{Ga(),_(),ZG=class{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){let n=[];for(let r of t){let t=[];n.push(t),this.selectSubwords&&this._addInWordRanges(t,e,r),this._addWordRanges(t,e,r),this._addWhitespaceLine(t,e,r),t.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){let r=t.getWordAtPosition(n);if(!r)return;let{word:i,startColumn:a}=r,o=n.column-a,s=o,c=o,l=0;for(;s>=0;s--){let e=i.charCodeAt(s);if(s!==o&&(e===95||e===45)||ge(e)&&Uu(l))break;l=e}for(s+=1;c<i.length;c++){let e=i.charCodeAt(c);if(Uu(e)&&ge(l)||e===95||e===45)break;l=e}s<c&&e.push({range:new T(n.lineNumber,a+s,n.lineNumber,a+c)})}_addWordRanges(e,t,n){let r=t.getWordAtPosition(n);r&&e.push({range:new T(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new T(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}}));async function $G(e,t,n,r,i){let a=e.all(t).concat(new ZG(r.selectSubwords));a.length===1&&a.unshift(new dP);let o=[],s=[];for(let e of a)o.push(Promise.resolve(e.provideSelectionRanges(t,n,i)).then(e=>{if(Xf(e)&&e.length===n.length)for(let t=0;t<n.length;t++){s[t]||(s[t]=[]);for(let r of e[t])T.isIRange(r.range)&&T.containsPosition(r.range,n[t])&&s[t].push(T.lift(r.range))}},Jc));return await Promise.all(o),s.map(e=>{if(e.length===0)return[];e.sort((e,t)=>H.isBefore(e.getStartPosition(),t.getStartPosition())?1:H.isBefore(t.getStartPosition(),e.getStartPosition())||H.isBefore(e.getEndPosition(),t.getEndPosition())?-1:H.isBefore(t.getEndPosition(),e.getEndPosition())?1:0);let n=[],i;for(let t of e)(!i||T.containsRange(t,i)&&!T.equalsRange(t,i))&&(n.push(t),i=t);if(!r.selectLeadingAndTrailingWhitespace)return n;let a=[n[0]];for(let e=1;e<n.length;e++){let r=n[e-1],i=n[e];if(i.startLineNumber!==r.startLineNumber||i.endLineNumber!==r.endLineNumber){let e=new T(r.startLineNumber,t.getLineFirstNonWhitespaceColumn(r.startLineNumber),r.endLineNumber,t.getLineLastNonWhitespaceColumn(r.endLineNumber));e.containsRange(r)&&!e.equalsRange(r)&&i.containsRange(e)&&!i.equalsRange(e)&&a.push(e);let n=new T(r.startLineNumber,1,r.endLineNumber,t.getLineMaxColumn(r.endLineNumber));n.containsRange(r)&&!n.equalsRange(e)&&i.containsRange(n)&&!i.equalsRange(n)&&a.push(n)}a.push(i)}return a})}var eK,tK,nK,rK,iK,aK,oK,sK,cK=t((()=>{sn(),wu(),M(),v(),Su(),_(),ze(),yc(),fP(),QG(),P(),de(),jo(),yu(),ll(),lr(),xd(),eK=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tK=function(e,t){return function(n,r){t(n,r,e)}},rK=class e{constructor(e,t){this.index=e,this.ranges=t}mov(t){let n=this.index+(t?1:-1);if(n<0||n>=this.ranges.length)return this;let r=new e(n,this.ranges);return r.ranges[n].equalsRange(this.ranges[this.index])?r.mov(t):r}},iK=class{static#e=nK=this;static#t=this.ID=`editor.contrib.smartSelectController`;static get(e){return e.getContribution(nK.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){this._selectionListener?.dispose()}async run(e){if(!this._editor.hasModel())return;let t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||await $G(this._languageFeaturesService.selectionRangeProvider,n,t.map(e=>e.getPosition()),this._editor.getOption(128),W.None).then(e=>{if(!(!Xf(e)||e.length!==t.length)&&!(!this._editor.hasModel()||!uo(this._editor.getSelections(),t,(e,t)=>e.equalsSelection(t)))){for(let n=0;n<e.length;n++)e[n]=e[n].filter(e=>e.containsPosition(t[n].getStartPosition())&&e.containsPosition(t[n].getEndPosition())),e[n].unshift(t[n]);this._state=e.map(e=>new rK(0,e)),this._selectionListener?.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{this._ignoreSelection||(this._selectionListener?.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(t=>t.mov(e));let r=this._state.map(e=>X.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(r)}finally{this._ignoreSelection=!1}}},iK=nK=eK([tK(1,V)],iK),aK=class extends S{constructor(e,t){super(t),this._forward=e}async run(e,t){let n=iK.get(t);n&&await n.run(this._forward)}},oK=class extends aK{constructor(){super(!0,{id:`editor.action.smartSelect.expand`,label:K(1382,`Expand Selection`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`1_basic`,title:A(1380,`&&Expand Selection`),order:2}})}},hn.registerCommandAlias(`editor.action.smartSelect.grow`,`editor.action.smartSelect.expand`),sK=class extends aK{constructor(){super(!1,{id:`editor.action.smartSelect.shrink`,label:K(1383,`Shrink Selection`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:g.MenubarSelectionMenu,group:`1_basic`,title:A(1381,`&&Shrink Selection`),order:3}})}},k(iK.ID,iK,4),D(oK),D(sK),hn.registerCommand(`_executeSelectionRangeProvider`,async function(e,...t){let[n,r]=t;en(Fc.isUri(n));let i=e.get(V).selectionRangeProvider,a=await e.get(d).createModelReference(n);try{return $G(i,a.object.textEditorModel,r,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},W.None)}finally{a.dispose()}})})),lK,uK=t((()=>{P(),lK=Object.freeze({View:K(1620,`View`),Help:K(1621,`Help`),Test:K(1622,`Test`),File:K(1623,`File`),Preferences:K(1624,`Preferences`),Developer:K(1625,`Developer`)})})),dK,fK,pK,mK,hK,gK,_K,vK=t((()=>{v(),P(),uK(),de(),qp(),C(),yc(),II(),dK=class extends Uo{constructor(){super({id:`editor.action.toggleStickyScroll`,title:{...K(1430,`Toggle Editor Sticky Scroll`),mnemonicTitle:A(1426,`&&Toggle Editor Sticky Scroll`)},metadata:{description:K(1431,`Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport`)},category:lK.View,toggled:{condition:b.equals(`config.editor.stickyScroll.enabled`,!0),title:A(1427,`Sticky Scroll`),mnemonicTitle:A(1428,`&&Sticky Scroll`)},menu:[{id:g.CommandPalette},{id:g.MenubarAppearanceMenu,group:`4_editor`,order:3},{id:g.StickyScrollContext}]})}async runEditorCommand(e,t){let n=e.get(xl),r=!n.getValue(`editor.stickyScroll.enabled`),i=FI.get(t)?.isFocused();n.updateValue(`editor.stickyScroll.enabled`,r),i&&t.focus()}},fK=100,pK=class extends Uo{constructor(){super({id:`editor.action.focusStickyScroll`,title:{...K(1432,`Focus Editor Sticky Scroll`),mnemonicTitle:A(1429,`&&Focus Editor Sticky Scroll`)},precondition:b.and(b.has(`config.editor.stickyScroll.enabled`),J.stickyScrollVisible),menu:[{id:g.CommandPalette}]})}runEditorCommand(e,t){FI.get(t)?.focus()}},mK=class extends Uo{constructor(){super({id:`editor.action.selectNextStickyScrollLine`,title:K(1433,`Select the next editor sticky scroll line`),precondition:J.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fK,primary:18}})}runEditorCommand(e,t){FI.get(t)?.focusNext()}},hK=class extends Uo{constructor(){super({id:`editor.action.selectPreviousStickyScrollLine`,title:K(1434,`Select the previous sticky scroll line`),precondition:J.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fK,primary:16}})}runEditorCommand(e,t){FI.get(t)?.focusPrevious()}},gK=class extends Uo{constructor(){super({id:`editor.action.goToFocusedStickyScrollLine`,title:K(1435,`Go to the focused sticky scroll line`),precondition:J.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fK,primary:3}})}runEditorCommand(e,t){FI.get(t)?.goToFocused()}},_K=class extends Uo{constructor(){super({id:`editor.action.selectEditor`,title:K(1436,`Select Editor`),precondition:J.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fK,primary:9}})}runEditorCommand(e,t){FI.get(t)?.selectEditor()}}})),yK=t((()=>{v(),vK(),II(),de(),k(FI.ID,FI,1),Rr(dK),Rr(pK),Rr(hK),Rr(mK),Rr(gK),Rr(_K)})),bK,xK,SK,CK,wK,TK=t((()=>{wu(),Ua(),Ge(),q(),ff(),_(),oe(),yu(),_P(),bj(),QN(),TP(),mP(),qr(),bK=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xK=function(e,t){return function(n,r){t(n,r,e)}},SK=class{constructor(e,t,n,r,i,a,o){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=r,this.command=i,this.action=a,this.completion=o}},CK=class extends Wl{constructor(e,t,n,r,i,a){super(i.disposable),this.model=e,this.line=t,this.word=n,this.completionModel=r,this._suggestMemoryService=a}canBeReused(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){let e=[],{items:t}=this.completionModel,n=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),r=Ea.slice(t,n),i=Ea.slice(t,0,n),a=5;for(let t of Ea.concat(r,i)){if(t.score===lh.Default)continue;let n=new T(t.editStart.lineNumber,t.editStart.column,t.editInsertEnd.lineNumber,t.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),r=t.completion.insertTextRules&&t.completion.insertTextRules&4?{snippet:t.completion.insertText}:t.completion.insertText;e.push(new SK(n,r,t.filterTextLow??t.labelLow,t.completion.additionalTextEdits,t.completion.command,t.completion.action,t)),a-->=0&&t.resolve(W.None)}return e}},CK=bK([xK(5,ZN)],CK),wK=class extends z{constructor(e,t,n,r){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=n,this._editorService=r,this._store.add(e.inlineCompletionsProvider.register(`*`,this))}async provideInlineCompletions(e,t,n,r){if(n.selectedSuggestionInfo)return;let i;for(let t of this._editorService.listCodeEditors())if(t.getModel()===e){i=t;break}if(!i)return;let a=i.getOption(101);if(yj.isAllOff(a))return;e.tokenization.tokenizeIfCheap(t.lineNumber);let o=e.tokenization.getLineTokens(t.lineNumber),s=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(yj.valueFor(a,s)!==`inline`)return;let c=e.getWordAtPosition(t),l;if(c?.word||(l=this._getTriggerCharacterInfo(e,t)),!c?.word&&!l||(c||=e.getWordUntilPosition(t),c.endColumn!==t.column))return;let u,d=e.getValueInRange(new T(t.lineNumber,1,t.lineNumber,t.column));if(!l&&this._lastResult?.canBeReused(e,t.lineNumber,c)){let e=new hP(d,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=e,this._lastResult.acquire(),u=this._lastResult}else{let n=await sj(this._languageFeatureService.completionProvider,e,t,new hj(void 0,wP.createSuggestFilter(i).itemKind,l?.providers),l&&{triggerKind:1,triggerCharacter:l.ch},r),a;n.needsClipboard&&(a=await this._clipboardService.readText());let o=new gP(n.items,t.column,new hP(d,0),pP.None,i.getOption(133),i.getOption(127),{boostFullMatch:!1,firstMatchCanBeWeak:!1},a);u=new CK(e,t.lineNumber,c,o,n,this._suggestMemoryService)}return this._lastResult=u,u}handleItemDidShow(e,t){t.completion.resolve(W.None)}disposeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){let n=e.getValueInRange(T.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),r=new Set;for(let t of this._languageFeatureService.completionProvider.all(e))t.triggerCharacters?.includes(n)&&r.add(t);if(r.size!==0)return{providers:r,ch:n}}},wK=bK([xK(0,V),xK(1,qu),xK(2,ZN),xK(3,ec)],wK),hl(wK)})),EK,DK=t((()=>{em(),v(),P(),EK=class extends S{constructor(){super({id:`editor.action.forceRetokenize`,label:K(1514,`Developer: Force Retokenize`),precondition:void 0})}run(e,t){if(!t.hasModel())return;let n=t.getModel();n.tokenization.resetTokenization();let r=new vd;n.tokenization.forceTokenization(n.getLineCount()),r.stop(),console.log(`tokenization took ${r.elapsed()}`)}},D(EK)})),OK,kK=t((()=>{qc(),zp(),P(),de(),OK=class e extends km{static#e=this.ID=`editor.action.toggleTabFocusMode`;constructor(){super({id:e.ID,title:K(1512,`Toggle Tab Key Moves Focus`),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:K(1513,`Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.`)},f1:!0})}run(){let e=!pl.getTabFocusMode();pl.setTabFocusMode(e),Qp(e?A(1510,`Pressing Tab will now move focus to the next focusable element`):A(1511,`Pressing Tab will now insert the tab character`))}},Rr(OK)})),AK=t((()=>{})),jK=t((()=>{})),MK=t((()=>{})),NK,PK,FK,IK=t((()=>{y(),Sf(),nd(),Hd(),N(),q(),Wu(),MK(),ri(),Os(),NK=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},PK=function(e,t){return function(n,r){t(n,r,e)}},FK=class extends z{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute(`aria-disabled`,`false`),this.el.tabIndex=0,this.el.style.pointerEvents=`auto`,this.el.style.opacity=`1`,this.el.style.cursor=`pointer`,this._enabled=!1):(this.el.setAttribute(`aria-disabled`,`true`),this.el.tabIndex=-1,this.el.style.pointerEvents=`none`,this.el.style.opacity=`0.4`,this.el.style.cursor=`default`,this._enabled=!0),this._enabled=e}constructor(e,t,n={},r,i){super(),this._link=t,this._hoverService=r,this._enabled=!0,this.el=x(e,R(`a.monaco-link`,{tabIndex:t.tabIndex??0,href:t.href},t.label)),this.hoverDelegate=n.hoverDelegate??Vr(`mouse`),this.setTooltip(t.title),this.el.setAttribute(`role`,`button`);let a=this._register(new lc(this.el,`click`)),o=this._register(new lc(this.el,`keypress`)),s=mf.chain(o.event,e=>e.map(e=>new vi(e)).filter(e=>e.keyCode===3)),c=this._register(new lc(this.el,Il.Tap)).event;this._register(Lf.addTarget(this.el));let l=mf.any(a.event,s,c);this._register(l(e=>{this.enabled&&(au.stop(e,!0),n?.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}},FK=NK([PK(3,ms),PK(4,_e)],FK)})),LK,RK,zK,BK,VK,HK=t((()=>{jK(),P(),y(),ns(),Ji(),q(),Si(),F(),IK(),Ie(),sr(),LK=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},RK=function(e,t){return function(n,r){t(n,r,e)}},zK=26,BK=class extends z{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(VK))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{this.hide(),e.onClose?.()}}),this._editor.setBanner(this.banner.element,zK)}},BK=LK([RK(1,U)],BK),VK=class extends z{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(dt,{}),this.element=R(`div.editor-banner`),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message==`string`)return e.message}getBannerMessage(e){if(typeof e==`string`){let t=R(`span`);return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){We(this.element)}show(e){We(this.element);let t=this.getAriaLabel(e);t&&this.element.setAttribute(`aria-label`,t);let n=x(this.element,R(`div.icon-container`));n.setAttribute(`aria-hidden`,`true`),e.icon&&n.appendChild(R(`div${Qt.asCSSSelector(e.icon)}`));let r=x(this.element,R(`div.message-container`));if(r.setAttribute(`aria-hidden`,`true`),r.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=x(this.element,R(`div.message-actions-container`)),e.actions)for(let t of e.actions)this._register(this.instantiationService.createInstance(FK,this.messageActionsContainer,{...t,tabIndex:-1},{}));let i=x(this.element,R(`div.action-container`));this.actionBar=this._register(new _s(i)),this.actionBar.push(this._register(new cs(`banner.close`,A(1515,`Close Banner`),Qt.asClassName(wn),!0,()=>{typeof e.onClose==`function`&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}},VK=LK([RK(0,U)],VK)}));function UK(e,t){return{nonBasicASCII:t.nonBasicASCII===`inUntrustedWorkspace`?!e:t.nonBasicASCII,ambiguousCharacters:t.ambiguousCharacters,invisibleCharacters:t.invisibleCharacters,includeComments:t.includeComments===`inUntrustedWorkspace`?!e:t.includeComments,includeStrings:t.includeStrings===`inUntrustedWorkspace`?!e:t.includeStrings,allowedCharacters:t.allowedCharacters,allowedLocales:t.allowedLocales}}function WK(e){return`U+${e.toString(16).padStart(4,`0`)}`}function GK(e){let t=`\`${WK(e)}\``;return Ld.isInvisibleCharacter(e)||(t+=` "${`${KK(e)}`}"`),t}function KK(e){return e===96?"`` ` ``":"`"+String.fromCodePoint(e)+"`"}function qK(e,t){return vh.computeUnicodeHighlightReason(e,t)}async function JK(e,t){let n=e.getValue(nm.allowedCharacters),r;r=typeof n==`object`&&n?n:{};for(let e of t)r[String.fromCodePoint(e)]=!0;await e.updateValue(nm.allowedCharacters,r,2)}async function YK(e,t){let n=e.inspect(nm.allowedLocales).user?.value,r;r=typeof n==`object`&&n?Object.assign({},n):{};for(let e of t)r[e]=!0;await e.updateValue(nm.allowedLocales,r,2)}function XK(e){throw Error(`Unexpected value: ${e}`)}var ZK,QK,$K,eq,tq,nq,rq,iq,aq,oq,sq,cq,lq,uq,dq,fq=t((()=>{O(),Kn(),Fd(),q(),Rt(),Ga(),AK(),v(),bd(),md(),we(),va(),h(),Tb(),xS(),HK(),P(),qp(),F(),Wu(),xn(),Ie(),sa(),de(),Qa(),am(),ZK=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},QK=function(e,t){return function(n,r){t(n,r,e)}},$K=To(`extensions-warning-message`,B.warning,A(1516,`Icon shown with a warning message in the extensions editor.`)),eq=class extends z{static#e=this.ID=`editor.contrib.unicodeHighlighter`;constructor(e,t,n,r){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=e=>{if(e&&e.hasMore){if(this._bannerClosed)return;let t=Math.max(e.ambiguousCharacterCount,e.nonBasicAsciiCharacterCount,e.invisibleCharacterCount),n;if(e.nonBasicAsciiCharacterCount>=t)n={message:A(1517,`This document contains many non-basic ASCII unicode characters`),command:new uq};else if(e.ambiguousCharacterCount>=t)n={message:A(1518,`This document contains many ambiguous unicode characters`),command:new cq};else if(e.invisibleCharacterCount>=t)n={message:A(1519,`This document contains many invisible unicode characters`),command:new lq};else throw Error(`Unreachable`);this._bannerController.show({id:`unicodeHighlightBanner`,message:n.message,icon:$K,actions:[{label:n.command.shortLabel,href:`command:${n.command.desc.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(r.createInstance(BK,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(141),this._register(n.onDidChangeTrust(e=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(141)&&(this._options=e.getOption(141),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&=(this._highlighter.dispose(),null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&=(this._highlighter.dispose(),null),!this._editor.hasModel())return;let e=UK(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(e=>e===!1))return;let t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(e=>e.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(e=>e===`_os`?Mt.NumberFormat().value.resolvedOptions().locale:e===`_vscode`?io:e)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new tq(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new nq(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},eq=ZK([QK(1,jr),QK(2,br),QK(3,U)],eq),tq=class extends z{constructor(e,t,n,r){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=r,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new rn(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);let n=[];if(!t.hasMore)for(let e of t.ranges)n.push({range:e,options:aq.instance.getDecorationFromOptions(this._options)});this._decorations.set(n)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;let t=this._editor.getModel();return Pf(t,e)?{reason:qK(t.getValueInRange(e.range),this._options),inComment:el(t,e),inString:Nl(t,e)}:null}},tq=ZK([QK(3,jr)],tq),nq=class extends z{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new rn(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(let t of e){let e=vh.computeUnicodeHighlights(this._model,this._options,t);for(let t of e.ranges)n.ranges.push(t);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||e.hasMore}if(!n.hasMore)for(let e of n.ranges)t.push({range:e,options:aq.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;let t=this._editor.getModel(),n=t.getValueInRange(e.range);return Pf(t,e)?{reason:qK(n,this._options),inComment:el(t,e),inString:Nl(t,e)}:null}},rq=A(1520,`Configure Unicode Highlight Options`),iq=class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];let n=this._editor.getModel(),r=this._editor.getContribution(eq.ID);if(!r)return[];let i=[],a=new Set,o=300;for(let e of t){let t=r.getDecorationInfo(e);if(!t)continue;let s=n.getValueInRange(e.range).codePointAt(0),c=GK(s),l;switch(t.reason.kind){case 0:l=Tt(t.reason.confusableWith)?A(1521,`The character {0} could be confused with the ASCII character {1}, which is more common in source code.`,c,GK(t.reason.confusableWith.codePointAt(0))):A(1522,`The character {0} could be confused with the character {1}, which is more common in source code.`,c,GK(t.reason.confusableWith.codePointAt(0)));break;case 1:l=A(1523,`The character {0} is invisible.`,c);break;case 2:l=A(1524,`The character {0} is not a basic ASCII character.`,c);break}if(a.has(l))continue;a.add(l);let u={codePoint:s,reason:t.reason,inComment:t.inComment,inString:t.inString},d=A(1525,`Adjust settings`),f=`command:${dq.ID}?${encodeURIComponent(JSON.stringify(u))}`,p=new Af(``,!0).appendMarkdown(l).appendText(` `).appendLink(f,d,rq);i.push(new gS(this,e.range,[p],!1,o++))}return i}renderHoverParts(e,t){return cS(e,t,this._editor,this._languageService,this._openerService)}},iq=ZK([QK(1,Qi),QK(2,_e)],iq),aq=class e{constructor(){this.map=new Map}static#e=this.instance=new e;getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){let n=`${e}${t}`,r=this.map.get(n);return r||(r=L.createDynamic({description:`unicode-highlight`,stickiness:1,className:`unicode-highlight`,showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,r)),r}},oq=class extends S{constructor(){super({id:cq.ID,label:K(1534,`Disable highlighting of characters in comments`),precondition:void 0}),this.shortLabel=A(1526,`Disable Highlight In Comments`)}async run(e,t,n){let r=e.get(xl);r&&this.runAction(r)}async runAction(e){await e.updateValue(nm.includeComments,!1,2)}},sq=class extends S{constructor(){super({id:cq.ID,label:K(1535,`Disable highlighting of characters in strings`),precondition:void 0}),this.shortLabel=A(1527,`Disable Highlight In Strings`)}async run(e,t,n){let r=e.get(xl);r&&this.runAction(r)}async runAction(e){await e.updateValue(nm.includeStrings,!1,2)}},cq=class e extends km{static#e=this.ID=`editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters`;constructor(){super({id:e.ID,title:K(1536,`Disable highlighting of ambiguous characters`),precondition:void 0,f1:!1}),this.shortLabel=A(1528,`Disable Ambiguous Highlight`)}async run(e,t,n){let r=e.get(xl);r&&this.runAction(r)}async runAction(e){await e.updateValue(nm.ambiguousCharacters,!1,2)}},lq=class e extends km{static#e=this.ID=`editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters`;constructor(){super({id:e.ID,title:K(1537,`Disable highlighting of invisible characters`),precondition:void 0,f1:!1}),this.shortLabel=A(1529,`Disable Invisible Highlight`)}async run(e,t,n){let r=e.get(xl);r&&this.runAction(r)}async runAction(e){await e.updateValue(nm.invisibleCharacters,!1,2)}},uq=class e extends km{static#e=this.ID=`editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters`;constructor(){super({id:e.ID,title:K(1538,`Disable highlighting of non basic ASCII characters`),precondition:void 0,f1:!1}),this.shortLabel=A(1530,`Disable Non ASCII Highlight`)}async run(e,t,n){let r=e.get(xl);r&&this.runAction(r)}async runAction(e){await e.updateValue(nm.nonBasicASCII,!1,2)}},dq=class e extends km{static#e=this.ID=`editor.action.unicodeHighlight.showExcludeOptions`;constructor(){super({id:e.ID,title:K(1539,`Show Exclude Options`),precondition:void 0,f1:!1})}async run(e,t){let{codePoint:n,reason:r,inString:i,inComment:a}=t,o=String.fromCodePoint(n),s=e.get(Ne),c=e.get(xl);function l(e){return Ld.isInvisibleCharacter(e)?A(1531,`Exclude {0} (invisible character) from being highlighted`,WK(e)):A(1532,`Exclude {0} from being highlighted`,`${WK(e)} "${o}"`)}let u=[];if(r.kind===0)for(let e of r.notAmbiguousInLocales)u.push({label:A(1533,`Allow unicode characters that are more common in the language "{0}".`,e),run:async()=>{YK(c,[e])}});if(u.push({label:l(n),run:()=>JK(c,[n])}),a){let e=new oq;u.push({label:e.label,run:async()=>e.runAction(c)})}else if(i){let e=new sq;u.push({label:e.label,run:async()=>e.runAction(c)})}function d(e){return typeof e.desc.title==`string`?e.desc.title:e.desc.title.value}if(r.kind===0){let e=new cq;u.push({label:d(e),run:async()=>e.runAction(c)})}else if(r.kind===1){let e=new lq;u.push({label:d(e),run:async()=>e.runAction(c)})}else if(r.kind===2){let e=new uq;u.push({label:d(e),run:async()=>e.runAction(c)})}else XK(r);let f=await s.pick(u,{title:rq});f&&await f.run()}},Rr(cq),Rr(lq),Rr(uq),Rr(dq),k(eq.ID,eq,1),wb.register(iq)}));function pq(e,t,n){e.setModelProperty(t.uri,_q,n)}function mq(e,t){return e.getModelProperty(t.uri,_q)}var hq,gq,_q,vq,yq=t((()=>{q(),Tl(),v(),ff(),P(),Dn(),hq=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},gq=function(e,t){return function(n,r){t(n,r,e)}},_q=`ignoreUnusualLineTerminators`,vq=class extends z{static#e=this.ID=`editor.contrib.unusualLineTerminatorsDetector`;constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._isPresentingDialog=!1,this._config=this._editor.getOption(142),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(142)&&(this._config=this._editor.getOption(142),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(e=>{e.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config===`off`||!this._editor.hasModel())return;let e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||mq(this._codeEditorService,e)===!0||this._editor.getOption(103))return;if(this._config===`auto`){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let t;try{this._isPresentingDialog=!0,t=await this._dialogService.confirm({title:A(1540,`Unusual Line Terminators`),message:A(1541,`Detected unusual line terminators`),detail:A(1542,`The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).

It is recommended to remove them from the file. This can be configured via \`editor.unusualLineTerminators\`.`,yp(e.uri)),primaryButton:A(1543,`&&Remove Unusual Line Terminators`),cancelButton:A(1544,`Ignore`)})}finally{this._isPresentingDialog=!1}if(!t.confirmed){pq(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}},vq=hq([gq(1,Nt),gq(2,ec)],vq),k(vq.ID,vq,1)})),bq,xq,Sq,Cq,wq=t((()=>{dc(),yu(),Gr(),q(),Gm(),bq=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xq=function(e,t){return function(n,r){t(n,r,e)}},Sq=class{constructor(){this.selector={language:`*`}}provideDocumentHighlights(e,t,n){let r=[],i=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!i)return Promise.resolve(r);if(!e.isDisposed())return e.findMatches(i.word,!0,!1,!0,Pu,!1).map(e=>({range:e.range,kind:Yl.Text}))}provideMultiDocumentHighlights(e,t,n,r){let i=new hc,a=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!a)return Promise.resolve(i);for(let t of[e,...n]){if(t.isDisposed())continue;let e=t.findMatches(a.word,!0,!1,!0,Pu,!1).map(e=>({range:e.range,kind:Yl.Text}));e&&i.set(t.uri,e)}return i}},Cq=class extends z{constructor(e){super(),this._register(e.documentHighlightProvider.register(`*`,new Sq)),this._register(e.multiDocumentHighlightProvider.register(`*`,new Sq))}},Cq=bq([xq(0,V)],Cq)}));function Tq(e,t,n,r){return Qo(e.ordered(t).map(e=>()=>Promise.resolve(e.provideDocumentHighlights(t,n,r)).then(void 0,Jc)),e=>e!=null).then(e=>{if(e){let n=new hc;return n.set(t.uri,e),n}return new hc})}function Eq(e,t,n,r,i){return Qo(e.ordered(t).map(e=>()=>{let a=i.filter(e=>Wd(e)).filter(t=>ki(e.selector,t.uri,t.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(e.provideMultiDocumentHighlights(t,n,a,r)).then(void 0,Jc)}),e=>e!=null)}function Dq(e,t,n,r){return new Fq(t,n,r,e)}function Oq(e,t,n,r,i){return new Iq(t,n,r,e,i)}var kq,Aq,jq,Mq,Nq,Pq,Fq,Iq,Lq,Rq,zq,Bq,Vq,Hq,Uq=t((()=>{P(),qc(),O(),wu(),M(),q(),Gm(),ic(),Tl(),qp(),C(),$s(),En(),v(),ff(),_(),yc(),oe(),Zr(),zf(),yu(),ll(),HU(),wq(),kq=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Aq=function(e,t){return function(n,r){t(n,r,e)}},Nq=new De(`hasWordHighlights`,!1),Pq=class{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||=Zn(e=>this._compute(this._model,this._selection,this._wordSeparators,e)),this._result}_getCurrentWordRange(e,t){let n=e.getWordAtPosition(t.getPosition());return n?new T(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}cancel(){this.result.cancel()}},Fq=class extends Pq{constructor(e,t,n,r){super(e,t,n),this._providers=r}_compute(e,t,n,r){return Tq(this._providers,e,t.getPosition(),r).then(e=>e||new hc)}},Iq=class extends Pq{constructor(e,t,n,r,i){super(e,t,n),this._providers=r,this._otherModels=i}_compute(e,t,n,r){return Eq(this._providers,e,t.getPosition(),r,this._otherModels).then(e=>e||new hc)}},se(`_executeDocumentHighlights`,async(e,t,n)=>(await Tq(e.get(V).documentHighlightProvider,t,n,W.None))?.get(t.uri)),Lq=class{static#e=jq=this;static#t=this.storedDecorationIDs=new hc;static#n=this.query=null;constructor(e,t,n,r,i,a,o,s){this.toUnhook=new I,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new hc,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=void 0,this.runDelayer=this.toUnhook.add(new Io(50)),this.editor=e,this.providers=t,this.multiDocumentProviders=n,this.codeEditorService=a,this.textModelService=i,this.configurationService=o,this.logService=s,this._hasWordHighlights=Nq.bindTo(r),this._ignorePositionChangeEvent=!1,this.occurrencesHighlightEnablement=this.editor.getOption(89),this.occurrencesHighlightDelay=this.configurationService.getValue(`editor.occurrencesHighlightDelay`),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(e=>{this._ignorePositionChangeEvent||this.occurrencesHighlightEnablement!==`off`&&this.runDelayer.trigger(()=>{this._onPositionChanged(e)})})),this.toUnhook.add(e.onDidFocusEditorText(e=>{this.occurrencesHighlightEnablement!==`off`&&(this.workerRequest||this.runDelayer.trigger(()=>{this._run()}))})),this.toUnhook.add(e.onDidChangeModelContent(e=>{_f(this.model.uri,`output`)||this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(e=>{!e.newModelUrl&&e.oldModelUrl?this._stopSingular():jq.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(e=>{let t=this.editor.getOption(89);if(this.occurrencesHighlightEnablement!==t)switch(this.occurrencesHighlightEnablement=t,t){case`off`:this._stopAll();break;case`singleFile`:this._stopAll(jq.query?.modelInfo?.modelURI);break;case`multiFile`:jq.query&&this._run(!0);break;default:console.warn(`Unknown occurrencesHighlight setting value:`,t);break}})),this.toUnhook.add(this.configurationService.onDidChangeConfiguration(e=>{if(e.affectsConfiguration(`editor.occurrencesHighlightDelay`)){let e=o.getValue(`editor.occurrencesHighlightDelay`);this.occurrencesHighlightDelay!==e&&(this.occurrencesHighlightDelay=e)}})),this.toUnhook.add(e.onDidBlurEditorWidget(()=>{let e=this.codeEditorService.getFocusedCodeEditor();e?e.getModel()?.uri.scheme===Du.vscodeNotebookCell&&this.editor.getModel()?.uri.scheme!==Du.vscodeNotebookCell&&this._stopAll():this._stopAll()})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=void 0,jq.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(e){this.occurrencesHighlightEnablement!==`off`&&(this.runDelayer.cancel(),this.runDelayer.trigger(()=>{this._run(!1,e)}))}stop(){this.occurrencesHighlightEnablement!==`off`&&this._stopAll()}_getSortedHighlights(){return this.decorations.getRanges().sort(T.compareRangesUsingStarts)}moveNext(){let e=this._getSortedHighlights(),t=(e.findIndex(e=>e.containsPosition(this.editor.getPosition()))+1)%e.length,n=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let r=this._getWord();r&&Qp(`${this.editor.getModel().getLineContent(n.startLineNumber)}, ${t+1} of ${e.length} for '${r.word}'`)}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),t=(e.findIndex(e=>e.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,n=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let r=this._getWord();r&&Qp(`${this.editor.getModel().getLineContent(n.startLineNumber)}, ${t+1} of ${e.length} for '${r.word}'`)}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;let e=jq.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),jq.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(e){let t=this.codeEditorService.listCodeEditors(),n=[];for(let r of t){if(!r.hasModel()||Of(r.getModel().uri,e))continue;let t=jq.storedDecorationIDs.get(r.getModel().uri);if(!t)continue;r.removeDecorations(t),n.push(r.getModel().uri);let i=Rq.get(r);i?.wordHighlighter&&i.wordHighlighter.decorations.length>0&&(i.wordHighlighter.decorations.clear(),i.wordHighlighter.workerRequest=null,i.wordHighlighter._hasWordHighlights.set(!1))}for(let e of n)jq.storedDecorationIDs.delete(e)}_stopSingular(){this._removeSingleDecorations(),this.editor.hasTextFocus()&&(this.editor.getModel()?.uri.scheme!==Du.vscodeNotebookCell&&jq.query?.modelInfo?.modelURI.scheme!==Du.vscodeNotebookCell?(jq.query=null,this._run()):jq.query?.modelInfo&&(jq.query.modelInfo=null)),this.renderDecorationsTimer!==void 0&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=void 0),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||=(this.workerRequestTokenId++,!0)}_stopAll(e){this._removeAllDecorations(e),this.renderDecorationsTimer!==void 0&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=void 0),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||=(this.workerRequestTokenId++,!0)}_onPositionChanged(e){if(this.occurrencesHighlightEnablement===`off`){this._stopAll();return}if(e.source!==`api`&&e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:n})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===Du.vscodeNotebookCell){let t=[],n=this.codeEditorService.listCodeEditors();for(let r of n){let n=r.getModel();n&&n!==e&&n.uri.scheme===Du.vscodeNotebookCell&&t.push(n)}return t}let t=[],n=this.codeEditorService.listCodeEditors();for(let r of n){if(!Ho(r))continue;let n=r.getModel();n&&e===n.modified&&t.push(n.modified)}if(t.length)return t;if(this.occurrencesHighlightEnablement===`singleFile`)return[];for(let r of n){let n=r.getModel();n&&n!==e&&t.push(n)}return t}async _run(e,t){if(this.editor.hasTextFocus()){let e=this.editor.getSelection();if(!e||e.startLineNumber!==e.endLineNumber){jq.query=null,this._stopAll();return}let t=e.startColumn,n=e.endColumn,r=this._getWord();if(!r||r.startColumn>t||r.endColumn<n){jq.query=null,this._stopAll();return}jq.query={modelInfo:{modelURI:this.model.uri,selection:e}}}else if(!jq.query){this._stopAll();return}if(this.lastCursorPositionChangeTime=new Date().getTime(),Of(this.editor.getModel().uri,jq.query.modelInfo?.modelURI)){if(!e){let e=this.decorations.getRanges();for(let t of e)if(t.containsPosition(this.editor.getPosition()))return}this._stopAll(e?this.model.uri:void 0);let n=++this.workerRequestTokenId;this.workerRequestCompleted=!1;let r=this.getOtherModelsToHighlight(this.editor.getModel());if(!jq.query||!jq.query.modelInfo)return;let i=await this.textModelService.createModelReference(jq.query.modelInfo.modelURI);try{this.workerRequest=this.computeWithModel(i.object.textEditorModel,jq.query.modelInfo.selection,r),this.workerRequest?.result.then(e=>{n===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=e||[],this._beginRenderDecorations(t??this.occurrencesHighlightDelay))},$p)}catch(e){this.logService.error(`Unexpected error during occurrence request. Log: `,e)}finally{i.dispose()}}else if(this.model.uri.scheme===Du.vscodeNotebookCell){let e=++this.workerRequestTokenId;if(this.workerRequestCompleted=!1,!jq.query||!jq.query.modelInfo)return;let n=await this.textModelService.createModelReference(jq.query.modelInfo.modelURI);try{this.workerRequest=this.computeWithModel(n.object.textEditorModel,jq.query.modelInfo.selection,[this.model]),this.workerRequest?.result.then(n=>{e===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=n||[],this._beginRenderDecorations(t??this.occurrencesHighlightDelay))},$p)}catch(e){this.logService.error(`Unexpected error during occurrence request. Log: `,e)}finally{n.dispose()}}}computeWithModel(e,t,n){return n.length?Oq(this.multiDocumentProviders,e,t,this.editor.getOption(147),n):Dq(this.providers,e,t,this.editor.getOption(147))}_beginRenderDecorations(e){let t=new Date().getTime(),n=this.lastCursorPositionChangeTime+e;t>=n?(this.renderDecorationsTimer=void 0,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},n-t)}renderDecorations(){this.renderDecorationsTimer=void 0;let e=this.codeEditorService.listCodeEditors();for(let t of e){let e=Rq.get(t);if(!e)continue;let n=[],r=t.getModel()?.uri;if(r&&this.workerRequestValue.has(r)){let i=jq.storedDecorationIDs.get(r),a=this.workerRequestValue.get(r);if(a)for(let e of a)e.range&&n.push({range:e.range,options:AU(e.kind)});let o=[];t.changeDecorations(e=>{o=e.deltaDecorations(i??[],n)}),jq.storedDecorationIDs=jq.storedDecorationIDs.set(r,o),n.length>0&&(e.wordHighlighter?.decorations.set(n),e.wordHighlighter?._hasWordHighlights.set(!0))}}this.workerRequest=null}dispose(){this._stopSingular(),this.toUnhook.dispose()}},Lq=jq=kq([Aq(4,d),Aq(5,ec),Aq(6,xl),Aq(7,Fp)],Lq),Rq=class extends z{static#e=Mq=this;static#t=this.ID=`editor.contrib.wordHighlighter`;static get(e){return e.getContribution(Mq.ID)}constructor(e,t,n,r,i,a,o){super(),this._wordHighlighter=null;let s=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&e.getModel().uri.scheme!==Du.accessibleView&&(this._wordHighlighter=new Lq(e,n.documentHighlightProvider,n.multiDocumentHighlightProvider,t,i,r,a,o))};this._register(e.onDidChangeModel(e=>{this._wordHighlighter&&=(!e.newModelUrl&&e.oldModelUrl?.scheme!==Du.vscodeNotebookCell&&this.wordHighlighter?.stop(),this._wordHighlighter.dispose(),null),s()})),s()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){this._wordHighlighter?.moveNext()}moveBack(){this._wordHighlighter?.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore(250)}dispose(){this._wordHighlighter&&=(this._wordHighlighter.dispose(),null),super.dispose()}},Rq=Mq=kq([Aq(1,bh),Aq(2,V),Aq(3,ec),Aq(4,d),Aq(5,xl),Aq(6,Fp)],Rq),zq=class extends S{constructor(e,t){super(t),this._isNext=e}run(e,t){let n=Rq.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}},Bq=class extends zq{constructor(){super(!0,{id:`editor.action.wordHighlight.next`,label:K(1554,`Go to Next Symbol Highlight`),precondition:Nq,kbOpts:{kbExpr:J.editorTextFocus,primary:65,weight:100}})}},Vq=class extends zq{constructor(){super(!1,{id:`editor.action.wordHighlight.prev`,label:K(1555,`Go to Previous Symbol Highlight`),precondition:Nq,kbOpts:{kbExpr:J.editorTextFocus,primary:1089,weight:100}})}},Hq=class extends S{constructor(){super({id:`editor.action.wordHighlight.trigger`,label:K(1556,`Trigger Symbol Highlight`),precondition:void 0,kbOpts:{kbExpr:J.editorTextFocus,primary:0,weight:100}})}run(e,t,n){let r=Rq.get(t);r&&r.restoreViewState(!0)}},k(Rq.ID,Rq,0),D(Bq),D(Vq),D(Hq),hl(Cq)})),Wq,Gq,Kq,qq,Jq,Yq,Xq,Zq,Qq,$q,eJ,tJ,nJ,rJ,iJ,aJ,oJ,sJ,cJ,lJ,uJ,dJ,fJ,pJ,mJ,hJ,gJ,_J,vJ,yJ=t((()=>{v(),Xr(),bd(),Wi(),Dc(),Ia(),Su(),_(),ze(),yc(),oo(),P(),u(),C(),Bm(),Wq=class extends dn{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;let r=rh(t.getOption(147),t.getOption(146)),i=t.getModel(),a=t.getSelections(),o=a.length>1,s=a.map(e=>{let t=new H(e.positionLineNumber,e.positionColumn),n=this._move(r,i,t,this._wordNavigationType,o);return this._moveTo(e,n,this._inSelectionMode)});if(i.pushStackElement(),t._getViewModel().setCursorStates(`moveWordCommand`,3,s.map(e=>fi.fromModelSelection(e))),s.length===1){let e=new H(s[0].positionLineNumber,s[0].positionColumn);t.revealPosition(e,0)}}_moveTo(e,t,n){return n?new X(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new X(t.lineNumber,t.column,t.lineNumber,t.column)}},Gq=class extends Wq{_move(e,t,n,r,i){return Tm.moveWordLeft(e,t,n,r,i)}},Kq=class extends Wq{_move(e,t,n,r,i){return Tm.moveWordRight(e,t,n,r)}},qq=class extends Gq{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:`cursorWordStartLeft`,precondition:void 0})}},Jq=class extends Gq{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:`cursorWordEndLeft`,precondition:void 0})}},Yq=class extends Gq{constructor(){super({inSelectionMode:!1,wordNavigationType:1,id:`cursorWordLeft`,precondition:void 0,kbOpts:{kbExpr:b.and(J.textInputFocus,b.and(Ss,et)?.negate()),primary:2063,mac:{primary:527},weight:100}})}},Xq=class extends Gq{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:`cursorWordStartLeftSelect`,precondition:void 0})}},Zq=class extends Gq{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:`cursorWordEndLeftSelect`,precondition:void 0})}},Qq=class extends Gq{constructor(){super({inSelectionMode:!0,wordNavigationType:1,id:`cursorWordLeftSelect`,precondition:void 0,kbOpts:{kbExpr:b.and(J.textInputFocus,b.and(Ss,et)?.negate()),primary:3087,mac:{primary:1551},weight:100}})}},$q=class extends Gq{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:`cursorWordAccessibilityLeft`,precondition:void 0})}_move(e,t,n,r,i){return super._move(rh(gf.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,r,i)}},eJ=class extends Gq{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:`cursorWordAccessibilityLeftSelect`,precondition:void 0})}_move(e,t,n,r,i){return super._move(rh(gf.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,r,i)}},tJ=class extends Kq{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:`cursorWordStartRight`,precondition:void 0})}},nJ=class extends Kq{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:`cursorWordEndRight`,precondition:void 0,kbOpts:{kbExpr:b.and(J.textInputFocus,b.and(Ss,et)?.negate()),primary:2065,mac:{primary:529},weight:100}})}},rJ=class extends Kq{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:`cursorWordRight`,precondition:void 0})}},iJ=class extends Kq{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:`cursorWordStartRightSelect`,precondition:void 0})}},aJ=class extends Kq{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:`cursorWordEndRightSelect`,precondition:void 0,kbOpts:{kbExpr:b.and(J.textInputFocus,b.and(Ss,et)?.negate()),primary:3089,mac:{primary:1553},weight:100}})}},oJ=class extends Kq{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:`cursorWordRightSelect`,precondition:void 0})}},sJ=class extends Kq{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:`cursorWordAccessibilityRight`,precondition:void 0})}_move(e,t,n,r,i){return super._move(rh(gf.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,r,i)}},cJ=class extends Kq{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:`cursorWordAccessibilityRightSelect`,precondition:void 0})}_move(e,t,n,r,i){return super._move(rh(gf.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,r,i)}},lJ=class extends dn{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){let r=e?.get(yn);if(!t.hasModel()||!r)return;let i=rh(t.getOption(147),t.getOption(146)),a=t.getModel(),o=t.getSelections(),s=t.getOption(10),c=t.getOption(15),l=r.getLanguageConfiguration(a.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),d=o.map(e=>new fd(this._delete({wordSeparators:i,model:a,selection:e,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(13),autoClosingBrackets:s,autoClosingQuotes:c,autoClosingPairs:l,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType),``));t.pushUndoStop(),t.executeCommands(this.id,d),t.pushUndoStop()}},uJ=class extends lJ{_delete(e,t){return Tm.deleteWordLeft(e,t)||new T(1,1,1,1)}},dJ=class extends lJ{_delete(e,t){let n=Tm.deleteWordRight(e,t);if(n)return n;let r=e.model.getLineCount(),i=e.model.getLineMaxColumn(r);return new T(r,i,r,i)}},fJ=class extends uJ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:`deleteWordStartLeft`,precondition:J.writable})}},pJ=class extends uJ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:`deleteWordEndLeft`,precondition:J.writable})}},mJ=class extends uJ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:`deleteWordLeft`,precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}},hJ=class extends dJ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:`deleteWordStartRight`,precondition:J.writable})}},gJ=class extends dJ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:`deleteWordEndRight`,precondition:J.writable})}},_J=class extends dJ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:`deleteWordRight`,precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}},vJ=class extends S{constructor(){super({id:`deleteInsideWord`,precondition:J.writable,label:K(1557,`Delete Word`)})}run(e,t,n){if(!t.hasModel())return;let r=rh(t.getOption(147),t.getOption(146)),i=t.getModel(),a=t.getSelections().map(e=>new fd(Tm.deleteInsideWord(r,i,e),``));t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}},E(new qq),E(new Jq),E(new Yq),E(new Xq),E(new Zq),E(new Qq),E(new tJ),E(new nJ),E(new rJ),E(new iJ),E(new aJ),E(new oJ),E(new $q),E(new eJ),E(new sJ),E(new cJ),E(new fJ),E(new pJ),E(new mJ),E(new hJ),E(new gJ),E(new _J),D(vJ)})),bJ,xJ,SJ,CJ,wJ,TJ,EJ,DJ,OJ=t((()=>{v(),Dc(),_(),yc(),yJ(),jo(),bJ=class extends lJ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:`deleteWordPartLeft`,precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){return _h.deleteWordPartLeft(e)||new T(1,1,1,1)}},xJ=class extends lJ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:`deleteWordPartRight`,precondition:J.writable,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=_h.deleteWordPartRight(e);if(n)return n;let r=e.model.getLineCount(),i=e.model.getLineMaxColumn(r);return new T(r,i,r,i)}},SJ=class extends Wq{_move(e,t,n,r,i){return _h.moveWordPartLeft(e,t,n,i)}},CJ=class extends SJ{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:`cursorWordPartLeft`,precondition:void 0,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:783},weight:100}})}},hn.registerCommandAlias(`cursorWordPartStartLeft`,`cursorWordPartLeft`),wJ=class extends SJ{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:`cursorWordPartLeftSelect`,precondition:void 0,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}},hn.registerCommandAlias(`cursorWordPartStartLeftSelect`,`cursorWordPartLeftSelect`),TJ=class extends Wq{_move(e,t,n,r,i){return _h.moveWordPartRight(e,t,n)}},EJ=class extends TJ{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:`cursorWordPartRight`,precondition:void 0,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:785},weight:100}})}},DJ=class extends TJ{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:`cursorWordPartRightSelect`,precondition:void 0,kbOpts:{kbExpr:J.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}},E(new bJ),E(new xJ),E(new CJ),E(new wJ),E(new EJ),E(new DJ)})),kJ,AJ=t((()=>{Fd(),q(),v(),i_(),P(),kJ=class extends z{static#e=this.ID=`editor.contrib.readOnlyMessageController`;constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){let e=n_.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(104);t||=this.editor.isSimpleWidget?new Af(A(1360,`Cannot edit in read-only input`)):new Af(A(1361,`Cannot edit in read-only editor`)),e.showMessage(t,this.editor.getPosition())}}},k(kJ.ID,kJ,2)})),jJ,MJ,NJ,PJ=t((()=>{sn(),ls(),pr(),tr(),yu(),JA(),q(),N(),jJ=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},MJ=function(e,t){return function(n,r){t(n,r,e)}},NJ=class extends z{constructor(e,t,n){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=n,this._currentModel=Cc(this,void 0);let r=f(`documentSymbolProvider.onDidChange`,this._languageFeaturesService.documentSymbolProvider.onDidChange),i=f(`_textModel.onDidChangeContent`,mf.debounce(e=>this._textModel.onDidChangeContent(e),()=>void 0,100));this._register(xm(async(e,t)=>{r.read(e),i.read(e);let n=t.add(new gr),a=await this._outlineModelService.getOrCreate(this._textModel,n.token);t.isDisposed||this._currentModel.set(a,void 0)}))}getBreadcrumbItems(e,t){let n=this._currentModel.read(t);if(!n)return[];let r=n.asListOfDocumentSymbols().filter(t=>e.contains(t.range.startLineNumber)&&!e.contains(t.range.endLineNumber));return r.sort(ts(Fe(e=>e.range.endLineNumber-e.range.startLineNumber,er))),r.map(e=>({name:e.name,kind:e.kind,startLineNumber:e.range.startLineNumber}))}},NJ=jJ([MJ(1,V),MJ(2,KA)],NJ),an.setBreadcrumbsSourceFactory((e,t)=>t.createInstance(NJ,e))})),FJ=t((()=>{_m(),ol(),Jh(),ag(),pg(),yg(),xg(),Mv(),eb(),bb(),rE(),pE(),yE(),TE(),jE(),NE(),qE(),rk(),OA(),MA(),zA(),YA(),zz(),Zg(),qw(),Gz(),kB(),jB(),gV(),BV(),VV(),ZV(),nH(),iH(),XH(),oU(),bU(),SU(),OU(),mW(),RW(),XW(),mG(),yG(),KG(),XG(),cK(),oM(),yK(),vF(),TK(),DK(),kK(),fq(),yq(),Uq(),yJ(),OJ(),AJ(),PJ(),Fr(),fy()})),IJ=t((()=>{})),LJ,RJ,zJ=t((()=>{IJ(),y(),q(),v(),Rt(),LJ=class extends z{static#e=this.ID=`editor.contrib.iPadShowKeyboard`;constructor(e){super(),this.editor=e,this.widget=null,Mn&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){let e=!this.editor.getOption(103);!this.widget&&e?this.widget=new RJ(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&=(this.widget.dispose(),null)}},RJ=class e extends z{static#e=this.ID=`editor.contrib.ShowKeyboardWidget`;constructor(e){super(),this.editor=e,this._domNode=document.createElement(`textarea`),this._domNode.className=`iPadShowKeyboard`,this._register(ch(this._domNode,`touchstart`,e=>{this.editor.focus()})),this._register(ch(this._domNode,`focus`,e=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return e.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}},k(LJ.ID,LJ,3)})),BJ=t((()=>{}));function VJ(e){let t=``;for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);switch(r){case 9:t+=``;break;case 32:t+=``;break;default:t+=String.fromCharCode(r)}}return t}function HJ(e,t){let n=ve.get(t);if(n)return n;let r=e.encodeLanguageId(t);return{getInitialState:()=>Cl,tokenize:(e,n,r)=>Ad(t,r),tokenizeEncoded:(e,t,n)=>nu(r,n)}}var UJ,WJ,GJ,KJ,qJ,JJ,YJ=t((()=>{BJ(),y(),Ao(),q(),v(),Gr(),bo(),Ef(),h(),La(),Fr(),UJ=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},WJ=function(e,t){return function(n,r){t(n,r,e)}},KJ=class extends z{static#e=GJ=this;static#t=this.ID=`editor.contrib.inspectTokens`;static get(e){return e.getContribution(GJ.ID)}constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(e=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(e=>this.stop())),this._register(ve.onDidChange(e=>this.stop())),this._register(this._editor.onKeyUp(e=>e.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new JJ(this._editor,this._languageService))}stop(){this._widget&&=(this._widget.dispose(),null)}},KJ=GJ=UJ([WJ(1,Em),WJ(2,Qi)],KJ),qJ=class extends S{constructor(){super({id:`editor.action.inspectTokens`,label:nt.inspectTokensAction,alias:`Developer: Inspect Tokens`,precondition:void 0})}run(e,t){KJ.get(t)?.launch()}},JJ=class e extends z{static#e=this._ID=`editor.contrib.inspectTokensWidget`;constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement(`div`),this._domNode.className=`tokens-inspect-widget`,this._tokenizationSupport=HJ(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(e=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return e._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let r=t.tokens1.length-1;r>=0;r--){let i=t.tokens1[r];if(e.column-1>=i.offset){n=r;break}}let r=0;for(let n=t.tokens2.length>>>1;n>=0;n--)if(e.column-1>=t.tokens2[n<<1]){r=n;break}let i=this._model.getLineContent(e.lineNumber),a=``;if(n<t.tokens1.length){let e=t.tokens1[n].offset,r=n+1<t.tokens1.length?t.tokens1[n+1].offset:i.length;a=i.substring(e,r)}gn(this._domNode,R(`h2.tm-token`,void 0,VJ(a),R(`span.tm-token-length`,void 0,`${a.length} ${a.length===1?`char`:`chars`}`))),x(this._domNode,R(`hr.tokens-inspect-separator`,{style:`clear:both`}));let o=(r<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(r<<1)+1]):null;x(this._domNode,R(`table.tm-metadata-table`,void 0,R(`tbody`,void 0,R(`tr`,void 0,R(`td.tm-metadata-key`,void 0,`language`),R(`td.tm-metadata-value`,void 0,`${o?o.languageId:`-?-`}`)),R(`tr`,void 0,R(`td.tm-metadata-key`,void 0,`token type`),R(`td.tm-metadata-value`,void 0,`${o?this._tokenTypeToString(o.tokenType):`-?-`}`)),R(`tr`,void 0,R(`td.tm-metadata-key`,void 0,`font style`),R(`td.tm-metadata-value`,void 0,`${o?this._fontStyleToString(o.fontStyle):`-?-`}`)),R(`tr`,void 0,R(`td.tm-metadata-key`,void 0,`foreground`),R(`td.tm-metadata-value`,void 0,`${o?_o.Format.CSS.formatHex(o.foreground):`-?-`}`)),R(`tr`,void 0,R(`td.tm-metadata-key`,void 0,`background`),R(`td.tm-metadata-value`,void 0,`${o?_o.Format.CSS.formatHex(o.background):`-?-`}`))))),x(this._domNode,R(`hr.tokens-inspect-separator`)),n<t.tokens1.length&&x(this._domNode,R(`span.tm-token-type`,void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=ve.getColorMap(),n=je.getLanguageId(e),r=je.getTokenType(e),i=je.getFontStyle(e),a=je.getForeground(e),o=je.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:r,fontStyle:i,foreground:t[a],background:t[o]}}_tokenTypeToString(e){switch(e){case 0:return`Other`;case 1:return`Comment`;case 2:return`String`;case 3:return`RegEx`;default:return`??`}}_fontStyleToString(e){let t=``;return e&1&&(t+=`italic `),e&2&&(t+=`bold `),e&4&&(t+=`underline `),e&8&&(t+=`strikethrough `),t.length===0&&(t=`---`),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),r=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:r.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}},k(KJ.ID,KJ,4),D(qJ)})),XJ,ZJ,QJ,$J,eY=t((()=>{P(),An(),q(),Ki(),Be(),xn(),XJ=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ZJ=function(e,t){return function(n,r){t(n,r,e)}},$J=class{static#e=QJ=this;static#t=this.PREFIX=`?`;constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=It.as(Sa.Quickaccess)}provide(e){let t=new I;return t.add(e.onDidAccept(()=>{let[t]=e.selectedItems;t&&this.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(e=>{let t=this.registry.getQuickAccessProvider(e.substr(QJ.PREFIX.length));t&&t.prefix&&t.prefix!==QJ.PREFIX&&this.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(e=>e.prefix!==QJ.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((e,t)=>e.prefix.localeCompare(t.prefix)).flatMap(e=>this.createPicks(e))}createPicks(e){return e.helpEntries.map(t=>{let n=t.prefix||e.prefix,r=n||``;return{prefix:n,label:r,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:A(1728,`{0}, {1}`,r,t.description),description:t.description}})}},$J=QJ=XJ([ZJ(0,Ne),ZJ(1,xs)],$J)})),tY=t((()=>{An(),Be(),Fr(),eY(),It.as(Sa.Quickaccess).registerQuickAccessProvider({ctor:$J,prefix:``,helpEntries:[{description:Zu.helpQuickAccessActionLabel}]})})),nY,rY=t((()=>{Ha(),q(),En(),zf(),Ro(),Yf(),qc(),nY=class{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,n){let r=new I;e.canAcceptInBackground=!!this.options?.canAcceptInBackground,e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let i=r.add(new su);return i.value=this.doProvide(e,t,n),r.add(this.onDidActiveTextEditorControlChange(()=>{i.value=void 0,i.value=this.doProvide(e,t)})),r}doProvide(e,t,n){let r=new I,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){let a={editor:i},o=Do(i);if(o){let e=i.saveViewState()??void 0;r.add(o.onDidChangeCursorPosition(()=>{e=i.saveViewState()??void 0})),a.restoreViewState=()=>{e&&i===this.activeTextEditorControl&&i.restoreViewState(e)},r.add(jm(t.onCancellationRequested)(()=>a.restoreViewState?.()))}r.add(qm(()=>this.clearDecorations(i))),r.add(this.provideWithTextEditor(a,e,t,n))}else r.add(this.provideWithoutTextEditor(e,t));return r}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,`code.jump`),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();let n=e.getModel();n&&`getLineContent`in n&&El(`${n.getLineContent(t.range.startLineNumber)}`)}getModel(e){return Ho(e)?e.getModel()?.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(e=>{let n=[];this.rangeHighlightDecorationId&&=(n.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),n.push(this.rangeHighlightDecorationId.rangeHighlightId),void 0);let r=[{range:t,options:{description:`quick-access-range-highlight`,className:`rangeHighlight`,isWholeLine:!0}},{range:t,options:{description:`quick-access-range-highlight-overview`,overviewRuler:{color:hs(on),position:Rl.Full}}}],[i,a]=e.deltaDecorations(n,r);this.rangeHighlightDecorationId={rangeHighlightId:i,overviewRulerDecorationId:a}})}clearDecorations(e){let t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(e=>{e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}})),iY,aY=t((()=>{q(),En(),rY(),P(),iY=class e extends nY{static#e=this.PREFIX=`:`;constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){let t=A(1322,`Open a text editor first to go to a line.`);return e.items=[{label:t}],e.ariaLabel=t,z.None}provideWithTextEditor(t,n,r){let i=t.editor,a=new I;a.add(n.onDidAccept(e=>{let[r]=n.selectedItems;if(r){if(!this.isValidLineNumber(i,r.lineNumber))return;this.gotoLocation(t,{range:this.toRange(r.lineNumber,r.column),keyMods:n.keyMods,preserveFocus:e.inBackground}),e.inBackground||n.hide()}}));let o=()=>{let t=this.parsePosition(i,n.value.trim().substr(e.PREFIX.length)),r=this.getPickLabel(i,t.lineNumber,t.column);if(n.items=[{lineNumber:t.lineNumber,column:t.column,label:r}],n.ariaLabel=r,!this.isValidLineNumber(i,t.lineNumber)){this.clearDecorations(i);return}let a=this.toRange(t.lineNumber,t.column);i.revealRangeInCenter(a,0),this.addDecorations(i,a)};o(),a.add(n.onDidChangeValue(()=>o()));let s=Do(i);return s&&s.getOptions().get(76).renderType===2&&(s.updateOptions({lineNumbers:`on`}),a.add(qm(()=>s.updateOptions({lineNumbers:`relative`})))),a}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){let n=t.split(/,|:|#/).map(e=>parseInt(e,10)).filter(e=>!isNaN(e)),r=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:r+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?A(1323,`Go to line {0} and character {1}.`,t,n):A(1324,`Go to line {0}.`,t);let r=e.getPosition()||{lineNumber:1,column:1},i=this.lineCount(e);return i>1?A(1325,`Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.`,r.lineNumber,r.column,i):A(1326,`Current Line: {0}, Character: {1}. Type a line number to navigate to.`,r.lineNumber,r.column)}isValidLineNumber(e,t){return!t||typeof t!=`number`?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!=`number`)return!1;let r=this.getModel(e);if(!r)return!1;let i={lineNumber:t,column:n};return r.validatePosition(i).equals(i)}lineCount(e){return this.getModel(e)?.getLineCount()??0}}})),oY,sY,cY,lY,uY=t((()=>{aY(),An(),Be(),ff(),Fr(),N(),v(),yc(),xn(),oY=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},sY=function(e,t){return function(n,r){t(n,r,e)}},cY=class extends iY{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=mf.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}},cY=oY([sY(0,ec)],cY),lY=class e extends S{static#e=this.ID=`editor.action.gotoLine`;constructor(){super({id:e.ID,label:vt.gotoLineActionLabel,alias:`Go to Line/Column...`,precondition:void 0,kbOpts:{kbExpr:J.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Ne).quickAccess.show(cY.PREFIX)}},D(lY),It.as(Sa.Quickaccess).registerQuickAccessProvider({ctor:cY,prefix:cY.PREFIX,helpEntries:[{description:vt.gotoLineActionLabel,commandId:lY.ID}]})}));function dY(e,t,n=0,r=0){let i=t;return i.values&&i.values.length>1?fY(e,i.values,n,r):pY(e,t,n,r)}function fY(e,t,n,r){let i=0,a=[];for(let o of t){let[t,s]=pY(e,o,n,r);if(typeof t!=`number`)return bY;i+=t,a.push(...s)}return[i,mY(a)]}function pY(e,t,n,r){let i=Ke(t.original,t.originalLowercase,n,e,e.toLowerCase(),r,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?[i[0],Da(i)]:bY}function mY(e){let t=e.sort((e,t)=>e.start-t.start),n=[],r;for(let e of t)!r||!hY(r,e)?(r=e,n.push(e)):(r.start=Math.min(r.start,e.start),r.end=Math.max(r.end,e.end));return n}function hY(e,t){return!(e.end<t.start||t.end<e.start)}function gY(e){return e.startsWith(`"`)&&e.endsWith(`"`)}function _Y(e){typeof e!=`string`&&(e=``);let t=e.toLowerCase(),{pathNormalized:n,normalized:r,normalizedLowercase:i}=vY(e),a=n.indexOf(Mf)>=0,o=gY(e),s,c=e.split(xY);if(c.length>1)for(let e of c){let t=gY(e),{pathNormalized:n,normalized:r,normalizedLowercase:i}=vY(e);r&&(s||=[],s.push({original:e,originalLowercase:e.toLowerCase(),pathNormalized:n,normalized:r,normalizedLowercase:i,expectContiguousMatch:t}))}return{original:e,originalLowercase:t,pathNormalized:n,normalized:r,normalizedLowercase:i,values:s,containsPathSeparator:a,expectContiguousMatch:o}}function vY(e){let t;t=_n?e.replace(/\//g,Mf):e.replace(/\\/g,Mf);let n=Vt(t).replace(/\s|"/g,``);return{pathNormalized:t,normalized:n,normalizedLowercase:n.toLowerCase()}}function yY(e){return _Y(Array.isArray(e)?e.map(e=>e.original).join(xY):e.original)}var bY,xY,SY=t((()=>{Ua(),jl(),Rt(),Ga(),bY=[void 0,[]],Object.freeze({score:0}),xY=` `})),CY,wY,TY,EY,DY,OY,kY=t((()=>{O(),wu(),Kn(),sr(),SY(),q(),Ga(),_(),Gr(),JA(),rY(),P(),yu(),Co(),CY=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},wY=function(e,t){return function(n,r){t(n,r,e)}},EY=class extends nY{static#e=TY=this;static#t=this.PREFIX=`@`;static#n=this.SCOPE_PREFIX=`:`;static#r=this.PREFIX_BY_CATEGORY=`${this.PREFIX}${this.SCOPE_PREFIX}`;constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,A(1327,`To go to a symbol, first open a text editor with symbol information.`)),z.None}provideWithTextEditor(e,t,n,r){let i=e.editor,a=this.getModel(i);return a?this._languageFeaturesService.documentSymbolProvider.has(a)?this.doProvideWithEditorSymbols(e,a,t,n,r):this.doProvideWithoutEditorSymbols(e,a,t,n):z.None}doProvideWithoutEditorSymbols(e,t,n,r){let i=new I;return this.provideLabelPick(n,A(1328,`The active text editor does not provide symbol information.`)),(async()=>{!await this.waitForLanguageSymbolRegistry(t,i)||r.isCancellationRequested||i.add(this.doProvideWithEditorSymbols(e,t,n,r))})(),i}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;let n=new so,r=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(r.dispose(),n.complete(!0))}));return t.add(qm(()=>n.complete(!1))),n.p}doProvideWithEditorSymbols(e,t,n,r,i){let a=e.editor,o=new I;o.add(n.onDidAccept(t=>{let[r]=n.selectedItems;r&&r.range&&(this.gotoLocation(e,{range:r.range.selection,keyMods:n.keyMods,preserveFocus:t.inBackground}),i?.handleAccept?.(r,t.inBackground),t.inBackground||n.hide())})),o.add(n.onDidTriggerItemButton(({item:t})=>{t&&t.range&&(this.gotoLocation(e,{range:t.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));let s=this.getDocumentSymbols(t,r),c=o.add(new su),l=async e=>{c?.value?.cancel(),n.busy=!1,c.value=new Zd,n.busy=!0;try{let i=_Y(n.value.substr(TY.PREFIX.length).trim()),a=await this.doGetSymbolPicks(s,i,void 0,c.value.token,t);if(r.isCancellationRequested)return;if(a.length>0){if(n.items=a,e&&i.original.length===0){let t=Dh(a,t=>!!(t.type!==`separator`&&t.range&&T.containsPosition(t.range.decoration,e)));t&&(n.activeItems=[t])}}else i.original.length>0?this.provideLabelPick(n,A(1329,`No matching editor symbols`)):this.provideLabelPick(n,A(1330,`No editor symbols`))}finally{r.isCancellationRequested||(n.busy=!1)}};return o.add(n.onDidChangeValue(()=>l(void 0))),l(a.getSelection()?.getPosition()),o.add(n.onDidChangeActive(()=>{let[e]=n.activeItems;e&&e.range&&(a.revealRangeInCenter(e.range.selection,0),this.addDecorations(a,e.range.decoration))})),o}async doGetSymbolPicks(e,t,n,r,i){let a=await e;if(r.isCancellationRequested)return[];let o=t.original.indexOf(TY.SCOPE_PREFIX)===0,s=o?1:0,c,l;t.values&&t.values.length>1?(c=yY(t.values[0]),l=yY(t.values.slice(1))):c=t;let u,d=this.options?.openSideBySideDirection?.();d&&(u=[{iconClass:d===`right`?Qt.asClassName(B.splitHorizontal):Qt.asClassName(B.splitVertical),tooltip:d===`right`?A(1331,`Open to the Side`):A(1332,`Open to the Bottom`)}]);let f=[];for(let e=0;e<a.length;e++){let r=a[e],o=Fn(r.name),d=`$(${sd.toIcon(r.kind).id}) ${o}`,p=d.length-o.length,m=r.containerName;n?.extraContainerLabel&&(m=m?`${n.extraContainerLabel}  ${m}`:n.extraContainerLabel);let h,ee,te,ne;if(t.original.length>s){let e=!1;if(c!==t&&([h,ee]=dY(d,{...t,values:void 0},s,p),typeof h==`number`&&(e=!0)),typeof h!=`number`&&([h,ee]=dY(d,c,s,p),typeof h!=`number`))continue;if(!e&&l){if(m&&l.original.length>0&&([te,ne]=dY(m,l)),typeof te!=`number`)continue;typeof h==`number`&&(h+=te)}}let re=r.tags&&r.tags.indexOf(1)>=0;f.push({index:e,kind:r.kind,score:h,label:d,ariaLabel:Gu(r.name,r.kind),description:m,highlights:re?void 0:{label:ee,description:ne},range:{selection:T.collapseToStart(r.selectionRange),decoration:r.range},uri:i.uri,symbolName:o,strikethrough:re,buttons:u})}let p=f.sort((e,t)=>o?this.compareByKindAndScore(e,t):this.compareByScore(e,t)),m=[];if(o){let e,t,n=0;function r(){t&&typeof e==`number`&&n>0&&(t.label=Je(OY[e]||DY,n))}for(let i of p)e===i.kind?n++:(r(),e=i.kind,n=1,t={type:`separator`},m.push(t)),m.push(i);r()}else p.length>0&&(m=[{label:A(1333,`symbols ({0})`,f.length),type:`separator`},...p]);return m}compareByScore(e,t){if(typeof e.score!=`number`&&typeof t.score==`number`)return 1;if(typeof e.score==`number`&&typeof t.score!=`number`)return-1;if(typeof e.score==`number`&&typeof t.score==`number`){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){let n=OY[e.kind]||DY,r=OY[t.kind]||DY,i=n.localeCompare(r);return i===0?this.compareByScore(e,t):i}async getDocumentSymbols(e,t){let n=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()}},EY=TY=CY([wY(0,V),wY(1,KA)],EY),DY=A(1334,`properties ({0})`),OY={5:A(1335,`methods ({0})`),11:A(1336,`functions ({0})`),8:A(1337,`constructors ({0})`),12:A(1338,`variables ({0})`),4:A(1339,`classes ({0})`),22:A(1340,`structs ({0})`),23:A(1341,`events ({0})`),24:A(1342,`operators ({0})`),10:A(1343,`interfaces ({0})`),2:A(1344,`namespaces ({0})`),3:A(1345,`packages ({0})`),25:A(1346,`type parameters ({0})`),1:A(1347,`modules ({0})`),6:A(1348,`properties ({0})`),9:A(1349,`enumerations ({0})`),21:A(1350,`enumeration members ({0})`),14:A(1351,`strings ({0})`),0:A(1352,`files ({0})`),17:A(1353,`arrays ({0})`),15:A(1354,`numbers ({0})`),16:A(1355,`booleans ({0})`),18:A(1356,`objects ({0})`),19:A(1357,`keys ({0})`),7:A(1358,`fields ({0})`),13:A(1359,`constants ({0})`)}})),AY,jY,MY,NY,PY=t((()=>{fy(),my(),kY(),An(),Be(),ff(),Fr(),N(),v(),yc(),xn(),JA(),yu(),AY=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},jY=function(e,t){return function(n,r){t(n,r,e)}},MY=class extends EY{constructor(e,t,n){super(t,n),this.editorService=e,this.onDidActiveTextEditorControlChange=mf.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}},MY=AY([jY(0,ec),jY(1,V),jY(2,KA)],MY),NY=class e extends S{static#e=this.ID=`editor.action.quickOutline`;constructor(){super({id:e.ID,label:ce.quickOutlineActionLabel,alias:`Go to Symbol...`,precondition:J.hasDocumentSymbolProvider,kbOpts:{kbExpr:J.focus,primary:3117,weight:100},contextMenuOpts:{group:`navigation`,order:3}})}run(e){e.get(Ne).quickAccess.show(EY.PREFIX,{itemActivation:So.NONE})}},D(NY),It.as(Sa.Quickaccess).registerQuickAccessProvider({ctor:MY,prefix:EY.PREFIX,helpEntries:[{description:ce.quickOutlineActionLabel,prefix:EY.PREFIX,commandId:NY.ID},{description:ce.quickOutlineByCategoryActionLabel,prefix:EY.PREFIX_BY_CATEGORY}]})}));function FY(e){let t=new Map;for(let n of e)t.set(n,(t.get(n)??0)+1);return t}function IY(e){let t=e.slice(0);t.sort((e,t)=>t.score-e.score);let n=t[0]?.score??0;if(n>0)for(let e of t)e.score/=n;return t}var LY,RY=t((()=>{LY=class e{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){let n=this.computeEmbedding(e),r=new Map,i=[];for(let[e,a]of this.documents){if(t.isCancellationRequested)return[];for(let t of a.chunks){let a=this.computeSimilarityScore(t,n,r);a>0&&i.push({key:e,score:a})}}return i}static termFrequencies(t){return FY(e.splitTerms(t))}static*splitTerms(e){let t=e=>e.toLowerCase();for(let[n]of e.matchAll(/\b\p{Letter}[\p{Letter}\d]{2,}\b/gu)){yield t(n);let e=n.replace(/([a-z])([A-Z])/g,`$1 $2`).split(/\s+/g);if(e.length>1)for(let n of e)n.length>2&&/\p{Letter}{3,}/gu.test(n)&&(yield t(n))}}updateDocuments(t){for(let{key:e}of t)this.deleteDocument(e);for(let n of t){let t=[];for(let r of n.textChunks){let n=e.termFrequencies(r);for(let e of n.keys())this.chunkOccurrences.set(e,(this.chunkOccurrences.get(e)??0)+1);t.push({text:r,tf:n})}this.chunkCount+=t.length,this.documents.set(n.key,{chunks:t})}return this}deleteDocument(e){let t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(let e of t.chunks)for(let t of e.tf.keys()){let e=this.chunkOccurrences.get(t);if(typeof e==`number`){let n=e-1;n<=0?this.chunkOccurrences.delete(t):this.chunkOccurrences.set(t,n)}}}}computeSimilarityScore(e,t,n){let r=0;for(let[i,a]of Object.entries(t)){let t=e.tf.get(i);if(!t)continue;let o=n.get(i);typeof o!=`number`&&(o=this.computeIdf(i),n.set(i,o));let s=t*o;r+=s*a}return r}computeEmbedding(t){let n=e.termFrequencies(t);return this.computeTfidf(n)}computeIdf(e){let t=this.chunkOccurrences.get(e)??0;return t>0?Math.log((this.chunkCount+1)/t):0}computeTfidf(e){let t=Object.create(null);for(let[n,r]of e){let e=this.computeIdf(n);e>0&&(t[n]=r*e)}return t}}}));function zY(e){let t=e;return Array.isArray(t.items)}function BY(e){let t=e;return!!t.picks&&t.additionalPicks instanceof Promise}var VY,HY,UY=t((()=>{O(),wu(),q(),lr(),(function(e){e[e.NO_ACTION=0]=`NO_ACTION`,e[e.CLOSE_PICKER=1]=`CLOSE_PICKER`,e[e.REFRESH_PICKER=2]=`REFRESH_PICKER`,e[e.REMOVE_ITEM=3]=`REMOVE_ITEM`})(VY||={}),HY=class extends z{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,n){let r=new I;e.canAcceptInBackground=!!this.options?.canAcceptInBackground,e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let i,a=r.add(new su),o=async()=>{i?.dispose(!0),e.busy=!1;let r=a.value=new I;i=r.add(new Zd(t));let o=i.token,s=e.value.substring(this.prefix.length);this.options?.shouldSkipTrimPickFilter||(s=s.trim());let c=this._getPicks(s,r,o,n),l=(t,n)=>{let r,i;if(zY(t)?(r=t.items,i=t.active):r=t,r.length===0){if(n)return!1;(s.length>0||e.hideInput)&&this.options?.noResultsPick&&(r=Jn(this.options.noResultsPick)?[this.options.noResultsPick(s)]:[this.options.noResultsPick])}return e.items=r,i&&(e.activeItems=[i]),!0},u=async t=>{let n=!1,r=!1;await Promise.all([(async()=>{typeof t.mergeDelay==`number`&&(await dl(t.mergeDelay),o.isCancellationRequested)||r||(n=l(t.picks,!0))})(),(async()=>{e.busy=!0;try{let r=await t.additionalPicks;if(o.isCancellationRequested)return;let i,a;zY(t.picks)?(i=t.picks.items,a=t.picks.active):i=t.picks;let s,c;if(zY(r)?(s=r.items,c=r.active):s=r,s.length>0||!n){let t;if(!a&&!c){let n=e.activeItems[0];n&&i.indexOf(n)!==-1&&(t=n)}l({items:[...i,...s],active:a||c||t})}}finally{o.isCancellationRequested||(e.busy=!1),r=!0}})()])};if(c!==null)if(BY(c))await u(c);else if(!(c instanceof Promise))l(c);else{e.busy=!0;try{let e=await c;if(o.isCancellationRequested)return;BY(e)?await u(e):l(e)}finally{o.isCancellationRequested||(e.busy=!1)}}};r.add(e.onDidChangeValue(()=>o())),o(),r.add(e.onDidAccept(t=>{if(n?.handleAccept){t.inBackground||e.hide(),n.handleAccept?.(e.activeItems[0],t.inBackground);return}let[r]=e.selectedItems;typeof r?.accept==`function`&&(t.inBackground||e.hide(),r.accept(e.keyMods,t))}));let s=async(n,r)=>{if(typeof r.trigger!=`function`)return;let i=r.buttons?.indexOf(n)??-1;if(i>=0){let n=r.trigger(i,e.keyMods),a=typeof n==`number`?n:await n;if(t.isCancellationRequested)return;switch(a){case VY.NO_ACTION:break;case VY.CLOSE_PICKER:e.hide();break;case VY.REFRESH_PICKER:o();break;case VY.REMOVE_ITEM:{let t=e.items.indexOf(r);if(t!==-1){let n=e.items.slice(),r=n.splice(t,1),i=e.activeItems.filter(e=>e!==r[0]),a=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=n,i&&(e.activeItems=i),e.keepScrollPosition=a}break}}}};return r.add(e.onDidTriggerItemButton(({button:e,item:t})=>s(e,t))),r.add(e.onDidTriggerSeparatorButton(({button:e,separator:t})=>s(e,t))),r}}})),WY,GY,KY,qY,JY,YY,XY=t((()=>{L_(),M(),Ua(),Ha(),q(),Gm(),RY(),P(),jo(),qp(),Dn(),F(),Ki(),$s(),UY(),Zl(),Ue(),WY=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},GY=function(e,t){return function(n,r){t(n,r,e)}},JY=class extends HY{static#e=KY=this;static#t=this.PREFIX=`>`;static#n=this.TFIDF_THRESHOLD=.5;static#r=this.TFIDF_MAX_RESULTS=5;static#i=this.WORD_FILTER=me(ct,rd,Ct);constructor(e,t,n,r,i,a){super(KY.PREFIX,e),this.keybindingService=n,this.commandService=r,this.telemetryService=i,this.dialogService=a,this.commandsHistory=this._register(t.createInstance(YY)),this.options=e}async _getPicks(e,t,n,r){let i=await this.getCommandPicks(n);if(n.isCancellationRequested)return[];let a=jm(()=>{let t=new LY;return t.updateDocuments(i.map(e=>({key:e.commandId,textChunks:[this.getTfIdfChunk(e)]}))),IY(t.calculateScores(e,n)).filter(e=>e.score>KY.TFIDF_THRESHOLD).slice(0,KY.TFIDF_MAX_RESULTS)}),o=[];for(let t of i){let r=KY.WORD_FILTER(e,t.label)??void 0,i=t.commandAlias?KY.WORD_FILTER(e,t.commandAlias)??void 0:void 0;if(r||i)t.highlights={label:r,detail:this.options.showAlias?i:void 0},o.push(t);else if(e===t.commandId)o.push(t);else if(e.length>=3){let e=a();if(n.isCancellationRequested)return[];let r=e.find(e=>e.key===t.commandId);r&&(t.tfIdfScore=r.score,o.push(t))}}let s=new Map;for(let e of o){let t=s.get(e.label);t?(e.description=e.commandId,t.description=t.commandId):s.set(e.label,e)}o.sort((e,t)=>{if(e.tfIdfScore&&t.tfIdfScore)return e.tfIdfScore===t.tfIdfScore?e.label.localeCompare(t.label):t.tfIdfScore-e.tfIdfScore;if(e.tfIdfScore)return 1;if(t.tfIdfScore)return-1;let n=this.commandsHistory.peek(e.commandId),r=this.commandsHistory.peek(t.commandId);if(n&&r)return n>r?-1:1;if(n)return-1;if(r)return 1;if(this.options.suggestedCommandIds){let n=this.options.suggestedCommandIds.has(e.commandId),r=this.options.suggestedCommandIds.has(t.commandId);if(n&&r)return 0;if(n)return-1;if(r)return 1}return e.label.localeCompare(t.label)});let c=[],l=!1,u=!0,d=!!this.options.suggestedCommandIds;for(let e=0;e<o.length;e++){let t=o[e];e===0&&this.commandsHistory.peek(t.commandId)&&(c.push({type:`separator`,label:A(1721,`recently used`)}),l=!0),u&&t.tfIdfScore!==void 0&&(c.push({type:`separator`,label:A(1722,`similar commands`)}),u=!1),d&&t.tfIdfScore===void 0&&!this.commandsHistory.peek(t.commandId)&&this.options.suggestedCommandIds?.has(t.commandId)&&(c.push({type:`separator`,label:A(1723,`commonly used`)}),l=!0,d=!1),l&&t.tfIdfScore===void 0&&!this.commandsHistory.peek(t.commandId)&&!this.options.suggestedCommandIds?.has(t.commandId)&&(c.push({type:`separator`,label:A(1724,`other commands`)}),l=!1),c.push(this.toCommandPick(t,r))}return this.hasAdditionalCommandPicks(e,n)?{picks:c,additionalPicks:(async()=>{let t=await this.getAdditionalCommandPicks(i,o,e,n);if(n.isCancellationRequested)return[];let a=t.map(e=>this.toCommandPick(e,r));return u&&a[0]?.type!==`separator`&&a.unshift({type:`separator`,label:A(1725,`similar commands`)}),a})()}:c}toCommandPick(e,t){if(e.type===`separator`)return e;let n=this.keybindingService.lookupKeybinding(e.commandId),r=n?A(1726,`{0}, {1}`,e.label,n.getAriaLabel()):e.label;return{...e,ariaLabel:r,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:n,accept:async()=>{this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2(`workbenchActionExecuted`,{id:e.commandId,from:t?.from??`quick open`});try{e.args?.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(t){_d(t)||this.dialogService.error(A(1727,`Command '{0}' resulted in an error`,e.label),I_(t))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:n}){let r=e;return t&&t!==e&&(r+=` - ${t}`),n&&n.value!==e&&(r+=` - ${n.value===n.original?n.value:`${n.value} (${n.original})`}`),r}},JY=KY=WY([GY(1,U),GY(2,xs),GY(3,no),GY(4,Ta),GY(5,Nt)],JY),YY=class extends z{static#e=qY=this;static#t=this.DEFAULT_COMMANDS_HISTORY_LENGTH=50;static#n=this.PREF_KEY_CACHE=`commandPalette.mru.cache`;static#r=this.PREF_KEY_COUNTER=`commandPalette.mru.counter`;static#i=this.counter=1;static#a=this.hasChanges=!1;constructor(e,t,n){super(),this.storageService=e,this.configurationService=t,this.logService=n,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===mu.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration(`workbench.commandPalette.history`)||(this.configuredCommandsHistoryLength=qY.getConfiguredCommandHistoryLength(this.configurationService),qY.cache&&qY.cache.limit!==this.configuredCommandsHistoryLength&&(qY.cache.limit=this.configuredCommandsHistoryLength,qY.hasChanges=!0))}load(){let e=this.storageService.get(qY.PREF_KEY_CACHE,0),t;if(e)try{t=JSON.parse(e)}catch(e){this.logService.error(`[CommandsHistory] invalid data: ${e}`)}let n=qY.cache=new sh(this.configuredCommandsHistoryLength,1);if(t){let e;e=t.usesLRU?t.entries:t.entries.sort((e,t)=>e.value-t.value),e.forEach(e=>n.set(e.key,e.value))}qY.counter=this.storageService.getNumber(qY.PREF_KEY_COUNTER,0,qY.counter)}push(e){qY.cache&&(qY.cache.set(e,qY.counter++),qY.hasChanges=!0)}peek(e){return qY.cache?.peek(e)}saveState(){if(!qY.cache||!qY.hasChanges)return;let e={usesLRU:!0,entries:[]};qY.cache.forEach((t,n)=>e.entries.push({key:n,value:t})),this.storageService.store(qY.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(qY.PREF_KEY_COUNTER,qY.counter,0,0),qY.hasChanges=!1}static getConfiguredCommandHistoryLength(e){let t=e.getValue().workbench?.commandPalette?.history;return typeof t==`number`?t:qY.DEFAULT_COMMANDS_HISTORY_LENGTH}},YY=qY=WY([GY(0,Vd),GY(1,xl),GY(2,Fp)],YY)})),ZY,QY=t((()=>{Bs(),Ks(),XY(),ZY=class extends JY{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getCodeEditorCommandPicks(){let e=this.activeTextEditorControl;if(!e)return[];let t=[];for(let n of e.getSupportedActions()){let e;n.metadata?.description&&(e=Sm(n.metadata.description)?n.metadata.description:{original:n.metadata.description,value:n.metadata.description}),t.push({commandId:n.id,commandAlias:n.alias,commandDescription:e,label:gm(n.label)||n.id})}return t}}})),$Y,eX,tX,nX,rX=t((()=>{An(),Be(),Fr(),ff(),QY(),F(),Ki(),jo(),Ue(),Dn(),v(),yc(),xn(),$Y=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},eX=function(e,t){return function(n,r){t(n,r,e)}},tX=class extends ZY{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(e,t,n,r,i,a){super({showAlias:!1},e,n,r,i,a),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}},tX=$Y([eX(0,U),eX(1,ec),eX(2,xs),eX(3,no),eX(4,Ta),eX(5,Nt)],tX),nX=class e extends S{static#e=this.ID=`editor.action.quickCommand`;constructor(){super({id:e.ID,label:pi.quickCommandActionLabel,alias:`Command Palette`,precondition:void 0,kbOpts:{kbExpr:J.focus,primary:59,weight:100},contextMenuOpts:{group:`z_commands`,order:1}})}run(e){e.get(Ne).quickAccess.show(tX.PREFIX)}},D(nX),It.as(Sa.Quickaccess).registerQuickAccessProvider({ctor:tX,prefix:tX.PREFIX,helpEntries:[{description:pi.quickCommandHelp,commandId:nX.ID}]})})),iX,aX,oX,sX=t((()=>{v(),ff(),Sw(),qp(),C(),F(),up(),Zl(),iX=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},aX=function(e,t){return function(n,r){t(n,r,e)}},oX=class extends xw{constructor(e,t,n,r,i,a,o){super(!0,e,t,n,r,i,a,o)}},oX=iX([aX(1,bh),aX(2,ec),aX(3,Hp),aX(4,U),aX(5,Vd),aX(6,xl)],oX),k(xw.ID,oX,4)})),cX,lX=t((()=>{v(),La(),Fr(),qs(),Hm(),cX=class extends S{constructor(){super({id:`editor.action.toggleHighContrast`,label:Fu.toggleHighContrast,alias:`Toggle High Contrast Theme`,precondition:void 0}),this._originalThemeName=null}run(e,t){let n=e.get(Em),r=n.getColorTheme();hh(r.type)?(n.setTheme(this._originalThemeName||(Cm(r.type)?`vs-dark`:`vs`)),this._originalThemeName=null):(n.setTheme(Cm(r.type)?Ps:um),this._originalThemeName=r.themeName)}},D(cX)})),uX=n({CancellationTokenSource:()=>Mp,Emitter:()=>Gd,KeyCode:()=>tp,KeyMod:()=>vu,MarkerSeverity:()=>Xs,MarkerTag:()=>lf,Position:()=>gp,Range:()=>Oc,Selection:()=>pd,SelectionDirection:()=>Jp,Token:()=>Uc,Uri:()=>Sl,editor:()=>Tf,languages:()=>zl},1),dX=t((()=>{FJ(),zJ(),YJ(),tY(),uY(),PY(),rX(),sX(),lX(),tu()}));function Q(e){let t=e.id;yX[t]=e,vX.languages.register(e);let n=xX.getOrCreate(t);vX.languages.registerTokensProviderFactory(t,{create:async()=>(await n.load()).language}),vX.languages.onLanguageEncountered(t,async()=>{let e=await n.load();vX.languages.setLanguageConfiguration(t,e.conf)})}var fX,pX,mX,hX,gX,_X,vX,yX,bX,xX,$=t((()=>{tu(),fX=Object.defineProperty,pX=Object.getOwnPropertyDescriptor,mX=Object.getOwnPropertyNames,hX=Object.prototype.hasOwnProperty,gX=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let i of mX(t))!hX.call(e,i)&&i!==n&&fX(e,i,{get:()=>t[i],enumerable:!(r=pX(t,i))||r.enumerable});return e},_X=(e,t,n)=>(gX(e,t,`default`),n&&gX(n,t,`default`)),vX={},_X(vX,kd),yX={},bX={},xX=class e{static getOrCreate(t){return bX[t]||(bX[t]=new e(t)),bX[t]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,yX[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}}})),SX=t((()=>{i(),$(),Q({id:`abap`,extensions:[`.abap`],aliases:[`abap`,`ABAP`],loader:()=>a(()=>import(`./abap.DpMh8n4d.js`),__vite__mapDeps([0,1]))})})),CX=t((()=>{i(),$(),Q({id:`apex`,extensions:[`.cls`],aliases:[`Apex`,`apex`],mimetypes:[`text/x-apex-source`,`text/x-apex`],loader:()=>a(()=>import(`./apex.CBYuJaBq.js`),__vite__mapDeps([2,1]))})})),wX=t((()=>{i(),$(),Q({id:`azcli`,extensions:[`.azcli`],aliases:[`Azure CLI`,`azcli`],loader:()=>a(()=>import(`./azcli.46mC3s0n.js`),__vite__mapDeps([3,1]))})})),TX=t((()=>{i(),$(),Q({id:`bat`,extensions:[`.bat`,`.cmd`],aliases:[`Batch`,`bat`],loader:()=>a(()=>import(`./bat.BiNRFAcx.js`),__vite__mapDeps([4,1]))})})),EX=t((()=>{i(),$(),Q({id:`bicep`,extensions:[`.bicep`],aliases:[`Bicep`],loader:()=>a(()=>import(`./bicep.Bra81O6e.js`),__vite__mapDeps([5,1]))})})),DX=t((()=>{i(),$(),Q({id:`cameligo`,extensions:[`.mligo`],aliases:[`Cameligo`],loader:()=>a(()=>import(`./cameligo.CIqHPksX.js`),__vite__mapDeps([6,1]))})})),OX=t((()=>{i(),$(),Q({id:`clojure`,extensions:[`.clj`,`.cljs`,`.cljc`,`.edn`],aliases:[`clojure`,`Clojure`],loader:()=>a(()=>import(`./clojure.CukCJSjs.js`),__vite__mapDeps([7,1]))})})),kX=t((()=>{i(),$(),Q({id:`coffeescript`,extensions:[`.coffee`],aliases:[`CoffeeScript`,`coffeescript`,`coffee`],mimetypes:[`text/x-coffeescript`,`text/coffeescript`],loader:()=>a(()=>import(`./coffee.Dd9whuX1.js`),__vite__mapDeps([8,1]))})})),AX=t((()=>{i(),$(),Q({id:`c`,extensions:[`.c`,`.h`],aliases:[`C`,`c`],loader:()=>a(()=>import(`./cpp.D7AEt7Is.js`),__vite__mapDeps([9,1]))}),Q({id:`cpp`,extensions:[`.cpp`,`.cc`,`.cxx`,`.hpp`,`.hh`,`.hxx`],aliases:[`C++`,`Cpp`,`cpp`],loader:()=>a(()=>import(`./cpp.D7AEt7Is.js`),__vite__mapDeps([9,1]))})})),jX=t((()=>{i(),$(),Q({id:`csharp`,extensions:[`.cs`,`.csx`,`.cake`],aliases:[`C#`,`csharp`],loader:()=>a(()=>import(`./csharp.wkRTauaZ.js`),__vite__mapDeps([10,1]))})})),MX=t((()=>{i(),$(),Q({id:`csp`,extensions:[`.csp`],aliases:[`CSP`,`csp`],loader:()=>a(()=>import(`./csp.MK6c4yj9.js`),__vite__mapDeps([11,1]))})})),NX=t((()=>{i(),$(),Q({id:`css`,extensions:[`.css`],aliases:[`CSS`,`css`],mimetypes:[`text/css`],loader:()=>a(()=>import(`./css.BaxpdnoO.js`),__vite__mapDeps([12,1]))})})),PX=t((()=>{i(),$(),Q({id:`cypher`,extensions:[`.cypher`,`.cyp`],aliases:[`Cypher`,`OpenCypher`],loader:()=>a(()=>import(`./cypher.DmPyMZRi.js`),__vite__mapDeps([13,1]))})})),FX=t((()=>{i(),$(),Q({id:`dart`,extensions:[`.dart`],aliases:[`Dart`,`dart`],mimetypes:[`text/x-dart-source`,`text/x-dart`],loader:()=>a(()=>import(`./dart.DS7Nhwue.js`),__vite__mapDeps([14,1]))})})),IX=t((()=>{i(),$(),Q({id:`dockerfile`,extensions:[`.dockerfile`],filenames:[`Dockerfile`],aliases:[`Dockerfile`],loader:()=>a(()=>import(`./dockerfile.D2eJ7JVh.js`),__vite__mapDeps([15,1]))})})),LX=t((()=>{i(),$(),Q({id:`ecl`,extensions:[`.ecl`],aliases:[`ECL`,`Ecl`,`ecl`],loader:()=>a(()=>import(`./ecl.CBegIcNT.js`),__vite__mapDeps([16,1]))})})),RX=t((()=>{i(),$(),Q({id:`elixir`,extensions:[`.ex`,`.exs`],aliases:[`Elixir`,`elixir`,`ex`],loader:()=>a(()=>import(`./elixir.YIGhDf2i.js`),__vite__mapDeps([17,1]))})})),zX=t((()=>{i(),$(),Q({id:`flow9`,extensions:[`.flow`],aliases:[`Flow9`,`Flow`,`flow9`,`flow`],loader:()=>a(()=>import(`./flow9.xCkpHvZG.js`),__vite__mapDeps([18,1]))})})),BX=t((()=>{i(),$(),Q({id:`fsharp`,extensions:[`.fs`,`.fsi`,`.ml`,`.mli`,`.fsx`,`.fsscript`],aliases:[`F#`,`FSharp`,`fsharp`],loader:()=>a(()=>import(`./fsharp.B5e7ZSv7.js`),__vite__mapDeps([19,1]))})})),VX=t((()=>{i(),$(),Q({id:`freemarker2`,extensions:[`.ftl`,`.ftlh`,`.ftlx`],aliases:[`FreeMarker2`,`Apache FreeMarker2`],loader:()=>a(()=>import(`./freemarker2.BjWRgxI8.js`),__vite__mapDeps([20,21,1])).then(e=>e.TagAutoInterpolationDollar)}),Q({id:`freemarker2.tag-angle.interpolation-dollar`,aliases:[`FreeMarker2 (Angle/Dollar)`,`Apache FreeMarker2 (Angle/Dollar)`],loader:()=>a(()=>import(`./freemarker2.BjWRgxI8.js`),__vite__mapDeps([20,21,1])).then(e=>e.TagAngleInterpolationDollar)}),Q({id:`freemarker2.tag-bracket.interpolation-dollar`,aliases:[`FreeMarker2 (Bracket/Dollar)`,`Apache FreeMarker2 (Bracket/Dollar)`],loader:()=>a(()=>import(`./freemarker2.BjWRgxI8.js`),__vite__mapDeps([20,21,1])).then(e=>e.TagBracketInterpolationDollar)}),Q({id:`freemarker2.tag-angle.interpolation-bracket`,aliases:[`FreeMarker2 (Angle/Bracket)`,`Apache FreeMarker2 (Angle/Bracket)`],loader:()=>a(()=>import(`./freemarker2.BjWRgxI8.js`),__vite__mapDeps([20,21,1])).then(e=>e.TagAngleInterpolationBracket)}),Q({id:`freemarker2.tag-bracket.interpolation-bracket`,aliases:[`FreeMarker2 (Bracket/Bracket)`,`Apache FreeMarker2 (Bracket/Bracket)`],loader:()=>a(()=>import(`./freemarker2.BjWRgxI8.js`),__vite__mapDeps([20,21,1])).then(e=>e.TagBracketInterpolationBracket)}),Q({id:`freemarker2.tag-auto.interpolation-dollar`,aliases:[`FreeMarker2 (Auto/Dollar)`,`Apache FreeMarker2 (Auto/Dollar)`],loader:()=>a(()=>import(`./freemarker2.BjWRgxI8.js`),__vite__mapDeps([20,21,1])).then(e=>e.TagAutoInterpolationDollar)}),Q({id:`freemarker2.tag-auto.interpolation-bracket`,aliases:[`FreeMarker2 (Auto/Bracket)`,`Apache FreeMarker2 (Auto/Bracket)`],loader:()=>a(()=>import(`./freemarker2.BjWRgxI8.js`),__vite__mapDeps([20,21,1])).then(e=>e.TagAutoInterpolationBracket)})})),HX=t((()=>{i(),$(),Q({id:`go`,extensions:[`.go`],aliases:[`Go`],loader:()=>a(()=>import(`./go.B8Tc_MaV.js`),__vite__mapDeps([22,1]))})})),UX=t((()=>{i(),$(),Q({id:`graphql`,extensions:[`.graphql`,`.gql`],aliases:[`GraphQL`,`graphql`,`gql`],mimetypes:[`application/graphql`],loader:()=>a(()=>import(`./graphql.BKEYXTHn.js`),__vite__mapDeps([23,1]))})})),WX=t((()=>{i(),$(),Q({id:`handlebars`,extensions:[`.handlebars`,`.hbs`],aliases:[`Handlebars`,`handlebars`,`hbs`],mimetypes:[`text/x-handlebars-template`],loader:()=>a(()=>import(`./handlebars.YsjKMsPf.js`),__vite__mapDeps([24,21,1]))})})),GX=t((()=>{i(),$(),Q({id:`hcl`,extensions:[`.tf`,`.tfvars`,`.hcl`],aliases:[`Terraform`,`tf`,`HCL`,`hcl`],loader:()=>a(()=>import(`./hcl.B6AXL0RJ.js`),__vite__mapDeps([25,1]))})})),KX=t((()=>{i(),$(),Q({id:`html`,extensions:[`.html`,`.htm`,`.shtml`,`.xhtml`,`.mdoc`,`.jsp`,`.asp`,`.aspx`,`.jshtm`],aliases:[`HTML`,`htm`,`html`,`xhtml`],mimetypes:[`text/html`,`text/x-jshtm`,`text/template`,`text/ng-template`],loader:()=>a(()=>import(`./html.BkKasrsQ.js`),__vite__mapDeps([26,21,1]))})})),qX=t((()=>{i(),$(),Q({id:`ini`,extensions:[`.ini`,`.properties`,`.gitconfig`],filenames:[`config`,`.gitattributes`,`.gitconfig`,`.editorconfig`],aliases:[`Ini`,`ini`],loader:()=>a(()=>import(`./ini.B8K8sBl8.js`),__vite__mapDeps([27,1]))})})),JX=t((()=>{i(),$(),Q({id:`java`,extensions:[`.java`,`.jav`],aliases:[`Java`,`java`],mimetypes:[`text/x-java-source`,`text/x-java`],loader:()=>a(()=>import(`./java.9HAcJHpN.js`),__vite__mapDeps([28,1]))})})),YX=t((()=>{i(),$(),Q({id:`javascript`,extensions:[`.js`,`.es6`,`.jsx`,`.mjs`,`.cjs`],firstLine:`^#!.*\\bnode`,filenames:[`jakefile`],aliases:[`JavaScript`,`javascript`,`js`],mimetypes:[`text/javascript`],loader:()=>a(()=>import(`./javascript.BQ-2lCem.js`),__vite__mapDeps([29,21,1,30]))})})),XX=t((()=>{i(),$(),Q({id:`julia`,extensions:[`.jl`],aliases:[`julia`,`Julia`],loader:()=>a(()=>import(`./julia.B4sS0sHo.js`),__vite__mapDeps([31,1]))})})),ZX=t((()=>{i(),$(),Q({id:`kotlin`,extensions:[`.kt`,`.kts`],aliases:[`Kotlin`,`kotlin`],mimetypes:[`text/x-kotlin-source`,`text/x-kotlin`],loader:()=>a(()=>import(`./kotlin.BCUUvfR0.js`),__vite__mapDeps([32,1]))})})),QX=t((()=>{i(),$(),Q({id:`less`,extensions:[`.less`],aliases:[`Less`,`less`],mimetypes:[`text/x-less`,`text/less`],loader:()=>a(()=>import(`./less.DmxdpMHQ.js`),__vite__mapDeps([33,1]))})})),$X=t((()=>{i(),$(),Q({id:`lexon`,extensions:[`.lex`],aliases:[`Lexon`],loader:()=>a(()=>import(`./lexon.-h5Zg8QK.js`),__vite__mapDeps([34,1]))})})),eZ=t((()=>{i(),$(),Q({id:`lua`,extensions:[`.lua`],aliases:[`Lua`,`lua`],loader:()=>a(()=>import(`./lua.Z-V7kP5m.js`),__vite__mapDeps([35,1]))})})),tZ=t((()=>{i(),$(),Q({id:`liquid`,extensions:[`.liquid`,`.html.liquid`],aliases:[`Liquid`,`liquid`],mimetypes:[`application/liquid`],loader:()=>a(()=>import(`./liquid.CUIdqTJ5.js`),__vite__mapDeps([36,21,1]))})})),nZ=t((()=>{i(),$(),Q({id:`m3`,extensions:[`.m3`,`.i3`,`.mg`,`.ig`],aliases:[`Modula-3`,`Modula3`,`modula3`,`m3`],loader:()=>a(()=>import(`./m3.CMF59xcM.js`),__vite__mapDeps([37,1]))})})),rZ=t((()=>{i(),$(),Q({id:`markdown`,extensions:[`.md`,`.markdown`,`.mdown`,`.mkdn`,`.mkd`,`.mdwn`,`.mdtxt`,`.mdtext`],aliases:[`Markdown`,`markdown`],loader:()=>a(()=>import(`./markdown.DddhgNMc.js`),__vite__mapDeps([38,1]))})})),iZ=t((()=>{i(),$(),Q({id:`mdx`,extensions:[`.mdx`],aliases:[`MDX`,`mdx`],loader:()=>a(()=>import(`./mdx.D1H1Fehf.js`),__vite__mapDeps([39,21,1]))})})),aZ=t((()=>{i(),$(),Q({id:`mips`,extensions:[`.s`],aliases:[`MIPS`,`MIPS-V`],mimetypes:[`text/x-mips`,`text/mips`,`text/plaintext`],loader:()=>a(()=>import(`./mips.DvStThKp.js`),__vite__mapDeps([40,1]))})})),oZ=t((()=>{i(),$(),Q({id:`msdax`,extensions:[`.dax`,`.msdax`],aliases:[`DAX`,`MSDAX`],loader:()=>a(()=>import(`./msdax.C-eoqIWm.js`),__vite__mapDeps([41,1]))})})),sZ=t((()=>{i(),$(),Q({id:`mysql`,extensions:[],aliases:[`MySQL`,`mysql`],loader:()=>a(()=>import(`./mysql.biybBdig.js`),__vite__mapDeps([42,1]))})})),cZ=t((()=>{i(),$(),Q({id:`objective-c`,extensions:[`.m`],aliases:[`Objective-C`],loader:()=>a(()=>import(`./objective-c.C4p-I2A4.js`),__vite__mapDeps([43,1]))})})),lZ=t((()=>{i(),$(),Q({id:`pascal`,extensions:[`.pas`,`.p`,`.pp`],aliases:[`Pascal`,`pas`],mimetypes:[`text/x-pascal-source`,`text/x-pascal`],loader:()=>a(()=>import(`./pascal.jddvmI7n.js`),__vite__mapDeps([44,1]))})})),uZ=t((()=>{i(),$(),Q({id:`pascaligo`,extensions:[`.ligo`],aliases:[`Pascaligo`,`ligo`],loader:()=>a(()=>import(`./pascaligo.xJBT8_kr.js`),__vite__mapDeps([45,1]))})})),dZ=t((()=>{i(),$(),Q({id:`perl`,extensions:[`.pl`,`.pm`],aliases:[`Perl`,`pl`],loader:()=>a(()=>import(`./perl.DY9Y3dK7.js`),__vite__mapDeps([46,1]))})})),fZ=t((()=>{i(),$(),Q({id:`pgsql`,extensions:[],aliases:[`PostgreSQL`,`postgres`,`pg`,`postgre`],loader:()=>a(()=>import(`./pgsql._CwCr0tv.js`),__vite__mapDeps([47,1]))})})),pZ=t((()=>{i(),$(),Q({id:`php`,extensions:[`.php`,`.php4`,`.php5`,`.phtml`,`.ctp`],aliases:[`PHP`,`php`],mimetypes:[`application/x-php`],loader:()=>a(()=>import(`./php.C7etKvNE.js`),__vite__mapDeps([48,1]))})})),mZ=t((()=>{i(),$(),Q({id:`pla`,extensions:[`.pla`],loader:()=>a(()=>import(`./pla.BB4B2U57.js`),__vite__mapDeps([49,1]))})})),hZ=t((()=>{i(),$(),Q({id:`postiats`,extensions:[`.dats`,`.sats`,`.hats`],aliases:[`ATS`,`ATS/Postiats`],loader:()=>a(()=>import(`./postiats.C-YV7d8P.js`),__vite__mapDeps([50,1]))})})),gZ=t((()=>{i(),$(),Q({id:`powerquery`,extensions:[`.pq`,`.pqm`],aliases:[`PQ`,`M`,`Power Query`,`Power Query M`],loader:()=>a(()=>import(`./powerquery.CgxQBw6m.js`),__vite__mapDeps([51,1]))})})),_Z=t((()=>{i(),$(),Q({id:`powershell`,extensions:[`.ps1`,`.psm1`,`.psd1`],aliases:[`PowerShell`,`powershell`,`ps`,`ps1`],loader:()=>a(()=>import(`./powershell.D6Cu_W6z.js`),__vite__mapDeps([52,1]))})})),vZ=t((()=>{i(),$(),Q({id:`proto`,extensions:[`.proto`],aliases:[`protobuf`,`Protocol Buffers`],loader:()=>a(()=>import(`./protobuf.Dtf2N-v1.js`),__vite__mapDeps([53,1]))})})),yZ=t((()=>{i(),$(),Q({id:`pug`,extensions:[`.jade`,`.pug`],aliases:[`Pug`,`Jade`,`jade`],loader:()=>a(()=>import(`./pug.CRVguraw.js`),__vite__mapDeps([54,1]))})})),bZ=t((()=>{i(),$(),Q({id:`python`,extensions:[`.py`,`.rpy`,`.pyw`,`.cpy`,`.gyp`,`.gypi`],aliases:[`Python`,`py`],firstLine:`^#!/.*\\bpython[0-9.-]*\\b`,loader:()=>a(()=>import(`./python.9AqzgffT.js`),__vite__mapDeps([55,21,1]))})})),xZ=t((()=>{i(),$(),Q({id:`qsharp`,extensions:[`.qs`],aliases:[`Q#`,`qsharp`],loader:()=>a(()=>import(`./qsharp.CqFdqwvZ.js`),__vite__mapDeps([56,1]))})})),SZ=t((()=>{i(),$(),Q({id:`r`,extensions:[`.r`,`.rhistory`,`.rmd`,`.rprofile`,`.rt`],aliases:[`R`,`r`],loader:()=>a(()=>import(`./r.C-RwHXs-.js`),__vite__mapDeps([57,1]))})})),CZ=t((()=>{i(),$(),Q({id:`razor`,extensions:[`.cshtml`],aliases:[`Razor`,`razor`],mimetypes:[`text/x-cshtml`],loader:()=>a(()=>import(`./razor.B1Ngcx8R.js`),__vite__mapDeps([58,21,1]))})})),wZ=t((()=>{i(),$(),Q({id:`redis`,extensions:[`.redis`],aliases:[`redis`],loader:()=>a(()=>import(`./redis.CMrzQvAS.js`),__vite__mapDeps([59,1]))})})),TZ=t((()=>{i(),$(),Q({id:`redshift`,extensions:[],aliases:[`Redshift`,`redshift`],loader:()=>a(()=>import(`./redshift.D9Cz8u23.js`),__vite__mapDeps([60,1]))})})),EZ=t((()=>{i(),$(),Q({id:`restructuredtext`,extensions:[`.rst`],aliases:[`reStructuredText`,`restructuredtext`],loader:()=>a(()=>import(`./restructuredtext.ZMaDUIoz.js`),__vite__mapDeps([61,1]))})})),DZ=t((()=>{i(),$(),Q({id:`ruby`,extensions:[`.rb`,`.rbx`,`.rjs`,`.gemspec`,`.pp`],filenames:[`rakefile`,`Gemfile`],aliases:[`Ruby`,`rb`],loader:()=>a(()=>import(`./ruby.e_R4YBlz.js`),__vite__mapDeps([62,1]))})})),OZ=t((()=>{i(),$(),Q({id:`rust`,extensions:[`.rs`,`.rlib`],aliases:[`Rust`,`rust`],loader:()=>a(()=>import(`./rust.D9NEpr-e.js`),__vite__mapDeps([63,1]))})})),kZ=t((()=>{i(),$(),Q({id:`sb`,extensions:[`.sb`],aliases:[`Small Basic`,`sb`],loader:()=>a(()=>import(`./sb.CKVfeAZ8.js`),__vite__mapDeps([64,1]))})})),AZ=t((()=>{i(),$(),Q({id:`scala`,extensions:[`.scala`,`.sc`,`.sbt`],aliases:[`Scala`,`scala`,`SBT`,`Sbt`,`sbt`,`Dotty`,`dotty`],mimetypes:[`text/x-scala-source`,`text/x-scala`,`text/x-sbt`,`text/x-dotty`],loader:()=>a(()=>import(`./scala.47DmFIfk.js`),__vite__mapDeps([65,1]))})})),jZ=t((()=>{i(),$(),Q({id:`scheme`,extensions:[`.scm`,`.ss`,`.sch`,`.rkt`],aliases:[`scheme`,`Scheme`],loader:()=>a(()=>import(`./scheme.BcvaavEB.js`),__vite__mapDeps([66,1]))})})),MZ=t((()=>{i(),$(),Q({id:`scss`,extensions:[`.scss`],aliases:[`Sass`,`sass`,`scss`],mimetypes:[`text/x-scss`,`text/scss`],loader:()=>a(()=>import(`./scss.B4-NpKXg.js`),__vite__mapDeps([67,1]))})})),NZ=t((()=>{i(),$(),Q({id:`shell`,extensions:[`.sh`,`.bash`],aliases:[`Shell`,`sh`],loader:()=>a(()=>import(`./shell.Ds0LdjlB.js`),__vite__mapDeps([68,1]))})})),PZ=t((()=>{i(),$(),Q({id:`sol`,extensions:[`.sol`],aliases:[`sol`,`solidity`,`Solidity`],loader:()=>a(()=>import(`./solidity.DoTc4MZV.js`),__vite__mapDeps([69,1]))})})),FZ=t((()=>{i(),$(),Q({id:`aes`,extensions:[`.aes`],aliases:[`aes`,`sophia`,`Sophia`],loader:()=>a(()=>import(`./sophia.YiD55tbI.js`),__vite__mapDeps([70,1]))})})),IZ=t((()=>{i(),$(),Q({id:`sparql`,extensions:[`.rq`],aliases:[`sparql`,`SPARQL`],loader:()=>a(()=>import(`./sparql.DndYCACx.js`),__vite__mapDeps([71,1]))})})),LZ=t((()=>{i(),$(),Q({id:`sql`,extensions:[`.sql`],aliases:[`SQL`],loader:()=>a(()=>import(`./sql.BbAsHBz8.js`),__vite__mapDeps([72,1]))})})),RZ=t((()=>{i(),$(),Q({id:`st`,extensions:[`.st`,`.iecst`,`.iecplc`,`.lc3lib`,`.TcPOU`,`.TcDUT`,`.TcGVL`,`.TcIO`],aliases:[`StructuredText`,`scl`,`stl`],loader:()=>a(()=>import(`./st.BsJbrd1u.js`),__vite__mapDeps([73,1]))})})),zZ=t((()=>{i(),$(),Q({id:`swift`,aliases:[`Swift`,`swift`],extensions:[`.swift`],mimetypes:[`text/swift`],loader:()=>a(()=>import(`./swift.DkSm-Bnr.js`),__vite__mapDeps([74,1]))})})),BZ=t((()=>{i(),$(),Q({id:`systemverilog`,extensions:[`.sv`,`.svh`],aliases:[`SV`,`sv`,`SystemVerilog`,`systemverilog`],loader:()=>a(()=>import(`./systemverilog.MfGmu8Kl.js`),__vite__mapDeps([75,1]))}),Q({id:`verilog`,extensions:[`.v`,`.vh`],aliases:[`V`,`v`,`Verilog`,`verilog`],loader:()=>a(()=>import(`./systemverilog.MfGmu8Kl.js`),__vite__mapDeps([75,1]))})})),VZ=t((()=>{i(),$(),Q({id:`tcl`,extensions:[`.tcl`],aliases:[`tcl`,`Tcl`,`tcltk`,`TclTk`,`tcl/tk`,`Tcl/Tk`],loader:()=>a(()=>import(`./tcl.Wh-bCz-a.js`),__vite__mapDeps([76,1]))})})),HZ=t((()=>{i(),$(),Q({id:`twig`,extensions:[`.twig`],aliases:[`Twig`,`twig`],mimetypes:[`text/x-twig`],loader:()=>a(()=>import(`./twig.DNc-SFdQ.js`),__vite__mapDeps([77,1]))})})),UZ=t((()=>{i(),$(),Q({id:`typescript`,extensions:[`.ts`,`.tsx`,`.cts`,`.mts`],aliases:[`TypeScript`,`ts`,`typescript`],mimetypes:[`text/typescript`],loader:()=>a(()=>import(`./typescript.C3H-qgi9.js`),__vite__mapDeps([78,21,1,30]))})})),WZ=t((()=>{i(),$(),Q({id:`typespec`,extensions:[`.tsp`],aliases:[`TypeSpec`],loader:()=>a(()=>import(`./typespec.fQAu4VDJ.js`),__vite__mapDeps([79,1]))})})),GZ=t((()=>{i(),$(),Q({id:`vb`,extensions:[`.vb`],aliases:[`Visual Basic`,`vb`],loader:()=>a(()=>import(`./vb.Czsuhsfl.js`),__vite__mapDeps([80,1]))})})),KZ=t((()=>{i(),$(),Q({id:`wgsl`,extensions:[`.wgsl`],aliases:[`WebGPU Shading Language`,`WGSL`,`wgsl`],loader:()=>a(()=>import(`./wgsl.1mHWqPUd.js`),__vite__mapDeps([81,1]))})})),qZ=t((()=>{i(),$(),Q({id:`xml`,extensions:[`.xml`,`.xsd`,`.dtd`,`.ascx`,`.csproj`,`.config`,`.props`,`.targets`,`.wxi`,`.wxl`,`.wxs`,`.xaml`,`.svg`,`.svgz`,`.opf`,`.xslt`,`.xsl`],firstLine:`(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)`,aliases:[`XML`,`xml`],mimetypes:[`text/xml`,`application/xml`,`application/xaml+xml`,`application/xml-dtd`],loader:()=>a(()=>import(`./xml.DGRaUm2f.js`),__vite__mapDeps([82,21,1]))})})),JZ=t((()=>{i(),$(),Q({id:`yaml`,extensions:[`.yaml`,`.yml`],aliases:[`YAML`,`yaml`,`YML`,`yml`],mimetypes:[`application/x-yaml`,`text/x-yaml`],loader:()=>a(()=>import(`./yaml.BEXMb7Bi.js`),__vite__mapDeps([83,21,1]))})})),YZ=t((()=>{tu(),SX(),CX(),wX(),TX(),EX(),DX(),OX(),kX(),AX(),jX(),MX(),NX(),PX(),FX(),IX(),LX(),RX(),zX(),BX(),VX(),HX(),UX(),WX(),GX(),KX(),qX(),JX(),YX(),XX(),ZX(),QX(),$X(),eZ(),tZ(),nZ(),rZ(),iZ(),aZ(),oZ(),sZ(),cZ(),lZ(),uZ(),dZ(),fZ(),pZ(),mZ(),hZ(),gZ(),_Z(),vZ(),yZ(),bZ(),xZ(),SZ(),CZ(),wZ(),TZ(),EZ(),DZ(),OZ(),kZ(),AZ(),jZ(),MZ(),NZ(),PZ(),FZ(),IZ(),LZ(),RZ(),zZ(),BZ(),VZ(),HZ(),UZ(),WZ(),GZ(),KZ(),qZ(),JZ()}));function XZ(){return a(()=>import(`./cssMode.CuhOimmP.js`),__vite__mapDeps([84,21,1]))}var ZZ,QZ,$Z,eQ,tQ,nQ,rQ,iQ,aQ,oQ,sQ,cQ,lQ,uQ=t((()=>{i(),tu(),ZZ=Object.defineProperty,QZ=Object.getOwnPropertyDescriptor,$Z=Object.getOwnPropertyNames,eQ=Object.prototype.hasOwnProperty,tQ=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let i of $Z(t))!eQ.call(e,i)&&i!==n&&ZZ(e,i,{get:()=>t[i],enumerable:!(r=QZ(t,i))||r.enumerable});return e},nQ=(e,t,n)=>(tQ(e,t,`default`),n&&tQ(n,t,`default`)),rQ={},nQ(rQ,kd),iQ=class{constructor(e,t,n){this._onDidChange=new rQ.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},aQ={validate:!0,lint:{compatibleVendorPrefixes:`ignore`,vendorPrefix:`warning`,duplicateProperties:`warning`,emptyRules:`warning`,importStatement:`ignore`,boxModel:`ignore`,universalSelector:`ignore`,zeroUnits:`ignore`,fontFaceProperties:`warning`,hexColorLength:`error`,argumentsInColorFunction:`error`,unknownProperties:`warning`,ieHack:`ignore`,unknownVendorSpecificProperties:`ignore`,propertyIgnoredDueToDisplay:`warning`,important:`ignore`,float:`ignore`,idSelector:`ignore`},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:`collapse`,maxPreserveNewLines:void 0,preserveNewLines:!0}},oQ={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},sQ=new iQ(`css`,aQ,oQ),cQ=new iQ(`scss`,aQ,oQ),lQ=new iQ(`less`,aQ,oQ),rQ.languages.css={cssDefaults:sQ,lessDefaults:lQ,scssDefaults:cQ},rQ.languages.onLanguage(`less`,()=>{XZ().then(e=>e.setupMode(lQ))}),rQ.languages.onLanguage(`scss`,()=>{XZ().then(e=>e.setupMode(cQ))}),rQ.languages.onLanguage(`css`,()=>{XZ().then(e=>e.setupMode(sQ))})}));function dQ(e){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:e===CQ,documentFormattingEdits:e===CQ,documentRangeFormattingEdits:e===CQ}}function fQ(){return a(()=>import(`./htmlMode.CWzJaWlY.js`),__vite__mapDeps([85,21,1]))}function pQ(e,t=SQ,n=dQ(e)){let r=new xQ(e,t,n),i,a=bQ.languages.onLanguage(e,async()=>{i=(await fQ()).setupMode(r)});return{defaults:r,dispose(){a.dispose(),i?.dispose(),i=void 0}}}var mQ,hQ,gQ,_Q,vQ,yQ,bQ,xQ,SQ,CQ,wQ,TQ,EQ,DQ,OQ,kQ,AQ,jQ,MQ=t((()=>{i(),tu(),mQ=Object.defineProperty,hQ=Object.getOwnPropertyDescriptor,gQ=Object.getOwnPropertyNames,_Q=Object.prototype.hasOwnProperty,vQ=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let i of gQ(t))!_Q.call(e,i)&&i!==n&&mQ(e,i,{get:()=>t[i],enumerable:!(r=hQ(t,i))||r.enumerable});return e},yQ=(e,t,n)=>(vQ(e,t,`default`),n&&vQ(n,t,`default`)),bQ={},yQ(bQ,kd),xQ=class{constructor(e,t,n){this._onDidChange=new bQ.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},SQ={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:`default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var`,contentUnformatted:`pre`,indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:`head, body, /html`,wrapAttributes:`auto`},suggest:{},data:{useDefaultDataProvider:!0}},CQ=`html`,wQ=`handlebars`,TQ=`razor`,EQ=pQ(CQ,SQ,dQ(CQ)),DQ=EQ.defaults,OQ=pQ(wQ,SQ,dQ(wQ)),kQ=OQ.defaults,AQ=pQ(TQ,SQ,dQ(TQ)),jQ=AQ.defaults,bQ.languages.html={htmlDefaults:DQ,razorDefaults:jQ,handlebarDefaults:kQ,htmlLanguageService:EQ,handlebarLanguageService:OQ,razorLanguageService:AQ,registerHTMLLanguageService:pQ}}));function NQ(){return a(()=>import(`./jsonMode.BvQZjsP4.js`),__vite__mapDeps([86,21,1]))}var PQ,FQ,IQ,LQ,RQ,zQ,BQ,VQ,HQ,UQ,WQ=t((()=>{i(),tu(),PQ=Object.defineProperty,FQ=Object.getOwnPropertyDescriptor,IQ=Object.getOwnPropertyNames,LQ=Object.prototype.hasOwnProperty,RQ=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let i of IQ(t))!LQ.call(e,i)&&i!==n&&PQ(e,i,{get:()=>t[i],enumerable:!(r=FQ(t,i))||r.enumerable});return e},zQ=(e,t,n)=>(RQ(e,t,`default`),n&&RQ(n,t,`default`)),BQ={},zQ(BQ,kd),VQ=class{constructor(e,t,n){this._onDidChange=new BQ.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},HQ=new VQ(`json`,{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:`warning`,schemaValidation:`warning`,comments:`error`,trailingCommas:`error`},{documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0}),UQ=()=>NQ().then(e=>e.getWorker()),BQ.languages.json={jsonDefaults:HQ,getWorker:UQ},BQ.languages.register({id:`json`,extensions:[`.json`,`.bowerrc`,`.jshintrc`,`.jscsrc`,`.eslintrc`,`.babelrc`,`.har`],aliases:[`JSON`,`json`],mimetypes:[`application/json`]}),BQ.languages.onLanguage(`json`,()=>{NQ().then(e=>e.setupMode(HQ))})})),GQ=n({CancellationTokenSource:()=>Mp,Emitter:()=>Gd,KeyCode:()=>tp,KeyMod:()=>vu,MarkerSeverity:()=>Xs,MarkerTag:()=>lf,Position:()=>gp,Range:()=>Oc,Selection:()=>pd,SelectionDirection:()=>Jp,Token:()=>Uc,Uri:()=>Sl,editor:()=>Tf,languages:()=>zl},1);function KQ(e,t){let n=globalThis.MonacoEnvironment;if(n?.createTrustedTypesPolicy)try{return n.createTrustedTypesPolicy(e,t)}catch(e){console.error(e);return}try{return globalThis.trustedTypes?.createPolicy(e,t)}catch(e){console.error(e);return}}function qQ(e){let t=e.label,n=globalThis.MonacoEnvironment;if(n){if(typeof n.getWorker==`function`)return n.getWorker(`workerMain.js`,t);if(typeof n.getWorkerUrl==`function`){let e=n.getWorkerUrl(`workerMain.js`,t);return new Worker(n$?n$.createScriptURL(e):e,{name:t,type:`module`})}}throw Error(`You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker`)}function JQ(e){let t=Promise.resolve(qQ({label:e.label??`monaco-editor-worker`,moduleId:e.moduleId})).then(t=>(t.postMessage(`ignore`),t.postMessage(e.createData),t));return t$.editor.createWebWorker({worker:t,host:e.host,keepIdleModels:e.keepIdleModels})}var YQ,XQ,ZQ,QQ,$Q,e$,t$,n$,r$,i$=t((()=>{dX(),YZ(),uQ(),MQ(),WQ(),Mh(),dX(),YQ=Object.defineProperty,XQ=Object.getOwnPropertyDescriptor,ZQ=Object.getOwnPropertyNames,QQ=Object.prototype.hasOwnProperty,$Q=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let i of ZQ(t))!QQ.call(e,i)&&i!==n&&YQ(e,i,{get:()=>t[i],enumerable:!(r=XQ(t,i))||r.enumerable});return e},e$=(e,t,n)=>($Q(e,t,`default`),n&&$Q(n,t,`default`)),t$={},e$(t$,uX),n$=typeof self==`object`&&self.constructor&&self.constructor.name===`DedicatedWorkerGlobalScope`&&globalThis.workerttPolicy!==void 0?globalThis.workerttPolicy:KQ(`defaultWorkerFactory`,{createScriptURL:e=>e}),r$=Tf.createWebWorker,Tf.createWebWorker=function(e){return e.worker===void 0?JQ(e):r$(e)}}));function a$(e){return new Worker(`/assets/json.worker-BpdZUhMm.js`,{name:e?.name})}function o$(e){return new Worker(`/assets/ts.worker-o_jt-si_.js`,{name:e?.name})}function s$(e){return new Worker(`/assets/editor.worker-BIVablJY.js`,{name:e?.name})}var c$=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.DummySourceCache=void 0,e.DummySourceCache=function(){function e(){}return e.prototype.getFile=function(e){return Promise.resolve(void 0)},e.prototype.isFileAvailable=function(e){return Promise.resolve(!1)},e.prototype.storeFile=function(e,t){return Promise.resolve(void 0)},e.prototype.clear=function(){return Promise.resolve(void 0)},e}()})),l$=r((e=>{var t=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},n=e&&e.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,`__esModule`,{value:!0}),e.JsDelivrSourceResolver=void 0,e.JsDelivrSourceResolver=function(){function e(){}return e.prototype.resolvePackageJson=function(e,r,i){return t(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.resolveFile(`https://cdn.jsdelivr.net/npm/${e}${r?`@${r}`:``}${i?`/${i}`:``}/package.json`)];case 1:return[2,t.sent()]}})})},e.prototype.resolveSourceFile=function(e,r,i){return t(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.resolveFile(`https://cdn.jsdelivr.net/npm/${e}${r?`@${r}`:``}/${i}`)];case 1:return[2,t.sent()]}})})},e.prototype.resolveFile=function(e){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return[4,fetch(e,{method:`GET`})];case 1:return t=n.sent(),t.ok?[4,t.text()]:[3,3];case 2:return[2,n.sent()];case 3:if(t.status===404)return[2,``];throw Error(`Error other than 404 while fetching from Unpkg at ${e}`);case 4:return[2]}})})},e}()})),u$=r(((e,t)=>{function n(e){if(typeof e!=`string`)throw TypeError(`Path must be a string. Received `+JSON.stringify(e))}function r(e,t){for(var n=``,r=0,i=-1,a=0,o,s=0;s<=e.length;++s){if(s<e.length)o=e.charCodeAt(s);else if(o===47)break;else o=47;if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf(`/`);if(c!==n.length-1){c===-1?(n=``,r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}}else if(n.length===2||n.length===1){n=``,r=0,i=s,a=0;continue}}t&&(n.length>0?n+=`/..`:n=`..`,r=2)}else n.length>0?n+=`/`+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a!==-1?++a:a=-1}return n}function i(e,t){var n=t.dir||t.root,r=t.base||(t.name||``)+(t.ext||``);return n?n===t.root?n+r:n+e+r:r}var a={resolve:function(){for(var e=``,t=!1,i,a=arguments.length-1;a>=-1&&!t;a--){var o;a>=0?o=arguments[a]:(i===void 0&&(i=process.cwd()),o=i),n(o),o.length!==0&&(e=o+`/`+e,t=o.charCodeAt(0)===47)}return e=r(e,!t),t?e.length>0?`/`+e:`/`:e.length>0?e:`.`},normalize:function(e){if(n(e),e.length===0)return`.`;var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=r(e,!t),e.length===0&&!t&&(e=`.`),e.length>0&&i&&(e+=`/`),t?`/`+e:e},isAbsolute:function(e){return n(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return`.`;for(var e,t=0;t<arguments.length;++t){var r=arguments[t];n(r),r.length>0&&(e===void 0?e=r:e+=`/`+r)}return e===void 0?`.`:a.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t||(e=a.resolve(e),t=a.resolve(t),e===t))return``;for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,o=i-r,s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var c=t.length-s,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(t.charCodeAt(s+d)===47)return t.slice(s+d+1);if(d===0)return t.slice(s+d)}else o>l&&(e.charCodeAt(r+d)===47?u=d:d===0&&(u=0));break}var f=e.charCodeAt(r+d);if(f!==t.charCodeAt(s+d))break;f===47&&(u=d)}var p=``;for(d=r+u+1;d<=i;++d)(d===i||e.charCodeAt(d)===47)&&(p.length===0?p+=`..`:p+=`/..`);return p.length>0?p+t.slice(s+u):(s+=u,t.charCodeAt(s)===47&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(n(e),e.length===0)return`.`;for(var t=e.charCodeAt(0),r=t===47,i=-1,a=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!a){i=o;break}}else a=!1;return i===-1?r?`/`:`.`:r&&i===1?`//`:e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!=`string`)throw TypeError(`"ext" argument must be a string`);n(e);var r=0,i=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return``;var s=t.length-1,c=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!a){r=o+1;break}}else c===-1&&(a=!1,c=o+1),s>=0&&(l===t.charCodeAt(s)?--s===-1&&(i=o):(s=-1,i=c))}return r===i?i=c:i===-1&&(i=e.length),e.slice(r,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!a){r=o+1;break}}else i===-1&&(a=!1,i=o+1);return i===-1?``:e.slice(r,i)}},extname:function(e){n(e);for(var t=-1,r=0,i=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(c===47){if(!a){r=s+1;break}continue}i===-1&&(a=!1,i=s+1),c===46?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===r+1?``:e.slice(t,i)},format:function(e){if(typeof e!=`object`||!e)throw TypeError(`The "pathObject" argument must be of type Object. Received type `+typeof e);return i(`/`,e)},parse:function(e){n(e);var t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;var r=e.charCodeAt(0),i=r===47,a;i?(t.root=`/`,a=1):a=0;for(var o=-1,s=0,c=-1,l=!0,u=e.length-1,d=0;u>=a;--u){if(r=e.charCodeAt(u),r===47){if(!l){s=u+1;break}continue}c===-1&&(l=!1,c=u+1),r===46?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||c===-1||d===0||d===1&&o===c-1&&o===s+1?c!==-1&&(s===0&&i?t.base=t.name=e.slice(1,c):t.base=t.name=e.slice(s,c)):(s===0&&i?(t.name=e.slice(1,o),t.base=e.slice(1,c)):(t.name=e.slice(s,o),t.base=e.slice(s,c)),t.ext=e.slice(o,c)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir=`/`),t},sep:`/`,delimiter:`:`,win32:null,posix:null};a.posix=a,t.exports=a})),d$=r((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i in e)i!==`default`&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=e&&e.__read||function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},a=e&&e.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(e,`__esModule`,{value:!0}),e.DependencyParser=void 0;var o=r(u$());e.DependencyParser=function(){function e(){this.REGEX_CLEAN=/[\n|\r]/g,this.REGEX_DETECT_IMPORT=/(?:(?:(?:import)|(?:export))(?:.)*?from\s+["']([^"']+)["'])|(?:((?:require|import))(?:\s+)?\(["']([^"']+)["']\))|(?:\/+\s+<reference\s+path=["']([^"']+)["']\s+\/>)/g,this.REGEX_NODE_MODULE=/^node:([\w\W\/]+)$/}return e.prototype.parseDependencies=function(e,t){var n=this;return a([],i(e.matchAll(this.REGEX_DETECT_IMPORT)),!1).map(function(e){return e[1]??e[2]??e[3]}).filter(function(e){return!!e}).map(function(e){return n.resolvePath(e,t)})},e.prototype.resolvePath=function(e,t){var n=e.match(this.REGEX_NODE_MODULE);if(n)return{kind:`relative-in-package`,packageName:`@types/node`,importPath:`${n[1]}.d.ts`,sourcePath:``};if(typeof t==`string`){if(e.startsWith(`.`))return{kind:`relative`,importPath:e,sourcePath:t};if(e.startsWith(`@`)){var r=e.split(`/`);return{kind:`package`,packageName:`${r[0]}/${r[1]}`,importPath:r.slice(2).join(`/`)}}else{var r=e.split(`/`);return{kind:`package`,packageName:r[0],importPath:r.slice(1).join(`/`)}}}else switch(t.kind){case`package`:throw Error(`TODO?`);case`relative`:throw Error(`TODO2?`);case`relative-in-package`:if(e.startsWith(`.`))return{kind:`relative-in-package`,packageName:t.packageName,sourcePath:o.join(t.sourcePath,t.importPath),importPath:e};if(e.startsWith(`@`)){var r=e.split(`/`);return{kind:`package`,packageName:`${r[0]}/${r[1]}`,importPath:r.slice(2).join(`/`)}}else{var r=e.split(`/`);return{kind:`package`,packageName:r[0],importPath:r.slice(1).join(`/`)}}}},e}()})),f$=r((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,`__esModule`,{value:!0}),e.importResourcePathToString=void 0;var n=t(u$());e.importResourcePathToString=function(e){switch(e.kind){case`package`:return n.default.join(e.packageName,e.importPath??``,`package.json`);case`relative`:return n.default.join(e.sourcePath,e.importPath);case`relative-in-package`:return n.default.join(e.packageName,e.sourcePath,e.importPath)}}})),p$=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.invokeUpdate=void 0,e.invokeUpdate=function(e,t){var n,r=`${e.type}: `;switch(e.type){case`CodeChanged`:r+=``;break;case`ResolveNewImports`:r+=``;break;case`LookedUpTypeFile`:r+=`"${e.path}" was ${e.success?`sucessfully`:`not sucessfully`} looked up`;break;case`AttemptedLookUpFile`:r+=`"${e.path}" was ${e.success?`sucessfully`:`not sucessfully`} attempted to looked up`;break;case`LookedUpPackage`:r+=`package.json for package "${e.package}" was ${e.success?`sucessfully`:`not sucessfully`} looked up${e.definitelyTyped?` (found in definitely typed repo)`:``}`;break;case`LoadedFromCache`:r+=`"${e.importPath}" was loaded from cache`;break;case`StoredToCache`:r+=`"${e.importPath}" was stored to cache`;break}r.endsWith(`: `)&&(r=r.slice(void 0,-2)),(n=t.onUpdate)==null||n.call(t,e,r)}})),m$=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.RecursionDepth=void 0,e.RecursionDepth=function(){function e(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.options=e,this.fileRecursionDepth=t,this.packageRecursionDepth=n}return e.prototype.nextPackage=function(){return new e(this.options,this.fileRecursionDepth,this.packageRecursionDepth+1)},e.prototype.nextFile=function(){return new e(this.options,this.fileRecursionDepth+1,this.packageRecursionDepth)},e.prototype.same=function(){return new e(this.options,this.fileRecursionDepth,this.packageRecursionDepth)},e.prototype.shouldStop=function(){return this.options.fileRecursionDepth>0&&this.fileRecursionDepth>=this.options.fileRecursionDepth||this.options.packageRecursionDepth>0&&this.packageRecursionDepth>=this.options.packageRecursionDepth},e}()})),h$=r((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),r=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!==`default`&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},o=e&&e.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},s=e&&e.__values||function(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)},c=e&&e.__read||function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,`__esModule`,{value:!0}),e.ImportResolver=void 0;var l=d$(),u=f$(),d=i(u$()),f=p$(),p=m$();e.ImportResolver=function(){function e(e){var t,n;if(this.options=e,this.loadedFiles=[],this.dependencyParser=new l.DependencyParser,this.cache=e.sourceCache,this.sourceResolver=e.sourceResolver,this.newImportsResolved=!1,this.monaco=e.monaco,e.preloadPackages&&e.versions){this.versions=e.versions;try{for(var r=s(Object.entries(e.versions)),i=r.next();!i.done;i=r.next()){var a=c(i.value,2),o=a[0];a[1],this.resolveImport({kind:`package`,packageName:o,importPath:``},new p.RecursionDepth(this.options)).catch(function(e){console.error(e)})}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}}return e.prototype.wereNewImportsResolved=function(){return this.newImportsResolved},e.prototype.resetNewImportsResolved=function(){this.newImportsResolved=!1},e.prototype.resolveImportsInFile=function(e,t,n){var r,i;return a(this,void 0,void 0,function(){var a,c,l,u,d,f,p,m;return o(this,function(o){switch(o.label){case 0:if(n.shouldStop())return[2];a=this.dependencyParser.parseDependencies(e,t),o.label=1;case 1:o.trys.push([1,8,9,10]),c=s(a),l=c.next(),o.label=2;case 2:if(l.done)return[3,7];u=l.value,o.label=3;case 3:return o.trys.push([3,5,,6]),[4,this.resolveImport(u,n)];case 4:return o.sent(),[3,6];case 5:return d=o.sent(),this.options.onError?(i=(r=this.options).onError)==null||i.call(r,d.message??d):console.error(d),[3,6];case 6:return l=c.next(),[3,2];case 7:return[3,10];case 8:return f=o.sent(),p={error:f},[3,10];case 9:try{l&&!l.done&&(m=c.return)&&m.call(c)}finally{if(p)throw p.error}return[7];case 10:return[2]}})})},e.prototype.resolveImport=function(e,t){return a(this,void 0,void 0,function(){var n,r,i;return o(this,function(a){switch(a.label){case 0:if(n=this.hashImportResourcePath(e),this.loadedFiles.includes(n))return[2];switch(this.loadedFiles.push(n),r=e.kind,r){case`package`:return[3,1];case`relative`:return[3,5];case`relative-in-package`:return[3,6]}return[3,8];case 1:return[4,this.resolveImportFromPackageRoot(e)];case 2:return i=a.sent(),i?[4,this.resolveImportInPackage(i,t.nextPackage().nextFile())]:[3,4];case 3:return[2,a.sent()];case 4:return[3,8];case 5:throw Error(`Not implemented yet`);case 6:return[4,this.resolveImportInPackage(e,t.nextFile())];case 7:return[2,a.sent()];case 8:return[2]}})})},e.prototype.resolveImportInPackage=function(e,t){return a(this,void 0,void 0,function(){var n,r,i;return o(this,function(a){switch(a.label){case 0:return[4,this.loadSourceFileContents(e)];case 1:return n=a.sent(),n?(r=n.source,i=n.at,this.createModel(r,this.monaco.Uri.parse(this.options.fileRootPath+d.join(`node_modules/${e.packageName}`,i))),[4,this.resolveImportsInFile(r,{kind:`relative-in-package`,packageName:e.packageName,sourcePath:d.dirname(i),importPath:``},t)]):[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.resolveImportFromPackageRoot=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,a,s,c,l,u,s;return o(this,function(o){switch(o.label){case 0:return t={type:`LookedUpPackage`,package:e.packageName,definitelyTyped:!1,success:!1},this.options.onlySpecifiedPackages&&!this.versions?.[e.packageName]&&!this.versions?.[`@types/`+e.packageName]?((0,f.invokeUpdate)(t,this.options),[2]):(n=e.importPath?.length??!1,r=n?`/${e.importPath}`:``,[4,this.resolvePackageJson(e.packageName,this.versions?.[e.packageName],n?e.importPath:void 0)]);case 1:return i=o.sent(),!i&&n?[4,this.resolvePackageJson(e.packageName,this.versions?.[e.packageName])]:[3,3];case 2:i=o.sent(),r=``,o.label=3;case 3:return i?(a=JSON.parse(i),a.typings||a.types?(s=a.typings||a.types,this.createModel(i,this.monaco.Uri.parse(`${this.options.fileRootPath}node_modules/${e.packageName}${r}/package.json`)),(0,f.invokeUpdate)({type:`LookedUpPackage`,package:e.packageName,definitelyTyped:!1,success:!0},this.options),this.setVersion(e.packageName,a.version),[2,{kind:`relative-in-package`,packageName:e.packageName,sourcePath:``,importPath:d.join(e.importPath??``,s.startsWith(`./`)?s.slice(2):s)}]):[3,4]):[3,7];case 4:return c=`@types/${e.packageName.startsWith(`@`)?e.packageName.slice(1).replace(/\//,`__`):e.packageName}`,[4,this.resolvePackageJson(c,this.versions?.[c])];case 5:if(l=o.sent(),l){if(u=JSON.parse(l),u.typings||u.types)return s=u.typings||u.types,this.createModel(l,this.monaco.Uri.parse(`${this.options.fileRootPath}node_modules/${c}/package.json`)),(0,f.invokeUpdate)({type:`LookedUpPackage`,package:c,definitelyTyped:!0,success:!0},this.options),this.setVersion(c,u.version),[2,{kind:`relative-in-package`,packageName:c,sourcePath:``,importPath:d.join(e.importPath??``,s.startsWith(`./`)?s.slice(2):s)}];(0,f.invokeUpdate)(t,this.options)}else (0,f.invokeUpdate)(t,this.options);o.label=6;case 6:return[3,8];case 7:(0,f.invokeUpdate)(t,this.options),o.label=8;case 8:return[2]}})})},e.prototype.loadSourceFileContents=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,a,c,l,u,p,m,h,c,ee,te,ne,h,c,re,ie;return o(this,function(o){switch(o.label){case 0:return t=d.join(e.packageName,e.sourcePath,e.importPath),n={type:`LookedUpTypeFile`,path:t,definitelyTyped:!1,success:!1},r=e.packageName,i=this.getVersion(e.packageName),a=[`.d.ts`,`/index.d.ts`,`.ts`,`.tsx`,`/index.ts`,`/index.tsx`],a.map(function(t){return e.importPath.endsWith(t)}).reduce(function(e,t){return e||t},!1)?[4,this.resolveSourceFile(r,i,d.join(e.sourcePath,e.importPath))]:[3,2];case 1:return c=o.sent(),c?[2,{source:c,at:d.join(e.sourcePath,e.importPath)}]:[3,9];case 2:o.trys.push([2,7,8,9]),l=s(a),u=l.next(),o.label=3;case 3:return u.done?[3,6]:(p=u.value,m=d.join(e.sourcePath,e.importPath),h=(p===`.d.ts`&&m.endsWith(`.js`)?m.slice(0,-3):m)+p,[4,this.resolveSourceFile(r,i,h)]);case 4:if(c=o.sent(),(0,f.invokeUpdate)({type:`AttemptedLookUpFile`,path:d.join(r,h),success:!!c},this.options),c)return(0,f.invokeUpdate)({type:`LookedUpTypeFile`,path:d.join(r,h),success:!0},this.options),[2,{source:c,at:h}];o.label=5;case 5:return u=l.next(),[3,3];case 6:return[3,9];case 7:return ee=o.sent(),re={error:ee},[3,9];case 8:try{u&&!u.done&&(ie=l.return)&&ie.call(l)}finally{if(re)throw re.error}return[7];case 9:return[4,this.resolvePackageJson(r,i,d.join(e.sourcePath,e.importPath))];case 10:return te=o.sent(),!te||(ne=JSON.parse(te).types,!ne)?[3,12]:(h=d.join(e.sourcePath,e.importPath,ne),[4,this.resolveSourceFile(r,i,h)]);case 11:if(c=o.sent(),c)return(0,f.invokeUpdate)({type:`LookedUpTypeFile`,path:d.join(r,h),success:!0},this.options),[2,{source:c,at:h}];o.label=12;case 12:return(0,f.invokeUpdate)(n,this.options),[2,null]}})})},e.prototype.getVersion=function(e){return this.versions?.[e]},e.prototype.setVersions=function(e){var t,n;this.versions=e,(n=(t=this.options).onUpdateVersions)==null||n.call(t,e)},e.prototype.setVersion=function(e,n){var r;this.setVersions(t(t({},this.versions),(r={},r[e]=n,r)))},e.prototype.createModel=function(e,t){t=t.with({path:t.path.replace(`@types/`,``)}),this.monaco.editor.getModel(t)||(this.monaco.editor.createModel(e,`typescript`,t),this.newImportsResolved=!0)},e.prototype.hashImportResourcePath=function(e){return(0,u.importResourcePathToString)(e)},e.prototype.resolvePackageJson=function(e,t,n){return a(this,void 0,void 0,function(){var r,i,a,s;return o(this,function(o){switch(o.label){case 0:return r=d.join(e+(t?`@${t}`:``),n??``,`package.json`),i=!1,a=void 0,this.cache.isFileAvailable?[4,this.cache.isFileAvailable(r)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,this.cache.getFile(r)];case 3:a=o.sent(),i=a!==void 0,o.label=4;case 4:return i?a==null?[3,5]:(s=a,[3,7]):[3,8];case 5:return[4,this.cache.getFile(r)];case 6:s=o.sent(),o.label=7;case 7:return[2,s];case 8:return[4,this.sourceResolver.resolvePackageJson(e,t,n)];case 9:return a=o.sent(),a&&this.cache.storeFile(r,a),[2,a]}})})},e.prototype.resolveSourceFile=function(e,t,n){return a(this,void 0,void 0,function(){var r,i,a,s;return o(this,function(o){switch(o.label){case 0:return r=d.join(e+(t?`@${t}`:``),n),i=!1,a=void 0,this.cache.isFileAvailable?[4,this.cache.isFileAvailable(r)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,this.cache.getFile(r)];case 3:a=o.sent(),i=a!==void 0,o.label=4;case 4:return i?((0,f.invokeUpdate)({type:`LoadedFromCache`,importPath:r},this.options),a==null?[3,5]:(s=a,[3,7])):[3,8];case 5:return[4,this.cache.getFile(r)];case 6:s=o.sent(),o.label=7;case 7:return[2,s];case 8:return[4,this.sourceResolver.resolveSourceFile(e,t,n)];case 9:return a=o.sent(),a&&((0,f.invokeUpdate)({type:`StoredToCache`,importPath:r},this.options),this.cache.storeFile(r,a)),[2,a]}})})},e}()})),g$=r((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),r=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!==`default`&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},o=e&&e.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},s=e&&e.__values||function(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)};Object.defineProperty(e,`__esModule`,{value:!0}),e.AutoTypingsCore=void 0;var c=c$(),l=l$(),u=h$(),d=i(u$()),f=p$(),p=m$();e.AutoTypingsCore=function(){function e(e,n){var r=this;this.editor=e,this.options=n,this.disposables=[],this.importResolver=new u.ImportResolver(n);var i=e.onDidChangeModelContent(function(e){r.debouncedResolveContents()});this.disposables.push(i),this.resolveContents(),n.dontAdaptEditorOptions||n.monaco.languages.typescript.typescriptDefaults.setCompilerOptions(t(t({},n.monaco.languages.typescript.typescriptDefaults.getCompilerOptions()),{moduleResolution:n.monaco.languages.typescript.ModuleResolutionKind.NodeJs,allowSyntheticDefaultImports:!0,rootDir:n.fileRootPath}))}return e.create=function(n,r){return a(this,void 0,void 0,function(){var i;return o(this,function(a){if(r?.shareCache&&r.sourceCache&&!e.sharedCache&&(e.sharedCache=r.sourceCache),i=r?.monaco,!i)throw Error(`monacoInstance not found, you can specify the monaco instance via options.monaco`);return[2,new e(n,t(t({fileRootPath:`inmemory://model/`,onlySpecifiedPackages:!1,preloadPackages:!1,shareCache:!1,dontAdaptEditorOptions:!1,dontRefreshModelValueAfterResolvement:!1,sourceCache:e.sharedCache??new c.DummySourceCache,sourceResolver:r?.sourceResolver??new l.JsDelivrSourceResolver,debounceDuration:4e3,fileRecursionDepth:10,packageRecursionDepth:3},r),{monaco:i}))]})})},e.prototype.dispose=function(){var e,t;try{for(var n=s(this.disposables),r=n.next();!r.done;r=n.next())r.value.dispose()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.setVersions=function(e){this.importResolver.setVersions(e),this.options.versions=e},e.prototype.clearCache=function(){return a(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.options.sourceCache.clear()];case 1:return e.sent(),[2]}})})},e.prototype.debouncedResolveContents=function(){var e=this;this.isResolving||((0,f.invokeUpdate)({type:`CodeChanged`},this.options),this.options.debounceDuration<=0?this.resolveContents():(this.debounceTimer!==void 0&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){return a(e,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.resolveContents()];case 1:return e.sent(),this.debounceTimer=void 0,[2]}})})},this.options.debounceDuration)))},e.prototype.resolveContents=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(i){switch(i.label){case 0:if(this.isResolving=!0,(0,f.invokeUpdate)({type:`ResolveNewImports`},this.options),e=this.editor.getModel(),!e)throw Error(`No model`);t=e.getLinesContent(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.importResolver.resolveImportsInFile(t.join(`
`),d.dirname(e.uri.toString()),new p.RecursionDepth(this.options))];case 2:return i.sent(),[3,4];case 3:if(n=i.sent(),this.options.onError)this.options.onError(n.message??n);else throw n;return[3,4];case 4:return this.importResolver.wereNewImportsResolved()&&(this.options.dontRefreshModelValueAfterResolvement||(r=this.editor.getPosition(),e.setValue(e.getValue()),r&&this.editor.setPosition(r)),this.importResolver.resetNewImportsResolved()),this.isResolving=!1,[2]}})})},e}()})),_$=r((t=>{var n=t&&t.__extends||(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),r=t&&t.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=t&&t.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),a=t&&t.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),o=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!==`default`&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},s=t&&t.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},c=t&&t.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(t,`__esModule`,{value:!0}),t.AutoTypings=void 0;var l=g$();t.AutoTypings=function(t){n(i,t);function i(e,n){return t.call(this,e,n)||this}return i.create=function(t,n){var i;return s(this,void 0,void 0,function(){var a,s,u,d,f,p;return c(this,function(c){switch(c.label){case 0:return s=(a=l.AutoTypingsCore).create,u=[t],d=[r({},n)],p={},(i=n?.monaco)==null?[3,1]:(f=i,[3,3]);case 1:return[4,Promise.resolve().then(function(){return o((i$(),e(GQ)))})];case 2:f=c.sent(),c.label=3;case 3:return[4,s.apply(a,u.concat([r.apply(void 0,d.concat([(p.monaco=f,p)]))]))];case 4:return[2,c.sent()]}})})},i}(l.AutoTypingsCore)})),v$=r((e=>{var t=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},n=e&&e.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},r=e&&e.__values||function(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)};Object.defineProperty(e,`__esModule`,{value:!0}),e.LocalStorageCache=void 0,e.LocalStorageCache=function(){function e(){this.localCache={}}return e.prototype.getFile=function(r){return t(this,void 0,void 0,function(){return n(this,function(t){try{return[2,localStorage.getItem(e.LOCALSTORAGE_PREFIX+r)??void 0]}catch{return[2,this.localCache[r]]}return[2]})})},e.prototype.storeFile=function(r,i){return t(this,void 0,void 0,function(){return n(this,function(t){this.localCache[r]=i;try{localStorage.setItem(e.LOCALSTORAGE_PREFIX+r,i)}catch{}return[2]})})},e.prototype.clear=function(){return t(this,void 0,void 0,function(){var t,i,a,o,s,a,c,l;return n(this,function(n){for(this.localCache={},t=[],i=0;i<localStorage.length;i++)a=localStorage.key(i),a?.startsWith(e.LOCALSTORAGE_PREFIX)&&t.push(a);try{for(o=r(t),s=o.next();!s.done;s=o.next())a=s.value,localStorage.removeItem(a)}catch(e){c={error:e}}finally{try{s&&!s.done&&(l=o.return)&&l.call(o)}finally{if(c)throw c.error}}return[2]})})},e.LOCALSTORAGE_PREFIX=`__autotyper_cache_`,e}()})),y$=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0})})),b$=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0})})),x$=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0})})),S$=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0})})),C$=r((e=>{var t=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},n=e&&e.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,`__esModule`,{value:!0}),e.UnpkgSourceResolver=void 0,e.UnpkgSourceResolver=function(){function e(){}return e.prototype.resolvePackageJson=function(e,r,i){return t(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.resolveFile(`https://unpkg.com/${e}${r?`@${r}`:``}${i?`/${i}`:``}/package.json`)];case 1:return[2,t.sent()]}})})},e.prototype.resolveSourceFile=function(e,r,i){return t(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.resolveFile(`https://unpkg.com/${e}${r?`@${r}`:``}/${i}`)];case 1:return[2,t.sent()]}})})},e.prototype.resolveFile=function(e){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return[4,fetch(e,{method:`GET`})];case 1:return t=n.sent(),t.ok?[4,t.text()]:[3,3];case 2:return[2,n.sent()];case 3:if(t.status===404)return[2,``];throw Error(`Error other than 404 while fetching from Unpkg at ${e}`);case 4:return[2]}})})},e}()})),w$=r((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,`__esModule`,{value:!0}),n(_$(),e),n(f$(),e),n(v$(),e),n(y$(),e),n(b$(),e),n(x$(),e),n(S$(),e),n(C$(),e),n(l$(),e)})),T$={inherit:!1,base:`vs`,colors:JSON.parse(`{"focusBorder":"#8839ef","foreground":"#4c4f69","disabledForeground":"#6c6f85","widget.shadow":"#e6e9ef80","selection.background":"#8839ef66","descriptionForeground":"#4c4f69","errorForeground":"#d20f39","icon.foreground":"#8839ef","sash.hoverBorder":"#8839ef","window.activeBorder":"#00000000","window.inactiveBorder":"#00000000","textBlockQuote.background":"#e6e9ef","textBlockQuote.border":"#dce0e8","textCodeBlock.background":"#e6e9ef","textLink.activeForeground":"#04a5e5","textLink.foreground":"#1e66f5","textPreformat.foreground":"#4c4f69","textSeparator.foreground":"#8839ef","activityBar.background":"#dce0e8","activityBar.foreground":"#8839ef","activityBar.dropBorder":"#8839ef33","activityBar.inactiveForeground":"#9ca0b0","activityBar.border":"#00000000","activityBarBadge.background":"#8839ef","activityBarBadge.foreground":"#dce0e8","activityBar.activeBorder":"#00000000","activityBar.activeBackground":"#00000000","activityBar.activeFocusBorder":"#00000000","activityBarTop.foreground":"#8839ef","activityBarTop.activeBorder":"#00000000","activityBarTop.inactiveForeground":"#9ca0b0","activityBarTop.dropBorder":"#8839ef33","badge.background":"#bcc0cc","badge.foreground":"#4c4f69","breadcrumb.activeSelectionForeground":"#8839ef","breadcrumb.background":"#eff1f5","breadcrumb.focusForeground":"#8839ef","breadcrumb.foreground":"#4c4f69cc","breadcrumbPicker.background":"#e6e9ef","button.background":"#8839ef","button.foreground":"#dce0e8","button.border":"#00000000","button.separator":"#00000000","button.hoverBackground":"#9c5af2","button.secondaryForeground":"#4c4f69","button.secondaryBackground":"#acb0be","button.secondaryHoverBackground":"#c0c3ce","checkbox.background":"#bcc0cc","checkbox.border":"#00000000","checkbox.foreground":"#8839ef","dropdown.background":"#e6e9ef","dropdown.listBackground":"#acb0be","dropdown.border":"#8839ef","dropdown.foreground":"#4c4f69","debugToolBar.background":"#dce0e8","debugToolBar.border":"#00000000","debugExceptionWidget.background":"#dce0e8","debugExceptionWidget.border":"#8839ef","debugTokenExpression.number":"#fe640b","debugTokenExpression.boolean":"#8839ef","debugTokenExpression.string":"#40a02b","debugTokenExpression.error":"#d20f39","debugIcon.breakpointForeground":"#d20f39","debugIcon.breakpointDisabledForeground":"#d20f3999","debugIcon.breakpointUnverifiedForeground":"#bf607c","debugIcon.breakpointCurrentStackframeForeground":"#acb0be","debugIcon.breakpointStackframeForeground":"#acb0be","debugIcon.startForeground":"#40a02b","debugIcon.pauseForeground":"#1e66f5","debugIcon.stopForeground":"#d20f39","debugIcon.disconnectForeground":"#acb0be","debugIcon.restartForeground":"#179299","debugIcon.stepOverForeground":"#8839ef","debugIcon.stepIntoForeground":"#4c4f69","debugIcon.stepOutForeground":"#4c4f69","debugIcon.continueForeground":"#40a02b","debugIcon.stepBackForeground":"#acb0be","debugConsole.infoForeground":"#1e66f5","debugConsole.warningForeground":"#fe640b","debugConsole.errorForeground":"#d20f39","debugConsole.sourceForeground":"#dc8a78","debugConsoleInputIcon.foreground":"#4c4f69","testing.runAction":"#8839ef","testing.iconErrored":"#d20f39","testing.iconFailed":"#d20f39","testing.iconPassed":"#40a02b","testing.iconQueued":"#1e66f5","testing.iconUnset":"#4c4f69","testing.iconSkipped":"#6c6f85","testing.iconErrored.retired":"#d20f39","testing.iconFailed.retired":"#d20f39","testing.iconPassed.retired":"#40a02b","testing.iconQueued.retired":"#1e66f5","testing.iconUnset.retired":"#4c4f69","testing.iconSkipped.retired":"#6c6f85","testing.peekBorder":"#8839ef","testing.peekHeaderBackground":"#acb0be","testing.message.error.lineBackground":"#d20f3926","testing.message.info.decorationForeground":"#40a02bcc","testing.message.info.lineBackground":"#40a02b26","testing.messagePeekBorder":"#8839ef","testing.messagePeekHeaderBackground":"#acb0be","testing.coveredBackground":"#40a02b4d","testing.coveredBorder":"#00000000","testing.coveredGutterBackground":"#40a02b4d","testing.uncoveredBranchBackground":"#d20f3933","testing.uncoveredBackground":"#d20f3933","testing.uncoveredBorder":"#00000000","testing.uncoveredGutterBackground":"#d20f3940","testing.coverCountBadgeBackground":"#00000000","testing.coverCountBadgeForeground":"#8839ef","diffEditor.border":"#acb0be","diffEditor.insertedTextBackground":"#40a02b33","diffEditor.removedTextBackground":"#d20f3933","diffEditor.insertedLineBackground":"#40a02b26","diffEditor.removedLineBackground":"#d20f3926","diffEditor.diagonalFill":"#acb0be99","diffEditorOverview.insertedForeground":"#40a02bcc","diffEditorOverview.removedForeground":"#d20f39cc","editor.background":"#eff1f5","editor.findMatchBackground":"#e6adbd","editor.findMatchBorder":"#d20f3933","editor.findMatchHighlightBackground":"#a9daf0","editor.findMatchHighlightBorder":"#04a5e533","editor.findRangeHighlightBackground":"#a9daf0","editor.findRangeHighlightBorder":"#04a5e533","editor.foldBackground":"#04a5e540","editor.foreground":"#4c4f69","editor.hoverHighlightBackground":"#04a5e540","editor.lineHighlightBackground":"#4c4f6912","editor.lineHighlightBorder":"#00000000","editor.rangeHighlightBackground":"#04a5e540","editor.rangeHighlightBorder":"#00000000","editor.selectionBackground":"#7c7f934d","editor.selectionHighlightBackground":"#7c7f9333","editor.selectionHighlightBorder":"#7c7f9333","editor.wordHighlightBackground":"#7c7f9333","editor.wordHighlightStrongBackground":"#1e66f526","editorBracketMatch.background":"#7c7f931a","editorBracketMatch.border":"#7c7f93","editorCodeLens.foreground":"#8c8fa1","editorCursor.background":"#eff1f5","editorCursor.foreground":"#dc8a78","editorGroup.border":"#acb0be","editorGroup.dropBackground":"#8839ef33","editorGroup.emptyBackground":"#eff1f5","editorGroupHeader.tabsBackground":"#dce0e8","editorGutter.addedBackground":"#40a02b","editorGutter.background":"#eff1f5","editorGutter.commentRangeForeground":"#ccd0da","editorGutter.commentGlyphForeground":"#8839ef","editorGutter.deletedBackground":"#d20f39","editorGutter.foldingControlForeground":"#7c7f93","editorGutter.modifiedBackground":"#df8e1d","editorHoverWidget.background":"#e6e9ef","editorHoverWidget.border":"#acb0be","editorHoverWidget.foreground":"#4c4f69","editorIndentGuide.activeBackground":"#acb0be","editorIndentGuide.background":"#bcc0cc","editorInlayHint.foreground":"#acb0be","editorInlayHint.background":"#e6e9efbf","editorInlayHint.typeForeground":"#5c5f77","editorInlayHint.typeBackground":"#e6e9efbf","editorInlayHint.parameterForeground":"#6c6f85","editorInlayHint.parameterBackground":"#e6e9efbf","editorLineNumber.activeForeground":"#8839ef","editorLineNumber.foreground":"#8c8fa1","editorLink.activeForeground":"#8839ef","editorMarkerNavigation.background":"#e6e9ef","editorMarkerNavigationError.background":"#d20f39","editorMarkerNavigationInfo.background":"#1e66f5","editorMarkerNavigationWarning.background":"#fe640b","editorOverviewRuler.background":"#e6e9ef","editorOverviewRuler.border":"#4c4f6912","editorOverviewRuler.modifiedForeground":"#df8e1d","editorRuler.foreground":"#acb0be","editor.stackFrameHighlightBackground":"#df8e1d26","editor.focusedStackFrameHighlightBackground":"#40a02b26","editorStickyScrollHover.background":"#ccd0da","editorSuggestWidget.background":"#e6e9ef","editorSuggestWidget.border":"#acb0be","editorSuggestWidget.foreground":"#4c4f69","editorSuggestWidget.highlightForeground":"#8839ef","editorSuggestWidget.selectedBackground":"#ccd0da","editorWhitespace.foreground":"#7c7f9366","editorWidget.background":"#e6e9ef","editorWidget.foreground":"#4c4f69","editorWidget.resizeBorder":"#acb0be","editorLightBulb.foreground":"#df8e1d","editorError.foreground":"#d20f39","editorError.border":"#00000000","editorError.background":"#00000000","editorWarning.foreground":"#fe640b","editorWarning.border":"#00000000","editorWarning.background":"#00000000","editorInfo.foreground":"#1e66f5","editorInfo.border":"#00000000","editorInfo.background":"#00000000","problemsErrorIcon.foreground":"#d20f39","problemsInfoIcon.foreground":"#1e66f5","problemsWarningIcon.foreground":"#fe640b","extensionButton.prominentForeground":"#dce0e8","extensionButton.prominentBackground":"#8839ef","extensionButton.separator":"#eff1f5","extensionButton.prominentHoverBackground":"#9c5af2","extensionBadge.remoteBackground":"#1e66f5","extensionBadge.remoteForeground":"#dce0e8","extensionIcon.starForeground":"#df8e1d","extensionIcon.verifiedForeground":"#40a02b","extensionIcon.preReleaseForeground":"#acb0be","extensionIcon.sponsorForeground":"#ea76cb","gitDecoration.addedResourceForeground":"#40a02b","gitDecoration.conflictingResourceForeground":"#8839ef","gitDecoration.deletedResourceForeground":"#d20f39","gitDecoration.ignoredResourceForeground":"#9ca0b0","gitDecoration.modifiedResourceForeground":"#df8e1d","gitDecoration.stageDeletedResourceForeground":"#d20f39","gitDecoration.stageModifiedResourceForeground":"#df8e1d","gitDecoration.submoduleResourceForeground":"#1e66f5","gitDecoration.untrackedResourceForeground":"#40a02b","scmGraph.historyItemRefColor":"#1e66f5","scmGraph.historyItemBaseRefColor":"#fe640b","scmGraph.historyItemRemoteRefColor":"#8839ef","scmGraph.foreground1":"#df8e1d","scmGraph.foreground2":"#d20f39","scmGraph.foreground3":"#40a02b","scmGraph.foreground4":"#8839ef","scmGraph.foreground5":"#179299","input.background":"#ccd0da","input.border":"#00000000","input.foreground":"#4c4f69","input.placeholderForeground":"#4c4f6973","inputOption.activeBackground":"#acb0be","inputOption.activeBorder":"#8839ef","inputOption.activeForeground":"#4c4f69","inputValidation.errorBackground":"#d20f39","inputValidation.errorBorder":"#dce0e833","inputValidation.errorForeground":"#dce0e8","inputValidation.infoBackground":"#1e66f5","inputValidation.infoBorder":"#dce0e833","inputValidation.infoForeground":"#dce0e8","inputValidation.warningBackground":"#fe640b","inputValidation.warningBorder":"#dce0e833","inputValidation.warningForeground":"#dce0e8","list.activeSelectionBackground":"#ccd0da","list.activeSelectionForeground":"#4c4f69","list.dropBackground":"#8839ef33","list.focusBackground":"#ccd0da","list.focusForeground":"#4c4f69","list.focusOutline":"#00000000","list.highlightForeground":"#8839ef","list.hoverBackground":"#ccd0da80","list.hoverForeground":"#4c4f69","list.inactiveSelectionBackground":"#ccd0da","list.inactiveSelectionForeground":"#4c4f69","list.warningForeground":"#fe640b","listFilterWidget.background":"#bcc0cc","listFilterWidget.noMatchesOutline":"#d20f39","listFilterWidget.outline":"#00000000","tree.indentGuidesStroke":"#7c7f93","tree.inactiveIndentGuidesStroke":"#bcc0cc","menu.background":"#eff1f5","menu.border":"#eff1f580","menu.foreground":"#4c4f69","menu.selectionBackground":"#acb0be","menu.selectionBorder":"#00000000","menu.selectionForeground":"#4c4f69","menu.separatorBackground":"#acb0be","menubar.selectionBackground":"#bcc0cc","menubar.selectionForeground":"#4c4f69","merge.commonContentBackground":"#bcc0cc","merge.commonHeaderBackground":"#acb0be","merge.currentContentBackground":"#40a02b33","merge.currentHeaderBackground":"#40a02b66","merge.incomingContentBackground":"#1e66f533","merge.incomingHeaderBackground":"#1e66f566","minimap.background":"#e6e9ef80","minimap.findMatchHighlight":"#04a5e54d","minimap.selectionHighlight":"#acb0bebf","minimap.selectionOccurrenceHighlight":"#acb0bebf","minimap.warningHighlight":"#fe640bbf","minimap.errorHighlight":"#d20f39bf","minimapSlider.background":"#8839ef33","minimapSlider.hoverBackground":"#8839ef66","minimapSlider.activeBackground":"#8839ef99","minimapGutter.addedBackground":"#40a02bbf","minimapGutter.deletedBackground":"#d20f39bf","minimapGutter.modifiedBackground":"#df8e1dbf","notificationCenter.border":"#8839ef","notificationCenterHeader.foreground":"#4c4f69","notificationCenterHeader.background":"#e6e9ef","notificationToast.border":"#8839ef","notifications.foreground":"#4c4f69","notifications.background":"#e6e9ef","notifications.border":"#8839ef","notificationLink.foreground":"#1e66f5","notificationsErrorIcon.foreground":"#d20f39","notificationsWarningIcon.foreground":"#fe640b","notificationsInfoIcon.foreground":"#1e66f5","panel.background":"#eff1f5","panel.border":"#acb0be","panelSection.border":"#acb0be","panelSection.dropBackground":"#8839ef33","panelTitle.activeBorder":"#8839ef","panelTitle.activeForeground":"#4c4f69","panelTitle.inactiveForeground":"#6c6f85","peekView.border":"#8839ef","peekViewEditor.background":"#e6e9ef","peekViewEditorGutter.background":"#e6e9ef","peekViewEditor.matchHighlightBackground":"#04a5e54d","peekViewEditor.matchHighlightBorder":"#00000000","peekViewResult.background":"#e6e9ef","peekViewResult.fileForeground":"#4c4f69","peekViewResult.lineForeground":"#4c4f69","peekViewResult.matchHighlightBackground":"#04a5e54d","peekViewResult.selectionBackground":"#ccd0da","peekViewResult.selectionForeground":"#4c4f69","peekViewTitle.background":"#eff1f5","peekViewTitleDescription.foreground":"#5c5f77b3","peekViewTitleLabel.foreground":"#4c4f69","pickerGroup.border":"#8839ef","pickerGroup.foreground":"#8839ef","progressBar.background":"#8839ef","scrollbar.shadow":"#dce0e8","scrollbarSlider.activeBackground":"#ccd0da66","scrollbarSlider.background":"#acb0be80","scrollbarSlider.hoverBackground":"#9ca0b0","settings.focusedRowBackground":"#acb0be33","settings.headerForeground":"#4c4f69","settings.modifiedItemIndicator":"#8839ef","settings.dropdownBackground":"#bcc0cc","settings.dropdownListBorder":"#00000000","settings.textInputBackground":"#bcc0cc","settings.textInputBorder":"#00000000","settings.numberInputBackground":"#bcc0cc","settings.numberInputBorder":"#00000000","sideBar.background":"#e6e9ef","sideBar.dropBackground":"#8839ef33","sideBar.foreground":"#4c4f69","sideBar.border":"#00000000","sideBarSectionHeader.background":"#e6e9ef","sideBarSectionHeader.foreground":"#4c4f69","sideBarTitle.foreground":"#8839ef","banner.background":"#bcc0cc","banner.foreground":"#4c4f69","banner.iconForeground":"#4c4f69","statusBar.background":"#dce0e8","statusBar.foreground":"#4c4f69","statusBar.border":"#00000000","statusBar.noFolderBackground":"#dce0e8","statusBar.noFolderForeground":"#4c4f69","statusBar.noFolderBorder":"#00000000","statusBar.debuggingBackground":"#fe640b","statusBar.debuggingForeground":"#dce0e8","statusBar.debuggingBorder":"#00000000","statusBarItem.remoteBackground":"#1e66f5","statusBarItem.remoteForeground":"#dce0e8","statusBarItem.activeBackground":"#acb0be66","statusBarItem.hoverBackground":"#acb0be33","statusBarItem.prominentForeground":"#8839ef","statusBarItem.prominentBackground":"#00000000","statusBarItem.prominentHoverBackground":"#acb0be33","statusBarItem.errorForeground":"#d20f39","statusBarItem.errorBackground":"#00000000","statusBarItem.warningForeground":"#fe640b","statusBarItem.warningBackground":"#00000000","commandCenter.foreground":"#5c5f77","commandCenter.inactiveForeground":"#5c5f77","commandCenter.activeForeground":"#8839ef","commandCenter.background":"#e6e9ef","commandCenter.activeBackground":"#acb0be33","commandCenter.border":"#00000000","commandCenter.inactiveBorder":"#00000000","commandCenter.activeBorder":"#8839ef","tab.activeBackground":"#eff1f5","tab.activeBorder":"#00000000","tab.activeBorderTop":"#8839ef","tab.activeForeground":"#8839ef","tab.activeModifiedBorder":"#df8e1d","tab.border":"#e6e9ef","tab.hoverBackground":"#ffffff","tab.hoverBorder":"#00000000","tab.hoverForeground":"#8839ef","tab.inactiveBackground":"#e6e9ef","tab.inactiveForeground":"#9ca0b0","tab.inactiveModifiedBorder":"#df8e1d4d","tab.lastPinnedBorder":"#8839ef","tab.unfocusedActiveBackground":"#e6e9ef","tab.unfocusedActiveBorder":"#00000000","tab.unfocusedActiveBorderTop":"#8839ef4d","tab.unfocusedInactiveBackground":"#d6dbe5","terminal.foreground":"#4c4f69","terminal.ansiBlack":"#5c5f77","terminal.ansiRed":"#d20f39","terminal.ansiGreen":"#40a02b","terminal.ansiYellow":"#df8e1d","terminal.ansiBlue":"#1e66f5","terminal.ansiMagenta":"#ea76cb","terminal.ansiCyan":"#179299","terminal.ansiWhite":"#acb0be","terminal.ansiBrightBlack":"#6c6f85","terminal.ansiBrightRed":"#de293e","terminal.ansiBrightGreen":"#49af3d","terminal.ansiBrightYellow":"#eea02d","terminal.ansiBrightBlue":"#456eff","terminal.ansiBrightMagenta":"#fe85d8","terminal.ansiBrightCyan":"#2d9fa8","terminal.ansiBrightWhite":"#bcc0cc","terminal.selectionBackground":"#acb0be","terminal.inactiveSelectionBackground":"#acb0be80","terminalCursor.background":"#eff1f5","terminalCursor.foreground":"#dc8a78","terminal.border":"#acb0be","terminal.dropBackground":"#8839ef33","terminal.tab.activeBorder":"#8839ef","terminalCommandDecoration.defaultBackground":"#acb0be","terminalCommandDecoration.successBackground":"#40a02b","terminalCommandDecoration.errorBackground":"#d20f39","titleBar.activeBackground":"#dce0e8","titleBar.activeForeground":"#4c4f69","titleBar.inactiveBackground":"#dce0e8","titleBar.inactiveForeground":"#4c4f6980","titleBar.border":"#00000000","welcomePage.tileBackground":"#e6e9ef","welcomePage.progress.background":"#dce0e8","welcomePage.progress.foreground":"#8839ef","walkThrough.embeddedEditorBackground":"#eff1f54d","symbolIcon.textForeground":"#4c4f69","symbolIcon.arrayForeground":"#fe640b","symbolIcon.booleanForeground":"#8839ef","symbolIcon.classForeground":"#df8e1d","symbolIcon.colorForeground":"#ea76cb","symbolIcon.constantForeground":"#fe640b","symbolIcon.constructorForeground":"#7287fd","symbolIcon.enumeratorForeground":"#df8e1d","symbolIcon.enumeratorMemberForeground":"#df8e1d","symbolIcon.eventForeground":"#ea76cb","symbolIcon.fieldForeground":"#4c4f69","symbolIcon.fileForeground":"#8839ef","symbolIcon.folderForeground":"#8839ef","symbolIcon.functionForeground":"#1e66f5","symbolIcon.interfaceForeground":"#df8e1d","symbolIcon.keyForeground":"#179299","symbolIcon.keywordForeground":"#8839ef","symbolIcon.methodForeground":"#1e66f5","symbolIcon.moduleForeground":"#4c4f69","symbolIcon.namespaceForeground":"#df8e1d","symbolIcon.nullForeground":"#e64553","symbolIcon.numberForeground":"#fe640b","symbolIcon.objectForeground":"#df8e1d","symbolIcon.operatorForeground":"#179299","symbolIcon.packageForeground":"#dd7878","symbolIcon.propertyForeground":"#e64553","symbolIcon.referenceForeground":"#df8e1d","symbolIcon.snippetForeground":"#dd7878","symbolIcon.stringForeground":"#40a02b","symbolIcon.structForeground":"#179299","symbolIcon.typeParameterForeground":"#e64553","symbolIcon.unitForeground":"#4c4f69","symbolIcon.variableForeground":"#4c4f69","charts.foreground":"#4c4f69","charts.lines":"#5c5f77","charts.red":"#d20f39","charts.blue":"#1e66f5","charts.yellow":"#df8e1d","charts.orange":"#fe640b","charts.green":"#40a02b","charts.purple":"#8839ef","errorLens.errorBackground":"#d20f3926","errorLens.errorBackgroundLight":"#d20f3926","errorLens.errorForeground":"#d20f39","errorLens.errorForegroundLight":"#d20f39","errorLens.errorMessageBackground":"#d20f3926","errorLens.hintBackground":"#40a02b26","errorLens.hintBackgroundLight":"#40a02b26","errorLens.hintForeground":"#40a02b","errorLens.hintForegroundLight":"#40a02b","errorLens.hintMessageBackground":"#40a02b26","errorLens.infoBackground":"#1e66f526","errorLens.infoBackgroundLight":"#1e66f526","errorLens.infoForeground":"#1e66f5","errorLens.infoForegroundLight":"#1e66f5","errorLens.infoMessageBackground":"#1e66f526","errorLens.statusBarErrorForeground":"#d20f39","errorLens.statusBarHintForeground":"#40a02b","errorLens.statusBarIconErrorForeground":"#d20f39","errorLens.statusBarIconWarningForeground":"#fe640b","errorLens.statusBarInfoForeground":"#1e66f5","errorLens.statusBarWarningForeground":"#fe640b","errorLens.warningBackground":"#fe640b26","errorLens.warningBackgroundLight":"#fe640b26","errorLens.warningForeground":"#fe640b","errorLens.warningForegroundLight":"#fe640b","errorLens.warningMessageBackground":"#fe640b26","issues.closed":"#8839ef","issues.newIssueDecoration":"#dc8a78","issues.open":"#40a02b","pullRequests.closed":"#d20f39","pullRequests.draft":"#7c7f93","pullRequests.merged":"#8839ef","pullRequests.notification":"#4c4f69","pullRequests.open":"#40a02b","gitlens.gutterBackgroundColor":"#ccd0da4d","gitlens.gutterForegroundColor":"#4c4f69","gitlens.gutterUncommittedForegroundColor":"#8839ef","gitlens.trailingLineBackgroundColor":"#00000000","gitlens.trailingLineForegroundColor":"#4c4f694d","gitlens.lineHighlightBackgroundColor":"#8839ef26","gitlens.lineHighlightOverviewRulerColor":"#8839efcc","gitlens.openAutolinkedIssueIconColor":"#40a02b","gitlens.closedAutolinkedIssueIconColor":"#8839ef","gitlens.closedPullRequestIconColor":"#d20f39","gitlens.openPullRequestIconColor":"#40a02b","gitlens.mergedPullRequestIconColor":"#8839ef","gitlens.unpublishedChangesIconColor":"#40a02b","gitlens.unpublishedCommitIconColor":"#40a02b","gitlens.unpulledChangesIconColor":"#fe640b","gitlens.decorations.branchAheadForegroundColor":"#40a02b","gitlens.decorations.branchBehindForegroundColor":"#fe640b","gitlens.decorations.branchDivergedForegroundColor":"#df8e1d","gitlens.decorations.branchUnpublishedForegroundColor":"#40a02b","gitlens.decorations.branchMissingUpstreamForegroundColor":"#fe640b","gitlens.decorations.statusMergingOrRebasingConflictForegroundColor":"#e64553","gitlens.decorations.statusMergingOrRebasingForegroundColor":"#df8e1d","gitlens.decorations.workspaceRepoMissingForegroundColor":"#6c6f85","gitlens.decorations.workspaceCurrentForegroundColor":"#8839ef","gitlens.decorations.workspaceRepoOpenForegroundColor":"#8839ef","gitlens.decorations.worktreeHasUncommittedChangesForegroundColor":"#fe640b","gitlens.decorations.worktreeMissingForegroundColor":"#e64553","gitlens.graphLane1Color":"#8839ef","gitlens.graphLane2Color":"#df8e1d","gitlens.graphLane3Color":"#1e66f5","gitlens.graphLane4Color":"#dd7878","gitlens.graphLane5Color":"#40a02b","gitlens.graphLane6Color":"#7287fd","gitlens.graphLane7Color":"#dc8a78","gitlens.graphLane8Color":"#d20f39","gitlens.graphLane9Color":"#179299","gitlens.graphLane10Color":"#ea76cb","gitlens.graphChangesColumnAddedColor":"#40a02b","gitlens.graphChangesColumnDeletedColor":"#d20f39","gitlens.graphMinimapMarkerHeadColor":"#40a02b","gitlens.graphScrollMarkerHeadColor":"#40a02b","gitlens.graphMinimapMarkerUpstreamColor":"#388c26","gitlens.graphScrollMarkerUpstreamColor":"#388c26","gitlens.graphMinimapMarkerHighlightsColor":"#df8e1d","gitlens.graphScrollMarkerHighlightsColor":"#df8e1d","gitlens.graphMinimapMarkerLocalBranchesColor":"#1e66f5","gitlens.graphScrollMarkerLocalBranchesColor":"#1e66f5","gitlens.graphMinimapMarkerRemoteBranchesColor":"#0b57ef","gitlens.graphScrollMarkerRemoteBranchesColor":"#0b57ef","gitlens.graphMinimapMarkerStashesColor":"#8839ef","gitlens.graphScrollMarkerStashesColor":"#8839ef","gitlens.graphMinimapMarkerTagsColor":"#dd7878","gitlens.graphScrollMarkerTagsColor":"#dd7878","editorBracketHighlight.foreground1":"#d20f39","editorBracketHighlight.foreground2":"#fe640b","editorBracketHighlight.foreground3":"#df8e1d","editorBracketHighlight.foreground4":"#40a02b","editorBracketHighlight.foreground5":"#209fb5","editorBracketHighlight.foreground6":"#8839ef","editorBracketHighlight.unexpectedBracket.foreground":"#e64553","button.secondaryBorder":"#8839ef","table.headerBackground":"#ccd0da","table.headerForeground":"#4c4f69","list.focusAndSelectionBackground":"#bcc0cc"}`),rules:JSON.parse(`[{"foreground":"#4c4f69","token":"text"},{"foreground":"#4c4f69","token":"source"},{"foreground":"#4c4f69","token":"variable.other.readwrite"},{"foreground":"#4c4f69","token":"punctuation.definition.variable"},{"foreground":"#7c7f93","fontStyle":"","token":"punctuation"},{"foreground":"#7c7f93","fontStyle":"italic","token":"comment"},{"foreground":"#7c7f93","fontStyle":"italic","token":"punctuation.definition.comment"},{"foreground":"#40a02b","token":"string"},{"foreground":"#40a02b","token":"punctuation.definition.string"},{"foreground":"#ea76cb","token":"constant.character.escape"},{"foreground":"#fe640b","token":"constant.numeric"},{"foreground":"#fe640b","token":"variable.other.constant"},{"foreground":"#fe640b","token":"entity.name.constant"},{"foreground":"#fe640b","token":"constant.language.boolean"},{"foreground":"#fe640b","token":"constant.language.false"},{"foreground":"#fe640b","token":"constant.language.true"},{"foreground":"#fe640b","token":"keyword.other.unit.user-defined"},{"foreground":"#fe640b","token":"keyword.other.unit.suffix.floating-point"},{"foreground":"#8839ef","fontStyle":"","token":"keyword"},{"foreground":"#8839ef","fontStyle":"","token":"keyword.operator.word"},{"foreground":"#8839ef","fontStyle":"","token":"keyword.operator.new"},{"foreground":"#8839ef","fontStyle":"","token":"variable.language.super"},{"foreground":"#8839ef","fontStyle":"","token":"support.type.primitive"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type"},{"foreground":"#8839ef","fontStyle":"","token":"storage.modifier"},{"foreground":"#8839ef","fontStyle":"","token":"punctuation.definition.keyword"},{"foreground":"#8839ef","token":"entity.name.tag.documentation"},{"foreground":"#179299","token":"keyword.operator"},{"foreground":"#179299","token":"punctuation.accessor"},{"foreground":"#179299","token":"punctuation.definition.generic"},{"foreground":"#179299","token":"meta.function.closure punctuation.section.parameters"},{"foreground":"#179299","token":"punctuation.definition.tag"},{"foreground":"#179299","token":"punctuation.separator.key-value"},{"foreground":"#1e66f5","fontStyle":"italic","token":"entity.name.function"},{"foreground":"#1e66f5","fontStyle":"italic","token":"meta.function-call.method"},{"foreground":"#1e66f5","fontStyle":"italic","token":"support.function"},{"foreground":"#1e66f5","fontStyle":"italic","token":"support.function.misc"},{"foreground":"#1e66f5","fontStyle":"italic","token":"variable.function"},{"foreground":"#df8e1d","fontStyle":"italic","token":"entity.name.class"},{"foreground":"#df8e1d","fontStyle":"italic","token":"entity.other.inherited-class"},{"foreground":"#df8e1d","fontStyle":"italic","token":"support.class"},{"foreground":"#df8e1d","fontStyle":"italic","token":"meta.function-call.constructor"},{"foreground":"#df8e1d","fontStyle":"italic","token":"entity.name.struct"},{"foreground":"#df8e1d","fontStyle":"italic","token":"entity.name.enum"},{"foreground":"#179299","token":"meta.enum variable.other.readwrite"},{"foreground":"#179299","token":"variable.other.enummember"},{"foreground":"#179299","token":"meta.property.object"},{"foreground":"#df8e1d","fontStyle":"italic","token":"meta.type"},{"foreground":"#df8e1d","fontStyle":"italic","token":"meta.type-alias"},{"foreground":"#df8e1d","fontStyle":"italic","token":"support.type"},{"foreground":"#df8e1d","fontStyle":"italic","token":"entity.name.type"},{"foreground":"#fe640b","token":"meta.annotation variable.function"},{"foreground":"#fe640b","token":"meta.annotation variable.annotation.function"},{"foreground":"#fe640b","token":"meta.annotation punctuation.definition.annotation"},{"foreground":"#fe640b","token":"meta.decorator"},{"foreground":"#fe640b","token":"punctuation.decorator"},{"foreground":"#e64553","fontStyle":"italic","token":"variable.parameter"},{"foreground":"#e64553","fontStyle":"italic","token":"meta.function.parameters"},{"foreground":"#d20f39","token":"constant.language"},{"foreground":"#d20f39","token":"support.function.builtin"},{"foreground":"#d20f39","token":"entity.other.attribute-name.documentation"},{"foreground":"#df8e1d","token":"keyword.control.directive"},{"foreground":"#df8e1d","token":"punctuation.definition.directive"},{"foreground":"#04a5e5","token":"punctuation.definition.typeparameters"},{"foreground":"#df8e1d","token":"entity.name.namespace"},{"foreground":"#1e66f5","fontStyle":"","token":"support.type.property-name.css"},{"foreground":"#1e66f5","fontStyle":"","token":"support.type.property-name.less"},{"foreground":"#d20f39","token":"variable.language.this"},{"foreground":"#d20f39","token":"variable.language.this punctuation.definition.variable"},{"foreground":"#4c4f69","token":"variable.object.property"},{"foreground":"#4c4f69","token":"string.template variable"},{"foreground":"#4c4f69","token":"string variable"},{"fontStyle":"bold","token":"keyword.operator.new"},{"foreground":"#8839ef","token":"storage.modifier.specifier.extern.cpp"},{"foreground":"#df8e1d","token":"entity.name.scope-resolution.template.call.cpp"},{"foreground":"#df8e1d","token":"entity.name.scope-resolution.parameter.cpp"},{"foreground":"#df8e1d","token":"entity.name.scope-resolution.cpp"},{"foreground":"#df8e1d","token":"entity.name.scope-resolution.function.definition.cpp"},{"fontStyle":"","token":"storage.type.class.doxygen"},{"foreground":"#179299","token":"storage.modifier.reference.cpp"},{"foreground":"#4c4f69","token":"meta.interpolation.cs"},{"foreground":"#4c4f69","token":"comment.block.documentation.cs"},{"foreground":"#df8e1d","token":"source.css entity.other.attribute-name.class.css"},{"foreground":"#df8e1d","token":"entity.other.attribute-name.parent-selector.css punctuation.definition.entity.css"},{"foreground":"#179299","token":"punctuation.separator.operator.css"},{"foreground":"#179299","token":"source.css entity.other.attribute-name.pseudo-class"},{"foreground":"#fe640b","token":"source.css constant.other.unicode-range"},{"foreground":"#40a02b","fontStyle":"","token":"source.css variable.parameter.url"},{"foreground":"#04a5e5","token":"support.type.vendored.property-name"},{"foreground":"#e64553","token":"source.css meta.property-value variable"},{"foreground":"#e64553","token":"source.css meta.property-value variable.other.less"},{"foreground":"#e64553","token":"source.css meta.property-value variable.other.less punctuation.definition.variable.less"},{"foreground":"#e64553","token":"meta.definition.variable.scss"},{"foreground":"#1e66f5","token":"source.css meta.property-list variable"},{"foreground":"#1e66f5","token":"meta.property-list variable.other.less"},{"foreground":"#1e66f5","token":"meta.property-list variable.other.less punctuation.definition.variable.less"},{"foreground":"#fe640b","token":"keyword.other.unit.percentage.css"},{"foreground":"#40a02b","token":"source.css meta.attribute-selector"},{"foreground":"#1e66f5","fontStyle":"","token":"keyword.other.definition.ini"},{"foreground":"#1e66f5","fontStyle":"","token":"punctuation.support.type.property-name.json"},{"foreground":"#1e66f5","fontStyle":"","token":"support.type.property-name.json"},{"foreground":"#1e66f5","fontStyle":"","token":"punctuation.support.type.property-name.toml"},{"foreground":"#1e66f5","fontStyle":"","token":"support.type.property-name.toml"},{"foreground":"#1e66f5","fontStyle":"","token":"entity.name.tag.yaml"},{"foreground":"#1e66f5","fontStyle":"","token":"punctuation.support.type.property-name.yaml"},{"foreground":"#1e66f5","fontStyle":"","token":"support.type.property-name.yaml"},{"foreground":"#fe640b","token":"constant.language.json"},{"foreground":"#fe640b","token":"constant.language.yaml"},{"foreground":"#df8e1d","fontStyle":"","token":"entity.name.type.anchor.yaml"},{"foreground":"#df8e1d","fontStyle":"","token":"variable.other.alias.yaml"},{"foreground":"#df8e1d","token":"support.type.property-name.table"},{"foreground":"#df8e1d","token":"entity.name.section.group-title.ini"},{"foreground":"#ea76cb","token":"constant.other.time.datetime.offset.toml"},{"foreground":"#ea76cb","token":"punctuation.definition.anchor.yaml"},{"foreground":"#ea76cb","token":"punctuation.definition.alias.yaml"},{"foreground":"#ea76cb","token":"entity.other.document.begin.yaml"},{"foreground":"#fe640b","token":"markup.changed.diff"},{"foreground":"#1e66f5","token":"meta.diff.header.from-file"},{"foreground":"#1e66f5","token":"meta.diff.header.to-file"},{"foreground":"#1e66f5","token":"punctuation.definition.from-file.diff"},{"foreground":"#1e66f5","token":"punctuation.definition.to-file.diff"},{"foreground":"#40a02b","token":"markup.inserted.diff"},{"foreground":"#d20f39","token":"markup.deleted.diff"},{"foreground":"#1e66f5","token":"variable.other.env"},{"foreground":"#4c4f69","token":"string.quoted variable.other.env"},{"foreground":"#1e66f5","token":"support.function.builtin.gdscript"},{"foreground":"#fe640b","token":"constant.language.gdscript"},{"foreground":"#e64553","token":"comment meta.annotation.go"},{"foreground":"#fe640b","token":"comment meta.annotation.parameters.go"},{"foreground":"#fe640b","token":"constant.language.go"},{"foreground":"#4c4f69","token":"variable.graphql"},{"foreground":"#dd7878","token":"string.unquoted.alias.graphql"},{"foreground":"#179299","token":"constant.character.enum.graphql"},{"foreground":"#dd7878","token":"meta.objectvalues.graphql constant.object.key.graphql string.unquoted.graphql"},{"foreground":"#8839ef","token":"keyword.other.doctype"},{"foreground":"#8839ef","token":"meta.tag.sgml.doctype punctuation.definition.tag"},{"foreground":"#8839ef","token":"meta.tag.metadata.doctype entity.name.tag"},{"foreground":"#8839ef","token":"meta.tag.metadata.doctype punctuation.definition.tag"},{"foreground":"#1e66f5","fontStyle":"","token":"entity.name.tag"},{"foreground":"#d20f39","token":"text.html constant.character.entity"},{"foreground":"#d20f39","token":"text.html constant.character.entity punctuation"},{"foreground":"#d20f39","token":"constant.character.entity.xml"},{"foreground":"#d20f39","token":"constant.character.entity.xml punctuation"},{"foreground":"#d20f39","token":"constant.character.entity.js.jsx"},{"foreground":"#d20f39","token":"constant.charactger.entity.js.jsx punctuation"},{"foreground":"#d20f39","token":"constant.character.entity.tsx"},{"foreground":"#d20f39","token":"constant.character.entity.tsx punctuation"},{"foreground":"#df8e1d","token":"entity.other.attribute-name"},{"foreground":"#ea76cb","fontStyle":"","token":"support.class.component"},{"foreground":"#ea76cb","fontStyle":"","token":"support.class.component.jsx"},{"foreground":"#ea76cb","fontStyle":"","token":"support.class.component.tsx"},{"foreground":"#ea76cb","fontStyle":"","token":"support.class.component.vue"},{"foreground":"#fe640b","token":"punctuation.definition.annotation"},{"foreground":"#fe640b","token":"storage.type.annotation"},{"foreground":"#179299","token":"constant.other.enum.java"},{"foreground":"#4c4f69","token":"storage.modifier.import.java"},{"fontStyle":"","token":"comment.block.javadoc.java keyword.other.documentation.javadoc.java"},{"foreground":"#e64553","token":"meta.export variable.other.readwrite.js"},{"foreground":"#4c4f69","token":"variable.other.constant.js"},{"foreground":"#4c4f69","token":"variable.other.constant.ts"},{"foreground":"#4c4f69","token":"variable.other.property.js"},{"foreground":"#4c4f69","token":"variable.other.property.ts"},{"foreground":"#e64553","fontStyle":"","token":"variable.other.jsdoc"},{"foreground":"#e64553","fontStyle":"","token":"comment.block.documentation variable.other"},{"fontStyle":"","token":"storage.type.class.jsdoc"},{"foreground":"#4c4f69","token":"support.type.object.console.js"},{"foreground":"#8839ef","token":"support.constant.node"},{"foreground":"#8839ef","token":"support.type.object.module.js"},{"foreground":"#8839ef","token":"storage.modifier.implements"},{"foreground":"#8839ef","token":"constant.language.null.js"},{"foreground":"#8839ef","token":"constant.language.null.ts"},{"foreground":"#8839ef","token":"constant.language.undefined.js"},{"foreground":"#8839ef","token":"constant.language.undefined.ts"},{"foreground":"#8839ef","token":"support.type.builtin.ts"},{"foreground":"#df8e1d","token":"variable.parameter.generic"},{"foreground":"#179299","token":"keyword.declaration.function.arrow.js"},{"foreground":"#179299","token":"storage.type.function.arrow.ts"},{"foreground":"#1e66f5","fontStyle":"italic","token":"punctuation.decorator.ts"},{"foreground":"#8839ef","token":"keyword.operator.expression.in.js"},{"foreground":"#8839ef","token":"keyword.operator.expression.in.ts"},{"foreground":"#8839ef","token":"keyword.operator.expression.infer.ts"},{"foreground":"#8839ef","token":"keyword.operator.expression.instanceof.js"},{"foreground":"#8839ef","token":"keyword.operator.expression.instanceof.ts"},{"foreground":"#8839ef","token":"keyword.operator.expression.is"},{"foreground":"#8839ef","token":"keyword.operator.expression.keyof.ts"},{"foreground":"#8839ef","token":"keyword.operator.expression.of.js"},{"foreground":"#8839ef","token":"keyword.operator.expression.of.ts"},{"foreground":"#8839ef","token":"keyword.operator.expression.typeof.ts"},{"foreground":"#179299","fontStyle":"italic","token":"support.function.macro.julia"},{"foreground":"#fe640b","token":"constant.language.julia"},{"foreground":"#e64553","token":"constant.other.symbol.julia"},{"foreground":"#179299","token":"text.tex keyword.control.preamble"},{"foreground":"#04a5e5","token":"text.tex support.function.be"},{"foreground":"#dd7878","token":"constant.other.general.math.tex"},{"foreground":"#ea76cb","token":"variable.language.liquid"},{"foreground":"#8839ef","fontStyle":"","token":"comment.line.double-dash.documentation.lua storage.type.annotation.lua"},{"foreground":"#4c4f69","token":"comment.line.double-dash.documentation.lua entity.name.variable.lua"},{"foreground":"#4c4f69","token":"comment.line.double-dash.documentation.lua variable.lua"},{"foreground":"#d20f39","token":"heading.1.markdown punctuation.definition.heading.markdown"},{"foreground":"#d20f39","token":"heading.1.markdown"},{"foreground":"#d20f39","token":"heading.1.quarto punctuation.definition.heading.quarto"},{"foreground":"#d20f39","token":"heading.1.quarto"},{"foreground":"#d20f39","token":"markup.heading.atx.1.mdx"},{"foreground":"#d20f39","token":"markup.heading.atx.1.mdx punctuation.definition.heading.mdx"},{"foreground":"#d20f39","token":"markup.heading.setext.1.markdown"},{"foreground":"#d20f39","token":"markup.heading.heading-0.asciidoc"},{"foreground":"#fe640b","token":"heading.2.markdown punctuation.definition.heading.markdown"},{"foreground":"#fe640b","token":"heading.2.markdown"},{"foreground":"#fe640b","token":"heading.2.quarto punctuation.definition.heading.quarto"},{"foreground":"#fe640b","token":"heading.2.quarto"},{"foreground":"#fe640b","token":"markup.heading.atx.2.mdx"},{"foreground":"#fe640b","token":"markup.heading.atx.2.mdx punctuation.definition.heading.mdx"},{"foreground":"#fe640b","token":"markup.heading.setext.2.markdown"},{"foreground":"#fe640b","token":"markup.heading.heading-1.asciidoc"},{"foreground":"#df8e1d","token":"heading.3.markdown punctuation.definition.heading.markdown"},{"foreground":"#df8e1d","token":"heading.3.markdown"},{"foreground":"#df8e1d","token":"heading.3.quarto punctuation.definition.heading.quarto"},{"foreground":"#df8e1d","token":"heading.3.quarto"},{"foreground":"#df8e1d","token":"markup.heading.atx.3.mdx"},{"foreground":"#df8e1d","token":"markup.heading.atx.3.mdx punctuation.definition.heading.mdx"},{"foreground":"#df8e1d","token":"markup.heading.heading-2.asciidoc"},{"foreground":"#40a02b","token":"heading.4.markdown punctuation.definition.heading.markdown"},{"foreground":"#40a02b","token":"heading.4.markdown"},{"foreground":"#40a02b","token":"heading.4.quarto punctuation.definition.heading.quarto"},{"foreground":"#40a02b","token":"heading.4.quarto"},{"foreground":"#40a02b","token":"markup.heading.atx.4.mdx"},{"foreground":"#40a02b","token":"markup.heading.atx.4.mdx punctuation.definition.heading.mdx"},{"foreground":"#40a02b","token":"markup.heading.heading-3.asciidoc"},{"foreground":"#209fb5","token":"heading.5.markdown punctuation.definition.heading.markdown"},{"foreground":"#209fb5","token":"heading.5.markdown"},{"foreground":"#209fb5","token":"heading.5.quarto punctuation.definition.heading.quarto"},{"foreground":"#209fb5","token":"heading.5.quarto"},{"foreground":"#209fb5","token":"markup.heading.atx.5.mdx"},{"foreground":"#209fb5","token":"markup.heading.atx.5.mdx punctuation.definition.heading.mdx"},{"foreground":"#209fb5","token":"markup.heading.heading-4.asciidoc"},{"foreground":"#7287fd","token":"heading.6.markdown punctuation.definition.heading.markdown"},{"foreground":"#7287fd","token":"heading.6.markdown"},{"foreground":"#7287fd","token":"heading.6.quarto punctuation.definition.heading.quarto"},{"foreground":"#7287fd","token":"heading.6.quarto"},{"foreground":"#7287fd","token":"markup.heading.atx.6.mdx"},{"foreground":"#7287fd","token":"markup.heading.atx.6.mdx punctuation.definition.heading.mdx"},{"foreground":"#7287fd","token":"markup.heading.heading-5.asciidoc"},{"foreground":"#d20f39","fontStyle":"bold","token":"markup.bold"},{"foreground":"#d20f39","fontStyle":"italic","token":"markup.italic"},{"foreground":"#6c6f85","fontStyle":"strikethrough","token":"markup.strikethrough"},{"foreground":"#1e66f5","token":"punctuation.definition.link"},{"foreground":"#1e66f5","token":"markup.underline.link"},{"foreground":"#7287fd","token":"text.html.markdown punctuation.definition.link.title"},{"foreground":"#7287fd","token":"text.html.quarto punctuation.definition.link.title"},{"foreground":"#7287fd","token":"string.other.link.title.markdown"},{"foreground":"#7287fd","token":"string.other.link.title.quarto"},{"foreground":"#7287fd","token":"markup.link"},{"foreground":"#7287fd","token":"punctuation.definition.constant.markdown"},{"foreground":"#7287fd","token":"punctuation.definition.constant.quarto"},{"foreground":"#7287fd","token":"constant.other.reference.link.markdown"},{"foreground":"#7287fd","token":"constant.other.reference.link.quarto"},{"foreground":"#7287fd","token":"markup.substitution.attribute-reference"},{"foreground":"#40a02b","token":"punctuation.definition.raw.markdown"},{"foreground":"#40a02b","token":"punctuation.definition.raw.quarto"},{"foreground":"#40a02b","token":"markup.inline.raw.string.markdown"},{"foreground":"#40a02b","token":"markup.inline.raw.string.quarto"},{"foreground":"#40a02b","token":"markup.raw.block.markdown"},{"foreground":"#40a02b","token":"markup.raw.block.quarto"},{"foreground":"#04a5e5","token":"fenced_code.block.language"},{"foreground":"#7c7f93","token":"markup.fenced_code.block punctuation.definition"},{"foreground":"#7c7f93","token":"markup.raw support.asciidoc"},{"foreground":"#ea76cb","token":"markup.quote"},{"foreground":"#ea76cb","token":"punctuation.definition.quote.begin"},{"foreground":"#179299","token":"meta.separator.markdown"},{"foreground":"#179299","token":"punctuation.definition.list.begin.markdown"},{"foreground":"#179299","token":"punctuation.definition.list.begin.quarto"},{"foreground":"#179299","token":"markup.list.bullet"},{"fontStyle":"bold","token":"markup.heading.quarto"},{"foreground":"#1e66f5","token":"entity.other.attribute-name.multipart.nix"},{"foreground":"#1e66f5","token":"entity.other.attribute-name.single.nix"},{"foreground":"#4c4f69","fontStyle":"","token":"variable.parameter.name.nix"},{"foreground":"#7287fd","fontStyle":"","token":"meta.embedded variable.parameter.name.nix"},{"foreground":"#ea76cb","fontStyle":"","token":"string.unquoted.path.nix"},{"foreground":"#df8e1d","token":"support.attribute.builtin"},{"foreground":"#df8e1d","token":"meta.attribute.php"},{"foreground":"#e64553","token":"meta.function.parameters.php punctuation.definition.variable.php"},{"foreground":"#8839ef","token":"constant.language.php"},{"foreground":"#04a5e5","token":"text.html.php support.function"},{"fontStyle":"","token":"keyword.other.phpdoc.php"},{"foreground":"#4c4f69","token":"support.variable.magic.python"},{"foreground":"#4c4f69","token":"meta.function-call.arguments.python"},{"foreground":"#04a5e5","fontStyle":"italic","token":"support.function.magic.python"},{"foreground":"#d20f39","fontStyle":"italic","token":"variable.parameter.function.language.special.self.python"},{"foreground":"#d20f39","fontStyle":"italic","token":"variable.language.special.self.python"},{"foreground":"#8839ef","token":"keyword.control.flow.python"},{"foreground":"#8839ef","token":"keyword.operator.logical.python"},{"foreground":"#8839ef","token":"storage.type.function.python"},{"foreground":"#04a5e5","token":"support.token.decorator.python"},{"foreground":"#04a5e5","token":"meta.function.decorator.identifier.python"},{"foreground":"#1e66f5","token":"meta.function-call.python"},{"foreground":"#fe640b","fontStyle":"italic","token":"entity.name.function.decorator.python"},{"foreground":"#fe640b","fontStyle":"italic","token":"punctuation.definition.decorator.python"},{"foreground":"#ea76cb","token":"constant.character.format.placeholder.other.python"},{"foreground":"#fe640b","token":"support.type.exception.python"},{"foreground":"#fe640b","token":"support.function.builtin.python"},{"foreground":"#8839ef","token":"support.type.python"},{"foreground":"#fe640b","token":"constant.language.python"},{"foreground":"#e64553","fontStyle":"italic","token":"meta.indexed-name.python"},{"foreground":"#e64553","fontStyle":"italic","token":"meta.item-access.python"},{"foreground":"#40a02b","fontStyle":"italic","token":"storage.type.string.python"},{"fontStyle":"","token":"meta.function.parameters.python"},{"foreground":"#1e66f5","token":"meta.function-call.r"},{"foreground":"#4c4f69","token":"meta.function-call.arguments.r"},{"foreground":"#ea76cb","token":"string.regexp punctuation.definition.string.begin"},{"foreground":"#ea76cb","token":"string.regexp punctuation.definition.string.end"},{"foreground":"#8839ef","token":"keyword.control.anchor.regexp"},{"foreground":"#4c4f69","token":"string.regexp.ts"},{"foreground":"#40a02b","token":"punctuation.definition.group.regexp"},{"foreground":"#40a02b","token":"keyword.other.back-reference.regexp"},{"foreground":"#df8e1d","token":"punctuation.definition.character-class.regexp"},{"foreground":"#ea76cb","token":"constant.other.character-class.regexp"},{"foreground":"#dc8a78","token":"constant.other.character-class.range.regexp"},{"foreground":"#179299","token":"keyword.operator.quantifier.regexp"},{"foreground":"#fe640b","token":"constant.character.numeric.regexp"},{"foreground":"#1e66f5","token":"punctuation.definition.group.no-capture.regexp"},{"foreground":"#1e66f5","token":"meta.assertion.look-ahead.regexp"},{"foreground":"#1e66f5","token":"meta.assertion.negative-look-ahead.regexp"},{"foreground":"#df8e1d","fontStyle":"italic","token":"meta.annotation.rust"},{"foreground":"#df8e1d","fontStyle":"italic","token":"meta.annotation.rust punctuation"},{"foreground":"#df8e1d","fontStyle":"italic","token":"meta.attribute.rust"},{"foreground":"#df8e1d","fontStyle":"italic","token":"punctuation.definition.attribute.rust"},{"fontStyle":"","token":"meta.attribute.rust string.quoted.double.rust"},{"fontStyle":"","token":"meta.attribute.rust string.quoted.single.char.rust"},{"foreground":"#8839ef","fontStyle":"","token":"entity.name.function.macro.rules.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.module.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.modifier.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.struct.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.enum.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.trait.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.union.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.impl.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.function.rust"},{"foreground":"#8839ef","fontStyle":"","token":"storage.type.type.rust"},{"foreground":"#8839ef","fontStyle":"","token":"entity.name.type.numeric.rust"},{"foreground":"#fe640b","token":"meta.generic.rust"},{"foreground":"#df8e1d","fontStyle":"italic","token":"entity.name.impl.rust"},{"foreground":"#fe640b","token":"entity.name.module.rust"},{"foreground":"#df8e1d","fontStyle":"italic","token":"entity.name.trait.rust"},{"foreground":"#df8e1d","token":"storage.type.source.rust"},{"foreground":"#df8e1d","token":"entity.name.union.rust"},{"foreground":"#179299","token":"meta.enum.rust storage.type.source.rust"},{"foreground":"#1e66f5","fontStyle":"italic","token":"support.macro.rust"},{"foreground":"#1e66f5","fontStyle":"italic","token":"meta.macro.rust support.function.rust"},{"foreground":"#1e66f5","fontStyle":"italic","token":"entity.name.function.macro.rust"},{"foreground":"#1e66f5","fontStyle":"italic","token":"storage.modifier.lifetime.rust"},{"foreground":"#1e66f5","fontStyle":"italic","token":"entity.name.type.lifetime"},{"foreground":"#ea76cb","token":"string.quoted.double.rust constant.other.placeholder.rust"},{"foreground":"#4c4f69","token":"meta.function.return-type.rust meta.generic.rust storage.type.rust"},{"foreground":"#1e66f5","token":"meta.function.call.rust"},{"foreground":"#04a5e5","token":"punctuation.brackets.angle.rust"},{"foreground":"#fe640b","token":"constant.other.caps.rust"},{"foreground":"#e64553","token":"meta.function.definition.rust variable.other.rust"},{"foreground":"#4c4f69","token":"meta.function.call.rust variable.other.rust"},{"foreground":"#d20f39","token":"variable.language.self.rust"},{"foreground":"#ea76cb","token":"variable.other.metavariable.name.rust"},{"foreground":"#ea76cb","token":"meta.macro.metavariable.rust keyword.operator.macro.dollar.rust"},{"foreground":"#ea76cb","fontStyle":"italic","token":"comment.line.shebang"},{"foreground":"#ea76cb","fontStyle":"italic","token":"comment.line.shebang punctuation.definition.comment"},{"foreground":"#ea76cb","fontStyle":"italic","token":"comment.line.shebang"},{"foreground":"#ea76cb","fontStyle":"italic","token":"punctuation.definition.comment.shebang.shell"},{"foreground":"#ea76cb","fontStyle":"italic","token":"meta.shebang.shell"},{"foreground":"#179299","fontStyle":"italic","token":"comment.line.shebang constant.language"},{"foreground":"#d20f39","token":"meta.function-call.arguments.shell punctuation.definition.variable.shell"},{"foreground":"#d20f39","token":"meta.function-call.arguments.shell punctuation.section.interpolation"},{"foreground":"#d20f39","token":"meta.function-call.arguments.shell punctuation.definition.variable.shell"},{"foreground":"#d20f39","token":"meta.function-call.arguments.shell punctuation.section.interpolation"},{"foreground":"#fe640b","fontStyle":"italic","token":"meta.string meta.interpolation.parameter.shell variable.other.readwrite"},{"foreground":"#179299","token":"source.shell punctuation.section.interpolation"},{"foreground":"#179299","token":"punctuation.definition.evaluation.backticks.shell"},{"foreground":"#8839ef","token":"entity.name.tag.heredoc.shell"},{"foreground":"#4c4f69","token":"string.quoted.double.shell variable.other.normal.shell"},{"foreground":"#d20f39","token":"markup.heading.typst"}]`),encodedTokensColors:[]},E$={inherit:!1,base:`vs-dark`,colors:JSON.parse(`{"focusBorder":"#cba6f7","foreground":"#cdd6f4","disabledForeground":"#a6adc8","widget.shadow":"#18182580","selection.background":"#cba6f766","descriptionForeground":"#cdd6f4","errorForeground":"#f38ba8","icon.foreground":"#cba6f7","sash.hoverBorder":"#cba6f7","window.activeBorder":"#00000000","window.inactiveBorder":"#00000000","textBlockQuote.background":"#181825","textBlockQuote.border":"#11111b","textCodeBlock.background":"#181825","textLink.activeForeground":"#89dceb","textLink.foreground":"#89b4fa","textPreformat.foreground":"#cdd6f4","textSeparator.foreground":"#cba6f7","activityBar.background":"#11111b","activityBar.foreground":"#cba6f7","activityBar.dropBorder":"#cba6f733","activityBar.inactiveForeground":"#6c7086","activityBar.border":"#00000000","activityBarBadge.background":"#cba6f7","activityBarBadge.foreground":"#11111b","activityBar.activeBorder":"#00000000","activityBar.activeBackground":"#00000000","activityBar.activeFocusBorder":"#00000000","activityBarTop.foreground":"#cba6f7","activityBarTop.activeBorder":"#00000000","activityBarTop.inactiveForeground":"#6c7086","activityBarTop.dropBorder":"#cba6f733","badge.background":"#45475a","badge.foreground":"#cdd6f4","breadcrumb.activeSelectionForeground":"#cba6f7","breadcrumb.background":"#1e1e2e","breadcrumb.focusForeground":"#cba6f7","breadcrumb.foreground":"#cdd6f4cc","breadcrumbPicker.background":"#181825","button.background":"#cba6f7","button.foreground":"#11111b","button.border":"#00000000","button.separator":"#00000000","button.hoverBackground":"#dec7fa","button.secondaryForeground":"#cdd6f4","button.secondaryBackground":"#585b70","button.secondaryHoverBackground":"#686b84","checkbox.background":"#45475a","checkbox.border":"#00000000","checkbox.foreground":"#cba6f7","dropdown.background":"#181825","dropdown.listBackground":"#585b70","dropdown.border":"#cba6f7","dropdown.foreground":"#cdd6f4","debugToolBar.background":"#11111b","debugToolBar.border":"#00000000","debugExceptionWidget.background":"#11111b","debugExceptionWidget.border":"#cba6f7","debugTokenExpression.number":"#fab387","debugTokenExpression.boolean":"#cba6f7","debugTokenExpression.string":"#a6e3a1","debugTokenExpression.error":"#f38ba8","debugIcon.breakpointForeground":"#f38ba8","debugIcon.breakpointDisabledForeground":"#f38ba899","debugIcon.breakpointUnverifiedForeground":"#a6738c","debugIcon.breakpointCurrentStackframeForeground":"#585b70","debugIcon.breakpointStackframeForeground":"#585b70","debugIcon.startForeground":"#a6e3a1","debugIcon.pauseForeground":"#89b4fa","debugIcon.stopForeground":"#f38ba8","debugIcon.disconnectForeground":"#585b70","debugIcon.restartForeground":"#94e2d5","debugIcon.stepOverForeground":"#cba6f7","debugIcon.stepIntoForeground":"#cdd6f4","debugIcon.stepOutForeground":"#cdd6f4","debugIcon.continueForeground":"#a6e3a1","debugIcon.stepBackForeground":"#585b70","debugConsole.infoForeground":"#89b4fa","debugConsole.warningForeground":"#fab387","debugConsole.errorForeground":"#f38ba8","debugConsole.sourceForeground":"#f5e0dc","debugConsoleInputIcon.foreground":"#cdd6f4","testing.runAction":"#cba6f7","testing.iconErrored":"#f38ba8","testing.iconFailed":"#f38ba8","testing.iconPassed":"#a6e3a1","testing.iconQueued":"#89b4fa","testing.iconUnset":"#cdd6f4","testing.iconSkipped":"#a6adc8","testing.iconErrored.retired":"#f38ba8","testing.iconFailed.retired":"#f38ba8","testing.iconPassed.retired":"#a6e3a1","testing.iconQueued.retired":"#89b4fa","testing.iconUnset.retired":"#cdd6f4","testing.iconSkipped.retired":"#a6adc8","testing.peekBorder":"#cba6f7","testing.peekHeaderBackground":"#585b70","testing.message.error.lineBackground":"#f38ba826","testing.message.info.decorationForeground":"#a6e3a1cc","testing.message.info.lineBackground":"#a6e3a126","testing.messagePeekBorder":"#cba6f7","testing.messagePeekHeaderBackground":"#585b70","testing.coveredBackground":"#a6e3a14d","testing.coveredBorder":"#00000000","testing.coveredGutterBackground":"#a6e3a14d","testing.uncoveredBranchBackground":"#f38ba833","testing.uncoveredBackground":"#f38ba833","testing.uncoveredBorder":"#00000000","testing.uncoveredGutterBackground":"#f38ba840","testing.coverCountBadgeBackground":"#00000000","testing.coverCountBadgeForeground":"#cba6f7","diffEditor.border":"#585b70","diffEditor.insertedTextBackground":"#a6e3a133","diffEditor.removedTextBackground":"#f38ba833","diffEditor.insertedLineBackground":"#a6e3a126","diffEditor.removedLineBackground":"#f38ba826","diffEditor.diagonalFill":"#585b7099","diffEditorOverview.insertedForeground":"#a6e3a1cc","diffEditorOverview.removedForeground":"#f38ba8cc","editor.background":"#1e1e2e","editor.findMatchBackground":"#5e3f53","editor.findMatchBorder":"#f38ba833","editor.findMatchHighlightBackground":"#3e5767","editor.findMatchHighlightBorder":"#89dceb33","editor.findRangeHighlightBackground":"#3e5767","editor.findRangeHighlightBorder":"#89dceb33","editor.foldBackground":"#89dceb40","editor.foreground":"#cdd6f4","editor.hoverHighlightBackground":"#89dceb40","editor.lineHighlightBackground":"#cdd6f412","editor.lineHighlightBorder":"#00000000","editor.rangeHighlightBackground":"#89dceb40","editor.rangeHighlightBorder":"#00000000","editor.selectionBackground":"#9399b240","editor.selectionHighlightBackground":"#9399b233","editor.selectionHighlightBorder":"#9399b233","editor.wordHighlightBackground":"#9399b233","editor.wordHighlightStrongBackground":"#89b4fa33","editorBracketMatch.background":"#9399b21a","editorBracketMatch.border":"#9399b2","editorCodeLens.foreground":"#7f849c","editorCursor.background":"#1e1e2e","editorCursor.foreground":"#f5e0dc","editorGroup.border":"#585b70","editorGroup.dropBackground":"#cba6f733","editorGroup.emptyBackground":"#1e1e2e","editorGroupHeader.tabsBackground":"#11111b","editorGutter.addedBackground":"#a6e3a1","editorGutter.background":"#1e1e2e","editorGutter.commentRangeForeground":"#313244","editorGutter.commentGlyphForeground":"#cba6f7","editorGutter.deletedBackground":"#f38ba8","editorGutter.foldingControlForeground":"#9399b2","editorGutter.modifiedBackground":"#f9e2af","editorHoverWidget.background":"#181825","editorHoverWidget.border":"#585b70","editorHoverWidget.foreground":"#cdd6f4","editorIndentGuide.activeBackground":"#585b70","editorIndentGuide.background":"#45475a","editorInlayHint.foreground":"#585b70","editorInlayHint.background":"#181825bf","editorInlayHint.typeForeground":"#bac2de","editorInlayHint.typeBackground":"#181825bf","editorInlayHint.parameterForeground":"#a6adc8","editorInlayHint.parameterBackground":"#181825bf","editorLineNumber.activeForeground":"#cba6f7","editorLineNumber.foreground":"#7f849c","editorLink.activeForeground":"#cba6f7","editorMarkerNavigation.background":"#181825","editorMarkerNavigationError.background":"#f38ba8","editorMarkerNavigationInfo.background":"#89b4fa","editorMarkerNavigationWarning.background":"#fab387","editorOverviewRuler.background":"#181825","editorOverviewRuler.border":"#cdd6f412","editorOverviewRuler.modifiedForeground":"#f9e2af","editorRuler.foreground":"#585b70","editor.stackFrameHighlightBackground":"#f9e2af26","editor.focusedStackFrameHighlightBackground":"#a6e3a126","editorStickyScrollHover.background":"#313244","editorSuggestWidget.background":"#181825","editorSuggestWidget.border":"#585b70","editorSuggestWidget.foreground":"#cdd6f4","editorSuggestWidget.highlightForeground":"#cba6f7","editorSuggestWidget.selectedBackground":"#313244","editorWhitespace.foreground":"#9399b266","editorWidget.background":"#181825","editorWidget.foreground":"#cdd6f4","editorWidget.resizeBorder":"#585b70","editorLightBulb.foreground":"#f9e2af","editorError.foreground":"#f38ba8","editorError.border":"#00000000","editorError.background":"#00000000","editorWarning.foreground":"#fab387","editorWarning.border":"#00000000","editorWarning.background":"#00000000","editorInfo.foreground":"#89b4fa","editorInfo.border":"#00000000","editorInfo.background":"#00000000","problemsErrorIcon.foreground":"#f38ba8","problemsInfoIcon.foreground":"#89b4fa","problemsWarningIcon.foreground":"#fab387","extensionButton.prominentForeground":"#11111b","extensionButton.prominentBackground":"#cba6f7","extensionButton.separator":"#1e1e2e","extensionButton.prominentHoverBackground":"#dec7fa","extensionBadge.remoteBackground":"#89b4fa","extensionBadge.remoteForeground":"#11111b","extensionIcon.starForeground":"#f9e2af","extensionIcon.verifiedForeground":"#a6e3a1","extensionIcon.preReleaseForeground":"#585b70","extensionIcon.sponsorForeground":"#f5c2e7","gitDecoration.addedResourceForeground":"#a6e3a1","gitDecoration.conflictingResourceForeground":"#cba6f7","gitDecoration.deletedResourceForeground":"#f38ba8","gitDecoration.ignoredResourceForeground":"#6c7086","gitDecoration.modifiedResourceForeground":"#f9e2af","gitDecoration.stageDeletedResourceForeground":"#f38ba8","gitDecoration.stageModifiedResourceForeground":"#f9e2af","gitDecoration.submoduleResourceForeground":"#89b4fa","gitDecoration.untrackedResourceForeground":"#a6e3a1","scmGraph.historyItemRefColor":"#89b4fa","scmGraph.historyItemBaseRefColor":"#fab387","scmGraph.historyItemRemoteRefColor":"#cba6f7","scmGraph.foreground1":"#f9e2af","scmGraph.foreground2":"#f38ba8","scmGraph.foreground3":"#a6e3a1","scmGraph.foreground4":"#cba6f7","scmGraph.foreground5":"#94e2d5","input.background":"#313244","input.border":"#00000000","input.foreground":"#cdd6f4","input.placeholderForeground":"#cdd6f473","inputOption.activeBackground":"#585b70","inputOption.activeBorder":"#cba6f7","inputOption.activeForeground":"#cdd6f4","inputValidation.errorBackground":"#f38ba8","inputValidation.errorBorder":"#11111b33","inputValidation.errorForeground":"#11111b","inputValidation.infoBackground":"#89b4fa","inputValidation.infoBorder":"#11111b33","inputValidation.infoForeground":"#11111b","inputValidation.warningBackground":"#fab387","inputValidation.warningBorder":"#11111b33","inputValidation.warningForeground":"#11111b","list.activeSelectionBackground":"#313244","list.activeSelectionForeground":"#cdd6f4","list.dropBackground":"#cba6f733","list.focusBackground":"#313244","list.focusForeground":"#cdd6f4","list.focusOutline":"#00000000","list.highlightForeground":"#cba6f7","list.hoverBackground":"#31324480","list.hoverForeground":"#cdd6f4","list.inactiveSelectionBackground":"#313244","list.inactiveSelectionForeground":"#cdd6f4","list.warningForeground":"#fab387","listFilterWidget.background":"#45475a","listFilterWidget.noMatchesOutline":"#f38ba8","listFilterWidget.outline":"#00000000","tree.indentGuidesStroke":"#9399b2","tree.inactiveIndentGuidesStroke":"#45475a","menu.background":"#1e1e2e","menu.border":"#1e1e2e80","menu.foreground":"#cdd6f4","menu.selectionBackground":"#585b70","menu.selectionBorder":"#00000000","menu.selectionForeground":"#cdd6f4","menu.separatorBackground":"#585b70","menubar.selectionBackground":"#45475a","menubar.selectionForeground":"#cdd6f4","merge.commonContentBackground":"#45475a","merge.commonHeaderBackground":"#585b70","merge.currentContentBackground":"#a6e3a133","merge.currentHeaderBackground":"#a6e3a166","merge.incomingContentBackground":"#89b4fa33","merge.incomingHeaderBackground":"#89b4fa66","minimap.background":"#18182580","minimap.findMatchHighlight":"#89dceb4d","minimap.selectionHighlight":"#585b70bf","minimap.selectionOccurrenceHighlight":"#585b70bf","minimap.warningHighlight":"#fab387bf","minimap.errorHighlight":"#f38ba8bf","minimapSlider.background":"#cba6f733","minimapSlider.hoverBackground":"#cba6f766","minimapSlider.activeBackground":"#cba6f799","minimapGutter.addedBackground":"#a6e3a1bf","minimapGutter.deletedBackground":"#f38ba8bf","minimapGutter.modifiedBackground":"#f9e2afbf","notificationCenter.border":"#cba6f7","notificationCenterHeader.foreground":"#cdd6f4","notificationCenterHeader.background":"#181825","notificationToast.border":"#cba6f7","notifications.foreground":"#cdd6f4","notifications.background":"#181825","notifications.border":"#cba6f7","notificationLink.foreground":"#89b4fa","notificationsErrorIcon.foreground":"#f38ba8","notificationsWarningIcon.foreground":"#fab387","notificationsInfoIcon.foreground":"#89b4fa","panel.background":"#1e1e2e","panel.border":"#585b70","panelSection.border":"#585b70","panelSection.dropBackground":"#cba6f733","panelTitle.activeBorder":"#cba6f7","panelTitle.activeForeground":"#cdd6f4","panelTitle.inactiveForeground":"#a6adc8","peekView.border":"#cba6f7","peekViewEditor.background":"#181825","peekViewEditorGutter.background":"#181825","peekViewEditor.matchHighlightBackground":"#89dceb4d","peekViewEditor.matchHighlightBorder":"#00000000","peekViewResult.background":"#181825","peekViewResult.fileForeground":"#cdd6f4","peekViewResult.lineForeground":"#cdd6f4","peekViewResult.matchHighlightBackground":"#89dceb4d","peekViewResult.selectionBackground":"#313244","peekViewResult.selectionForeground":"#cdd6f4","peekViewTitle.background":"#1e1e2e","peekViewTitleDescription.foreground":"#bac2deb3","peekViewTitleLabel.foreground":"#cdd6f4","pickerGroup.border":"#cba6f7","pickerGroup.foreground":"#cba6f7","progressBar.background":"#cba6f7","scrollbar.shadow":"#11111b","scrollbarSlider.activeBackground":"#31324466","scrollbarSlider.background":"#585b7080","scrollbarSlider.hoverBackground":"#6c7086","settings.focusedRowBackground":"#585b7033","settings.headerForeground":"#cdd6f4","settings.modifiedItemIndicator":"#cba6f7","settings.dropdownBackground":"#45475a","settings.dropdownListBorder":"#00000000","settings.textInputBackground":"#45475a","settings.textInputBorder":"#00000000","settings.numberInputBackground":"#45475a","settings.numberInputBorder":"#00000000","sideBar.background":"#181825","sideBar.dropBackground":"#cba6f733","sideBar.foreground":"#cdd6f4","sideBar.border":"#00000000","sideBarSectionHeader.background":"#181825","sideBarSectionHeader.foreground":"#cdd6f4","sideBarTitle.foreground":"#cba6f7","banner.background":"#45475a","banner.foreground":"#cdd6f4","banner.iconForeground":"#cdd6f4","statusBar.background":"#11111b","statusBar.foreground":"#cdd6f4","statusBar.border":"#00000000","statusBar.noFolderBackground":"#11111b","statusBar.noFolderForeground":"#cdd6f4","statusBar.noFolderBorder":"#00000000","statusBar.debuggingBackground":"#fab387","statusBar.debuggingForeground":"#11111b","statusBar.debuggingBorder":"#00000000","statusBarItem.remoteBackground":"#89b4fa","statusBarItem.remoteForeground":"#11111b","statusBarItem.activeBackground":"#585b7066","statusBarItem.hoverBackground":"#585b7033","statusBarItem.prominentForeground":"#cba6f7","statusBarItem.prominentBackground":"#00000000","statusBarItem.prominentHoverBackground":"#585b7033","statusBarItem.errorForeground":"#f38ba8","statusBarItem.errorBackground":"#00000000","statusBarItem.warningForeground":"#fab387","statusBarItem.warningBackground":"#00000000","commandCenter.foreground":"#bac2de","commandCenter.inactiveForeground":"#bac2de","commandCenter.activeForeground":"#cba6f7","commandCenter.background":"#181825","commandCenter.activeBackground":"#585b7033","commandCenter.border":"#00000000","commandCenter.inactiveBorder":"#00000000","commandCenter.activeBorder":"#cba6f7","tab.activeBackground":"#1e1e2e","tab.activeBorder":"#00000000","tab.activeBorderTop":"#cba6f7","tab.activeForeground":"#cba6f7","tab.activeModifiedBorder":"#f9e2af","tab.border":"#181825","tab.hoverBackground":"#28283d","tab.hoverBorder":"#00000000","tab.hoverForeground":"#cba6f7","tab.inactiveBackground":"#181825","tab.inactiveForeground":"#6c7086","tab.inactiveModifiedBorder":"#f9e2af4d","tab.lastPinnedBorder":"#cba6f7","tab.unfocusedActiveBackground":"#181825","tab.unfocusedActiveBorder":"#00000000","tab.unfocusedActiveBorderTop":"#cba6f74d","tab.unfocusedInactiveBackground":"#0e0e16","terminal.foreground":"#cdd6f4","terminal.ansiBlack":"#45475a","terminal.ansiRed":"#f38ba8","terminal.ansiGreen":"#a6e3a1","terminal.ansiYellow":"#f9e2af","terminal.ansiBlue":"#89b4fa","terminal.ansiMagenta":"#f5c2e7","terminal.ansiCyan":"#94e2d5","terminal.ansiWhite":"#a6adc8","terminal.ansiBrightBlack":"#585b70","terminal.ansiBrightRed":"#f37799","terminal.ansiBrightGreen":"#89d88b","terminal.ansiBrightYellow":"#ebd391","terminal.ansiBrightBlue":"#74a8fc","terminal.ansiBrightMagenta":"#f2aede","terminal.ansiBrightCyan":"#6bd7ca","terminal.ansiBrightWhite":"#bac2de","terminal.selectionBackground":"#585b70","terminal.inactiveSelectionBackground":"#585b7080","terminalCursor.background":"#1e1e2e","terminalCursor.foreground":"#f5e0dc","terminal.border":"#585b70","terminal.dropBackground":"#cba6f733","terminal.tab.activeBorder":"#cba6f7","terminalCommandDecoration.defaultBackground":"#585b70","terminalCommandDecoration.successBackground":"#a6e3a1","terminalCommandDecoration.errorBackground":"#f38ba8","titleBar.activeBackground":"#11111b","titleBar.activeForeground":"#cdd6f4","titleBar.inactiveBackground":"#11111b","titleBar.inactiveForeground":"#cdd6f480","titleBar.border":"#00000000","welcomePage.tileBackground":"#181825","welcomePage.progress.background":"#11111b","welcomePage.progress.foreground":"#cba6f7","walkThrough.embeddedEditorBackground":"#1e1e2e4d","symbolIcon.textForeground":"#cdd6f4","symbolIcon.arrayForeground":"#fab387","symbolIcon.booleanForeground":"#cba6f7","symbolIcon.classForeground":"#f9e2af","symbolIcon.colorForeground":"#f5c2e7","symbolIcon.constantForeground":"#fab387","symbolIcon.constructorForeground":"#b4befe","symbolIcon.enumeratorForeground":"#f9e2af","symbolIcon.enumeratorMemberForeground":"#f9e2af","symbolIcon.eventForeground":"#f5c2e7","symbolIcon.fieldForeground":"#cdd6f4","symbolIcon.fileForeground":"#cba6f7","symbolIcon.folderForeground":"#cba6f7","symbolIcon.functionForeground":"#89b4fa","symbolIcon.interfaceForeground":"#f9e2af","symbolIcon.keyForeground":"#94e2d5","symbolIcon.keywordForeground":"#cba6f7","symbolIcon.methodForeground":"#89b4fa","symbolIcon.moduleForeground":"#cdd6f4","symbolIcon.namespaceForeground":"#f9e2af","symbolIcon.nullForeground":"#eba0ac","symbolIcon.numberForeground":"#fab387","symbolIcon.objectForeground":"#f9e2af","symbolIcon.operatorForeground":"#94e2d5","symbolIcon.packageForeground":"#f2cdcd","symbolIcon.propertyForeground":"#eba0ac","symbolIcon.referenceForeground":"#f9e2af","symbolIcon.snippetForeground":"#f2cdcd","symbolIcon.stringForeground":"#a6e3a1","symbolIcon.structForeground":"#94e2d5","symbolIcon.typeParameterForeground":"#eba0ac","symbolIcon.unitForeground":"#cdd6f4","symbolIcon.variableForeground":"#cdd6f4","charts.foreground":"#cdd6f4","charts.lines":"#bac2de","charts.red":"#f38ba8","charts.blue":"#89b4fa","charts.yellow":"#f9e2af","charts.orange":"#fab387","charts.green":"#a6e3a1","charts.purple":"#cba6f7","errorLens.errorBackground":"#f38ba826","errorLens.errorBackgroundLight":"#f38ba826","errorLens.errorForeground":"#f38ba8","errorLens.errorForegroundLight":"#f38ba8","errorLens.errorMessageBackground":"#f38ba826","errorLens.hintBackground":"#a6e3a126","errorLens.hintBackgroundLight":"#a6e3a126","errorLens.hintForeground":"#a6e3a1","errorLens.hintForegroundLight":"#a6e3a1","errorLens.hintMessageBackground":"#a6e3a126","errorLens.infoBackground":"#89b4fa26","errorLens.infoBackgroundLight":"#89b4fa26","errorLens.infoForeground":"#89b4fa","errorLens.infoForegroundLight":"#89b4fa","errorLens.infoMessageBackground":"#89b4fa26","errorLens.statusBarErrorForeground":"#f38ba8","errorLens.statusBarHintForeground":"#a6e3a1","errorLens.statusBarIconErrorForeground":"#f38ba8","errorLens.statusBarIconWarningForeground":"#fab387","errorLens.statusBarInfoForeground":"#89b4fa","errorLens.statusBarWarningForeground":"#fab387","errorLens.warningBackground":"#fab38726","errorLens.warningBackgroundLight":"#fab38726","errorLens.warningForeground":"#fab387","errorLens.warningForegroundLight":"#fab387","errorLens.warningMessageBackground":"#fab38726","issues.closed":"#cba6f7","issues.newIssueDecoration":"#f5e0dc","issues.open":"#a6e3a1","pullRequests.closed":"#f38ba8","pullRequests.draft":"#9399b2","pullRequests.merged":"#cba6f7","pullRequests.notification":"#cdd6f4","pullRequests.open":"#a6e3a1","gitlens.gutterBackgroundColor":"#3132444d","gitlens.gutterForegroundColor":"#cdd6f4","gitlens.gutterUncommittedForegroundColor":"#cba6f7","gitlens.trailingLineBackgroundColor":"#00000000","gitlens.trailingLineForegroundColor":"#cdd6f44d","gitlens.lineHighlightBackgroundColor":"#cba6f726","gitlens.lineHighlightOverviewRulerColor":"#cba6f7cc","gitlens.openAutolinkedIssueIconColor":"#a6e3a1","gitlens.closedAutolinkedIssueIconColor":"#cba6f7","gitlens.closedPullRequestIconColor":"#f38ba8","gitlens.openPullRequestIconColor":"#a6e3a1","gitlens.mergedPullRequestIconColor":"#cba6f7","gitlens.unpublishedChangesIconColor":"#a6e3a1","gitlens.unpublishedCommitIconColor":"#a6e3a1","gitlens.unpulledChangesIconColor":"#fab387","gitlens.decorations.branchAheadForegroundColor":"#a6e3a1","gitlens.decorations.branchBehindForegroundColor":"#fab387","gitlens.decorations.branchDivergedForegroundColor":"#f9e2af","gitlens.decorations.branchUnpublishedForegroundColor":"#a6e3a1","gitlens.decorations.branchMissingUpstreamForegroundColor":"#fab387","gitlens.decorations.statusMergingOrRebasingConflictForegroundColor":"#eba0ac","gitlens.decorations.statusMergingOrRebasingForegroundColor":"#f9e2af","gitlens.decorations.workspaceRepoMissingForegroundColor":"#a6adc8","gitlens.decorations.workspaceCurrentForegroundColor":"#cba6f7","gitlens.decorations.workspaceRepoOpenForegroundColor":"#cba6f7","gitlens.decorations.worktreeHasUncommittedChangesForegroundColor":"#fab387","gitlens.decorations.worktreeMissingForegroundColor":"#eba0ac","gitlens.graphLane1Color":"#cba6f7","gitlens.graphLane2Color":"#f9e2af","gitlens.graphLane3Color":"#89b4fa","gitlens.graphLane4Color":"#f2cdcd","gitlens.graphLane5Color":"#a6e3a1","gitlens.graphLane6Color":"#b4befe","gitlens.graphLane7Color":"#f5e0dc","gitlens.graphLane8Color":"#f38ba8","gitlens.graphLane9Color":"#94e2d5","gitlens.graphLane10Color":"#f5c2e7","gitlens.graphChangesColumnAddedColor":"#a6e3a1","gitlens.graphChangesColumnDeletedColor":"#f38ba8","gitlens.graphMinimapMarkerHeadColor":"#a6e3a1","gitlens.graphScrollMarkerHeadColor":"#a6e3a1","gitlens.graphMinimapMarkerUpstreamColor":"#93dd8d","gitlens.graphScrollMarkerUpstreamColor":"#93dd8d","gitlens.graphMinimapMarkerHighlightsColor":"#f9e2af","gitlens.graphScrollMarkerHighlightsColor":"#f9e2af","gitlens.graphMinimapMarkerLocalBranchesColor":"#89b4fa","gitlens.graphScrollMarkerLocalBranchesColor":"#89b4fa","gitlens.graphMinimapMarkerRemoteBranchesColor":"#71a4f9","gitlens.graphScrollMarkerRemoteBranchesColor":"#71a4f9","gitlens.graphMinimapMarkerStashesColor":"#cba6f7","gitlens.graphScrollMarkerStashesColor":"#cba6f7","gitlens.graphMinimapMarkerTagsColor":"#f2cdcd","gitlens.graphScrollMarkerTagsColor":"#f2cdcd","editorBracketHighlight.foreground1":"#f38ba8","editorBracketHighlight.foreground2":"#fab387","editorBracketHighlight.foreground3":"#f9e2af","editorBracketHighlight.foreground4":"#a6e3a1","editorBracketHighlight.foreground5":"#74c7ec","editorBracketHighlight.foreground6":"#cba6f7","editorBracketHighlight.unexpectedBracket.foreground":"#eba0ac","button.secondaryBorder":"#cba6f7","table.headerBackground":"#313244","table.headerForeground":"#cdd6f4","list.focusAndSelectionBackground":"#45475a"}`),rules:JSON.parse(`[{"foreground":"#cdd6f4","token":"text"},{"foreground":"#cdd6f4","token":"source"},{"foreground":"#cdd6f4","token":"variable.other.readwrite"},{"foreground":"#cdd6f4","token":"punctuation.definition.variable"},{"foreground":"#9399b2","fontStyle":"","token":"punctuation"},{"foreground":"#9399b2","fontStyle":"italic","token":"comment"},{"foreground":"#9399b2","fontStyle":"italic","token":"punctuation.definition.comment"},{"foreground":"#a6e3a1","token":"string"},{"foreground":"#a6e3a1","token":"punctuation.definition.string"},{"foreground":"#f5c2e7","token":"constant.character.escape"},{"foreground":"#fab387","token":"constant.numeric"},{"foreground":"#fab387","token":"variable.other.constant"},{"foreground":"#fab387","token":"entity.name.constant"},{"foreground":"#fab387","token":"constant.language.boolean"},{"foreground":"#fab387","token":"constant.language.false"},{"foreground":"#fab387","token":"constant.language.true"},{"foreground":"#fab387","token":"keyword.other.unit.user-defined"},{"foreground":"#fab387","token":"keyword.other.unit.suffix.floating-point"},{"foreground":"#cba6f7","fontStyle":"","token":"keyword"},{"foreground":"#cba6f7","fontStyle":"","token":"keyword.operator.word"},{"foreground":"#cba6f7","fontStyle":"","token":"keyword.operator.new"},{"foreground":"#cba6f7","fontStyle":"","token":"variable.language.super"},{"foreground":"#cba6f7","fontStyle":"","token":"support.type.primitive"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.modifier"},{"foreground":"#cba6f7","fontStyle":"","token":"punctuation.definition.keyword"},{"foreground":"#cba6f7","token":"entity.name.tag.documentation"},{"foreground":"#94e2d5","token":"keyword.operator"},{"foreground":"#94e2d5","token":"punctuation.accessor"},{"foreground":"#94e2d5","token":"punctuation.definition.generic"},{"foreground":"#94e2d5","token":"meta.function.closure punctuation.section.parameters"},{"foreground":"#94e2d5","token":"punctuation.definition.tag"},{"foreground":"#94e2d5","token":"punctuation.separator.key-value"},{"foreground":"#89b4fa","fontStyle":"italic","token":"entity.name.function"},{"foreground":"#89b4fa","fontStyle":"italic","token":"meta.function-call.method"},{"foreground":"#89b4fa","fontStyle":"italic","token":"support.function"},{"foreground":"#89b4fa","fontStyle":"italic","token":"support.function.misc"},{"foreground":"#89b4fa","fontStyle":"italic","token":"variable.function"},{"foreground":"#f9e2af","fontStyle":"italic","token":"entity.name.class"},{"foreground":"#f9e2af","fontStyle":"italic","token":"entity.other.inherited-class"},{"foreground":"#f9e2af","fontStyle":"italic","token":"support.class"},{"foreground":"#f9e2af","fontStyle":"italic","token":"meta.function-call.constructor"},{"foreground":"#f9e2af","fontStyle":"italic","token":"entity.name.struct"},{"foreground":"#f9e2af","fontStyle":"italic","token":"entity.name.enum"},{"foreground":"#94e2d5","token":"meta.enum variable.other.readwrite"},{"foreground":"#94e2d5","token":"variable.other.enummember"},{"foreground":"#94e2d5","token":"meta.property.object"},{"foreground":"#f9e2af","fontStyle":"italic","token":"meta.type"},{"foreground":"#f9e2af","fontStyle":"italic","token":"meta.type-alias"},{"foreground":"#f9e2af","fontStyle":"italic","token":"support.type"},{"foreground":"#f9e2af","fontStyle":"italic","token":"entity.name.type"},{"foreground":"#fab387","token":"meta.annotation variable.function"},{"foreground":"#fab387","token":"meta.annotation variable.annotation.function"},{"foreground":"#fab387","token":"meta.annotation punctuation.definition.annotation"},{"foreground":"#fab387","token":"meta.decorator"},{"foreground":"#fab387","token":"punctuation.decorator"},{"foreground":"#eba0ac","fontStyle":"italic","token":"variable.parameter"},{"foreground":"#eba0ac","fontStyle":"italic","token":"meta.function.parameters"},{"foreground":"#f38ba8","token":"constant.language"},{"foreground":"#f38ba8","token":"support.function.builtin"},{"foreground":"#f38ba8","token":"entity.other.attribute-name.documentation"},{"foreground":"#f9e2af","token":"keyword.control.directive"},{"foreground":"#f9e2af","token":"punctuation.definition.directive"},{"foreground":"#89dceb","token":"punctuation.definition.typeparameters"},{"foreground":"#f9e2af","token":"entity.name.namespace"},{"foreground":"#89b4fa","fontStyle":"","token":"support.type.property-name.css"},{"foreground":"#89b4fa","fontStyle":"","token":"support.type.property-name.less"},{"foreground":"#f38ba8","token":"variable.language.this"},{"foreground":"#f38ba8","token":"variable.language.this punctuation.definition.variable"},{"foreground":"#cdd6f4","token":"variable.object.property"},{"foreground":"#cdd6f4","token":"string.template variable"},{"foreground":"#cdd6f4","token":"string variable"},{"fontStyle":"bold","token":"keyword.operator.new"},{"foreground":"#cba6f7","token":"storage.modifier.specifier.extern.cpp"},{"foreground":"#f9e2af","token":"entity.name.scope-resolution.template.call.cpp"},{"foreground":"#f9e2af","token":"entity.name.scope-resolution.parameter.cpp"},{"foreground":"#f9e2af","token":"entity.name.scope-resolution.cpp"},{"foreground":"#f9e2af","token":"entity.name.scope-resolution.function.definition.cpp"},{"fontStyle":"","token":"storage.type.class.doxygen"},{"foreground":"#94e2d5","token":"storage.modifier.reference.cpp"},{"foreground":"#cdd6f4","token":"meta.interpolation.cs"},{"foreground":"#cdd6f4","token":"comment.block.documentation.cs"},{"foreground":"#f9e2af","token":"source.css entity.other.attribute-name.class.css"},{"foreground":"#f9e2af","token":"entity.other.attribute-name.parent-selector.css punctuation.definition.entity.css"},{"foreground":"#94e2d5","token":"punctuation.separator.operator.css"},{"foreground":"#94e2d5","token":"source.css entity.other.attribute-name.pseudo-class"},{"foreground":"#fab387","token":"source.css constant.other.unicode-range"},{"foreground":"#a6e3a1","fontStyle":"","token":"source.css variable.parameter.url"},{"foreground":"#89dceb","token":"support.type.vendored.property-name"},{"foreground":"#eba0ac","token":"source.css meta.property-value variable"},{"foreground":"#eba0ac","token":"source.css meta.property-value variable.other.less"},{"foreground":"#eba0ac","token":"source.css meta.property-value variable.other.less punctuation.definition.variable.less"},{"foreground":"#eba0ac","token":"meta.definition.variable.scss"},{"foreground":"#89b4fa","token":"source.css meta.property-list variable"},{"foreground":"#89b4fa","token":"meta.property-list variable.other.less"},{"foreground":"#89b4fa","token":"meta.property-list variable.other.less punctuation.definition.variable.less"},{"foreground":"#fab387","token":"keyword.other.unit.percentage.css"},{"foreground":"#a6e3a1","token":"source.css meta.attribute-selector"},{"foreground":"#89b4fa","fontStyle":"","token":"keyword.other.definition.ini"},{"foreground":"#89b4fa","fontStyle":"","token":"punctuation.support.type.property-name.json"},{"foreground":"#89b4fa","fontStyle":"","token":"support.type.property-name.json"},{"foreground":"#89b4fa","fontStyle":"","token":"punctuation.support.type.property-name.toml"},{"foreground":"#89b4fa","fontStyle":"","token":"support.type.property-name.toml"},{"foreground":"#89b4fa","fontStyle":"","token":"entity.name.tag.yaml"},{"foreground":"#89b4fa","fontStyle":"","token":"punctuation.support.type.property-name.yaml"},{"foreground":"#89b4fa","fontStyle":"","token":"support.type.property-name.yaml"},{"foreground":"#fab387","token":"constant.language.json"},{"foreground":"#fab387","token":"constant.language.yaml"},{"foreground":"#f9e2af","fontStyle":"","token":"entity.name.type.anchor.yaml"},{"foreground":"#f9e2af","fontStyle":"","token":"variable.other.alias.yaml"},{"foreground":"#f9e2af","token":"support.type.property-name.table"},{"foreground":"#f9e2af","token":"entity.name.section.group-title.ini"},{"foreground":"#f5c2e7","token":"constant.other.time.datetime.offset.toml"},{"foreground":"#f5c2e7","token":"punctuation.definition.anchor.yaml"},{"foreground":"#f5c2e7","token":"punctuation.definition.alias.yaml"},{"foreground":"#f5c2e7","token":"entity.other.document.begin.yaml"},{"foreground":"#fab387","token":"markup.changed.diff"},{"foreground":"#89b4fa","token":"meta.diff.header.from-file"},{"foreground":"#89b4fa","token":"meta.diff.header.to-file"},{"foreground":"#89b4fa","token":"punctuation.definition.from-file.diff"},{"foreground":"#89b4fa","token":"punctuation.definition.to-file.diff"},{"foreground":"#a6e3a1","token":"markup.inserted.diff"},{"foreground":"#f38ba8","token":"markup.deleted.diff"},{"foreground":"#89b4fa","token":"variable.other.env"},{"foreground":"#cdd6f4","token":"string.quoted variable.other.env"},{"foreground":"#89b4fa","token":"support.function.builtin.gdscript"},{"foreground":"#fab387","token":"constant.language.gdscript"},{"foreground":"#eba0ac","token":"comment meta.annotation.go"},{"foreground":"#fab387","token":"comment meta.annotation.parameters.go"},{"foreground":"#fab387","token":"constant.language.go"},{"foreground":"#cdd6f4","token":"variable.graphql"},{"foreground":"#f2cdcd","token":"string.unquoted.alias.graphql"},{"foreground":"#94e2d5","token":"constant.character.enum.graphql"},{"foreground":"#f2cdcd","token":"meta.objectvalues.graphql constant.object.key.graphql string.unquoted.graphql"},{"foreground":"#cba6f7","token":"keyword.other.doctype"},{"foreground":"#cba6f7","token":"meta.tag.sgml.doctype punctuation.definition.tag"},{"foreground":"#cba6f7","token":"meta.tag.metadata.doctype entity.name.tag"},{"foreground":"#cba6f7","token":"meta.tag.metadata.doctype punctuation.definition.tag"},{"foreground":"#89b4fa","fontStyle":"","token":"entity.name.tag"},{"foreground":"#f38ba8","token":"text.html constant.character.entity"},{"foreground":"#f38ba8","token":"text.html constant.character.entity punctuation"},{"foreground":"#f38ba8","token":"constant.character.entity.xml"},{"foreground":"#f38ba8","token":"constant.character.entity.xml punctuation"},{"foreground":"#f38ba8","token":"constant.character.entity.js.jsx"},{"foreground":"#f38ba8","token":"constant.charactger.entity.js.jsx punctuation"},{"foreground":"#f38ba8","token":"constant.character.entity.tsx"},{"foreground":"#f38ba8","token":"constant.character.entity.tsx punctuation"},{"foreground":"#f9e2af","token":"entity.other.attribute-name"},{"foreground":"#f5c2e7","fontStyle":"","token":"support.class.component"},{"foreground":"#f5c2e7","fontStyle":"","token":"support.class.component.jsx"},{"foreground":"#f5c2e7","fontStyle":"","token":"support.class.component.tsx"},{"foreground":"#f5c2e7","fontStyle":"","token":"support.class.component.vue"},{"foreground":"#fab387","token":"punctuation.definition.annotation"},{"foreground":"#fab387","token":"storage.type.annotation"},{"foreground":"#94e2d5","token":"constant.other.enum.java"},{"foreground":"#cdd6f4","token":"storage.modifier.import.java"},{"fontStyle":"","token":"comment.block.javadoc.java keyword.other.documentation.javadoc.java"},{"foreground":"#eba0ac","token":"meta.export variable.other.readwrite.js"},{"foreground":"#cdd6f4","token":"variable.other.constant.js"},{"foreground":"#cdd6f4","token":"variable.other.constant.ts"},{"foreground":"#cdd6f4","token":"variable.other.property.js"},{"foreground":"#cdd6f4","token":"variable.other.property.ts"},{"foreground":"#eba0ac","fontStyle":"","token":"variable.other.jsdoc"},{"foreground":"#eba0ac","fontStyle":"","token":"comment.block.documentation variable.other"},{"fontStyle":"","token":"storage.type.class.jsdoc"},{"foreground":"#cdd6f4","token":"support.type.object.console.js"},{"foreground":"#cba6f7","token":"support.constant.node"},{"foreground":"#cba6f7","token":"support.type.object.module.js"},{"foreground":"#cba6f7","token":"storage.modifier.implements"},{"foreground":"#cba6f7","token":"constant.language.null.js"},{"foreground":"#cba6f7","token":"constant.language.null.ts"},{"foreground":"#cba6f7","token":"constant.language.undefined.js"},{"foreground":"#cba6f7","token":"constant.language.undefined.ts"},{"foreground":"#cba6f7","token":"support.type.builtin.ts"},{"foreground":"#f9e2af","token":"variable.parameter.generic"},{"foreground":"#94e2d5","token":"keyword.declaration.function.arrow.js"},{"foreground":"#94e2d5","token":"storage.type.function.arrow.ts"},{"foreground":"#89b4fa","fontStyle":"italic","token":"punctuation.decorator.ts"},{"foreground":"#cba6f7","token":"keyword.operator.expression.in.js"},{"foreground":"#cba6f7","token":"keyword.operator.expression.in.ts"},{"foreground":"#cba6f7","token":"keyword.operator.expression.infer.ts"},{"foreground":"#cba6f7","token":"keyword.operator.expression.instanceof.js"},{"foreground":"#cba6f7","token":"keyword.operator.expression.instanceof.ts"},{"foreground":"#cba6f7","token":"keyword.operator.expression.is"},{"foreground":"#cba6f7","token":"keyword.operator.expression.keyof.ts"},{"foreground":"#cba6f7","token":"keyword.operator.expression.of.js"},{"foreground":"#cba6f7","token":"keyword.operator.expression.of.ts"},{"foreground":"#cba6f7","token":"keyword.operator.expression.typeof.ts"},{"foreground":"#94e2d5","fontStyle":"italic","token":"support.function.macro.julia"},{"foreground":"#fab387","token":"constant.language.julia"},{"foreground":"#eba0ac","token":"constant.other.symbol.julia"},{"foreground":"#94e2d5","token":"text.tex keyword.control.preamble"},{"foreground":"#89dceb","token":"text.tex support.function.be"},{"foreground":"#f2cdcd","token":"constant.other.general.math.tex"},{"foreground":"#f5c2e7","token":"variable.language.liquid"},{"foreground":"#cba6f7","fontStyle":"","token":"comment.line.double-dash.documentation.lua storage.type.annotation.lua"},{"foreground":"#cdd6f4","token":"comment.line.double-dash.documentation.lua entity.name.variable.lua"},{"foreground":"#cdd6f4","token":"comment.line.double-dash.documentation.lua variable.lua"},{"foreground":"#f38ba8","token":"heading.1.markdown punctuation.definition.heading.markdown"},{"foreground":"#f38ba8","token":"heading.1.markdown"},{"foreground":"#f38ba8","token":"heading.1.quarto punctuation.definition.heading.quarto"},{"foreground":"#f38ba8","token":"heading.1.quarto"},{"foreground":"#f38ba8","token":"markup.heading.atx.1.mdx"},{"foreground":"#f38ba8","token":"markup.heading.atx.1.mdx punctuation.definition.heading.mdx"},{"foreground":"#f38ba8","token":"markup.heading.setext.1.markdown"},{"foreground":"#f38ba8","token":"markup.heading.heading-0.asciidoc"},{"foreground":"#fab387","token":"heading.2.markdown punctuation.definition.heading.markdown"},{"foreground":"#fab387","token":"heading.2.markdown"},{"foreground":"#fab387","token":"heading.2.quarto punctuation.definition.heading.quarto"},{"foreground":"#fab387","token":"heading.2.quarto"},{"foreground":"#fab387","token":"markup.heading.atx.2.mdx"},{"foreground":"#fab387","token":"markup.heading.atx.2.mdx punctuation.definition.heading.mdx"},{"foreground":"#fab387","token":"markup.heading.setext.2.markdown"},{"foreground":"#fab387","token":"markup.heading.heading-1.asciidoc"},{"foreground":"#f9e2af","token":"heading.3.markdown punctuation.definition.heading.markdown"},{"foreground":"#f9e2af","token":"heading.3.markdown"},{"foreground":"#f9e2af","token":"heading.3.quarto punctuation.definition.heading.quarto"},{"foreground":"#f9e2af","token":"heading.3.quarto"},{"foreground":"#f9e2af","token":"markup.heading.atx.3.mdx"},{"foreground":"#f9e2af","token":"markup.heading.atx.3.mdx punctuation.definition.heading.mdx"},{"foreground":"#f9e2af","token":"markup.heading.heading-2.asciidoc"},{"foreground":"#a6e3a1","token":"heading.4.markdown punctuation.definition.heading.markdown"},{"foreground":"#a6e3a1","token":"heading.4.markdown"},{"foreground":"#a6e3a1","token":"heading.4.quarto punctuation.definition.heading.quarto"},{"foreground":"#a6e3a1","token":"heading.4.quarto"},{"foreground":"#a6e3a1","token":"markup.heading.atx.4.mdx"},{"foreground":"#a6e3a1","token":"markup.heading.atx.4.mdx punctuation.definition.heading.mdx"},{"foreground":"#a6e3a1","token":"markup.heading.heading-3.asciidoc"},{"foreground":"#74c7ec","token":"heading.5.markdown punctuation.definition.heading.markdown"},{"foreground":"#74c7ec","token":"heading.5.markdown"},{"foreground":"#74c7ec","token":"heading.5.quarto punctuation.definition.heading.quarto"},{"foreground":"#74c7ec","token":"heading.5.quarto"},{"foreground":"#74c7ec","token":"markup.heading.atx.5.mdx"},{"foreground":"#74c7ec","token":"markup.heading.atx.5.mdx punctuation.definition.heading.mdx"},{"foreground":"#74c7ec","token":"markup.heading.heading-4.asciidoc"},{"foreground":"#b4befe","token":"heading.6.markdown punctuation.definition.heading.markdown"},{"foreground":"#b4befe","token":"heading.6.markdown"},{"foreground":"#b4befe","token":"heading.6.quarto punctuation.definition.heading.quarto"},{"foreground":"#b4befe","token":"heading.6.quarto"},{"foreground":"#b4befe","token":"markup.heading.atx.6.mdx"},{"foreground":"#b4befe","token":"markup.heading.atx.6.mdx punctuation.definition.heading.mdx"},{"foreground":"#b4befe","token":"markup.heading.heading-5.asciidoc"},{"foreground":"#f38ba8","fontStyle":"bold","token":"markup.bold"},{"foreground":"#f38ba8","fontStyle":"italic","token":"markup.italic"},{"foreground":"#a6adc8","fontStyle":"strikethrough","token":"markup.strikethrough"},{"foreground":"#89b4fa","token":"punctuation.definition.link"},{"foreground":"#89b4fa","token":"markup.underline.link"},{"foreground":"#b4befe","token":"text.html.markdown punctuation.definition.link.title"},{"foreground":"#b4befe","token":"text.html.quarto punctuation.definition.link.title"},{"foreground":"#b4befe","token":"string.other.link.title.markdown"},{"foreground":"#b4befe","token":"string.other.link.title.quarto"},{"foreground":"#b4befe","token":"markup.link"},{"foreground":"#b4befe","token":"punctuation.definition.constant.markdown"},{"foreground":"#b4befe","token":"punctuation.definition.constant.quarto"},{"foreground":"#b4befe","token":"constant.other.reference.link.markdown"},{"foreground":"#b4befe","token":"constant.other.reference.link.quarto"},{"foreground":"#b4befe","token":"markup.substitution.attribute-reference"},{"foreground":"#a6e3a1","token":"punctuation.definition.raw.markdown"},{"foreground":"#a6e3a1","token":"punctuation.definition.raw.quarto"},{"foreground":"#a6e3a1","token":"markup.inline.raw.string.markdown"},{"foreground":"#a6e3a1","token":"markup.inline.raw.string.quarto"},{"foreground":"#a6e3a1","token":"markup.raw.block.markdown"},{"foreground":"#a6e3a1","token":"markup.raw.block.quarto"},{"foreground":"#89dceb","token":"fenced_code.block.language"},{"foreground":"#9399b2","token":"markup.fenced_code.block punctuation.definition"},{"foreground":"#9399b2","token":"markup.raw support.asciidoc"},{"foreground":"#f5c2e7","token":"markup.quote"},{"foreground":"#f5c2e7","token":"punctuation.definition.quote.begin"},{"foreground":"#94e2d5","token":"meta.separator.markdown"},{"foreground":"#94e2d5","token":"punctuation.definition.list.begin.markdown"},{"foreground":"#94e2d5","token":"punctuation.definition.list.begin.quarto"},{"foreground":"#94e2d5","token":"markup.list.bullet"},{"fontStyle":"bold","token":"markup.heading.quarto"},{"foreground":"#89b4fa","token":"entity.other.attribute-name.multipart.nix"},{"foreground":"#89b4fa","token":"entity.other.attribute-name.single.nix"},{"foreground":"#cdd6f4","fontStyle":"","token":"variable.parameter.name.nix"},{"foreground":"#b4befe","fontStyle":"","token":"meta.embedded variable.parameter.name.nix"},{"foreground":"#f5c2e7","fontStyle":"","token":"string.unquoted.path.nix"},{"foreground":"#f9e2af","token":"support.attribute.builtin"},{"foreground":"#f9e2af","token":"meta.attribute.php"},{"foreground":"#eba0ac","token":"meta.function.parameters.php punctuation.definition.variable.php"},{"foreground":"#cba6f7","token":"constant.language.php"},{"foreground":"#89dceb","token":"text.html.php support.function"},{"fontStyle":"","token":"keyword.other.phpdoc.php"},{"foreground":"#cdd6f4","token":"support.variable.magic.python"},{"foreground":"#cdd6f4","token":"meta.function-call.arguments.python"},{"foreground":"#89dceb","fontStyle":"italic","token":"support.function.magic.python"},{"foreground":"#f38ba8","fontStyle":"italic","token":"variable.parameter.function.language.special.self.python"},{"foreground":"#f38ba8","fontStyle":"italic","token":"variable.language.special.self.python"},{"foreground":"#cba6f7","token":"keyword.control.flow.python"},{"foreground":"#cba6f7","token":"keyword.operator.logical.python"},{"foreground":"#cba6f7","token":"storage.type.function.python"},{"foreground":"#89dceb","token":"support.token.decorator.python"},{"foreground":"#89dceb","token":"meta.function.decorator.identifier.python"},{"foreground":"#89b4fa","token":"meta.function-call.python"},{"foreground":"#fab387","fontStyle":"italic","token":"entity.name.function.decorator.python"},{"foreground":"#fab387","fontStyle":"italic","token":"punctuation.definition.decorator.python"},{"foreground":"#f5c2e7","token":"constant.character.format.placeholder.other.python"},{"foreground":"#fab387","token":"support.type.exception.python"},{"foreground":"#fab387","token":"support.function.builtin.python"},{"foreground":"#cba6f7","token":"support.type.python"},{"foreground":"#fab387","token":"constant.language.python"},{"foreground":"#eba0ac","fontStyle":"italic","token":"meta.indexed-name.python"},{"foreground":"#eba0ac","fontStyle":"italic","token":"meta.item-access.python"},{"foreground":"#a6e3a1","fontStyle":"italic","token":"storage.type.string.python"},{"fontStyle":"","token":"meta.function.parameters.python"},{"foreground":"#89b4fa","token":"meta.function-call.r"},{"foreground":"#cdd6f4","token":"meta.function-call.arguments.r"},{"foreground":"#f5c2e7","token":"string.regexp punctuation.definition.string.begin"},{"foreground":"#f5c2e7","token":"string.regexp punctuation.definition.string.end"},{"foreground":"#cba6f7","token":"keyword.control.anchor.regexp"},{"foreground":"#cdd6f4","token":"string.regexp.ts"},{"foreground":"#a6e3a1","token":"punctuation.definition.group.regexp"},{"foreground":"#a6e3a1","token":"keyword.other.back-reference.regexp"},{"foreground":"#f9e2af","token":"punctuation.definition.character-class.regexp"},{"foreground":"#f5c2e7","token":"constant.other.character-class.regexp"},{"foreground":"#f5e0dc","token":"constant.other.character-class.range.regexp"},{"foreground":"#94e2d5","token":"keyword.operator.quantifier.regexp"},{"foreground":"#fab387","token":"constant.character.numeric.regexp"},{"foreground":"#89b4fa","token":"punctuation.definition.group.no-capture.regexp"},{"foreground":"#89b4fa","token":"meta.assertion.look-ahead.regexp"},{"foreground":"#89b4fa","token":"meta.assertion.negative-look-ahead.regexp"},{"foreground":"#f9e2af","fontStyle":"italic","token":"meta.annotation.rust"},{"foreground":"#f9e2af","fontStyle":"italic","token":"meta.annotation.rust punctuation"},{"foreground":"#f9e2af","fontStyle":"italic","token":"meta.attribute.rust"},{"foreground":"#f9e2af","fontStyle":"italic","token":"punctuation.definition.attribute.rust"},{"fontStyle":"","token":"meta.attribute.rust string.quoted.double.rust"},{"fontStyle":"","token":"meta.attribute.rust string.quoted.single.char.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"entity.name.function.macro.rules.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.module.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.modifier.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.struct.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.enum.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.trait.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.union.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.impl.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.function.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"storage.type.type.rust"},{"foreground":"#cba6f7","fontStyle":"","token":"entity.name.type.numeric.rust"},{"foreground":"#fab387","token":"meta.generic.rust"},{"foreground":"#f9e2af","fontStyle":"italic","token":"entity.name.impl.rust"},{"foreground":"#fab387","token":"entity.name.module.rust"},{"foreground":"#f9e2af","fontStyle":"italic","token":"entity.name.trait.rust"},{"foreground":"#f9e2af","token":"storage.type.source.rust"},{"foreground":"#f9e2af","token":"entity.name.union.rust"},{"foreground":"#94e2d5","token":"meta.enum.rust storage.type.source.rust"},{"foreground":"#89b4fa","fontStyle":"italic","token":"support.macro.rust"},{"foreground":"#89b4fa","fontStyle":"italic","token":"meta.macro.rust support.function.rust"},{"foreground":"#89b4fa","fontStyle":"italic","token":"entity.name.function.macro.rust"},{"foreground":"#89b4fa","fontStyle":"italic","token":"storage.modifier.lifetime.rust"},{"foreground":"#89b4fa","fontStyle":"italic","token":"entity.name.type.lifetime"},{"foreground":"#f5c2e7","token":"string.quoted.double.rust constant.other.placeholder.rust"},{"foreground":"#cdd6f4","token":"meta.function.return-type.rust meta.generic.rust storage.type.rust"},{"foreground":"#89b4fa","token":"meta.function.call.rust"},{"foreground":"#89dceb","token":"punctuation.brackets.angle.rust"},{"foreground":"#fab387","token":"constant.other.caps.rust"},{"foreground":"#eba0ac","token":"meta.function.definition.rust variable.other.rust"},{"foreground":"#cdd6f4","token":"meta.function.call.rust variable.other.rust"},{"foreground":"#f38ba8","token":"variable.language.self.rust"},{"foreground":"#f5c2e7","token":"variable.other.metavariable.name.rust"},{"foreground":"#f5c2e7","token":"meta.macro.metavariable.rust keyword.operator.macro.dollar.rust"},{"foreground":"#f5c2e7","fontStyle":"italic","token":"comment.line.shebang"},{"foreground":"#f5c2e7","fontStyle":"italic","token":"comment.line.shebang punctuation.definition.comment"},{"foreground":"#f5c2e7","fontStyle":"italic","token":"comment.line.shebang"},{"foreground":"#f5c2e7","fontStyle":"italic","token":"punctuation.definition.comment.shebang.shell"},{"foreground":"#f5c2e7","fontStyle":"italic","token":"meta.shebang.shell"},{"foreground":"#94e2d5","fontStyle":"italic","token":"comment.line.shebang constant.language"},{"foreground":"#f38ba8","token":"meta.function-call.arguments.shell punctuation.definition.variable.shell"},{"foreground":"#f38ba8","token":"meta.function-call.arguments.shell punctuation.section.interpolation"},{"foreground":"#f38ba8","token":"meta.function-call.arguments.shell punctuation.definition.variable.shell"},{"foreground":"#f38ba8","token":"meta.function-call.arguments.shell punctuation.section.interpolation"},{"foreground":"#fab387","fontStyle":"italic","token":"meta.string meta.interpolation.parameter.shell variable.other.readwrite"},{"foreground":"#94e2d5","token":"source.shell punctuation.section.interpolation"},{"foreground":"#94e2d5","token":"punctuation.definition.evaluation.backticks.shell"},{"foreground":"#cba6f7","token":"entity.name.tag.heredoc.shell"},{"foreground":"#cdd6f4","token":"string.quoted.double.shell variable.other.normal.shell"},{"foreground":"#f38ba8","token":"markup.heading.typst"}]`),encodedTokensColors:[]};i$();var D$=w$();self.MonacoEnvironment={getWorker:function(e,t){switch(t){case`json`:return a$();case`typescript`:case`javascript`:return o$();default:return s$()}}};var O$=class extends D$.UnpkgSourceResolver{constructor(){super()}async resolveSourceFile(e,t,n){let r=Sl.parse(`file:///node_modules/${e}/${n}`),i=Tf.getModel(r)?.getValue();if(i)return i;if(e===`bun`)return super.resolveSourceFile(`@types/bun`,t,`index.d.ts`);if(e===`elysia`)switch(n){case`..d.ts`:case`dist.d.ts`:return super.resolveSourceFile(e,t,`dist/index.d.ts`);case`adapter.d.ts`:case`dist/adapter.d.ts`:return super.resolveSourceFile(e,t,`dist/adapter/index.d.ts`);case`type-system.d.ts`:case`dist/type-system.d.ts`:return super.resolveSourceFile(e,t,`dist/type-system/index.d.ts`);default:if(n.startsWith(`dist/`))break;return super.resolveSourceFile(e,t,`dist/${n}`)}if(e===`fs`)return super.resolveSourceFile(`@types/node`,`24.5.2`,`files/fs.d.ts`);if(e===`zod`)switch(n){case`..d.ts`:case`dist.d.ts`:case`index.d.cts.d.ts`:return super.resolveSourceFile(e,t,`index.d.ts`)}return super.resolveSourceFile(e,t,n)}},k$=()=>{let e={"editor.background":`#00000000`,"editorGutter.background":`#00000000`,"scrollbarSlider.background":`#00000000`,"scrollbar.shadow":`#00000000`};Tf.defineTheme(`catppuccin-latte`,{...T$,colors:{...T$.colors,...e}}),Tf.defineTheme(`catppuccin-mocha`,{...E$,colors:{...E$.colors,...e}})},A$=new s(25);A$.set(`main.ts`,Sl.parse(`file:///main.ts`)),A$.set(`__body__.json`,Sl.parse(`file:///__body__.json`));function j$(e){let t=A$.get(e);return t||(t=Sl.parse(`file:///${e}`),A$.set(e,t),t)}var M$={ts:`typescript`,js:`typescript`,json:`json`};function N$(e,t=()=>``){let n=j$(e),r=M$[e.slice(e.lastIndexOf(`.`))],i=Tf.getModel(n);return i?(i.setValue(t()),i):Tf.createModel(t(),r,n)}function P$(e){let t=Tf.getModel(j$(e));t&&t.dispose()}const F$=({element:e,active:t,fs:n,onChange:r})=>{zl.typescript.typescriptDefaults.setCompilerOptions({strict:!0,target:zl.typescript.ScriptTarget.ESNext,module:zl.typescript.ModuleKind.ESNext,moduleResolution:zl.typescript.ModuleResolutionKind.NodeJs,noEmit:!0}),k$(),R$(n,t());for(let[e,t]of Object.entries(n))N$(e,()=>t);let i=Tf.create(e,{model:N$(t(),()=>n[t()]),language:`typescript`,fontSize:window.innerWidth<=568?14:16,minimap:{enabled:!1},wordWrap:`off`,renderWhitespace:`none`,theme:`catppuccin-latte`,automaticLayout:!0,fontLigatures:!0,lineNumbersMinChars:4,stickyScroll:{enabled:!1},cursorSmoothCaretAnimation:`on`,cursorBlinking:`phase`,fontFamily:`'Geist Mono',
	        ui-monospace,
	        SFMono-Regular,
	        Menlo,
	        Monaco,
	        Consolas,
	        Liberation Mono,
	        Courier New,
	        monospace`}),a;r&&i.onDidChangeModelContent(()=>{a&&clearTimeout(a),a=setTimeout(()=>{let e=Tf.getModel(j$(t()))?.getValue();e!==void 0&&r(e,t())},280)});let o,s=!1;return D$.AutoTypings.create(i,{sourceCache:new D$.LocalStorageCache,sourceResolver:new O$,fileRootPath:`file:///`,onUpdate(){s||(o&&clearTimeout(o),o=setTimeout(()=>{s=!0;let e=i.getModel();e&&e.setValue(e.getValue())},2e3))}}),i};function I$(e,t,n){let r=N$(n,()=>t[n]);e.setModel(r)}const L$=({id:e,code:t,onChange:n})=>{let r=document.getElementById(e),i=j$(`__body__.json`),a=Tf.getModel(i)??Tf.createModel(t,`json`,i);k$();let s=Tf.create(r,{model:a,language:`json`,fontSize:16,minimap:{enabled:!1},glyphMargin:!1,lineNumbers:`off`,stickyScroll:{enabled:!1},cursorSmoothCaretAnimation:`on`,cursorBlinking:`phase`,fontFamily:`'Geist Mono',
      ui-monospace,
      SFMono-Regular,
      Menlo,
      Monaco,
      Consolas,
      Liberation Mono,
      Courier New,
      monospace`}),c;s.onDidChangeModelContent(()=>{c&&clearTimeout(c),c=setTimeout(()=>{let e=Tf.getModel(i)?.getValue();e!==void 0&&(n&&n(e),Tf.setModelLanguage(a,o(e)?`json`:`plaintext`))},200)})};function R$(e,t){let n=Tf.getModel(j$(t));n&&n.setValue(e[t])}function z$(e){Tf.setTheme(e===`light`?`catppuccin-latte`:`catppuccin-mocha`)}export{I$ as a,P$ as i,L$ as n,R$ as o,N$ as r,z$ as s,F$ as t};