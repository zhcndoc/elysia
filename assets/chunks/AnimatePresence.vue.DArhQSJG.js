import{J as e,K as t,N as n,T as r,V as i,g as a,it as o,n as s,r as c,v as l,z as u}from"./vue.runtime.esm-bundler.BB7fvrom.js";import{S as d,_ as f,b as p,r as m,v as h,y as g}from"./motion.DQ6fBwSb.js";function _(e){let t=new WeakMap,n=m();function r(r){if(e.mode!==`popLayout`)return;let i=r.element,a=i.offsetParent,o=a instanceof HTMLElement&&a.offsetWidth||0,s={height:i.offsetHeight||0,width:i.offsetWidth||0,top:i.offsetTop,left:i.offsetLeft,right:0};s.right=o-s.width-s.left;let c=e.anchorX===`left`?`left: ${s.left}`:`right: ${s.right}`;r.element.dataset.motionPopId=r.id;let l=document.createElement(`style`);n.value.nonce&&(l.nonce=n.value.nonce),t.set(r,l),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
    [data-motion-pop-id="${r.id}"] {
      position: absolute !important;
      width: ${s.width}px !important;
      height: ${s.height}px !important;
      top: ${s.top}px !important;
      ${c}px !important;
      }
      `)}function i(e){let n=t.get(e);n&&(t.delete(e),d.render(()=>{document.head.removeChild(n)}))}return{addPopStyle:r,removePopStyle:i,styles:t}}function v(e){return Promise.resolve().then(()=>{e()})}var y=r({name:`AnimatePresence`,inheritAttrs:!0,__name:`AnimatePresence`,props:{mode:{default:`sync`},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:`left`}},setup(r){let d=r;p(d);let{addPopStyle:m,removePopStyle:y,styles:b}=_(d);function x(e){let t=e;for(;t;){if(f.get(t))return t;t=t.firstElementChild}return null}function S(e){let t=f.get(e);t&&(y(t),t.isVShow=!0,g(e),v(()=>{t.setActive(`exit`,!1)}))}let C=new Map;u(()=>{C.clear()});function w(e,t){var n;let r=x(e),i=f.get(r);if(!r||!i){t(),C.size===0&&((n=d.onExitComplete)==null||n.call(d));return}C.set(r,!0),g(r),m(i);function a(e){var n;if(e?.detail?.isExit){if(i.visualElement.projection?.animationProgress>0&&!i.isSafeToRemove&&!i.isVShow)return;g(r),C.delete(r),C.size===0&&((n=d.onExitComplete)==null||n.call(d)),b.has(i)?y(i):i.willUpdate(`done`),t(),r.isConnected||i.unmount(!0)}}v(()=>{i.setActive(`exit`,!0),h.set(r,a),r.addEventListener(`motioncomplete`,a)})}let T=a(()=>d.mode===`wait`?{mode:d.mode===`wait`?`out-in`:void 0}:{tag:d.as});return(r,a)=>(i(),l(e(r.mode===`wait`?s:c),n({css:!1},T.value,{appear:``,onEnter:S,onLeave:w}),{default:o(()=>[t(r.$slots,`default`)]),_:3},16))}});export{y as t};