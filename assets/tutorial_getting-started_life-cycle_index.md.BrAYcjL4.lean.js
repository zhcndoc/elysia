import{C as e,Ct as t,S as n,T as r,V as i,_ as a,b as o,it as s}from"./chunks/vue.runtime.esm-bundler.BB7fvrom.js";import{t as c}from"./chunks/playground.3zPyrUX-.js";import"./chunks/store.BhCg9eIm.js";import"./chunks/utils.Btv7ixBe.js";import{t as l}from"./chunks/doc-link.Dx-nRjHy.js";const u=[{title:`Authentication`,description:'Let\'s add a simple authentication middleware to GET "/auth" endpoint using beforeHandle hook. If query `name` is provided, we will let the request pass, otherwise we will return 401 status.',test:[{request:{url:`/auth`},response:{status:401}},{request:{url:`/auth?name=saltyaom`},response:{status:200}}]},{title:`Interceptor Hook`,description:`Now, let's create another endpoint GET "/profile" that has the same logic with authentication. We can refactor our code by using interceptor hook to avoid duplication.`,test:[{request:{url:`/profile`},response:{status:401}},{request:{url:`/profile?name=saltyaom`},response:{status:200}}]}],d=JSON.parse(`{"title":"生命周期 - Elysia 教程","description":"生命周期钩子是在请求-响应周期中的特定事件上执行的函数。","frontmatter":{"title":"生命周期 - Elysia 教程","layout":false,"search":false,"authors":[],"head":[["meta",{"property":"og:title","content":"生命周期 - Elysia 教程"}],["meta",{"name":"description","content":"生命周期钩子是在请求-响应周期中的特定事件上执行的函数。"}],["meta",{"property":"og:description","content":"生命周期钩子是在请求-响应周期中的特定事件上执行的函数。"}]]},"headers":[],"relativePath":"tutorial/getting-started/life-cycle/index.md","filePath":"tutorial/getting-started/life-cycle/index.md","lastUpdated":1768116877000}`);var f=r({name:`tutorial/getting-started/life-cycle/index.md`,setup(r){return(r,d)=>(i(),o(`div`,null,[d[41]||=a(`div`,{style:{display:`none`},hidden:`true`,"aria-hidden":`true`},`Are you an LLM? You can read better optimized documentation at /tutorial/getting-started/life-cycle.md for this page in Markdown format`,-1),e(c,{code:t(`import { Elysia } from 'elysia'

new Elysia()
	.get('/auth', ({ query: { name = 'anon' } }) => {
		return \`Hello \${name}!\`
	})
	.listen(3000)
`),testcases:t(u),doc:`/essential/life-cycle`},{answer:s(()=>[...d[18]||=[a(`p`,null,[n(`我们可以使用 `),a(`code`,null,`beforeHandle`),n(` 在请求到达处理器之前拦截请求，并使用 `),a(`code`,null,`status`),n(` 方法返回响应。`)],-1),a(`div`,{class:`language-typescript`},[a(`button`,{title:`Copy Code`,class:`copy`}),a(`span`,{class:`lang`},`typescript`),a(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[a(`code`,null,[a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`new`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`onBeforeHandle`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(({ `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`query`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`name`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }, `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`		if`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`name) `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`401`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`query`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`name`),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'anon'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`		return`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}}," `你好 ${"),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`name`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}！`")]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/profile'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`query`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`name`),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'anon'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`		return`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}}," `你好 ${"),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`name`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}！`")]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`listen`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`3000`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1)]]),default:s(()=>[d[19]||=a(`h1`,{id:`生命周期`,tabindex:`-1`},[n(`生命周期 `),a(`a`,{class:`header-anchor`,href:`#生命周期`,"aria-label":`Permalink to “生命周期”`},`​`)],-1),d[20]||=a(`p`,null,[n(`生命周期 `),a(`strong`,null,`钩子`),n(` 是在请求-响应周期中的特定事件上执行的函数。`)],-1),d[21]||=a(`p`,null,`它们允许你在特定的时刻运行自定义逻辑`,-1),a(`ul`,null,[a(`li`,null,[e(l,{href:`/essential/life-cycle#request`},{default:s(()=>[...d[0]||=[n(`request`,-1)]]),_:1}),d[1]||=n(` - 当收到请求时`,-1)]),a(`li`,null,[e(l,{href:`/essential/life-cycle#before-handle`},{default:s(()=>[...d[2]||=[n(`beforeHandle`,-1)]]),_:1}),d[3]||=n(` - 在执行处理器之前`,-1)]),a(`li`,null,[e(l,{href:`/essential/life-cycle#after-response`},{default:s(()=>[...d[4]||=[n(`afterResponse`,-1)]]),_:1}),d[5]||=n(` - 在发送响应之后，等等。`,-1)]),a(`li`,null,[e(l,{href:`/essential/life-cycle#on-error-error-handling`},{default:s(()=>[...d[6]||=[n(`error`,-1)]]),_:1}),d[7]||=n(` - 当发生错误时`,-1)])]),d[22]||=a(`p`,null,`这对于日志记录、身份验证等任务非常有用。`,-1),d[23]||=a(`p`,null,`要注册生命周期钩子，你可以将其传递给路由方法的第三个参数：`,-1),d[24]||=a(`div`,{class:`language-typescript`},[a(`button`,{title:`Copy Code`,class:`copy`}),a(`span`,{class:`lang`},`typescript`),a(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[a(`code`,null,[a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`new`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/1'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '你好，Elysia！'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		console.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'这是在 "beforeHandle" 之后执行的'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`		return`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '哦，你真幸运！'`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	}, {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`		beforeHandle`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`request`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`			console.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'这是在处理器之前执行的'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`			if`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(Math.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`random`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`() `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`<=`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` 0.5`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`				return`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`418`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		}`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/2'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '你好，Elysia！'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1),d[25]||=a(`p`,null,[n(`当 `),a(`code`,null,`beforeHandle`),n(` 返回一个值时，它将跳过处理器并返回该值。`)],-1),d[26]||=a(`p`,null,[n(`这对于像身份验证这样的事情非常有用，当用户未进行身份验证时，你想返回 `),a(`code`,null,`401 Unauthorized`),n(` 响应。`)],-1),a(`p`,null,[d[10]||=n(`请参见 `,-1),e(l,{href:`/essential/life-cycle`},{default:s(()=>[...d[8]||=[n(`生命周期`,-1)]]),_:1}),d[11]||=n(`，`,-1),e(l,{href:`/essential/life-cycle#before-handle`},{default:s(()=>[...d[9]||=[n(`处理之前`,-1)]]),_:1}),d[12]||=n(` 以获得更详细的说明。`,-1)]),d[27]||=a(`h2`,{id:`钩子`,tabindex:`-1`},[n(`钩子 `),a(`a`,{class:`header-anchor`,href:`#钩子`,"aria-label":`Permalink to “钩子”`},`​`)],-1),d[28]||=a(`p`,null,[n(`一个拦截 `),a(`strong`,null,`生命周期事件`),n(` 的函数。 `),a(`small`,null,[n(`因为一个函数 `),a(`strong`,null,`“钩住”`),n(` 了生命周期事件`)])],-1),d[29]||=a(`p`,null,`钩子可以分为两种类型：`,-1),a(`ol`,null,[a(`li`,null,[e(l,{href:`/essential/life-cycle#local-hook`},{default:s(()=>[...d[13]||=[n(`本地钩子`,-1)]]),_:1}),d[14]||=n(` - 在特定路由上执行`,-1)]),a(`li`,null,[e(l,{href:`/essential/life-cycle#interceptor-hook`},{default:s(()=>[...d[15]||=[n(`拦截器钩子`,-1)]]),_:1}),d[16]||=n(` - 在每个路由上执行 `,-1),d[17]||=a(`strong`,null,`在钩子注册后`,-1)])]),d[30]||=a(`h2`,{id:`本地钩子`,tabindex:`-1`},[n(`本地钩子 `),a(`a`,{class:`header-anchor`,href:`#本地钩子`,"aria-label":`Permalink to “本地钩子”`},`​`)],-1),d[31]||=a(`p`,null,`本地钩子在特定路由上执行。`,-1),d[32]||=a(`p`,null,`要使用本地钩子，你可以将钩子内联到路由处理器中：`,-1),d[33]||=a(`div`,{class:`language-typescript`},[a(`button`,{title:`Copy Code`,class:`copy`}),a(`span`,{class:`lang`},`typescript`),a(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[a(`code`,null,[a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// 类似于之前的代码片段`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`new`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/1'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '你好，Elysia！'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		console.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'在 "beforeHandle" 之后运行'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`		return`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '哦，你真幸运！'`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	}, {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`		// 这是一个本地钩子`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`		beforeHandle`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`request`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`			console.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'在处理器之前运行'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`			if`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(Math.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`random`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`() `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`<=`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` 0.5`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`				return`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`418`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		}`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/2'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '你好，Elysia！'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1),d[34]||=a(`h2`,{id:`拦截器钩子`,tabindex:`-1`},[n(`拦截器钩子 `),a(`a`,{class:`header-anchor`,href:`#拦截器钩子`,"aria-label":`Permalink to “拦截器钩子”`},`​`)],-1),d[35]||=a(`p`,null,[n(`在每个 `),a(`strong`,null,`钩子被调用后到来的处理器`),n(` 中注册钩子，仅针对当前实例。`)],-1),d[36]||=a(`p`,null,[n(`要添加拦截器钩子，你可以使用 `),a(`code`,null,`.on`),n(` 后跟一个生命周期事件：`)],-1),d[37]||=a(`div`,{class:`language-typescript`},[a(`button`,{title:`Copy Code`,class:`copy`}),a(`span`,{class:`lang`},`typescript`),a(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[a(`code`,null,[a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`new`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/1'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '你好，Elysia！'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`onBeforeHandle`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(({ `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`request`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),a(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		console.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'这是在处理器之前执行的'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`		if`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(Math.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`random`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`() `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`<=`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` 0.5`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`			return`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` status`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`418`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`	// "beforeHandle" 被应用`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		console.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'这是在 "beforeHandle" 之后执行的'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),n(`
`),a(`span`,{class:`line`}),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`		return`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '哦，你真幸运！'`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`	// "beforeHandle" 也被应用`)]),n(`
`),a(`span`,{class:`line`},[a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),a(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/2'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),a(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),a(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '你好，Elysia！'`),a(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1),d[38]||=a(`p`,null,`与本地钩子不同，拦截器钩子会将钩子添加到钩子注册后到来的每个路由。`,-1),d[39]||=a(`h2`,{id:`实践`,tabindex:`-1`},[n(`实践 `),a(`a`,{class:`header-anchor`,href:`#实践`,"aria-label":`Permalink to “实践”`},`​`)],-1),d[40]||=a(`p`,null,`让我们将两种类型的钩子付诸实践。`,-1)]),_:1},8,[`code`,`testcases`])]))}});export{d as __pageData,f as default};