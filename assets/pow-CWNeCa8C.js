(function(){var e=Object.defineProperty,t=(t,n)=>{let r={};for(var i in t)e(r,i,{get:t[i],enumerable:!0});return n&&e(r,Symbol.toStringTag,{value:`Module`}),r};
/**
* @license
* Copyright 2019 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/
let n=Symbol(`Comlink.proxy`),r=Symbol(`Comlink.endpoint`),i=Symbol(`Comlink.releaseProxy`),a=Symbol(`Comlink.finalizer`),o=Symbol(`Comlink.thrown`),s=e=>typeof e==`object`&&!!e||typeof e==`function`,c=new Map([[`proxy`,{canHandle:e=>s(e)&&e[n],serialize(e){let{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize(e){return e.start(),p(e)}}],[`throw`,{canHandle:e=>s(e)&&o in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(Error(e.value.message),e.value):e.value}}]]);function l(e,t){for(let n of e)if(t===n||n===`*`||n instanceof RegExp&&n.test(t))return!0;return!1}function u(e,t=globalThis,n=[`*`]){t.addEventListener(`message`,function r(i){if(!i||!i.data)return;if(!l(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}let{id:s,type:c,path:d}=Object.assign({path:[]},i.data),p=(i.data.argumentList||[]).map(D),m;try{let t=d.slice(0,-1).reduce((e,t)=>e[t],e),n=d.reduce((e,t)=>e[t],e);switch(c){case`GET`:m=n;break;case`SET`:t[d.slice(-1)[0]]=D(i.data.value),m=!0;break;case`APPLY`:m=n.apply(t,p);break;case`CONSTRUCT`:m=T(new n(...p));break;case`ENDPOINT`:{let{port1:t,port2:n}=new MessageChannel;u(e,n),m=w(t,[t])}break;case`RELEASE`:m=void 0;break;default:return}}catch(e){m={value:e,[o]:0}}Promise.resolve(m).catch(e=>({value:e,[o]:0})).then(n=>{let[i,o]=E(n);t.postMessage(Object.assign(Object.assign({},i),{id:s}),o),c===`RELEASE`&&(t.removeEventListener(`message`,r),f(t),a in e&&typeof e[a]==`function`&&e[a]())}).catch(e=>{let[n,r]=E({value:TypeError(`Unserializable return value`),[o]:0});t.postMessage(Object.assign(Object.assign({},n),{id:s}),r)})}),t.start&&t.start()}function d(e){return e.constructor.name===`MessagePort`}function f(e){d(e)&&e.close()}function p(e,t){let n=new Map;return e.addEventListener(`message`,function(e){let{data:t}=e;if(!t||!t.id)return;let r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),b(e,n,[],t)}function m(e){if(e)throw Error(`Proxy has been released and is not useable`)}function h(e){return O(e,new Map,{type:`RELEASE`}).then(()=>{f(e)})}let g=new WeakMap,_=`FinalizationRegistry`in globalThis&&new FinalizationRegistry(e=>{let t=(g.get(e)||0)-1;g.set(e,t),t===0&&h(e)});function v(e,t){let n=(g.get(t)||0)+1;g.set(t,n),_&&_.register(e,t,e)}function y(e){_&&_.unregister(e)}function b(e,t,n=[],a=function(){}){let o=!1,s=new Proxy(a,{get(r,a){if(m(o),a===i)return()=>{y(s),h(e),t.clear(),o=!0};if(a===`then`){if(n.length===0)return{then:()=>s};let r=O(e,t,{type:`GET`,path:n.map(e=>e.toString())}).then(D);return r.then.bind(r)}return b(e,t,[...n,a])},set(r,i,a){m(o);let[s,c]=E(a);return O(e,t,{type:`SET`,path:[...n,i].map(e=>e.toString()),value:s},c).then(D)},apply(i,a,s){m(o);let c=n[n.length-1];if(c===r)return O(e,t,{type:`ENDPOINT`}).then(D);if(c===`bind`)return b(e,t,n.slice(0,-1));let[l,u]=S(s);return O(e,t,{type:`APPLY`,path:n.map(e=>e.toString()),argumentList:l},u).then(D)},construct(r,i){m(o);let[a,s]=S(i);return O(e,t,{type:`CONSTRUCT`,path:n.map(e=>e.toString()),argumentList:a},s).then(D)}});return v(s,e),s}function x(e){return Array.prototype.concat.apply([],e)}function S(e){let t=e.map(E);return[t.map(e=>e[0]),x(t.map(e=>e[1]))]}let C=new WeakMap;function w(e,t){return C.set(e,t),e}function T(e){return Object.assign(e,{[n]:!0})}function E(e){for(let[t,n]of c)if(n.canHandle(e)){let[r,i]=n.serialize(e);return[{type:`HANDLER`,name:t,value:r},i]}return[{type:`RAW`,value:e},C.get(e)||[]]}function D(e){switch(e.type){case`HANDLER`:return c.get(e.name).deserialize(e.value);case`RAW`:return e.value}}function O(e,t,n,r){return new Promise(i=>{let a=k();t.set(a,i),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),r)})}function k(){return[,,,,].fill(0).map(()=>Math.floor(Math.random()*(2**53-1)).toString(16)).join(`-`)}var A=t({request:()=>N});async function j(e){let t=await crypto.subtle.digest(`SHA-256`,new TextEncoder().encode(e));return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,`0`)).join(``)}async function M(e,t){let n=`0`.repeat(t/4),r=performance.now(),i=0;for(;;){if((await j(`${e}:${i}`)).startsWith(n)){let e=(performance.now()-r).toFixed(2);return console.log(`PoW solved in ${e}ms (${i} attempts)`),i.toString()}i++}}async function N(e){let t=await fetch(`${e}/pow/request`,{credentials:`include`});if(!t.ok)throw Error(`Failed to get challenge: ${t.statusText}`);let n=await t.json();if(Date.now()>n.expires)throw Error(`Challenge expired before completion`);let{bits:r,expires:i,nonce:a}=n,o=await M(a,r);if(Date.now()>i)throw Error(`Challenge expired before submission`);return o}u(A)})();