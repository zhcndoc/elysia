import{F as e,_ as t,p as n,te as r,u as i,v as a}from"./chunks/runtime-core.esm-bundler.D02XvB7A.js";import{t as o}from"./chunks/Layout.CgtC_9GJ.js";const s=JSON.parse(`{"title":"Elysia 0.5 - Radiant","description":"介绍静态代码分析、新路由 \\"Memoirist\\"、TypeBox 0.28、数字类型、内联模式、状态/装饰/模型/组重构，以及类型稳定性。","frontmatter":{"title":"Elysia 0.5 - Radiant","sidebar":false,"editLink":false,"search":false,"head":[["meta",{"property":"og:title","content":"介绍 Elysia 0.5 - Radiant"}],["meta",{"name":"description","content":"介绍静态代码分析、新路由 \\"Memoirist\\"、TypeBox 0.28、数字类型、内联模式、状态/装饰/模型/组重构，以及类型稳定性。"}],["meta",{"property":"og:description","content":"介绍静态代码分析、新路由 \\"Memoirist\\"、TypeBox 0.28、数字类型、内联模式、状态/装饰重构，以及类型稳定性。"}],["meta",{"property":"og:image","content":"https://elysiajs.com/blog/elysia-05/radiant.webp"}],["meta",{"property":"twitter:image","content":"https://elysiajs.com/blog/elysia-05/radiant.webp"}]]},"headers":[],"relativePath":"blog/elysia-05.md","filePath":"blog/elysia-05.md","lastUpdated":1758208104000}`);var c=Object.assign({name:`blog/elysia-05.md`},{setup(s){return(s,c)=>(e(),n(`div`,null,[a(o,{title:`Elysia 0.5 - Radiant`,src:`/blog/elysia-05/radiant.webp`,alt:`Radiant`,author:`saltyaom`,date:`2023 年 5 月 15 日`},{default:r(()=>c[0]||=[i(`p`,null,[t(`这是以 Arknights 原作音乐「`),i(`a`,{href:`https://youtu.be/QhUjD--UUV4`,target:`_blank`,rel:`noreferrer`},`Radiant`),t(`」为名，由 Monster Sirent Records 作曲。`)],-1),i(`p`,null,`Radiant 推动了性能的边界，特别是在类型和动态路由的稳定性改进方面。`,-1),i(`h2`,{id:`静态代码分析`,tabindex:`-1`},[t(`静态代码分析 `),i(`a`,{class:`header-anchor`,href:`#静态代码分析`,"aria-label":`Permalink to “静态代码分析”`},`​`)],-1),i(`p`,null,`随着 Elysia 0.4 引入的提前编译，使得 Elysia 能够优化函数调用并消除我们之前的许多开销。`,-1),i(`p`,null,`今天，我们将提前编译扩展为更快的静态代码分析，成为最快的 Bun 网络框架。`,-1),i(`p`,null,`静态代码分析允许 Elysia 读取您的函数、处理程序、生命周期和模式，然后尝试调整提取处理程序，提前编译处理程序，消除任何未使用的代码并在可能的地方进行优化。`,-1),i(`p`,null,[t(`例如，如果您使用 `),i(`code`,null,`schema`),t(` 并且主体类型为对象，Elysia 期望该路由是 JSON 优先的，并将主体解析为 JSON，而不是依赖于内容类型头的动态检查：`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/sign-in'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` signIn`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body), {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    schema: {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        body: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            username: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(),`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            password: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    }`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])],-1),i(`p`,null,`这使我们能够将主体解析的性能提高近 2.5 倍。`,-1),i(`p`,null,`通过静态代码分析，不再依赖于猜测您是否会使用昂贵的属性。`,-1),i(`p`,null,`Elysia 可以读取您的代码并检测您将使用什么，并提前调整以适应您的需求。`,-1),i(`p`,null,[t(`这意味着如果您没有使用像 `),i(`code`,null,`query`),t(` 或 `),i(`code`,null,`body`),t(` 这样的昂贵属性，Elysia 将完全跳过解析，以提高性能。`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// 身体未使用，跳过身体解析`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/id/:id'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`params`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`id`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` id, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    schema: {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        body: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            username: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(),`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            password: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    }`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])],-1),i(`p`,null,`通过静态代码分析和提前编译，您可以放心，Elysia 非常擅长读取您的代码并自动调整以最大化性能。`,-1),i(`p`,null,`静态代码分析使得我们能够提升 Elysia 性能，超出我们想象，以下是显著的改进：`,-1),i(`ul`,null,[i(`li`,null,`整体提高约 15%`),i(`li`,null,`静态路由加速约 33%`),i(`li`,null,`空查询解析加速约 50%`),i(`li`,null,`严格类型主体解析加速约 100%`),i(`li`,null,`空主体解析加速约 150%`)],-1),i(`p`,null,[t(`凭借这一改进，我们能够在性能上超越 `),i(`strong`,null,`Stricjs`),t(`，比较 Elysia 0.5.0-beta.0 和 Stricjs 2.0.4。`)],-1),i(`p`,null,`我们打算在将来以研究论文的形式详细解释此主题及我们如何通过静态代码分析提高性能。`,-1),i(`h2`,{id:`新路由-memoirist`,tabindex:`-1`},[t(`新路由 "Memoirist" `),i(`a`,{class:`header-anchor`,href:`#新路由-memoirist`,"aria-label":`Permalink to “新路由 "Memoirist"”`},`​`)],-1),i(`p`,null,`自 0.2 起，我们一直在构建自己的路由器 "Raikiri"。`,-1),i(`p`,null,`Raikiri 达到了它的目的，它是基于我们自定义的径向树实现，从零开始构建以实现快速。`,-1),i(`p`,null,`但随着我们的进步，我们发现 Raikiri 在复杂的径向树重整方面表现不佳，这导致开发人员报告了许多错误，尤其是在动态路由方面，这通常可以通过重新排列路由解决。`,-1),i(`p`,null,`我们理解，并修补了 Raikiri 径向树重整算法的许多领域，但我们的算法很复杂，修补路由后变得越来越昂贵，直到它不再适合我们的目的。`,-1),i(`p`,null,`这就是我们引入新路由 "Memoirist" 的原因。`,-1),i(`p`,null,`Memoirist 是一个稳定的 RaixTree 路由器，能够快速处理基于 Medley Router 算法的动态路径，而在静态方面则利用了提前编译的优势。`,-1),i(`p`,null,`随着此次发布，我们将从 Raikiri 迁移到 Memoirist，以提高稳定性并获得比 Raikiri 更快的路径映射。`,-1),i(`p`,null,`我们希望您在使用 Raikiri 时遇到的任何问题都能通过 Memoirist 得到解决，并鼓励您进行尝试。`,-1),i(`h2`,{id:`typebox-0-28`,tabindex:`-1`},[t(`TypeBox 0.28 `),i(`a`,{class:`header-anchor`,href:`#typebox-0-28`,"aria-label":`Permalink to “TypeBox 0.28”`},`​`)],-1),i(`p`,null,[t(`TypeBox 是一个核心库，支持 Elysia 的严格类型系统，称为 `),i(`strong`,null,`Elysia.t`),t(`。`)],-1),i(`p`,null,`在此次更新中，我们将 TypeBox 从 0.26 更新到 0.28，以使类型系统更加精细，接近严格的类型语言。`,-1),i(`p`,null,[t(`我们更新了 TypeBox，以改进 Elysia 类型系统，以匹配新 TypeBox 功能以及与新版本 TypeScript 的兼容性，如 `),i(`strong`,null,`Constant Generic`),t(`。`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`new`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`decorate`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'version'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'Elysia Radiant'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`model`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`        'name'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        Type.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`TemplateLiteral`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`([`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            Type.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Literal`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'Elysia '`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`),`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            Type.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Union`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`([`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                Type.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Literal`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'The Blessing'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`),`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                Type.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Literal`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'Radiant'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            ])`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        ])`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`    // 严格检查模板字面量`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`version`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` version)`)])])])],-1),i(`p`,null,`这使我们能够严格检查模板字面量或字符串/数字的模式，以同时在运行时和开发过程中进行验证。`,-1),i(`h3`,{id:`提前编译与类型系统`,tabindex:`-1`},[t(`提前编译与类型系统 `),i(`a`,{class:`header-anchor`,href:`#提前编译与类型系统`,"aria-label":`Permalink to “提前编译与类型系统”`},`​`)],-1),i(`p`,null,`通过提前编译，Elysia 可以调整自身以优化并匹配定义的模式类型，以减少开销。`,-1),i(`p`,null,[t(`这就是我们引入了一种新类型 `),i(`strong`,null,`URLEncoded`),t(` 的原因。`)],-1),i(`p`,null,`正如之前提到的，Elysia 现在可以利用模式并在提前进行优化，主体解析是 Elysia 中更昂贵的领域之一，因此我们引入了一种专门用于解析主体的类型，如 URLEncoded。`,-1),i(`p`,null,`默认情况下，Elysia 将根据主体的模式类型解析主体，如下所示：`,-1),i(`ul`,null,[i(`li`,null,[t(`t.URLEncoded -> `),i(`code`,null,`application/x-www-form-urlencoded`)]),i(`li`,null,[t(`t.Object -> `),i(`code`,null,`application/json`)]),i(`li`,null,[t(`t.File -> `),i(`code`,null,`multipart/form-data`)]),i(`li`,null,[t(`其余 -> `),i(`code`,null,`text/plain`)])],-1),i(`p`,null,`但是，您可以明确告诉 Elysia 使用特定方法解析主体，如下所示：`,-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` body, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    type: `),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'json'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])],-1),i(`p`,null,[i(`code`,null,`type`),t(` 可以是以下之一：`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`type`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` ContentType`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` |`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`    // 'text/plain' 的简写`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'text'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`    // 'application/json' 的简写`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'json'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`    // 'multipart/form-data' 的简写`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'formdata'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`    // 'application/x-www-form-urlencoded' 的简写`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'urlencoded'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'text/plain'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'application/json'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'multipart/form-data'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    |`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'application/x-www-form-urlencoded'`)])])])],-1),i(`p`,null,[t(`您可以在概念中的 `),i(`a`,{href:`/life-cycle/parse.html#explicit-body`},`explicit body`),t(` 页面中找到更多详细信息。`)],-1),i(`h3`,{id:`数字类型`,tabindex:`-1`},[t(`数字类型 `),i(`a`,{class:`header-anchor`,href:`#数字类型`,"aria-label":`Permalink to “数字类型”`},`​`)],-1),i(`p`,null,`我们发现开发人员在使用 Elysia 时经常会遇到冗余的任务，即解析数字字符串。`,-1),i(`p`,null,[t(`因此，我们引入了一种新的 `),i(`strong`,null,`Numeric`),t(` 类型。`)],-1),i(`p`,null,[t(`在 Elysia 0.4 中，解析数字字符串时，我们需要使用 `),i(`code`,null,`transform`),t(` 手动解析字符串：`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/id/:id'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`params`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`id`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` id, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    schema: {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        params: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            id: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Number`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    },`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`    transform`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`params`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`        const`),i(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` id`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` +`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`params.id`)]),t(`
`),i(`span`,{class:`line`}),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`        if`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`Number.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`isNaN`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(id))`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            params.id `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` id`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    }`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])],-1),i(`p`,null,`我们发现这个步骤是冗余的，充满了样板代码，我们希望以声明的方式解决这个问题。`,-1),i(`p`,null,`感谢静态代码分析，数字类型允许您定义数字字符串并自动将其解析为数字。`,-1),i(`p`,null,`一旦验证，数字类型将在运行时和类型级别自动解析为数字，以满足我们的需求。`,-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/id/:id'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`params`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`id`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` id, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    params: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        id: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Numeric`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])],-1),i(`p`,null,`您可以在任何支持模式类型的属性上使用数字类型，包括：`,-1),i(`ul`,null,[i(`li`,null,`params`),i(`li`,null,`query`),i(`li`,null,`headers`),i(`li`,null,`body`),i(`li`,null,`response`)],-1),i(`p`,null,`我们希望您会发现这种新的数字类型在您的服务器中很有用。`,-1),i(`p`,null,[t(`您可以在概念中查看 `),i(`a`,{href:`/validation/elysia-type.html#numeric`},`numeric type`),t(` 页面以获取更多详细信息。`)],-1),i(`p`,null,`随着 TypeBox 0.28 的发布，我们使 Elysia 的类型系统更加完整，并期待看到它在您那的表现。`,-1),i(`h2`,{id:`内联模式`,tabindex:`-1`},[t(`内联模式 `),i(`a`,{class:`header-anchor`,href:`#内联模式`,"aria-label":`Permalink to “内联模式”`},`​`)],-1),i(`p`,null,[t(`您可能已经注意到，我们的示例不再使用 `),i(`code`,null,`schema.type`),t(` 来创建类型，因为我们进行了一项 `),i(`strong`,null,`重大变更`),t(`，将模式移至钩子语句的内联方式。`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// ? 从`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/id/:id'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`params`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`id`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` id, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    schema: {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        params: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            id: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Number`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    },`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)]),t(`
`),i(`span`,{class:`line`}),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// ? 到`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/id/:id'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`params`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`id`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` id, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    params: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        id: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Number`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])],-1),i(`p`,null,`在进行重大变更时我们考虑了很多，特别是对于 Elysia 最重要的部分之一。`,-1),i(`p`,null,`基于大量的实验和实际使用，我们尝试通过投票向我们的社区建议这一新变更，并发现约 60% 的 Elysia 开发人员愿意迁移到内联模式。`,-1),i(`p`,null,`但我们也倾听了社区其余部分的声音，试图理解反对这一决定的论点：`,-1),i(`h3`,{id:`清晰的分离`,tabindex:`-1`},[t(`清晰的分离 `),i(`a`,{class:`header-anchor`,href:`#清晰的分离`,"aria-label":`Permalink to “清晰的分离”`},`​`)],-1),i(`p`,null,[t(`在旧语法中，您必须明确告诉 Elysia 您创建的部分是一个模式，使用 `),i(`code`,null,`Elysia.t`),t(`。`)],-1),i(`p`,null,`创建生命周期和模式之间的明确分离更清晰，具有更好的可读性。`,-1),i(`p`,null,[t(`但根据我们的严格测试，我们发现大多数人没有对此新语法感到困惑，生命周期钩子与模式类型的分离仍然具有明确的分离，`),i(`code`,null,`t.Type`),t(` 和函数之间的语法高亮在代码审查时尤为明显，尽管没有明确的模式那样清晰，但人们可以很快适应新语法，特别是如果他们熟悉 Elysia。`)],-1),i(`h3`,{id:`自动完成`,tabindex:`-1`},[t(`自动完成 `),i(`a`,{class:`header-anchor`,href:`#自动完成`,"aria-label":`Permalink to “自动完成”`},`​`)],-1),i(`p`,null,`人们关注的另一个领域是读写自动完成功能。`,-1),i(`p`,null,`将模式和生命周期钩子合并导致自动完成有大约 10 个可供选择的属性，而基于多项经过验证的用户体验研究，这可能会让用户感到沮丧，因为可供选择的选项太多，并可能造成更陡的学习曲线。`,-1),i(`p`,null,`然而，我们发现，Elysia 的模式属性名相当可预测，一旦开发人员习惯了 Elysia 类型，就能克服这个问题。`,-1),i(`p`,null,[t(`例如，如果您想访问头部，您可以在上下文中访问 `),i(`code`,null,`headers`),t(`，而在钩子中输入 `),i(`code`,null,`headers`),t(`，两者共享相同的名称以提高可预测性。`)],-1),i(`p`,null,`因此，Elysia 可能会有一点学习曲线，但这是我们愿意为更好的开发者体验付出的代价。`,-1),i(`h2`,{id:`headers-字段`,tabindex:`-1`},[t(`"headers" 字段 `),i(`a`,{class:`header-anchor`,href:`#headers-字段`,"aria-label":`Permalink to “"headers" 字段”`},`​`)],-1),i(`p`,null,[t(`之前，您可以通过访问 `),i(`code`,null,`request.headers.get`),t(` 来获取 headers 字段，您可能会想知道为什么我们不默认发送 headers。`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/headers'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`request`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`headers`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`    return`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` headers.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'content-type'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])],-1),i(`p`,null,`因为解析 headers 有其自身的开销，并且我们发现许多开发人员并不经常访问 headers，因此我们决定不实现 headers。`,-1),i(`p`,null,`但通过静态代码分析，这种情况发生了改变，Elysia 可以读取您的代码，判断您是否打算使用 headers，然后动态解析 headers。`,-1),i(`p`,null,`静态代码分析使我们能够添加新的功能，而没有任何开销。`,-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/headers'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`headers`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` headers[`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'content-type'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`])`)])])])],-1),i(`p`,null,`解析后的 headers 将作为头部名称的小写键的普通对象可用。`,-1),i(`h2`,{id:`状态、装饰、模型重构`,tabindex:`-1`},[t(`状态、装饰、模型重构 `),i(`a`,{class:`header-anchor`,href:`#状态、装饰、模型重构`,"aria-label":`Permalink to “状态、装饰、模型重构”`},`​`)],-1),i(`p`,null,`Elysia 的主要特性之一是能够根据您的需求自定义 Elysia。`,-1),i(`p`,null,[t(`我们重新审视了 `),i(`code`,null,`state`),t(`、`),i(`code`,null,`decorate`),t(` 和 `),i(`code`,null,`setModel`),t(`，并发现 API 不够一致，可以进行改进。`)],-1),i(`p`,null,[t(`我们发现许多人在设置多个值时会重复使用 `),i(`code`,null,`state`),t(` 和 `),i(`code`,null,`decorate`),t(`，好希望能够像使用 `),i(`code`,null,`setModel`),t(` 一样一次性设置所有内容，我们希望将 `),i(`code`,null,`setModel`),t(` 的 API 规范统一，以便与 `),i(`code`,null,`state`),t(` 和 `),i(`code`,null,`decorate`),t(` 一样使用，以提高可预测性。`)],-1),i(`p`,null,[t(`因此，我们将 `),i(`code`,null,`setModel`),t(` 重命名为 `),i(`code`,null,`model`),t(`，并添加了支持为 `),i(`code`,null,`state`),t(`、`),i(`code`,null,`decorate`),t(` 和 `),i(`code`,null,`model`),t(` 设定单个和多个值的函数重载。`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),i(`span`,{class:`line`}),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),i(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` app`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` new`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`	// ? 使用标签设置模型`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`model`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'string'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`())`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`model`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		number: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Number`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`state`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'visitor'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),i(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`1`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`	// ? 使用对象设置模型`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`state`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		multiple: `),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'value'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		are: `),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'now supported!'`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`decorate`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'visitor'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),i(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`1`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`	// ? 使用对象设置模型`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`decorate`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		name: `),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'world'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		number: `),i(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`2`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)])])])],-1),i(`p`,null,[t(`同时，我们将 TypeScript 的最低支持版本提高到 5.0，以增强与 `),i(`strong`,null,`Constant Generic`),t(` 的严格类型支持。`)],-1),i(`p`,null,[i(`code`,null,`state`),t(`、`),i(`code`,null,`decorate`),t(` 和 `),i(`code`,null,`model`),t(` 现在支持字面量类型和模板字符串，以严谨地验证类型，包括运行时和类型级别。`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`	// ? state、decorate 现在支持字面量`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` number, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		body: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Literal`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`1`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`),`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		response: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Literal`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`2`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	})`)])])])],-1),i(`h3`,{id:`组与守卫`,tabindex:`-1`},[t(`组与守卫 `),i(`a`,{class:`header-anchor`,href:`#组与守卫`,"aria-label":`Permalink to “组与守卫”`},`​`)],-1),i(`p`,null,[t(`我们发现许多开发人员经常将 `),i(`code`,null,`group`),t(` 和 `),i(`code`,null,`guard`),t(` 一起使用，我们发现在嵌套时有些多余，可能会充满样板代码。`)],-1),i(`p`,null,[t(`从 Elysia 0.5 开始，我们为 `),i(`code`,null,`.group`),t(` 添加了作为可选第二个参数的守卫范围。`)],-1),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// ✅ 之前，需要将守卫嵌套在组内`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/v1'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`guard`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            body: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Literal`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        },`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        (`),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/student'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'Rikuhachima Aru'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`}),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// ✅ 新的，兼容旧语法`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`    '/v1'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        body: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Literal`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'Rikuhachima Aru'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    },`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`    app`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/student'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'Rikuhachima Aru'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),i(`span`,{class:`line`}),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// ✅ 兼容函数重载`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/v1'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/student'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'Rikuhachima Aru'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`))`)])])])],-1),i(`p`,null,`我们希望您会发现这些新重新审视的 API 更加有用，并更符合您的用例。`,-1),i(`h2`,{id:`类型稳定性`,tabindex:`-1`},[t(`类型稳定性 `),i(`a`,{class:`header-anchor`,href:`#类型稳定性`,"aria-label":`Permalink to “类型稳定性”`},`​`)],-1),i(`p`,null,`Elysia 的类型系统是复杂的。`,-1),i(`p`,null,`我们可以在类型级别声明变量，通过名称引用类型，应用多个 Elysia 实例，甚至在类型级别支持闭包，这使得为您提供最佳的开发者体验变得非常复杂，特别是在 Eden。`,-1),i(`p`,null,`但有时，随着我们更新 Elysia 版本，类型并不会按预期工作，因为我们必须在每次发行之前手动检查，并可能导致人为错误。`,-1),i(`p`,null,`随着 Elysia 0.5 的发布，我们为类型级别的测试添加了单元测试，以防止将来的可能错误，这些测试将在每次发布之前运行，如果出现错误，将阻止我们发布软件包，迫使我们修复类型问题。`,-1),i(`p`,null,`这意味着，您现在可以依靠我们在每次发布时检查类型完整性，确信在类型引用方面会更少出现错误。`,-1),i(`hr`,null,null,-1),i(`h3`,{id:`显著改进`,tabindex:`-1`},[t(`显著改进: `),i(`a`,{class:`header-anchor`,href:`#显著改进`,"aria-label":`Permalink to “显著改进:”`},`​`)],-1),i(`ul`,null,[i(`li`,null,`添加对 CommonJS 的支持，以便与 Node 适配器运行 Elysia`),i(`li`,null,`删除手动片段映射，以加速路径提取`),i(`li`,null,[t(`在 `),i(`code`,null,`composeHandler`),t(` 中内联验证器，以提高性能`)]),i(`li`,null,`使用一次性上下文分配`),i(`li`,null,`通过静态代码分析添加对延迟上下文注入的支持`),i(`li`,null,`确保响应的非空性`),i(`li`,null,`添加联合主体验证检查`),i(`li`,null,`设置默认对象处理程序进行继承`),i(`li`,null,[t(`使用 `),i(`code`,null,`constructor.name`),t(` 映射而不是 `),i(`code`,null,`instanceof`),t(` 来提高速度`)]),i(`li`,null,`添加专用错误构造函数以提高性能`),i(`li`,null,`为检查 onRequest 迭代，添加条件字面量函数`),i(`li`,null,`改进 WebSocket 类型`)],-1),i(`p`,null,`重大变更：`,-1),i(`ul`,null,[i(`li`,null,[t(`将 `),i(`code`,null,`innerHandle`),t(` 重命名为 `),i(`code`,null,`fetch`),i(`ul`,null,[i(`li`,null,[t(`要迁移：将 `),i(`code`,null,`.innerHandle`),t(` 重命名为 `),i(`code`,null,`fetch`)])])]),i(`li`,null,[t(`将 `),i(`code`,null,`.setModel`),t(` 重命名为 `),i(`code`,null,`.model`),i(`ul`,null,[i(`li`,null,[t(`要迁移：将 `),i(`code`,null,`setModel`),t(` 重命名为 `),i(`code`,null,`model`)])])]),i(`li`,null,[t(`将 `),i(`code`,null,`hook.schema`),t(` 移除至 `),i(`code`,null,`hook`),i(`ul`,null,[i(`li`,null,[t(`要迁移：移除 schema 及大括号 `),i(`code`,null,`schema.type`),t(`：`)])]),i(`div`,{class:`language-ts`},[i(`button`,{title:`Copy Code`,class:`copy`}),i(`span`,{class:`lang`},`ts`),i(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[i(`code`,null,[i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// 从`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` body, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    schema: {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        body: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            username: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    }`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)]),t(`
`),i(`span`,{class:`line`}),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// 到`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),i(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/'`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, ({ `),i(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),i(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` body, {`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    body: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        username: t.`),i(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    })`)]),t(`
`),i(`span`,{class:`line`},[i(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`})`)])])])])]),i(`li`,null,[t(`移除 `),i(`code`,null,`mapPathnameRegex`),t(`（内部）`)])],-1),i(`h2`,{id:`后续`,tabindex:`-1`},[t(`后续 `),i(`a`,{class:`header-anchor`,href:`#后续`,"aria-label":`Permalink to “后续”`},`​`)],-1),i(`p`,null,`推动 JavaScript 在 Bun 中的性能边界是我们非常兴奋的事情！`,-1),i(`p`,null,`即使每次发布都有新特性，Elysia 仍然在变得更快，凭借改进的可靠性和稳定性，我们希望 Elysia 会成为下一代 TypeScript 框架的选择之一。`,-1),i(`p`,null,[t(`我们很高兴看到许多有才华的开源开发人员通过他们的卓越工作使 Elysia 复苏，例如 `),i(`a`,{href:`https://github.com/bogeychan/elysia-polyfills`,target:`_blank`,rel:`noreferrer`},`Bogeychan's Elysia Node`),t(` 和 Deno 适配器，Rayriffy 的 Elysia 限制，我们也期待您未来的作品！`)],-1),i(`p`,null,`感谢您对 Elysia 的持续支持，我们希望在下一个版本中见到您。`,-1),i(`blockquote`,null,[i(`p`,null,`我不会让人失望，要让他们振奋`),i(`p`,null,`我们每天都在变得更加响亮，是的，我们在放大`),i(`p`,null,`璀璨的光芒`),i(`p`,null,`你一定想站在我这边`),i(`p`,null,[t(`是的，你知道这是 `),i(`strong`,null,`全速前进`)])],-1)]),_:1,__:[0]})]))}});export{s as __pageData,c as default};