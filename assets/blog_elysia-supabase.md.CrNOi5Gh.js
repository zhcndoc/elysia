import{C as e,S as t,V as n,_ as r,b as i,it as a}from"./chunks/vue.runtime.esm-bundler.BB7fvrom.js";import"./chunks/banner.DpkE44SY.js";import"./chunks/ray.DH5EacAR.js";import{t as o}from"./chunks/Layout.BZ0rZhD9.js";const s=JSON.parse(`{"title":"Elysia 与 Supabase：您下一个以超音速构建的后端","description":"Elysia 和 Supabase 结合，适合快速开发原型，时间少于一个小时，让我们看看如何利用这两者的优势。","frontmatter":{"title":"Elysia 与 Supabase：您下一个以超音速构建的后端","sidebar":false,"editLink":false,"search":false,"comment":false,"head":[["meta",{"property":"og:title","content":"Elysia 与 Supabase：您下一个以超音速构建的后端"}],["meta",{"name":"description","content":"Elysia 和 Supabase 结合，适合快速开发原型，时间少于一个小时，让我们看看如何利用这两者的优势。"}],["meta",{"property":"og:description","content":"Elysia 和 Supabase 结合，适合快速开发原型，时间少于一个小时，让我们看看如何利用这两者的优势。"}],["meta",{"property":"og:image","content":"https://elysiajs.com/blog/elysia-supabase/elysia-supabase.webp"}],["meta",{"property":"twitter:image","content":"https://elysiajs.com/blog/elysia-supabase/elysia-supabase.webp"}]]},"headers":[],"relativePath":"blog/elysia-supabase.md","filePath":"blog/elysia-supabase.md","lastUpdated":1768116877000}`);var c=Object.assign({name:`blog/elysia-supabase.md`},{setup(s){return(s,c)=>(n(),i(`div`,null,[e(o,{title:`Elysia 与 Supabase：您下一个以超音速构建的后端`,src:`/blog/elysia-supabase/elysia-supabase.webp`,alt:`Elysia 和 Supabase 像 CPU 一样紧密相连`,author:`saltyaom`,date:`2023 年 3 月 10 日`},{default:a(()=>[...c[0]||=[r(`p`,null,`Supabase 是一个开源的 Firebase 替代品，已成为开发者们快速开发的热门工具包。`,-1),r(`p`,null,`它提供了 PostgreSQL、即用型用户认证、无服务器边缘功能、云存储等功能，供您随时使用。`,-1),r(`p`,null,`因为 Supabase 已经预构建并组合了情境，您可以减少重复开发相同功能的代码行数，将其缩短到不到 10 行代码。`,-1),r(`p`,null,`例如，对于认证，这通常需要您为每个项目重写一百行代码，仅需：`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signUp`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signInWithPassword`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)])])])],-1),r(`p`,null,`然后 Supabase 将处理剩余的部分，通过发送确认链接来验证电子邮件，或者使用一个魔术链接或一次性密码 (OTP) 进行认证，确保您的数据库拥有行级认证，您说了算。`,-1),r(`p`,null,`在每个项目中需要耗费数小时重新做的事情，现在只需一分钟即可完成。`,-1),r(`h2`,{id:`elysia`,tabindex:`-1`},[t(`Elysia `),r(`a`,{class:`header-anchor`,href:`#elysia`,"aria-label":`Permalink to “Elysia”`},`​`)],-1),r(`p`,null,`如果您还没有听说，Elysia 是一个以 Bun 为核心的 web 框架，旨在提升速度和开发者体验。`,-1),r(`p`,null,`Elysia 的性能比 Express 快近 20 倍，同时其语法几乎与 Express 和 Fastify 相同。`,-1),r(`h6`,{id:`性能可能因机器而异-我们建议您在决定性能之前在您的机器上运行-基准测试`,tabindex:`-1`},[t(`（性能可能因机器而异，我们建议您在决定性能之前在您的机器上运行 `),r(`a`,{href:`https://github.com/SaltyAom/bun-http-framework-benchmark`,target:`_blank`,rel:`noreferrer`},`基准测试`),t(`） `),r(`a`,{class:`header-anchor`,href:`#性能可能因机器而异-我们建议您在决定性能之前在您的机器上运行-基准测试`,"aria-label":`Permalink to “（性能可能因机器而异，我们建议您在决定性能之前在您的机器上运行 基准测试）”`},`​`)],-1),r(`p`,null,`Elysia 提供了极为灵活的开发者体验。 不仅可以定义单一事实来源类型，并且在您意外修改数据时还可以检测并报警。`,-1),r(`p`,null,`这一切都通过简洁的声明式代码实现。`,-1),r(`h2`,{id:`设置`,tabindex:`-1`},[t(`设置 `),r(`a`,{class:`header-anchor`,href:`#设置`,"aria-label":`Permalink to “设置”`},`​`)],-1),r(`p`,null,`您可以使用 Supabase Cloud 快速入门。`,-1),r(`p`,null,`Supabase Cloud 将处理数据库的设置、扩展和您在云中所需的所有内容，只需单击一下即可完成。`,-1),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/supabase-web.webp`,alt:`Supabase 登陆页面`},null,-1),r(`p`,null,`创建项目时，您应该会看到类似以下界面，填写所有所需的请求，如果您在亚洲，Supabase 在新加坡和东京都有服务器。`,-1),r(`h5`,{id:`有时这对生活在亚洲的开发者来说是一个决定性因素-因为延迟问题`,tabindex:`-1`},[t(`（有时这对生活在亚洲的开发者来说是一个决定性因素，因为延迟问题） `),r(`a`,{class:`header-anchor`,href:`#有时这对生活在亚洲的开发者来说是一个决定性因素-因为延迟问题`,"aria-label":`Permalink to “（有时这对生活在亚洲的开发者来说是一个决定性因素，因为延迟问题）”`},`​`)],-1),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/supabase-create-project.webp`,alt:`创建新的 Supabase 项目`},null,-1),r(`p`,null,`创建项目后，您应该会看到一个欢迎屏幕，可以在其中复制项目 URL 和服务角色。`,-1),r(`p`,null,`这两者用于指示您在项目中使用的是哪个 Supabase 项目。`,-1),r(`p`,null,[t(`如果您错过了欢迎页面，请导航到 `),r(`strong`,null,`设置 > API`),t(`，复制 `),r(`strong`,null,`项目 URL`),t(` 和 `),r(`strong`,null,`项目 API 密钥`),t(`。`)],-1),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/supabase-config.webp`,alt:`Supabase 配置页面`},null,-1),r(`p`,null,`现在在您的命令行中，通过运行以下命令开始创建 Elysia 项目：`,-1),r(`div`,{class:`language-bash`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`bash`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`bun`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` create`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` elysia`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` elysia-supabase`)])])])],-1),r(`p`,null,`最后一个参数是我们要创建的 Bun 文件夹名称，可以随意更改该名称。`,-1),r(`p`,null,[t(`现在，`),r(`strong`,null,`cd`),t(` 进入我们的文件夹，因我们将使用 Elysia 0.3 (RC) 中的新功能，所以需要先安装 Elysia 的 RC 通道，并在这里获取一个 Cookie 插件和将来要使用的 Supabase 客户端。`)],-1),r(`div`,{class:`language-bash`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`bash`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`bun`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` add`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` elysia@rc`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` @elysiajs/cookie@rc`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` @supabase/supabase-js`)])])])],-1),r(`p`,null,[t(`让我们创建一个 `),r(`strong`,null,`.env`),t(` 文件以将 Supabase 服务加载为秘密。`)],-1),r(`div`,{class:`language-bash`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`bash`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`# .env`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`supabase_url`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`https://********************.supabase.co`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`supabase_service_role`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`****`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` ****`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` ****`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` ****`)])])])],-1),r(`p`,null,[t(`您不必安装任何插件来加载环境文件，因为 Bun 默认会加载 `),r(`strong`,null,`.env`),t(` 文件。`)],-1),r(`p`,null,[t(`现在让我们在我们喜欢的 IDE 中打开我们的项目，并在 `),r(`code`,null,`src/libs/supabase.ts`),t(` 中创建一个文件。`)],-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/libs/supabase.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { createClient } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '@supabase/supabase-js'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`supabase_url`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`supabase_service_role`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` process.env`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`export`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` const`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` supabase`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` createClient`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(supabase_url`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, supabase_service_role`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1),r(`p`,null,`就这样！设置 Supabase 和 Elysia 项目所需的一切。`,-1),r(`p`,null,`现在让我们深入实现！`,-1),r(`h2`,{id:`认证`,tabindex:`-1`},[t(`认证 `),r(`a`,{class:`header-anchor`,href:`#认证`,"aria-label":`Permalink to “认证”`},`​`)],-1),r(`p`,null,`现在让我们创建一个与主文件分开的认证路由。`,-1),r(`p`,null,[t(`在 `),r(`code`,null,`src/modules/authen.ts`),t(` 中，首先为我们的路由创建大纲。`)],-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/modules/authen.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` authen`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/sign-up'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'This route is expected to sign up a user'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/sign-in'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, () `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'This route is expected to sign in a user'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,`现在，让我们应用 Supabase 来认证我们的用户。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/modules/authen.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` authen`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/sign-up'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signUp`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error `)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'This route is expected to sign up a user'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/sign-in'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signInWithPassword`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`( `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    body `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                ) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'This route is expected to sign in a user'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,[t(`完成了！这就是为我们的用户创建 `),r(`strong`,null,`sign-in`),t(` 和 `),r(`strong`,null,`sign-up`),t(` 路由所需的一切。`)],-1),r(`p`,null,[t(`但我们这里有一个小问题，您会看到，我们的路由可以接受 `),r(`strong`,null,`任何`),t(` 请求体并将其放入 Supabase 参数，甚至是无效的。`)],-1),r(`p`,null,`所以，为了确保我们放入正确的数据，我们可以为我们的请求体定义一个 schema。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/modules/authen.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` authen`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/sign-up'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signUp`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            email: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                format: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'email'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }), `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            password: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                minLength: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`8`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    } `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                } `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/sign-in'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                        await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signInWithPassword`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            email: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                format: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'email'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }), `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            password: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                minLength: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`8`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    } `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                } `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,[t(`现在我们在 `),r(`strong`,null,`sign-in`),t(` 和 `),r(`strong`,null,`sign-up`),t(` 中都声明了一个 schema，Elysia 将确保传入的请求体与我们声明的格式相同，从而防止无效参数传递给 `),r(`code`,null,`supabase.auth`),t(`。`)],-1),r(`p`,null,[t(`Elysia 还理解该 schema，因此不需要单独声明 TypeScript 的类型，Elysia 会自动将 `),r(`code`,null,`body`),t(` 的类型设为您定义的 schema。`)],-1),r(`p`,null,`因此，如果您意外在将来创建了破坏性更改，Elysia 会警告您有关数据类型的信息。`,-1),r(`p`,null,`我们的代码非常出色，完成了我们期待的工作，但我们可以进一步优化。`,-1),r(`p`,null,[t(`您会看到，`),r(`strong`,null,`sign-in`),t(` 和 `),r(`strong`,null,`sign-up`),t(` 都接受相同形状的数据，未来，您可能还会发现自己在多个路由中重复一个长 schema。`)],-1),r(`p`,null,`我们可以通过告诉 Elysia 记住我们的 schema 来解决这个问题，然后我们可以通过告诉 Elysia 我们要使用的 schema 的名称来使用它。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/modules/authen.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` authen`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`setModel`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                sign: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    email: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        format: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'email'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }), `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    password: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        minLength: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`8`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            }) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/sign-up'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signUp`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: {`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'sign'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            email: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                format: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'email'`)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }), `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            password: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                minLength: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`8`)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }) `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        }) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/sign-in'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                        await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signInWithPassword`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: {`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'sign'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            email: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                format: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'email'`)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }), `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            password: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                                minLength: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`8`)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            }) `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        }) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,`太好了！我们在路由中只是使用了名称引用！`,-1),r(`div`,{class:`tip custom-block`},[r(`p`,{class:`custom-block-title custom-block-title-default`},`TIP`),r(`p`,null,`如果您发现自己有一个长 schema，可以将它们声明在一个单独的文件中，并在 Elysia 的任何路由中重新使用，从而将重点放回业务逻辑上。`)],-1),r(`h2`,{id:`存储用户会话`,tabindex:`-1`},[t(`存储用户会话 `),r(`a`,{class:`header-anchor`,href:`#存储用户会话`,"aria-label":`Permalink to “存储用户会话”`},`​`)],-1),r(`p`,null,[t(`太好了，现在为完成认证系统，我们需要做的最后一件事是存储用户会话，在用户登录后，Supabase 中的令牌称为 `),r(`code`,null,`access_token`),t(` 和 `),r(`code`,null,`refresh_token`),t(`。`)],-1),r(`p`,null,[r(`code`,null,`access_token`),t(` 是一个短期有效的 JWT 访问令牌，用于在短时间内验证用户。 `),r(`code`,null,`refresh_token`),t(` 是一个一次性使用且永不过期的令牌，用于续订 `),r(`code`,null,`access_token`),t(`。所以只要我们有这个令牌，我们就可以创建一个新的访问令牌来延长我们的用户会话。`)],-1),r(`p`,null,`我们可以将这两个值存储在一个 cookie 中。`,-1),r(`p`,null,`现在，有些人可能不喜欢将访问令牌存储在 cookie 中，可能会使用 Bearer，但为了简单起见，我们将在这里使用 cookie。`,-1),r(`div`,{class:`tip custom-block`},[r(`p`,{class:`custom-block-title custom-block-title-default`},`TIP`),r(`p`,null,[t(`我们可以将 cookie 设置为 `),r(`strong`,null,`HttpOnly`),t(` 以防止 XSS，设置为 `),r(`strong`,null,`Secure`),t(` 和 `),r(`strong`,null,`Same-Site`),t(`，还可以加密 cookie 以防止中间人攻击。`)])],-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/modules/authen.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { cookie } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '@elysiajs/cookie'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` authen`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`( `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`                cookie`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    httpOnly: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`true`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    // 如果需要 cookie 仅通过 https 发送`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    // secure: true,`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    //`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    // 如果需要 cookie 仅对同源可用`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    // sameSite: "strict",`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    //`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    // 如果希望加密 cookie`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    // signed: true,`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                    // secret: process.env.COOKIE_SECRET,`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            ) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`setModel`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                sign: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    email: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        format: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'email'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }),`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    password: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        minLength: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`8`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`            // 其余代码`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,[t(`就这样，创建了 Elysia 和 Supabase 的 `),r(`strong`,null,`sign-in`),t(` 和 `),r(`strong`,null,`sign-up`),t(` 路由！`)],-1),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/lagrange-sign-in.webp`,alt:`使用 Rest 客户端登录`},null,-1),r(`h2`,{id:`刷新令牌`,tabindex:`-1`},[t(`刷新令牌 `),r(`a`,{class:`header-anchor`,href:`#刷新令牌`,"aria-label":`Permalink to “刷新令牌”`},`​`)],-1),r(`p`,null,[t(`如前所述，`),r(`code`,null,`access_token`),t(` 是短期有效的，我们可能需要时不时地续订令牌。`)],-1),r(`p`,null,`幸运的是，我们可以用 Supabase 的一行代码做到这一点。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/modules/authen.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` authen`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/auth'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`setModel`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                sign: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    email: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        format: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'email'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }),`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    password: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        minLength: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`8`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/sign-up'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signUp`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'sign'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`post`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/sign-in'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                        await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`signInWithPassword`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(body)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: `),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'sign'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`( `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/refresh'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`setCookie`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`cookie`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`refresh_token`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`refreshSession`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        refresh_token `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`                    setCookie`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'refresh_token'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, data.session`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`.refresh_token) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                } `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            ) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,`最后，将路由添加到主服务器中。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { auth } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` './modules'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` new`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(auth) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`listen`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`3000`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`console.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"    `🦊 Elysia 正在运行在 ${"),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`server`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`?.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`hostname`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}:${"),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`server`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`?.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`port`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}`")]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1),r(`p`,null,`就这样！`,-1),r(`h2`,{id:`授权路由`,tabindex:`-1`},[t(`授权路由 `),r(`a`,{class:`header-anchor`,href:`#授权路由`,"aria-label":`Permalink to “授权路由”`},`​`)],-1),r(`p`,null,`我们刚刚实现了用户认证，这很有趣，但现在您可能会发现自己需要对每个路由进行授权，并且在各处重复相同的代码来检查 cookie。`,-1),r(`p`,null,`幸运的是，我们可以在 Elysia 中重用这个函数。`,-1),r(`p`,null,`让我们通过说，假设我们可能希望用户创建一个简单的博客帖子，而其数据库架构如下：`,-1),r(`p`,null,[t(`在 Supabse 控制台中，我们将创建一个名为 'post' 的 Postgres 表，如下所示： `),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/supabase-create-table.webp`,alt:`使用 Supabase UI 创建表，公共表名为 'post'，列为 'id'，主键类型为 'int8'，'created_at' 类型为 'timestamp'，默认值为 'now()'，'user_id' 链接到 Supabase 的用户架构 'user.id'，'post' 的类型为 'text'`})],-1),r(`p`,null,[r(`strong`,null,`user_id`),t(` 链接到 Supabase 生成的 `),r(`strong`,null,`auth`),t(` 表，链接为 `),r(`strong`,null,`user.id`),t(`，通过这种关系，我们可以创建行级安全性，只允许帖子的所有者修改数据。`)],-1),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/supabase-create-table-link.webp`,alt:`将 'user_id' 字段与 Supabase 的用户架构 'user.id' 连接`},null,-1),r(`p`,null,[t(`现在，让我们在另一个文件夹中创建一个新的 Elysia 路由，以将代码与认证路由分开，文件路径为 `),r(`code`,null,`src/modules/post/index.ts`),t(`。`)],-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`// src/modules/post/index.ts`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`export`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` post`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`put`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`            '/create'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`            async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`from`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`insert`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                        // 以某种方式添加 user_id`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                        // user_id: userId,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                        ...`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`body`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`select`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'id'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`throw`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data[`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`0`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`]`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                schema: {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        detail: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,[t(`现在，此路由可以接受请求体并将其放入数据库中，我们需要做的唯一事情是处理授权并提取 `),r(`code`,null,`user_id`),t(`。`)],-1),r(`p`,null,`幸运的是，由于 Supabase 和我们的 cookies，这一切都很简单。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { cookie } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '@elysiajs/cookie'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`export`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` post`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`put`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`            '/create'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`            async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                let`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` userId`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` string`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`getUser`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`( `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    access_token `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                ) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(error) { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`refreshSession`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        refresh_token `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`throw`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    userId `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`.id `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                } `)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`from`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`insert`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                        // 以某种方式添加 user_id`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                        // user_id: userId,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                        ...`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`body`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`select`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'id'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`throw`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data[`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`0`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`]`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                schema: {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        detail: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,[t(`太好了！现在我们可以使用 `),r(`strong`,null,`supabase.auth.getUser`),t(` 从 cookie 中提取 `),r(`code`,null,`user_id`),t(`。`)],-1),r(`h2`,{id:`派生`,tabindex:`-1`},[t(`派生 `),r(`a`,{class:`header-anchor`,href:`#派生`,"aria-label":`Permalink to “派生”`},`​`)],-1),r(`p`,null,`我们的代码目前运行良好，但让我们描绘一个小场景。`,-1),r(`p`,null,[t(`假设您有许多需要授权的路由，像这样，您需要提取 `),r(`code`,null,`userId`),t(`，这意味着您将拥有大量重复的代码，对吧？`)],-1),r(`p`,null,`幸运的是，Elysia 特别设计用于解决这个问题。`,-1),r(`hr`,null,null,-1),r(`p`,null,[t(`在 Elysia 中，我们有一个名为 `),r(`strong`,null,`scope`),t(` 的概念。`)],-1),r(`p`,null,[t(`想象一下，这就像一个 `),r(`strong`,null,`闭包`),t(`，其中变量只能在一个范围内使用，或者如果您来自 Rust，它就像所有权。`)],-1),r(`p`,null,[t(`在范围内声明的任何生命周期，例如 `),r(`strong`,null,`group`),t(`、`),r(`strong`,null,`guard`),t(`，都只会在该范围内可用。`)],-1),r(`p`,null,`这意味着您可以为需要授权的特定路由声明一个特定的生命周期，而其他路由则不需要。`,-1),r(`p`,null,`例如，某些需要授权的路由范围，而其他则不需要。`,-1),r(`p`,null,`因此，我们没有重复使用所有代码，而是定义了一次，并将其应用于您需要的所有路由。`,-1),r(`hr`,null,null,-1),r(`p`,null,[t(`现在，让我们将获取 `),r(`strong`,null,`user_id`),t(` 的过程放入一个插件中，并将其应用于该范围内的所有路由。`)],-1),r(`p`,null,[t(`让我们将此插件放在 `),r(`code`,null,`src/libs/authen.ts`),t(` 中。`)],-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { cookie } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '@elysiajs/cookie'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` './supabase'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`export`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` authen`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`cookie`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`())`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`derive`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`            async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`setCookie`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`cookie`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`access_token`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`refresh_token`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`getUser`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    access_token`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                )`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (data.user)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        userId: data.user.id`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`refreshed`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`refreshError`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`refreshSession`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        refresh_token`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    })`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (refreshError) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`throw`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    userId: refreshed.user`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`.id`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        )`)])])])],-1),r(`p`,null,[t(`此代码尝试提取 userId，并将 `),r(`code`,null,`userId`),t(` 添加到路由的 `),r(`code`,null,`Context`),t(` 中，否则将抛出错误并跳过处理程序，防止无效错误被放入我们的业务逻辑，即 `),r(`strong`,null,`supabase.from.insert`),t(`。`)],-1),r(`div`,{class:`tip custom-block`},[r(`p`,{class:`custom-block-title custom-block-title-default`},`TIP`),r(`p`,null,[t(`我们也可以使用 `),r(`strong`,null,`onBeforeHandle`),t(` 创建自定义验证，以便在进入主处理程序之前进行验证，而 `),r(`strong`,null,`.derive`),t(` 则会执行相同的操作，任何从 `),r(`strong`,null,`derive`),t(` 返回的内容都会添加到 `),r(`strong`,null,`Context`),t(` 中，而 `),r(`strong`,null,`onBeforeHandle`),t(` 则不会。`)]),r(`p`,null,[t(`从技术上讲，`),r(`strong`,null,`derive`),t(` 使用 `),r(`strong`,null,`transform`),t(` 作为底层机制。`)])],-1),r(`p`,null,[t(`只需一行代码，我们就可以将所有路径都应用到该作用域内，并以类型安全的方式访问 `),r(`strong`,null,`userId`),t(`。`)],-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { authen, supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`export`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` post`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(authen) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`put`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/create'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`userId`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    let`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` userId`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` string`)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`getUser`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`( `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        access_token `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    ) `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(error) { `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                        const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase.auth.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`refreshSession`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({ `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            refresh_token `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        }) `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                        if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`throw`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        userId `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data.user`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`.id `)]),t(`
`),r(`span`,{class:`line diff remove`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    } `)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`from`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`insert`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            user_id: userId, `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                            ...`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`body`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`select`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'id'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`throw`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data[`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`0`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`]`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            detail: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,`太好了！我们在代码中根本看不到处理授权的部分，简直像魔法一样。`,-1),r(`p`,null,`将我们的注意力重新放回核心业务逻辑中。`,-1),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/lagrange-create-post.webp`,alt:`使用 Rest 客户端创建帖子`},null,-1),r(`h2`,{id:`非授权作用域`,tabindex:`-1`},[t(`非授权作用域 `),r(`a`,{class:`header-anchor`,href:`#非授权作用域`,"aria-label":`Permalink to “非授权作用域”`},`​`)],-1),r(`p`,null,`现在让我们再创建一个路由，从数据库中获取帖子。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { authen, supabase } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '../../libs'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`export`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` const`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` post`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`:`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    app.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`group`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, (`),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`app`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`        app`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`get`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'/:id'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`params`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`: { `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`id`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`from`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`select`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`() `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`eq`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'id'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, id) `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    success: `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`!!`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`data[`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`0`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`], `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    data: data[`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`0`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`] `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`??`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` null`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                } `)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            }) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(authen)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`put`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`                '/create'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                async`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` ({ `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`body`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#E36209`,"--shiki-dark":`#FFAB70`}},`userId`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` }) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=>`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    const`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`data`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`, `),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`error`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`=`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` await`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` supabase`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`from`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'post'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`insert`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                            // 以某种方式添加 user_id`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6A737D`,"--shiki-dark":`#6A737D`}},`                            // user_id: userId,`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                            ...`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`body`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`select`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`'id'`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    if`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` (error) `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`throw`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` error`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`                    return`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` data[`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`0`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`]`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                },`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    schema: {`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        body: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`Object`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                            detail: t.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`String`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                        })`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                    }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`                }`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`            )`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    )`)])])])],-1),r(`p`,null,[t(`我们使用 `),r(`code`,null,`success`),t(` 来指示帖子是否存在。 `),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/lagrange-get-post-success.webp`,alt:`使用 Rest 客户端通过 ID 获取帖子`})],-1),r(`p`,null,[t(`如果不存在，我们将返回 `),r(`code`,null,`success: false`),t(` 和 `),r(`code`,null,`data: null`),t(`。 `),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/lagrange-get-post-failed.webp`,alt:`使用 Rest 客户端尝试获取帖子的 ID 但失败`})],-1),r(`p`,null,[t(`如前所述，`),r(`code`,null,`.use(authen)`),t(` 应用于被定义在自己后面的作用域 `),r(`strong`,null,`但`),t(`，这意味着在之前的语句不会受到影响，而此后则为仅限授权的路由。`)],-1),r(`p`,null,`最后，不要忘记将路由添加到主服务器中。`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { auth, post } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` './modules'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` new`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(auth)`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(post) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`listen`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`3000`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`console.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"    `🦊 Elysia 正在运行在 ${"),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`server`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`?.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`hostname`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}:${"),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`server`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`?.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`port`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}`")]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1),r(`h2`,{id:`奖励-文档`,tabindex:`-1`},[t(`奖励：文档 `),r(`a`,{class:`header-anchor`,href:`#奖励-文档`,"aria-label":`Permalink to “奖励：文档”`},`​`)],-1),r(`p`,null,`作为奖励，在我们创建的一切之后，除了逐条告诉前端开发人员外，我们可以只需一行代码为他们创建文档。`,-1),r(`p`,null,`使用 Swagger 插件，我们可以安装:`,-1),r(`div`,{class:`language-bash`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`bash`),r(`pre`,{class:`shiki shiki-themes github-light github-dark`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`bun`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` add`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` @elysiajs/swagger@rc`)])])])],-1),r(`p`,null,`然后只需添加插件：`,-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia, t } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { swagger } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '@elysiajs/swagger'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { auth, post } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` './modules'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`const`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` new`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`swagger`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`()) `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(auth)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(post)`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`    .`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`listen`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},`3000`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`console.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`log`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"    `🦊 Elysia 正在运行在 ${"),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`server`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`?.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`hostname`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}:${"),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`app`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`server`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},`?.`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`port`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},"}`")]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`)`)])])])],-1),r(`p`,null,`瞧 🎉 我们为我们的 API 创建了良好定义的文档。`,-1),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/elysia-swagger.webp`,alt:`Elysia 生成的 Swagger 文档`},null,-1),r(`p`,null,`如果更多细节，您不必担心会忘记 OpenAPI Schema 3.0 的规格，我们还有自动补全和类型安全。`,-1),r(`p`,null,[t(`我们可以通过 `),r(`code`,null,`schema.detail`),t(` 定义路线详细信息，这也遵循 OpenAPI Schema 3.0，以便您可以妥善创建文档。 `),r(`img`,{class:`-png`,src:`/blog/elysia-supabase/swagger-auto-complete.webp`,alt:"使用 `schema.detail` 的自动补全"})],-1),r(`h2`,{id:`下一步`,tabindex:`-1`},[t(`下一步 `),r(`a`,{class:`header-anchor`,href:`#下一步`,"aria-label":`Permalink to “下一步”`},`​`)],-1),r(`p`,null,[t(`在接下来的步骤中，我们鼓励您尝试并探索 `),r(`a`,{href:`https://github.com/saltyaom/elysia-supabase-example`,target:`_blank`,rel:`noreferrer`},`我们在本文中编写的代码`),t(`，并尝试添加图像上传帖子，以进一步探索 Supabase 和 Elysia 生态系统。`)],-1),r(`p`,null,`如我们所见，使用 Supabase 创建一个生产就绪的 web 服务器是超级简单的，许多东西只需一行代码，非常有利于快速开发。`,-1),r(`p`,null,`特别是当与 Elysia 配对时，您将获得出色的开发者体验，作为单一事实来源的声明式 schema，以及在使用 TypeScript 时创建 API 时的精心设计选择，并且作为奖励，我们可以在仅一行代码中创建文档。`,-1),r(`p`,null,`Elysia 正在致力于创建一个以 Bun 为优先的 web 框架，采用新技术和新方法。`,-1),r(`p`,null,[t(`如果您对 Elysia 感兴趣，可以随时查看我们的 `),r(`a`,{href:`https://discord.gg/eaFJ2KDJck`,target:`_blank`,rel:`noreferrer`},`Discord 服务器`),t(` 或访问 `),r(`a`,{href:`https://github.com/elysiajs/elysia`,target:`_blank`,rel:`noreferrer`},`Elysia 在 GitHub 上`),t(`。`)],-1),r(`p`,null,[t(`另外，您可能还想了解 `),r(`a`,{href:`/eden/overview.html`},`Elysia Eden`),t(`，这是一个完全类型安全、无需代码生成的请求客户端，类似于 Elysia 服务器的 tRPC。`)],-1)]]),_:1})]))}});export{s as __pageData,c as default};