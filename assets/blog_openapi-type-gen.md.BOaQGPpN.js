import{C as e,S as t,V as n,_ as r,b as i,it as a}from"./chunks/vue.runtime.esm-bundler.BB7fvrom.js";import"./chunks/banner.DpkE44SY.js";import"./chunks/ray.DH5EacAR.js";import{t as o}from"./chunks/Layout.BZ0rZhD9.js";import{t as s}from"./chunks/drizzle-typegen.BJToyL0C.js";const c=JSON.parse(`{"title":"为 Elysia 推出 OpenAPI 类型生成器","description":"Elysia 现支持 OpenAPI 类型生成器，这是一个强大的工具，可以自动从你的 Elysia 路由和类型生成 OpenAPI 文档，无需任何手动注解。","frontmatter":{"title":"为 Elysia 推出 OpenAPI 类型生成器","sidebar":false,"editLink":false,"search":false,"comment":false,"head":[["meta",{"property":"og:title","content":"为 Elysia 推出 OpenAPI 类型生成器"}],["meta",{"name":"description","content":"Elysia 现支持 OpenAPI 类型生成器，这是一个强大的工具，可以自动从你的 Elysia 路由和类型生成 OpenAPI 文档，无需任何手动注解。"}],["meta",{"property":"og:description","content":"Elysia 现支持 OpenAPI 类型生成器，这是一个强大的工具，可以自动从你的 Elysia 路由和类型生成 OpenAPI 文档，无需任何手动注解。"}],["meta",{"property":"og:image","content":"https://elysiajs.com/blog/openapi-type-gen/cover.webp"}],["meta",{"property":"twitter:image","content":"https://elysiajs.com/blog/openapi-type-gen/cover.webp"}]]},"headers":[],"relativePath":"blog/openapi-type-gen.md","filePath":"blog/openapi-type-gen.md","lastUpdated":1768116877000}`);var l=Object.assign({name:`blog/openapi-type-gen.md`},{setup(s){return(s,c)=>(n(),i(`div`,null,[e(o,{title:`为 Elysia 推出 OpenAPI 类型生成器`,src:`/blog/openapi-type-gen/cover.webp`,alt:`OpenAPI 类型生成器：Elysia 的自动 API 文档`,author:`saltyaom`,date:`2025年9月4日`},{default:a(()=>[...c[0]||=[r(`p`,null,`API 文档在 API 开发中起着至关重要的作用。`,-1),r(`p`,null,`与团队、供应商或第三方服务的联系通常需要良好文档化的 API，以确保顺利的集成与协作。`,-1),r(`p`,null,`如今大多数框架仍将手动编写 OpenAPI 注解的负担留给开发者。这不仅耗时，而且易出错，且随着 API 演进，维护起来也十分困难。`,-1),r(`h3`,{id:`但-elysia-对-openapi-十分重视`,tabindex:`-1`},[t(`但 Elysia 对 OpenAPI 十分重视 `),r(`a`,{class:`header-anchor`,href:`#但-elysia-对-openapi-十分重视`,"aria-label":`Permalink to “但 Elysia 对 OpenAPI 十分重视”`},`​`)],-1),r(`p`,null,`我们相信 API 文档应该是轻松且自动的，让开发者专注于构建优秀的 API，而无需担心文档的问题。`,-1),r(`p`,null,`这就是为什么我们从一开始就在 Elysia 中围绕 OpenAPI 构建。`,-1),r(`ul`,null,[r(`li`,null,`我们确保同一份 schema 能用于数据验证、类型推断以及 OpenAPI 注解。`),r(`li`,null,`我们提供与标准 Schema（如 Zod、Valibot 等）的集成支持，并尽可能将其转换为 OpenAPI 文档。`),r(`li`,null,`我们有一个一行代码的 OpenAPI 插件，集成了漂亮的 UI —— Scalar，方便你与 API 交互。`)],-1),r(`p`,null,[r(`img`,{src:`/blog/openapi-type-gen/scalar-preview-light.webp`,alt:`Scalar 预览`,"data-zoomable":`true`})],-1),r(`blockquote`,null,[r(`p`,null,`Elysia 通过一行代码集成的 Scalar UI，来自 Elysia OpenAPI 插件`)],-1),r(`p`,null,`即便体验已经非常出色，我们仍希望进一步提升。`,-1),r(`p`,null,[t(`今天，我们很高兴地宣布推出 `),r(`strong`,null,`OpenAPI 类型生成器`),t(`，它能基于你的 Elysia 代码自动生成 OpenAPI 文档，完全无需手动注解。`)],-1),r(`h2`,{id:`openapi-类型生成器`,tabindex:`-1`},[t(`OpenAPI 类型生成器 `),r(`a`,{class:`header-anchor`,href:`#openapi-类型生成器`,"aria-label":`Permalink to “OpenAPI 类型生成器”`},`​`)],-1),r(`p`,null,`我们梦想有这样一个世界：你只写代码，文档便能自动且准确生成，且无需任何手动注解。`,-1),r(`p`,null,[t(`目前最接近的是 `),r(`strong`,null,`Python 的 FastAPI`),t(`，它可以从 pydantic 模型生成 OpenAPI 文档。但它仅限于 pydantic，无法适配其他库或类型。`)],-1),r(`p`,null,[t(`Elysia 类型生成器为 TypeScript 带来类似体验，没有这种限制。它允许你将 `),r(`strong`,null,`任意 TypeScript 类型`),t(` 自动转化为 OpenAPI 文档，支持 `),r(`strong`,null,`任何库`),t(`，不限于 Elysia。`)],-1),r(`p`,null,[r(`img`,{src:`/blog/openapi-type-gen/type-gen.webp`,alt:`Elysia 类型生成器`,"data-zoomable":`true`})],-1),r(`blockquote`,null,[r(`p`,null,`Elysia 自动将引用的响应体类型映射为响应 schema，无需任何手动 schema 注解，即可列出所有可能的响应状态码。`)],-1),r(`p`,null,[t(`只需`),r(`strong`,null,`一行代码`),t(`，即可从 Elysia 代码直接通过 `),r(`strong`,null,`TypeScript 类型`),t(` 生成 OpenAPI 文档，完全无需注解。`)],-1),r(`h3`,{id:`这真是开创性的突破`,tabindex:`-1`},[t(`这真是开创性的突破 `),r(`a`,{class:`header-anchor`,href:`#这真是开创性的突破`,"aria-label":`Permalink to “这真是开创性的突破”`},`​`)],-1),r(`p`,null,`首次实现了真正无需手动注解即可自动化完成 API 文档编写。开箱即用，兼容任何库。`,-1),r(`p`,null,`它兼容现有的 Elysia 代码和 schema 定义，无需破坏性变更，也无需额外配置或类型转换工具（如 Typia）。`,-1),r(`p`,null,`类型生成与现有 schema 定义共存，优先采用已有 schema，之后才从类型推断。`,-1),r(`p`,null,[r(`img`,{src:`/blog/openapi-type-gen/drizzle-typegen.webp`,alt:`使用 Drizzle 和类型生成器 Elysia 类型生成器`,"data-zoomable":`true`})],-1),r(`blockquote`,null,[r(`p`,null,`从 Elysia 路由处理器返回的 Drizzle 查询结果会自动推断为 OpenAPI schema。`)],-1),r(`p`,null,[t(`它开箱即用兼容任何 TypeScript 库，甚至支持像 `),r(`strong`,null,`Drizzle`),t(`、`),r(`strong`,null,`Prisma`),t(` 这样现代复杂的类型。`)],-1),r(`h3`,{id:`类型严谨性`,tabindex:`-1`},[t(`类型严谨性 `),r(`a`,{class:`header-anchor`,href:`#类型严谨性`,"aria-label":`Permalink to “类型严谨性”`},`​`)],-1),r(`p`,null,`OpenAPI 类型生成器还支持多状态码的复杂场景，例如生命周期或宏下多个状态码重复。`,-1),r(`p`,null,`每个状态码可返回多种值，Elysia 会将其合并为该状态码下的联合类型，准确列出所有可能返回值。`,-1),r(`p`,null,[r(`img`,{src:`/blog/openapi-type-gen/union.webp`,alt:`联合响应`,"data-zoomable":`true`})],-1),r(`blockquote`,null,[r(`p`,null,`自动列出联合类型中多个响应状态码。`)],-1),r(`p`,null,`这是一项深远的功能，几乎无法被其他框架复制。`,-1),r(`h2`,{id:`采用-openapi-类型生成器`,tabindex:`-1`},[t(`采用 OpenAPI 类型生成器 `),r(`a`,{class:`header-anchor`,href:`#采用-openapi-类型生成器`,"aria-label":`Permalink to “采用 OpenAPI 类型生成器”`},`​`)],-1),r(`p`,null,`要将 OpenAPI 类型生成器添加到你的项目，只需：`,-1),r(`ol`,null,[r(`li`,null,`导出一个 Elysia 实例`),r(`li`,null,[t(`提供根 Elysia 文件路径（若不提供，默认使用 `),r(`code`,null,`src/index.ts`),t(`）`)])],-1),r(`div`,{class:`language-ts`},[r(`button`,{title:`Copy Code`,class:`copy`}),r(`span`,{class:`lang`},`ts`),r(`pre`,{class:`shiki shiki-themes github-light github-dark has-diff`,style:{"--shiki-light":`#24292e`,"--shiki-dark":`#e1e4e8`,"--shiki-light-bg":`#fff`,"--shiki-dark-bg":`#24292e`},tabindex:`0`,dir:`ltr`},[r(`code`,null,[r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { Elysia } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` 'elysia'`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`import`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},` { openapi, fromTypes } `),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`from`),r(`span`,{style:{"--shiki-light":`#032F62`,"--shiki-dark":`#9ECBFF`}},` '@elysiajs/openapi'`)]),t(`
`),r(`span`,{class:`line`}),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},`export`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` const`),r(`span`,{style:{"--shiki-light":`#005CC5`,"--shiki-dark":`#79B8FF`}},` app`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` =`),r(`span`,{style:{"--shiki-light":`#D73A49`,"--shiki-dark":`#F97583`}},` new`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},` Elysia`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`() `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	.`),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`use`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`(`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`		openapi`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`({`)]),t(`
`),r(`span`,{class:`line diff add`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`			references: `),r(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#B392F0`}},`fromTypes`),r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`() `)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`		})`)]),t(`
`),r(`span`,{class:`line`},[r(`span`,{style:{"--shiki-light":`#24292E`,"--shiki-dark":`#E1E4E8`}},`	)`)])])])],-1),r(`p`,null,`Elysia 类型生成器会自动分析你的 Elysia 实例，实时生成 OpenAPI 文档，无需构建步骤。`,-1),r(`p`,null,[t(`关于 OpenAPI 类型生成器的详细文档，请参见 `),r(`a`,{href:`/patterns/openapi.html#openapi-from-types`},`模式：OpenAPI`),t(`。`)],-1),r(`hr`,null,null,-1),r(`h3`,{id:`我们相信这功能是-elysia-独有`,tabindex:`-1`},[t(`我们相信这功能是 Elysia 独有 `),r(`a`,{class:`header-anchor`,href:`#我们相信这功能是-elysia-独有`,"aria-label":`Permalink to “我们相信这功能是 Elysia 独有”`},`​`)],-1),r(`p`,null,`大多数 Web 框架都需要大量工作和手动注解来创建 API 文档。`,-1),r(`p`,null,`Elysia 能为你自动完成 API 文档的编写，目前没有任何其它框架能提供接近的体验。`,-1),r(`p`,null,[t(`这都归功于 `),r(`strong`,null,`Elysia 对端到端类型安全的出色支持`),t(`。`)],-1),r(`p`,null,`我们期待它能帮助你以最小的精力构建和维护高质量 API 文档。`,-1),r(`p`,null,[t(`你可以从今天开始，通过升级 `),r(`code`,null,`@elysiajs/openapi`),t(` 到最新版，或从 `),r(`a`,{href:`https://github.com/saltyaom/elysia-typegen-example`,target:`_blank`,rel:`noreferrer`},`GitHub 仓库`),t(` 体验我们的示例配置来尝试这一功能。`)],-1)]]),_:1})]))}});export{c as __pageData,l as default};